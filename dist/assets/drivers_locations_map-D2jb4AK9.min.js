import{O as f,x as v,L as C,$ as w,j as x}from"./index.es-BqyRJkQ3.min.js";import{_ as y,r as a,a as _,o as i,c as h,y as k,O as m,F as M,f as B,d as c,g as z}from"./index.min.js";const L={components:{GoogleMap:f,Marker:v,Polyline:C,InfoWindow:w,CustomMarker:x},name:"Map",emits:["click-marker","update-marker"],emits:["setdriver"],setup(s,{emit:d}){const o=a(null),t=a(null),u=a(10),l=a({}),n=a([]);for(let e=0;e<s.drivers.length;e++){const r=s.drivers[e];n.value[e]={lat:Number(r.vehicle.latitude)??0,lng:Number(r.vehicle.longitude)??0}}return l.value=s.center??n.value[0],{handleZoom:()=>{const e=new window.google.maps.LatLngBounds;n.value.forEach(r=>{e.extend(r)}),l.value=e.getCenter(),t.value.fitBounds(e)},markerClicked:e=>{d("setdriver",e)},zoom:u,map:t,mapRef:o,mapCenter:l,markers:n}},props:["path","lang","setting","conf","auth","center","item","drivers"]},b={class:"w-full overflow-auto"},N={style:{"text-align":"center"}},G=["src"],O=c("div",{style:{"text-align":"center"}},[c("img",{src:"/uploads/images/yellow_pin.gif",width:"30",class:"",height:"30",style:{"margin-top":"8px"}})],-1);function V(s,d,o,t,u,l){const n=_("CustomMarker"),p=_("GoogleMap");return i(),h("div",b,[(i(),k(p,{"api-key":o.setting.google_map_api,ref:"map",center:t.mapCenter,key:t.mapCenter,options:{zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,rotateControl:!0,fullscreenControl:!0},zoom:t.zoom,style:{width:"100%",height:"calc(100vh -  100px)"}},{default:m(()=>[(i(!0),h(M,null,B(t.markers,(g,e)=>(i(),k(n,{options:{position:g},onClick:r=>t.markerClicked(o.drivers[e])},{default:m(()=>[c("div",N,[c("img",{src:"/app/image.php?h=50&w=50&src="+o.drivers[e].picture,width:"40",class:"rounded-full bg-white",height:"40",style:{"margin-top":"8px"}},null,8,G)])]),_:2},1032,["options","onClick"]))),256)),z(n,{options:{position:{lat:o.item.pickup_latitude,lng:o.item.pickup_longitude}}},{default:m(()=>[O]),_:1},8,["options"])]),_:1},8,["api-key","center","zoom"]))])}const F=y(L,[["render",V]]);export{F as d};
