import{_ as L,D as F,e as G,y as J,z as K,A as q,f as l,t as H,r as x,B as U,o,c as n,C as Y,l as Q,g as A,h as r,i as a,j as u,E as w,F as X,G as E,k as Z,a as C,d as D,b as T,m as $,s as R,H as ee,I as te,p as se}from"./index.min.js";import{e as ae}from"./editable_map_location-u3uTShb8.min.js";import oe from"./routeWizard-OxkPODC5.min.js";import"./index.es-prbepOQo.min.js";const ne=D(()=>T(()=>import("./map-lEFIR-Nq.min.js"),__vite__mapDeps([0,1,2,3]))),le=D(()=>T(()=>import("./form_field-k6wIEs-6.min.js"),__vite__mapDeps([4,2,3,5,6,7,1]))),re={components:{datatabble:F,maps:ne,delete_icon:G,car_icon:J,route_icon:K,form_field:le,editable_map_location:ae,route_wizard:oe,VTooltip:q},name:"Routes",setup(_){const i=_.conf.url+_.path+"?load=json",d=l(!1),e=l({}),p=l({}),z=l({}),v=l(!1),y=l(["Info","Time","Start location","End location","Driver"]),h=l([]),b=l(!1),g=l(""),k=()=>{d.value=!1};(()=>{$(i).then(t=>{p.value=JSON.parse(JSON.stringify(t))})})();const c=async()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{e.value.start_latitude=t.coords.latitude,e.value.start_longitude=t.coords.longitude,e.value.end_latitude=t.coords.latitude,e.value.end_longitude=t.coords.longitude},t=>{e.value.start_latitude=30.06,e.value.start_longitude=31.21,e.value.end_latitude=30.06,e.value.end_longitude=31.21,R(t.message)}):R("location error")},m=()=>{e.value={},v.value=!0,c()},V=async()=>{let t=g.value.length>3?await ee(_.system_setting.google_map_api,g.value,_.business_setting.country):"";h.value=t.predictions},B=async t=>{e.value.start_latitude=t.lat(),e.value.start_longitude=t.lng(),e.value.start_address=await te(t.lat(),t.lng())},I=t=>{e.value.end_latitude=t.lat(),e.value.end_longitude=t.lng()},N=(t,f,S)=>{},M=(t,f)=>{switch(t){case"view":break;case"edit":e.value=f,v.value=!0;break;case"delete":se("route_id",f,"Route.delete");break;case"close":d.value=!1,e.value={};break}},O=l([]);return{setPlaceMarker:async t=>{e.value.start_address=t.description;const f=new google.maps.places.PlacesService(document.createElement("div"));let S=t.place_id;f.getDetails({placeId:S},(P,j)=>{if(j===google.maps.places.PlacesServiceStatus.OK&&P){const W=P.geometry.location;e.value.start_longitude=W.lng(),e.value.start_latitude=W.lat(),h.value=[],b.value=!1}else console.error("Failed to fetch place details")})},showPlaceSearch:b,startPlaceChanged:V,start_placeSearch:g,places:h,waypoints:O,showEditSide:d,url:i,content:p,fillable:y,center:z,activeItem:e,translate:H,clickMarker:N,updateStartMarker:B,updateEndMarker:I,getUserLocation:c,showWizard:v,closeSide:k,addRouteWizard:m,handleAction:M}},props:["path","lang","system_setting","business_setting","setting","conf","auth"]},ie={class:"w-full flex overflow-auto"},ce={key:0,class:"w-full relative"},de={key:1,class:""},ue={class:"card"},_e={class:"card-body"},ve={class:"card-px text-center pt-15 pb-15"},he=["textContent"],ge=["textContent"],me=["textContent"],fe={class:"text-center pb-15 px-5"},xe=["src"],be={key:2,class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},we={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},pe=["textContent"],ye=a("hr",{class:"mt-2"},null,-1),ke={class:"w-full"},Ce=["src"],ze={class:"w-full h-8 relative flex"},Se=["src"],Pe=["textContent"],We=["onClick"],Ae=["onClick"];function Ee(_,i,d,e,p,z){const v=x("route_wizard"),y=x("route_icon"),h=x("vue-feather"),b=x("delete_icon"),g=x("datatabble"),k=U("tooltip");return o(),n("div",ie,[e.content?(o(),n("div",ce,[Y((o(),n("button",null,[Q("Test hover")])),[[k,"You have  new messages."]]),e.showWizard?(o(),A(v,{onCallback:i[0]||(i[0]=s=>e.showWizard=!1),key:e.showWizard,drivers:e.content.drivers,vehicles:e.content.vehicles,system_setting:d.system_setting,item:e.activeItem,business_setting:d.business_setting},null,8,["drivers","vehicles","system_setting","item","business_setting"])):r("",!0),!e.showWizard&&e.content.items&&!e.content.items.length?(o(),n("div",de,[a("div",ue,[a("div",_e,[a("div",ve,[a("h2",{class:"fs-2x fw-bold mb-0",textContent:u(e.content.title)},null,8,he),a("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:u(e.translate("Add your first route using this below wizard"))},null,8,ge),a("a",{textContent:u(e.translate("add_new")),onClick:i[1]||(i[1]=(...s)=>e.addRouteWizard&&e.addRouteWizard(...s)),href:"javascript:;",class:"text-white btn btn-primary er fs-6 px-8 py-4"},null,8,me)]),a("div",fe,[a("img",{src:"/src/asset/img/1.png",alt:"",class:"mx-auto mw-100 h-200px h-sm-325px"},null,8,xe)])])])])):r("",!0),e.content.items&&!e.showWizard?(o(),n("main",be,[a("div",we,[a("h1",{class:"font-bold text-lg w-full",textContent:u(e.content.title)},null,8,pe),e.showWizard?r("",!0):(o(),n("a",{key:0,href:"javascript:;",class:"uppercase p-2 mx-2 text-center text-white w-32 rounded-lg bg-danger",onClick:i[2]||(i[2]=(...s)=>e.addRouteWizard&&e.addRouteWizard(...s))},u(e.translate("add_new")),1))]),ye,a("div",ke,[e.content.columns?(o(),A(g,{key:0,class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":e.translate("lang")=="ar"?"right":"left","fixed-checkbox":"",headers:e.content.columns,items:e.content.items},{"item-picture":w(s=>[a("img",{src:s.picture,class:"w-8 h-8 rounded-full"},null,8,Ce)]),"item-route_locations":w(s=>[a("div",ze,[(o(!0),n(X,null,Z(s.route_locations,(c,m)=>(o(),n("div",{style:E("left: "+20*m+"px"),class:"rounded-full w-8 h-8 left-0 top-0 absolute"},[m<3?(o(),n("img",{key:m,class:"rounded-full w-8 h-8 rounded-[50px] border-2 border-purple-800",src:c.student&&c.student.picture?c.student.picture:"https://via.placeholder.com/37x37"},null,8,Se)):r("",!0)],4))),256)),a("span",{class:"flex absolute pt-2",style:E("left: "+(20*(s.route_locations.length<3?s.route_locations.length:3)+20)+"px")},[C(y),s.route_locations?(o(),n("span",{key:0,class:"font-semibold px-1",textContent:u(s.route_locations.length)},null,8,Pe)):r("",!0)],4)])]),"item-edit":w(s=>[s.not_editable?r("",!0):(o(),n("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:c=>e.handleAction("edit",s)},[C(h,{class:"w-5",type:"edit"})],8,We))]),"item-delete":w(s=>[s.not_removeable?r("",!0):(o(),n("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:c=>e.handleAction("delete",s)},[C(b,{class:"w-5"})],8,Ae))]),_:1},8,["body-text-direction","headers","items"])):r("",!0)])])):r("",!0)])):r("",!0)])}const Ie=L(re,[["render",Ee]]);export{Ie as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["map-lEFIR-Nq.min.js","index.es-prbepOQo.min.js","index.min.js","index.min.css","form_field-k6wIEs-6.min.js","Field-et6Si7DR.min.js","Field.min.css","editable_map_location-u3uTShb8.min.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
