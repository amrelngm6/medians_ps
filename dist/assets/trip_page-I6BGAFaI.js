import{_ as A,f as h,r as m,o as a,c as r,g as S,z as j,F as I,i as t,k as z,A as B,B as F,t as M,j as n,a as f,m as D,h as u,n as g,l as L}from"./index-9oSdSpWA.js";import{h as P}from"./help-vNllnstl.js";import{O as T,x as V,L as N,$ as G,j as O}from"./index.es-Th34G0an.js";const R={components:{GoogleMap:T,Marker:V,Polyline:N,InfoWindow:G,CustomMarker:O},name:"Map",emits:["click-marker","update-marker"],setup(s){const c=h(14),l=h({});return l.value={lat:s.center.destination.lat,lng:s.center.destination.lng},{zoom:c,newcenter:l,markers:s.waypoints}},props:["path","lang","setting","conf","auth","waypoints","center"]},W={class:"w-full overflow-auto",style:{height:"85vh","z-index":"9999"}},E={style:{"text-align":"center"}},K=["src"];function q(s,c,l,e,y,k){const x=m("CustomMarker"),b=m("GoogleMap");return a(),r("div",W,[(a(),S(b,{"api-key":l.setting.google_map_api,ref:"trip_map",center:e.newcenter,key:e.newcenter,options:{zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,rotateControl:!0,fullscreenControl:!0},zoom:e.zoom,style:{width:"100%",height:"calc(100vh -  100px)"}},{default:j(()=>[(a(!0),r(I,null,z(e.markers,(_,w)=>(a(),S(x,{options:{position:_.destination}},{default:j(()=>[t("div",E,[t("img",{src:_.icon,width:"40",class:"rouned-full",height:"40",style:{"margin-top":"8px"}},null,8,K)])]),_:2},1032,["options"]))),256))]),_:1},8,["api-key","center","zoom"]))])}const H=A(R,[["render",q]]),J={components:{dashboard_card_white:B,help_icon:P,trip_map:H,close_icon:F,translate:M},emits:["close"],setup(s,{emit:c}){const l=s.conf.url+s.path+"?load=json",e=h({}),y=h({}),k=h([]),x=h("info"),b=h(!0),_=()=>{e.value=s.trip;let d=[];d[0]=v(s.trip.vehicle,s.trip.route,"car.svg"),y.value=d[0];let p,C;if(console.log(s.trip),s.trip.pickup_locations){for(let i=0;i<s.trip.pickup_locations.length;i++)p=s.trip.pickup_locations[i].status!="waiting"?"yellow_pin.gif":"blue_pin.gif",d.push(v(s.trip.pickup_locations[i],s.trip.destinations[i],p));for(let i=0;i<s.trip.destinations.length;i++)C=s.props.trip.destinations[i]&&trip.destinations[i].status!="waiting"?"yellow_pin.gif":"blue_pin.gif",s.trip.destinations[i]??d.push(v(s.trip.destinations[i],s.trip.pickup_locations[i],C))}d.push(v(s.trip.route,s.trip.vehicle,"destination.svg")),k.value=d},w=()=>{limitCount.value+=5,limitCount.value>e.value.last_trips.length&&(b.value=!1)},o=d=>{console.log(d),x.value=d},v=(d,p,C)=>{let i={};return i.icon=s.conf.url+"uploads/images/"+C,i.origin={lat:parseFloat(d.latitude),lng:parseFloat(d.longitude)},i.destination={lat:parseFloat(p.latitude),lng:parseFloat(p.longitude)},i.drag=!1,i};return _(),{url:l,locations:k,center:y,activeItem:e,activeStatus:x,close:()=>{c("close")},setActiveStatus:o,loadmore:w,handlePickup:v,setLocations:_,translate:M}},props:["path","lang","setting","conf","auth","trip"]},Q={class:"w-full"},U={key:0,class:"grid xl:grid-cols-12 lg:grid-cols-12 grid-cols-1 gap-6"},X={class:"xl:col-span-3 lg:col-span-5"},Y={class:"card px-4 py-6 mb-6"},Z={key:0,class:"text-center"},$=["textContent"],tt=["textContent"],et=t("hr",{class:"mt-5 dark:border-gray-600"},null,-1),nt={class:"text-start mt-6 text-sm"},st={class:"space-y-7"},ot={class:"text-zinc-400 dark:text-gray-400 flex gap-4"},at=["textContent"],it=["textContent"],lt={class:"text-zinc-400 dark:text-gray-400 flex gap-4"},rt=["textContent"],ct=["textContent"],dt={class:"text-zinc-400 dark:text-gray-400 flex gap-4"},_t=["textContent"],ut=["textContent"],gt={class:"text-zinc-400 dark:text-gray-400 flex gap-4"},ht=["textContent"],xt=["textContent"],mt=t("hr",{class:"my-5 dark:border-gray-600"},null,-1),bt={class:"xl:col-span-9 lg:col-span-7"},vt={class:"card"},pt={class:"p-6"},ft={class:"lg:flex items-center justify-around rounded-xl space-x-3 bg-gray-100 p-2 dark:bg-gray-900/30","aria-label":"Tabs",role:"tablist"},yt=["textContent"],kt=["textContent"],wt=["textContent"],Ct=["textContent"],St={class:"mt-3 overflow-hidden"},It={key:0,class:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full border-b border-gray-100"},zt={class:"w-full relative"},jt={class:"dark:border-border-dark dark:border-dashed border border-border-light border-dashed p-4 flex flex-col gap-5"},Mt={class:"flex items-start justify-between"},Dt={class:"border border-1 grid p-3 rounded-full sm:p-2 place-content-center"},At=["textContent"],Bt={class:"flex flex-col gap-2"},Ft=["textContent"],Lt=["textContent"],Pt=["textContent"],Tt={class:"mt-6 w-full"},Vt={class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-6"},Nt={key:2,class:"w-full border-b border-gray-100"},Gt={class:"md:text-start lg:flex mb-5 mt-5"},Ot={class:"w-full"},Rt=["textContent"],Wt=["textContent"],Et={class:"w-full"},Kt=["textContent"],qt=["textContent"],Ht={class:"w-full"},Jt=["textContent"],Qt=["textContent"],Ut={class:"text-start"},Xt={class:"absolute start-7 mt-6"},Yt={class:"relative"},Zt={class:"w-9 h-9 flex justify-center items-center rounded-full bg-white text-info dark:bg-gray-800"},$t=["src"],te=t("div",{class:"absolute top-4 -end-6 w-12 h-[2px] bg-gray-400 -z-10"},null,-1),ee={class:"grid grid-cols-1"},ne={class:"md:col-start-1 col-span-2"},se={class:"flex md:flex-nowrap items-center gap-6 ms-10 md:mt-0 mt-5"},oe={class:"ms-10"},ae=["textContent"],ie={class:"relative me-5 md:ps-0 ps-10 overflow-auto"},le={class:"pt-3"},re=["textContent"],ce=["textContent"],de={key:0,class:"text-center"};function _e(s,c,l,e,y,k){const x=m("close_icon"),b=m("help_icon"),_=m("dashboard_card_white"),w=m("trip_map");return a(),r("div",Q,[l.trip?(a(),r("div",U,[t("div",X,[t("div",Y,[e.activeItem&&e.activeItem.driver?(a(),r("div",Z,[t("h4",{class:"mb-1 mt-3 text-lg dark:text-gray-300",textContent:n(e.translate("Trip")+e.translate(" #")+e.activeItem.trip_id)},null,8,$),t("button",{type:"button",onClick:c[0]||(c[0]=(...o)=>e.close&&e.close(...o)),class:"mx-auto text-center hover:bg-primary mb-3 px-6 py-2 flex text-danger gap gap-6"},[f(x,{class:"w-4"}),D(),t("span",{class:"text-base",textContent:n(e.translate("Back"))},null,8,tt)])])):u("",!0),et,t("div",nt,[t("div",st,[t("p",ot,[t("strong",{textContent:n(e.translate("Duration"))},null,8,at),t("span",{class:"ms-2",textContent:n(e.activeItem.duration)},null,8,it)]),t("p",lt,[t("strong",{textContent:n(e.translate("Pickup locations"))},null,8,rt),D(),t("span",{class:"ms-2",textContent:n(e.activeItem.pickup_locations_count)},null,8,ct)]),t("p",dt,[t("strong",{textContent:n(e.translate("Route"))},null,8,_t),t("span",{class:"ms-2",textContent:n(e.activeItem.route?e.activeItem.route.route_name:"")},null,8,ut)]),t("p",gt,[t("strong",{textContent:n(e.translate("Driver"))},null,8,ht),t("span",{class:"ms-2",textContent:n(e.activeItem.driver_name)},null,8,xt)])])]),mt])]),t("div",bt,[t("div",vt,[t("div",pt,[(a(),r("div",{class:"w-full",key:e.activeStatus},[t("nav",ft,[t("button",{onClick:c[1]||(c[1]=o=>e.setActiveStatus("info")),type:"button",textContent:n(e.translate("Info")),class:g([e.activeStatus=="info"?"menu-dark text-white font-semibold":"text-gray-500","hover:bg-white hover:text-blue-800 hs-tab-active:font-semibold hs-tab-active:bg-white dark:hs-tab-active:bg-gray-700 w-full flex justify-center py-2 rounded items-center gap-2 border-b-2 border-transparent -mb-px transition-all text-sm whitespace-nowrap dark:text-white active"])},null,10,yt),t("button",{onClick:c[2]||(c[2]=o=>e.setActiveStatus("pickup_locations")),type:"button",textContent:n(e.translate("Pickup locations")),class:g([e.activeStatus=="pickup_locations"?"menu-dark text-white font-semibold":"text-gray-500","hover:bg-white hover:text-blue-800 hs-tab-active:font-semibold hs-tab-active:bg-white dark:hs-tab-active:bg-gray-700 w-full flex justify-center py-2 rounded items-center gap-2 border-b-2 border-transparent -mb-px transition-all text-sm whitespace-nowrap dark:text-white"])},null,10,kt),t("button",{type:"button",onClick:c[3]||(c[3]=o=>e.setActiveStatus("map")),class:g([e.activeStatus=="map"?"menu-dark text-white font-semibold":"text-gray-500","hover:bg-white hover:text-blue-800 hs-tab-active:font-semibold hs-tab-active:bg-white dark:hs-tab-active:bg-gray-700 w-full flex justify-center py-2 rounded items-center gap-2 border-b-2 border-transparent -mb-px transition-all text-sm whitespace-nowrap dark:text-white"]),textContent:n(e.translate("Map"))},null,10,wt),t("button",{onClick:c[4]||(c[4]=o=>e.setActiveStatus("reviews")),type:"button",textContent:n(e.translate("Reviews")),class:g([e.activeStatus=="reviews"?"menu-dark text-white font-semibold":"text-gray-500","hover:bg-white hover:text-blue-800 hs-tab-active:font-semibold hs-tab-active:bg-white dark:hs-tab-active:bg-gray-700 w-full flex justify-center py-2 rounded items-center gap-2 border-b-2 border-transparent -mb-px transition-all text-sm whitespace-nowrap dark:text-white"])},null,10,Ct)]),t("div",St,[(a(),r("div",{key:e.activeStatus,id:"basic-tabs-1",class:"transition-all duration-300 transform"},[e.activeStatus=="help_messages"?(a(),r("div",It,[(a(!0),r(I,null,z(e.activeItem.help_messages,o=>(a(),r("div",zt,[t("div",jt,[t("div",Mt,[t("span",Dt,[f(b,{class:"text-primary w-10 h-10"})]),t("span",{class:"text-content3 text-2xs text-muted p-3",textContent:n(o.date)},null,8,At)]),t("div",Bt,[t("div",null,[t("p",{class:"text-title text-sm font-semibold mb-1 dark:text-white",textContent:n(o.subject)},null,8,Ft),t("p",{class:"text-content3 text-2xs truncate",textContent:n(o.message)},null,8,Lt)]),t("div",{class:g([e.translate("lang")=="ar"?"left-0":"right-0","absolute flex items-center justify-between gap-1"])},[t("span",{class:"bg-blue-50 px-4 py-1 text-secondary badge-sm rounded-5",textContent:n(o.status)},null,8,Pt)],2)])])]))),256))])):u("",!0),e.activeStatus=="info"?(a(),r("div",{class:"w-full border-b border-gray-100",key:e.activeStatus},[t("div",Tt,[t("div",Vt,[f(_,{icon:"/uploads/img/products_icome.png",classes:"bg-gradient-success",class:"border border-1",title:e.translate("Duration"),value:e.activeItem.duration?e.activeItem.duration:"0"},null,8,["title","value"]),f(_,{icon:"/uploads/img/products_icome.png",classes:"bg-gradient-info",class:"border border-1",title:e.translate("Pickup locations"),value:e.activeItem.pickup_locations_count},null,8,["title","value"]),f(_,{icon:"/uploads/img/products_icome.png",classes:"bg-gradient-danger",class:"border border-1",title:e.translate("Distance"),value:e.activeItem.distance},null,8,["title","value"])])])])):u("",!0),e.activeStatus=="pickup_locations"&&l.trip?(a(),r("div",Nt,[t("div",{class:g([e.translate("lang")=="ar"?"right-4":"left-4","absolute border-s-2 border border-gray-300 h-full top-20 start-10 -z-10 dark:border-white/10"])},null,2),t("div",Gt,[t("div",Ot,[t("h5",{class:"font-semibold bg-white dark:bg-gray-700 dark:text-gray-300 inline rounded",textContent:n(e.translate("Trip number")+" #"+l.trip.trip_id)},null,8,Rt),t("p",{class:"text-muted text-sm",textContent:n(l.trip.trip_date)},null,8,Wt)]),t("div",Et,[t("h5",{class:"font-semibold bg-white dark:bg-gray-700 dark:text-gray-300 inline rounded",textContent:n(l.trip.duration)},null,8,Kt),t("p",{class:"text-muted text-sm",textContent:n(e.translate("Duration"))},null,8,qt)]),t("div",Ht,[t("h5",{class:"font-semibold bg-white dark:bg-gray-700 dark:text-gray-300 inline rounded",textContent:n(l.trip.distance+" KM")},null,8,Jt),t("p",{class:"text-muted text-sm",textContent:n(e.translate("Distance"))},null,8,Qt)])]),(a(!0),r(I,null,z(l.trip.pickup_locations,o=>(a(),r("div",{class:"space-y-4",key:l.trip},[t("div",Ut,[t("div",Xt,[t("div",Yt,[t("div",Zt,[o.model?(a(),r("img",{key:0,src:"/app/image.php?w=100&h=100&src="+o.model.picture,class:"rounded-full",alt:""},null,8,$t)):u("",!0)]),te])]),t("div",ee,[t("div",ne,[t("div",se,[t("div",oe,[t("h2",{class:g([e.translate("lang")=="ar"?"bg-gradient-to-l":"bg-gradient-to-r","font-semibold p-2 rounded text-primary flex items-center justify-center text-sm mx-16"]),textContent:n(o.boarding_time?o.time:e.translate("Waiting"))},null,10,ae)]),t("div",ie,[t("div",le,[o.model?(a(),r("h4",{key:0,class:"mb-1.5 text-base dark:text-gray-300",textContent:n(o.model.name)},null,8,re)):u("",!0),o.location?(a(),r("p",{key:1,style:L([{"white-space":"nowrap"},{"white-space":"nowrap"}]),class:"mb-4 text-gray-500 dark:text-gray-400",textContent:n(o.location.address)},null,8,ce)):u("",!0)])])])])])])]))),128))])):u("",!0)]))])]))])]),e.activeStatus=="map"?(a(),r("p",de,[(a(),S(w,{conf:l.conf,setting:l.setting,trip:l.trip,center:e.center,key:e.locations,waypoints:e.locations,onIntervalCallback:s.callback},null,8,["conf","setting","trip","center","waypoints","onIntervalCallback"]))])):u("",!0)])])):u("",!0)])}const me=A(J,[["render",_e]]);export{me as default};
