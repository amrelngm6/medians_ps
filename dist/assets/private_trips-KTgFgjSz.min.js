import{_ as Q,D as X,e as Y,y as Z,z as $,f as d,t as ee,r as y,o as c,c as p,g as w,h as u,i as h,j as P,A as L,a as V,d as W,b as F,m as te,s as se,p as ae}from"./index.min.js";const ne=W(()=>F(()=>import("./map-OGlwx9xa.min.js"),__vite__mapDeps([0,1,2,3]))),oe=W(()=>F(()=>import("./trip_page-o4OZqEmS.min.js"),__vite__mapDeps([4,2,3,5,1]))),le=W(()=>F(()=>import("./usertype_picker-iazfrFKo.min.js"),__vite__mapDeps([6,2,3]))),ie={components:{datatabble:X,maps:ne,delete_icon:Y,car_icon:Z,route_icon:$,trip_page:oe,usertype_picker:le},name:"Private trips",setup(a){const l=a.conf.url+a.path+"?load=json",C=d(null),e=d({}),i=d({}),k=d({}),m=d([]),v=d(""),x=d(!1),f=d(!1),b=d(!1),n=()=>{};(()=>{te(l).then(t=>{i.value=JSON.parse(JSON.stringify(t)),B(i.value.items),O()})})();const B=t=>{for(let s=0;s<t.length;s++)R(t[s])},N=(t,s)=>{e.value=t;for(let r=0;r<i.value.items.length;r++)i.value.items[r].selected=!1;i.value.items[s].selected=!0;let o,g,G=a.conf.url+"uploads/images/yellow_pin.gif",K=a.conf.url+"uploads/images/blue_pin.gif",U=a.conf.url+"uploads/images/car.svg",H=a.conf.url+"uploads/images/destination.svg",_=[],E={lat:parseFloat(t.vehicle.last_latitude),lng:parseFloat(t.vehicle.last_longitude)};_[0]={drag:!0,status:"waiting",icon:U,origin:E,destination:E};for(let r=0;r<t.pickup_locations.length;r++)o=t.pickup_locations[r],g=r?t.pickup_locations[r-1].location:o.location,_[r+1]={status:o.status,icon:o.status=="waiting"?K:G,origin:{lat:parseFloat(g.latitude),lng:parseFloat(g.longitude)},destination:{lat:parseFloat(o.location.latitude),lng:parseFloat(o.location.longitude)}};return _[_.length]={drag:!0,icon:H,origin:{lat:0,lng:0},destination:{lat:parseFloat(t.route.latitude),lng:parseFloat(t.route.longitude)}},k.value=_[0].destination,m.value=_,_},A=async()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{k.value={lat:t.coords.latitude,lng:t.coords.longitude}},t=>{se(t.message,5e3)})};A();const O=()=>{for(let t=0;t<i.value.items.length;t++)i.value.items[t].active=v.value.trim()?D(i.value.items[t]):1},D=t=>{let s=!!t.student_name.toLowerCase().includes(v.value.toLowerCase());return s||!!t.location_name.toLowerCase().includes(v.toLowerCase())},S=t=>{e.value=t,I("edit",t)},j=(t,s,o)=>{e.value=o,e.value.latitude=o.destination.lat,e.value.longitude=o.destination.lng,I("edit",e.value)},R=t=>(t.icon=a.conf.url+"uploads/images/blue_pin.gif",t.origin=t.destination={lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},t.drag=!0,t),I=(t,s)=>{switch(t){case"view":break;case"edit":z(s,!0);break;case"delete":ae("destination_id",s,"Destination.delete");break}},M=(t,s)=>{let o=[];for(let g=0;g<t.length;g++)t[g].status==s;return o},z=(t,s=!0)=>{f.value=s,e.value=t},J=()=>{z(null,!1),f.value=!1},q=t=>{e.value.usertype=t,b.value=!1,showWizard.value=!0};return{showWizard,setType:q,showOptions:b,editFields:z,showTrip:f,activeTrip:C,locations:m,url:l,content:i,center:k,activeItem:e,callback:J,filterLocations:M,translate:ee,clickMarker:j,updateMarker:S,setLocationsMarkers:N,checkSimilar:D,searchTextChanged:O,searchText:v,getUserLocation:A,collapsed:x,closeSide:n,handleAction:I}},props:["path","lang","setting","conf","auth"]},re={class:"w-full overflow-auto"},ce={key:4,class:"w-full relative"},de={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},ue=["textContent"],ge=["textContent"],_e=h("hr",{class:"mt-2"},null,-1),me={class:"w-full bg-white"},ve=["src"],he=["onClick"],fe=["onClick"];function ye(a,l,C,e,i,k){const m=y("private_trip_wizard"),v=y("usertype_picker"),x=y("vue-feather"),f=y("delete_icon"),b=y("datatabble");return c(),p("div",re,[e.showWizard&&e.activeItem.usertype=="employee"?(c(),w(m,{onCallback:l[0]||(l[0]=n=>e.showWizard=!1),usertype:e.activeItem.usertype,userslist:e.content.employees,key:e.showWizard,packages:e.content.packages,system_setting:a.system_setting,item:e.activeItem,business_setting:a.business_setting},null,8,["usertype","userslist","packages","system_setting","item","business_setting"])):u("",!0),e.showWizard&&e.activeItem.usertype=="supervisor"?(c(),w(m,{onCallback:l[1]||(l[1]=n=>e.showWizard=!1),usertype:e.activeItem.usertype,userslist:e.content.supervisors,key:e.showWizard,packages:e.content.packages,system_setting:a.system_setting,item:e.activeItem,business_setting:a.business_setting},null,8,["usertype","userslist","packages","system_setting","item","business_setting"])):u("",!0),e.showWizard&&e.activeItem.usertype=="student"?(c(),w(m,{onCallback:l[2]||(l[2]=n=>e.showWizard=!1),usertype:e.activeItem.usertype,userslist:e.content.students,key:e.showWizard,packages:e.content.packages,system_setting:a.system_setting,item:e.activeItem,business_setting:a.business_setting},null,8,["usertype","userslist","packages","system_setting","item","business_setting"])):u("",!0),!e.showWizard&&e.showOptions?(c(),w(v,{key:e.showOptions,auth:C.auth,item:e.activeItem,onCallback:e.setType},null,8,["auth","item","onCallback"])):u("",!0),e.content&&!e.showTrip?(c(),p("div",ce,[e.content?(c(),p("main",{key:e.content.items,class:"flex-1 overflow-x-hidden overflow-y-auto w-full"},[h("div",de,[h("h1",{class:"font-bold text-lg w-full",textContent:P(e.content.title)},null,8,ue),h("a",{href:"javascript:;",class:"uppercase p-2 mx-2 text-center text-white w-32 rounded-lg bg-danger",onClick:l[3]||(l[3]=n=>e.showOptions=!0),textContent:P(e.translate("add_new"))},null,8,ge)]),_e,h("div",me,[e.content.columns?(c(),w(b,{key:0,class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":e.translate("lang")=="ar"?"right":"left","fixed-checkbox":"",headers:e.content.columns,items:e.content.items},{"item-picture":L(n=>[h("img",{src:n.picture,class:"w-8 h-8 rounded-full"},null,8,ve)]),"item-details":L(n=>[n.not_editable?u("",!0):(c(),p("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:T=>e.handleAction("edit",n)},[V(x,{class:"w-5",type:"edit"})],8,he))]),"item-delete":L(n=>[n.not_removeable?u("",!0):(c(),p("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:T=>e.handleAction("delete",n)},[V(f,{class:"w-5"})],8,fe))]),_:1},8,["body-text-direction","headers","items"])):u("",!0)])])):u("",!0)])):u("",!0)])}const we=Q(ie,[["render",ye]]);export{we as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["map-OGlwx9xa.min.js","index.es-4z_hVD90.min.js","index.min.js","index.min.css","trip_page-o4OZqEmS.min.js","help-QMf3rqBc.min.js","usertype_picker-iazfrFKo.min.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
