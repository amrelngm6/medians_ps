const __vite__fileDeps=["map-ZcxsnK9W.min.js","index.es-DlPsKZzO.min.js","index.min.js","index.min.css","side-form-create-C0XyOwnl.min.js","Field-DI3KdjSu.min.js","Field.min.css","side-form-update-DhNjwx4E.min.js","form_field-hbsiF_Lt.min.js","editable_map_location-h8TGFEYt.min.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as N,D as B,O as $,A as J,P as M,Q,r as x,t as G,a as g,o,c as i,b as d,d as e,g as h,F as E,f as U,n as R,e as n,w as y,v as W,a0 as F,B as tt,q as w,u as I,l as et,R as st,S as at,a1 as nt,y as L,x as ot,z as O,j as lt,k as it,p as ct}from"./index.min.js";import rt from"./usertype_picker-DX0qbJCS.min.js";import{e as K}from"./editable_map_location-h8TGFEYt.min.js";import{r as dt}from"./route_map-DTvTkB_6.min.js";import{e as _t}from"./routeLocationWizard-BYKZgNTf.min.js";import"./index.es-DlPsKZzO.min.js";const mt=w(()=>I(()=>import("./map-ZcxsnK9W.min.js"),__vite__mapDeps([0,1,2,3]))),ut=w(()=>I(()=>import("./side-form-create-C0XyOwnl.min.js"),__vite__mapDeps([4,2,3,5,6]))),bt=w(()=>I(()=>import("./side-form-update-DhNjwx4E.min.js"),__vite__mapDeps([7,2,3,5,6,8,9,1]))),ht=w(()=>I(()=>import("./form_field-hbsiF_Lt.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),xt={components:{datatabble:B,SideFormCreate:ut,SideFormUpdate:bt,maps:mt,close_icon:$,delete_icon:J,car_icon:M,route_icon:Q,form_field:ht,editable_map_location:K,route_map:dt},name:"PackageSubscriptions",emits:["callback"],setup(m,{emit:s}){const r=x(!1),t=x(!1),c=x({}),p=x(m.usertype),f=x({}),u=x([m.usertype,"Package","Subscription","Confirm"]),b=x("");m.item&&(c.value=m.item);const a=()=>{r.value=!0;var l=new URLSearchParams;let v=JSON.parse(JSON.stringify(c.value)),T=Object.keys(v),P,q;for(let z=0;z<T.length;z++)P=T[z],q=typeof v[P]=="object"?JSON.stringify(v[P]):v[P],l.append("params["+P+"]",q);let A=v.subscription_id>0?"update":"create";l.append("type","PackageSubscription."+A),et(l,"/api/"+A).then(z=>{r.value=!1,st(z)})},k=()=>{s("callback")},_=()=>at(["model_id","package_id","start_date","payment_type","daily_trips","payment_status"],c),S=l=>{let v=!!l.name.toLowerCase().includes(b.value.toLowerCase()),T=v||!!l.mobile.toLowerCase().includes(b.value.toLowerCase());return T||!!l.parent.name.toLowerCase().includes(b.value.toLowerCase())},C=l=>{c.value.model_id=m.usertype=="student"?l.student_id:l.customer_id,c.value.model=l,c.value.user_type=m.usertype,p.value="Package",b.value=null},V=()=>{for(let l=0;l<m.userslist.length;l++)m.userslist[l].show=b.value.trim()?S(m.userslist[l]):1},j=l=>{let v=!!l.name.toLowerCase().includes(b.value.toLowerCase());return v||!!l.description.toLowerCase().includes(b.value.toLowerCase())},Y=l=>{c.value.package_id=l.package_id,c.value.package=l,p.value="Subscription",b.value=null},H=()=>{if(m.packages)for(let l=0;l<m.packages.length;l++)m.packages[l].show=b.value.trim()?j(m.packages[l]):1},X=l=>{c.value.payment_type=l,D()},D=()=>{if(!c.value.start_date)return null;let l=0;c.value.payment_type=="month"&&(l=1),c.value.payment_type=="quarter"&&(l=3),c.value.payment_type=="year"&&(l=12),c.value.end_date=nt(c.value.start_date,l)},Z=x(!1);return{loader:r,totalCost:()=>{let l=c.value.daily_trips==1?"single_cost_"+c.value.payment_type:"double_cost_"+c.value.payment_type;return c.value.total_cost=c.value.package[l],c.value.total_cost},showTip:Z,dateChanged:D,setType:X,findPackage:H,checkSimilarPackage:j,setPackage:Y,findUser:V,setUser:C,checkSimilarUser:S,progressWidth:_,showEditSide:t,content:f,fillable:u,activeItem:c,activeTab:p,translate:G,savePackageSubscription:a,searchText:b,back:k}},props:["conf","path","system_setting","item","userslist","usertype","packages"]},vt={class:"w-full overflow-auto"},ft=e("img",{class:"m-auto w-500px",src:"/uploads/loader.gif"},null,-1),pt=[ft],yt={class:"w-full relative"},gt={class:"card w-full py-10"},kt={class:"w-full stepper stepper-links"},Ct={class:"stepper-nav justify-content-center py-2 mb-10"},wt=["onClick"],It=["textContent"],St={class:"w-full"},Tt={class:"text-center mb-13"},Pt=["textContent"],zt=["textContent"],Lt={class:"w-100 relative mb-5",autocomplete:"off"},Wt=["placeholder"],Vt={class:"w-full"},Et={class:"symbol symbol-35px symbol-circle me-5"},Ut=["src"],Ot={class:"fw-semibold w-full"},jt=["textContent"],Dt=["textContent"],qt=["onClick","textContent"],At={class:"symbol symbol-35px symbol-circle me-5"},Rt=["src"],Ft={class:"fw-semibold w-full"},Nt=["textContent"],Bt=["textContent"],Jt={class:"text-center"},Mt=["textContent"],Qt={class:"card-body pt-0"},Gt={class:"settings-form"},Kt={class:"max-w-xl mb-6 mx-auto row"},Yt={class:"text-center mb-13"},Ht=["textContent"],Xt=["textContent"],Zt={class:"w-100 relative mb-5",autocomplete:"off"},$t=["placeholder"],te={class:"w-full"},ee={class:"fw-semibold w-full"},se=["textContent"],ae=["textContent"],ne=["onClick","textContent"],oe={class:"fw-semibold"},le=["textContent"],ie=["textContent"],ce={class:"text-center"},re=["textContent"],de={class:"relative py-4"},_e={class:"text-center mb-13"},me=["textContent"],ue=["textContent"],be={class:"row"},he=["checked"],xe={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},ve={class:"d-block fw-semibold text-start"},fe=["textContent"],pe=["textContent"],ye=["checked"],ge={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},ke={class:"d-block fw-semibold text-start"},Ce=["textContent"],we=["textContent"],Ie=["checked"],Se={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},Te={class:"d-block fw-semibold text-start"},Pe=["textContent"],ze=["textContent"],Le={class:"relative py-4 max-w-xl mx-auto"},We=["textContent"],Ve={class:"fv-row fv-plugins-icon-container fv-plugins-bootstrap5-row-valid"},Ee={class:"d-flex align-items-center me-2"},Ue={class:"symbol symbol-50px me-6"},Oe={class:"symbol-label bg-light-danger"},je={class:"d-flex flex-column"},De=["textContent"],qe=["textContent"],Ae={class:"form-check form-check-custom form-check-solid"},Re={class:"d-flex align-items-center me-2"},Fe={class:"symbol symbol-50px me-6"},Ne={class:"symbol-label bg-light-danger"},Be={class:"d-flex flex-column"},Je=["textContent"],Me=["textContent"],Qe={class:"form-check form-check-custom form-check-solid"},Ge=e("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback"},null,-1),Ke={class:"pt-0"},Ye={class:"settings-form"},He={class:"max-w-xl mb-6 mx-auto row"},Xe=["textContent"],Ze=["placeholder"],$e=["textContent"],ts=["placeholder"],es={class:"text-center mt-10"},ss=["textContent"],as={class:"bg-gray-200 shadow-md mb-10 rounded-xl"},ns={class:"card-header border-0 pt-9"},os={key:0,class:"card-title m-0 flex gap-4"},ls={class:"symbol symbol-50px w-50px bg-light"},is=["src"],cs=["textContent"],rs={class:"flex gap-2 cursor-pointer"},ds={class:"pt-3"},_s=["textContent"],ms={key:0,class:"card-body p-9"},us=["textContent"],bs=["textContent"],hs={class:"mb-8 gap-4 notice d-flex bg-inverse-default rounded border-primary border border-dashed p-6"},xs={class:"d-flex flex-stack flex-grow-1 flex-wrap flex-md-nowrap"},vs={class:"mb-3 mb-md-0 fw-semibold"},fs=["textContent"],ps=["textContent"],ys={class:"h-4px w-100 bg-light mb-5"},gs={key:0,class:"w-full flex gap-4"},ks={class:"w-full flex gap-4"},Cs={class:"block gap-4"},ws=["textContent"],Is=["textContent"],Ss={key:0,class:"w-full block gap-4"},Ts=["textContent"],Ps=["textContent"],zs={key:1,class:"w-full block gap-4"},Ls={class:"w-full block gap-4"},Ws=["textContent"],Vs=["textContent"],Es={class:"text-center mt-10"},Us=["textContent"];function Os(m,s,r,t,c,p){const f=g("close_icon"),u=g("vue-feather"),b=g("form_field");return o(),i("div",vt,[t.loader?(o(),i("div",{key:t.loader,class:"bg-white fixed w-full h-full top-0 left-0",style:{"z-index":"99999",opacity:".9"}},pt)):d("",!0),e("div",yt,[h(f,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:t.back},null,8,["onClick"]),e("div",gt,[e("div",kt,[e("div",Ct,[(o(!0),i(E,null,U(t.fillable,a=>(o(),i("div",{class:"stepper-item",onClick:k=>t.activeTab=a},[e("h3",{class:R([t.activeTab==a?"text-danger border-danger":"text-gray-400 border-transparent","cursor-pointer pb-3 px-2 stepper-title text-md border-b"]),textContent:n(t.translate(a))},null,10,It)],8,wt))),256))]),e("div",St,[t.activeTab==r.usertype?(o(),i("div",{class:"",key:t.activeTab},[(o(),i("div",{class:"card-body pt-0 mx-auto max-w-xl",key:r.userslist},[e("div",Tt,[e("h1",{class:"mb-3",textContent:n(t.translate("Find")+" "+t.translate(r.usertype))},null,8,Pt),e("div",{class:"text-gray-400 font-semibold",textContent:n(t.translate("Search by name email or mobile"))},null,8,zt)]),e("div",Lt,[h(u,{type:"user",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),y(e("input",{type:"text",onChange:s[0]||(s[0]=(...a)=>t.findUser&&t.findUser(...a)),onInput:s[1]||(s[1]=(...a)=>t.findUser&&t.findUser(...a)),"onUpdate:modelValue":s[2]||(s[2]=a=>t.searchText=a),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name email or mobile")},null,40,Wt),[[W,t.searchText]])]),t.searchText?(o(!0),i(E,{key:0},U(r.userslist,a=>(o(),i("div",Vt,[a.show?(o(),i("a",{href:"javascript:;",key:a.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",Et,[e("img",{alt:"Pic",src:a.picture},null,8,Ut)]),e("div",Ot,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(a.name)},null,8,jt),e("span",{class:"block text-gray-500 text-sm",textContent:n(a.mobile)},null,8,Dt)]),e("span",{onClick:k=>t.setUser(a),class:"btn btn-danger btn-sm text-white",textContent:n(t.translate("Choose"))},null,8,qt)])):d("",!0)]))),256)):d("",!0),t.activeItem.model?(o(),i("a",{href:"javascript:;",key:t.activeItem.model,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",At,[e("img",{alt:"Pic",src:t.activeItem.model.picture},null,8,Rt)]),e("div",Ft,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(t.activeItem.model.name)},null,8,Nt),e("span",{class:"block text-gray-500 text-sm",textContent:n(t.activeItem.model.mobile)},null,8,Bt)])])):d("",!0)])),e("p",Jt,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:s[3]||(s[3]=a=>t.activeTab="Package"),textContent:n(t.translate("Package"))},null,8,Mt)])])):d("",!0),t.activeTab=="Package"?(o(),i("div",{class:"",key:t.activeTab},[e("div",Qt,[e("div",Gt,[e("div",Kt,[(o(),i("div",{class:"card-body pt-0 mx-auto max-w-xl",key:r.packages},[e("div",Yt,[e("h1",{class:"mb-3",textContent:n(t.translate("Find Package"))},null,8,Ht),e("div",{class:"text-gray-400 font-semibold",textContent:n(t.translate("Search by name or description"))},null,8,Xt)]),e("div",Zt,[h(u,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),y(e("input",{type:"text",onChange:s[4]||(s[4]=(...a)=>t.findPackage&&t.findPackage(...a)),onInput:s[5]||(s[5]=(...a)=>t.findPackage&&t.findPackage(...a)),"onUpdate:modelValue":s[6]||(s[6]=a=>t.searchText=a),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name or description")},null,40,$t),[[W,t.searchText]])]),t.searchText?(o(!0),i(E,{key:0},U(r.packages,a=>(o(),i("div",te,[a&&a.show?(o(),i("a",{href:"javascript:;",key:a.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",ee,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(a.name)},null,8,se),e("span",{class:"block text-gray-500 text-sm",textContent:n(a.description)},null,8,ae)]),e("span",{onClick:k=>t.setPackage(a),class:"btn btn-danger btn-sm text-white",textContent:n(t.translate("Choose"))},null,8,ne)])):d("",!0)]))),256)):d("",!0),t.activeItem.package?(o(),i("a",{href:"javascript:;",key:t.activeItem.package,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1 gap-4"},[h(u,{type:"map"}),e("div",oe,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(t.activeItem.package.name)},null,8,le),e("span",{class:"block text-gray-500 text-sm truncate",textContent:n(t.activeItem.package.description)},null,8,ie)])])):d("",!0)]))])])]),e("p",ce,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:s[7]||(s[7]=a=>t.activeTab="Subscription"),textContent:n(t.translate("Subscription"))},null,8,re)])])):d("",!0),t.activeTab=="Subscription"?(o(),i("div",{class:"mx-auto max-w-4xl",key:t.activeTab},[e("div",de,[e("div",_e,[e("h1",{class:"mb-3",textContent:n(t.translate("Subscription duration"))},null,8,me),e("div",{class:"text-gray-400 font-semibold",textContent:n(t.translate("Choose the duration of the subscription to set the end date"))},null,8,ue)]),e("div",be,[e("div",{class:"col-lg-4",onClick:s[8]||(s[8]=a=>t.setType("month"))},[e("input",{type:"radio",class:"btn-check",value:"month",checked:t.activeItem.payment_type=="month",name:"payment_type"},null,8,he),e("label",xe,[h(u,{type:"server"}),e("span",ve,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:n(t.translate("Month"))},null,8,fe),e("span",{class:"text-muted fw-semibold fs-6",textContent:n(t.translate("Subscribe for month"))},null,8,pe)])])]),e("div",{class:"col-lg-4",onClick:s[9]||(s[9]=a=>t.setType("quarter"))},[e("input",{type:"radio",class:"btn-check",value:"quarter",checked:t.activeItem.payment_type=="quarter",name:"payment_type"},null,8,ye),e("label",ge,[h(u,{type:"server"}),e("span",ke,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:n(t.translate("Quarter"))},null,8,Ce),e("span",{class:"text-muted fw-semibold fs-6",textContent:n(t.translate("Subscribe for quarter"))},null,8,we)])])]),e("div",{class:"col-lg-4",onClick:s[10]||(s[10]=a=>t.setType("year"))},[e("input",{type:"radio",class:"btn-check",value:"year",checked:t.activeItem.payment_type=="year",name:"payment_type"},null,8,Ie),e("label",Se,[h(u,{type:"server"}),e("span",Te,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:n(t.translate("Year"))},null,8,Pe),e("span",{class:"text-muted fw-semibold fs-6",textContent:n(t.translate("Subscribe for year"))},null,8,ze)])])])])]),e("div",Le,[e("label",{class:"nui-label w-full pb-2 px-5 block font-semibold text-lg",textContent:n(t.translate("Route type"))},null,8,We),e("div",Ve,[e("label",{class:"d-flex flex-stack mb-5 cursor-pointer",onClick:s[12]||(s[12]=a=>t.activeItem.daily_trips=2)},[e("span",Ee,[e("span",Ue,[e("span",Oe,[h(u,{type:"map-pin"})])]),e("span",je,[e("span",{class:"fw-bold fs-6",textContent:n(t.translate("Double trips"))},null,8,De),e("span",{class:"fs-7 text-muted",textContent:n(t.translate("Two trips per day going and return"))},null,8,qe)])]),e("span",Ae,[y(e("input",{class:"form-check-input","onUpdate:modelValue":s[11]||(s[11]=a=>t.activeItem.daily_trips=a),type:"radio",name:"daily_trips",value:"2"},null,512),[[F,t.activeItem.daily_trips]])])]),e("label",{class:"d-flex flex-stack mb-5 cursor-pointer",onClick:s[14]||(s[14]=a=>t.activeItem.daily_trips=1)},[e("span",Re,[e("span",Fe,[e("span",Ne,[h(u,{type:"map-pin"})])]),e("span",Be,[e("span",{class:"fw-bold fs-6",textContent:n(t.translate("Single trip"))},null,8,Je),e("span",{class:"fs-7 text-muted",textContent:n(t.translate("One trip per day going"))},null,8,Me)])]),e("span",Qe,[y(e("input",{class:"form-check-input","onUpdate:modelValue":s[13]||(s[13]=a=>t.activeItem.daily_trips=a),type:"radio",name:"daily_trips",value:"1"},null,512),[[F,t.activeItem.daily_trips]])])]),Ge,e("div",Ke,[e("div",Ye,[e("div",He,[e("div",null,[e("label",{class:"col-lg-4 py-4 required font-semibold fs-6",textContent:n(t.translate("Start date"))},null,8,Xe),y(e("input",{onChange:s[15]||(s[15]=(...a)=>t.dateChanged&&t.dateChanged(...a)),required:!0,autocomplete:"off",name:"params[start_date]",class:"form-control form-control-solid",placeholder:t.translate("Start date"),type:"date","onUpdate:modelValue":s[16]||(s[16]=a=>t.activeItem.start_date=a)},null,40,Ze),[[W,t.activeItem.start_date]])]),e("div",null,[e("label",{class:"col-lg-4 py-4 required font-semibold fs-6",textContent:n(t.translate("End date"))},null,8,$e),y(e("input",{required:!0,autocomplete:"off",disabled:!0,name:"params[end_date]",class:"form-control form-control-solid",placeholder:t.translate("End date"),type:"date","onUpdate:modelValue":s[17]||(s[17]=a=>t.activeItem.end_date=a)},null,8,ts),[[W,t.activeItem.end_date]])])])])])])]),e("p",es,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:s[18]||(s[18]=a=>t.activeTab="Confirm"),textContent:n(t.translate("Next"))},null,8,ss)])])):d("",!0),t.activeTab=="Confirm"?(o(),i("div",{class:"max-w-xl mx-auto",key:t.activeTab},[e("div",as,[e("div",ns,[t.activeItem&&t.activeItem.model?(o(),i("div",os,[e("div",ls,[e("img",{src:t.activeItem.model.picture,alt:"image",class:"p-3"},null,8,is)]),e("span",{class:"",textContent:n(t.activeItem.model.name)},null,8,cs)])):d("",!0),e("label",rs,[h(b,{class:"flex-end",item:t.activeItem,column:{key:"is_paid",column_type:"checkbox",hide_text:!0}},null,8,["item"]),e("div",ds,[e("span",{class:"badge badge-light fw-bold me-auto px-4 py-3",textContent:n(t.activeItem.is_paid?"Paid":"Unpaid")},null,8,_s)])])]),t.activeItem.package?(o(),i("div",ms,[e("div",{class:"fs-3 fw-bold text-gray-900",textContent:n(t.activeItem.package.name)},null,8,us),e("p",{class:"text-gray-500 fw-semibold fs-5 mt-1 mb-7",textContent:n(t.activeItem.package.description)},null,8,bs),e("div",hs,[h(u,{type:"map"}),e("div",xs,[e("div",vs,[e("h4",{class:"text-gray-900 fw-bold",textContent:n(t.activeItem.daily_trips==1?t.translate("Single trip"):t.translate("Double trips"))},null,8,fs),e("div",{class:"fs-6 text-gray-700 pe-7",textContent:n(t.activeItem.daily_trips==1?t.translate("Single trip per day"):t.translate("Two trips per day going and return"))},null,8,ps)])])]),e("div",ys,[e("div",{class:R(["rounded h-4px",t.progressWidth()<100?"bg-info":"bg-success"]),role:"progressbar",style:tt({width:t.progressWidth()+"%"})},null,6)]),t.activeItem.package?(o(),i("div",gs,[e("div",ks,[h(u,{type:"credit-card"}),e("div",Cs,[e("span",{class:"w-full block font-semibold",textContent:n(t.translate("Total cost"))},null,8,ws),e("span",{class:"w-full block",textContent:n(t.totalCost())},null,8,Is)])]),t.activeItem.start_date?(o(),i("div",Ss,[e("span",{class:"w-full block font-semibold",textContent:n(t.translate("Start date"))},null,8,Ts),e("span",{class:"w-full block",textContent:n(t.activeItem.start_date)},null,8,Ps)])):d("",!0),t.activeItem.end_date?(o(),i("div",zs,[e("div",Ls,[e("span",{class:"w-full block font-semibold",textContent:n(t.translate("End date"))},null,8,Ws),e("span",{class:"w-full block",textContent:n(t.activeItem.end_date)},null,8,Vs)])])):d("",!0)])):d("",!0)])):d("",!0)]),e("p",Es,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:s[19]||(s[19]=(...a)=>t.savePackageSubscription&&t.savePackageSubscription(...a)),textContent:n(t.translate("Submit"))},null,8,Us)])])):d("",!0)])])])])])}const js=N(xt,[["render",Os]]),Ds=w(()=>I(()=>import("./map-ZcxsnK9W.min.js"),__vite__mapDeps([0,1,2,3]))),qs=w(()=>I(()=>import("./form_field-hbsiF_Lt.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),As={components:{datatabble:B,maps:Ds,delete_icon:J,car_icon:M,route_icon:Q,form_field:qs,editable_map_location:K,subscription_wizard:js,employee_location_wizard:_t,usertype_picker:rt},name:"Package Subscriptions",setup(m){const s=m.conf.url+m.path+"?load=json",r=x({}),t=x({}),c=x(!1),p=x(!1),f=x("subscription_id"),u=x("");m.subscripion_id&&(u.value=m.subscripion_id);const b=()=>{c.value=!1};return(()=>{lt(s).then(C=>{t.value=JSON.parse(JSON.stringify(C)),f.value=t.value.columns[1].value})})(),{setType:C=>{r.value.usertype=C,p.value=!1,c.value=!0},url:s,content:t,activeItem:r,translate:G,showWizard:c,showOptions:p,closeSide:b,addLocationWizard:()=>{r.value={},p.value=!0},handleAction:(C,V)=>{switch(C){case"view":break;case"edit":r.value=V,c.value=!0;break;case"delete":it("subscription_id",V,"PackageSubscription.delete");break;case"close":showEditSide.value=!1,r.value={};break}},searchField:f,searchValue:u}},props:["path","lang","system_setting","setting","setting","conf","auth","subscripion_id","currency"]},Rs={class:"w-full flex overflow-auto"},Fs={key:0,class:"w-full relative"},Ns={key:4,class:""},Bs={class:"card"},Js={class:"card-body"},Ms={class:"card-px text-center pt-15 pb-15"},Qs=["textContent"],Gs=["textContent"],Ks=["textContent"],Ys=e("div",{class:"text-center pb-15 px-5"},[e("img",{src:"/uploads/img/start-wizard.png",alt:"",class:"mx-auto mw-100 h-200px h-sm-325px"})],-1),Hs={key:5,class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},Xs={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},Zs=["textContent"],$s=["textContent"],ta=e("hr",{class:"mt-2"},null,-1),ea={class:"w-full bg-white"},sa={class:"card-header align-items-center py-5 gap-2 gap-md-5 w-full flex"},aa={class:"card-title"},na={class:"d-flex align-items-center position-relative my-1"},oa=ct('<div id="kt_ecommerce_report_views_export" class="d-none"><div class="dt-buttons btn-group flex-wrap"><button class="btn btn-secondary buttons-copy buttons-html5" tabindex="0" aria-controls="kt_ecommerce_report_views_table" type="button"><span>Copy</span></button> <button class="btn btn-secondary buttons-excel buttons-html5" tabindex="0" aria-controls="kt_ecommerce_report_views_table" type="button"><span>Excel</span></button> <button class="btn btn-secondary buttons-csv buttons-html5" tabindex="0" aria-controls="kt_ecommerce_report_views_table" type="button"><span>CSV</span></button> <button class="btn btn-secondary buttons-pdf buttons-html5" tabindex="0" aria-controls="kt_ecommerce_report_views_table" type="button"><span>PDF</span></button></div></div>',1),la={class:"card-toolbar flex-row-fluid justify-content-end gap-5"},ia={class:"w-150px"},ca=["textContent","value"],ra={key:0,class:"w-full flex gap-4"},da=["src"],_a=["textContent"],ma=["onClick"],ua=["onClick"];function ba(m,s,r,t,c,p){const f=g("subscription_wizard"),u=g("usertype_picker"),b=g("vue-feather"),a=g("delete_icon"),k=g("datatabble");return o(),i("div",Rs,[t.content&&r.auth?(o(),i("div",Fs,[t.showWizard&&t.activeItem.usertype=="employee"?(o(),L(f,{onCallback:s[0]||(s[0]=_=>t.showWizard=!1),currency:r.currency,usertype:t.activeItem.usertype,userslist:t.content.employees,key:t.showWizard,packages:t.content.packages,system_setting:r.system_setting,item:t.activeItem,setting:r.setting},null,8,["currency","usertype","userslist","packages","system_setting","item","setting"])):d("",!0),t.showWizard&&t.activeItem.usertype=="supervisor"?(o(),L(f,{onCallback:s[1]||(s[1]=_=>t.showWizard=!1),currency:r.currency,usertype:t.activeItem.usertype,userslist:t.content.supervisors,key:t.showWizard,packages:t.content.packages,system_setting:r.system_setting,item:t.activeItem,setting:r.setting},null,8,["currency","usertype","userslist","packages","system_setting","item","setting"])):d("",!0),t.showWizard&&t.activeItem.usertype=="student"?(o(),L(f,{onCallback:s[2]||(s[2]=_=>t.showWizard=!1),currency:r.currency,usertype:t.activeItem.usertype,userslist:t.content.students,key:t.showWizard,packages:t.content.packages,system_setting:r.system_setting,item:t.activeItem,setting:r.setting},null,8,["currency","usertype","userslist","packages","system_setting","item","setting"])):d("",!0),!t.showWizard&&t.showOptions?(o(),L(u,{alias:t.translate("Subscribe to package"),disable_parents:!0,disable_supervisor:!0,key:t.showOptions,auth:r.auth,item:t.activeItem,onCallback:t.setType},null,8,["alias","auth","item","onCallback"])):d("",!0),!t.showWizard&&!t.showOptions&&t.content.items&&!t.content.items.length?(o(),i("div",Ns,[e("div",Bs,[e("div",Js,[e("div",Ms,[e("h2",{class:"fs-2x fw-bold mb-0",textContent:n(t.content.title)},null,8,Qs),e("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:n(t.translate("Add your first package subscription using this below wizard"))},null,8,Gs),e("a",{textContent:n(t.translate("add_new")),onClick:s[3]||(s[3]=(..._)=>t.addLocationWizard&&t.addLocationWizard(..._)),href:"javascript:;",class:"text-white btn btn-primary er fs-6 px-8 py-4"},null,8,Ks)]),Ys])])])):d("",!0),t.content.items&&t.content.items.length&&!t.showWizard?(o(),i("main",Hs,[e("div",Xs,[e("h1",{class:"font-bold text-lg w-full",textContent:n(t.content.title)},null,8,Zs),t.showWizard?d("",!0):(o(),i("a",{key:0,href:"javascript:;",class:"uppercase p-2 mx-2 text-center text-white w-32 rounded-lg bg-danger",onClick:s[4]||(s[4]=(..._)=>t.addLocationWizard&&t.addLocationWizard(..._)),textContent:n(t.translate("add_new"))},null,8,$s))]),ta,e("div",ea,[e("div",sa,[e("div",aa,[e("div",na,[y(e("input",{type:"text","onUpdate:modelValue":s[5]||(s[5]=_=>t.searchValue=_),"data-kt-ecommerce-order-filter":"search",class:"form-control form-control-solid w-250px ps-12",placeholder:"Search Report"},null,512),[[W,t.searchValue]])]),oa]),e("div",la,[e("div",ia,[y(e("select",{"onUpdate:modelValue":s[6]||(s[6]=_=>t.searchField=_),class:"form-select form-select-solid select2-hidden-accessible","data-control":"select2","data-hide-search":"true","data-placeholder":"Rating","data-kt-ecommerce-order-filter":"rating","data-select2-id":"select2-data-9-zple",tabindex:"-1","aria-hidden":"true","data-kt-initialized":"1"},[(o(!0),i(E,null,U(t.content.columns,_=>(o(),i("option",{textContent:n(_.text),value:_.value},null,8,ca))),256))],512),[[ot,t.searchField]])])])]),t.content.columns?(o(),L(k,{key:0,"search-field":t.searchField,"search-value":t.searchValue,alternating:"",class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":t.translate("is_rtl"),"fixed-checkbox":"",headers:t.content.columns,items:t.content.items},{"item-name":O(_=>[_.model?(o(),i("div",ra,[e("img",{src:_.model.picture,class:"w-8 h-8 rounded-full"},null,8,da),e("span",{textContent:n(_.model.name)},null,8,_a)])):d("",!0)]),"item-edit":O(_=>[_.not_editable?d("",!0):(o(),i("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:S=>t.handleAction("edit",_)},[h(b,{class:"w-5",type:"edit"})],8,ma))]),"item-delete":O(_=>[_.not_removeable?d("",!0):(o(),i("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:S=>t.handleAction("delete",_)},[h(a,{class:"w-5"})],8,ua))]),_:1},8,["search-field","search-value","body-text-direction","headers","items"])):d("",!0)])])):d("",!0)])):d("",!0)])}const ka=N(As,[["render",ba]]);export{ka as default};
