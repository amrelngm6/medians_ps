import{_ as O,D as R,G,e as q,y as N,z as U,f as v,t as B,r as p,o as l,c as i,i as e,a as h,F as L,k as z,x as K,j as a,H as T,I as V,h as d,P as I,d as g,b as y,n as H,J as Q,K as Y,g as D,A as j,m as X,p as Z}from"./index.min.js";import{e as F}from"./editable_map_location-V2kNDwZy.min.js";import{r as $}from"./route_map-_lbnF5M5.min.js";import{e as tt}from"./routeLocationWizard-Ak0pkAec.min.js";import"./index.es-08gBEiIi.min.js";import"./tooltip-s9Xa9pgY.min.js";const et=g(()=>y(()=>import("./map-XRH7L8ya.min.js"),__vite__mapDeps([0,1,2,3]))),nt=g(()=>y(()=>import("./side-form-create-H9wI8WKg.min.js"),__vite__mapDeps([4,2,3,5,6]))),st=g(()=>y(()=>import("./side-form-update-04MNAfTa.min.js"),__vite__mapDeps([7,2,3,5,6,8,9,1]))),at=g(()=>y(()=>import("./form_field-67i-FqgB.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),ot={components:{datatabble:R,SideFormCreate:nt,SideFormUpdate:st,maps:et,close_icon:G,delete_icon:q,car_icon:N,route_icon:U,form_field:at,editable_map_location:F,route_map:$},name:"PackageSubscriptions",emits:["callback"],setup(_,{emit:s}){const m=v(!1),t=v({}),u=v("Student"),k=v({}),f=v(["Student","Package","Subscription","Confirm"]),c=v("");_.item&&(t.value=_.item);const n=()=>{var o=new URLSearchParams;let b=JSON.parse(JSON.stringify(t.value)),C=Object.keys(b),w,W;for(let S=0;S<C.length;S++)w=C[S],W=typeof b[w]=="object"?JSON.stringify(b[w]):b[w],o.append("params["+w+"]",W);let A=b.subscription_id>0?"update":"create";o.append("type","PackageSubscription."+A),H(o,"/api/"+A).then(S=>{Q(S)})},x=()=>{s("callback")},r=()=>Y(["name","description","single_cost_month","single_cost_querter","single_cost_year","double_cost_month","double_cost_quarter","double_cost_year","status"],t),P=o=>{let b=!!o.name.toLowerCase().includes(c.value.toLowerCase()),C=b||!!o.mobile.toLowerCase().includes(c.value.toLowerCase());return C||!!o.parent.name.toLowerCase().includes(c.value.toLowerCase())},J=o=>{t.value.model_id=o.student_id,t.value.model=o,t.value.user_type="student",u.value="Package",c.value=null},M=()=>{for(let o=0;o<_.allstudents.length;o++)_.allstudents[o].show=c.value.trim()?P(_.allstudents[o]):1},E=o=>{let b=!!o.name.toLowerCase().includes(c.value.toLowerCase());return b||!!o.description.toLowerCase().includes(c.value.toLowerCase())};return{findPackage:()=>{if(_.packages)for(let o=0;o<_.packages.length;o++)_.packages[o].show=c.value.trim()?E(_.packages[o]):1},checkSimilarPackage:E,setPackage:o=>{t.value.package_id=o.package_id,t.value.package=o,u.value="Confirm",c.value=null},findStudent:M,setStudent:J,checkSimilarStudent:P,progressWidth:r,showEditSide:m,content:k,fillable:f,activeItem:t,activeTab:u,translate:B,savePackageSubscription:n,searchText:c,back:x}},props:["conf","path","system_setting","business_setting","setting","item","allstudents","packages"]},lt={class:"w-full flex overflow-auto"},it={class:"w-full relative"},ct={class:"card w-full py-10"},rt={class:"w-full stepper stepper-links"},dt={class:"stepper-nav justify-content-center py-2 mb-10"},_t=["onClick"],mt=["textContent"],bt={class:"w-full"},ut={class:"text-center mb-13"},xt=["textContent"],ht=["textContent"],vt={class:"w-100 relative mb-5",autocomplete:"off"},ft=["placeholder"],pt={class:"w-full students"},gt={class:"symbol symbol-35px symbol-circle me-5"},yt=["src"],kt={class:"fw-semibold w-full"},Ct=["textContent"],wt=["textContent"],St=["onClick","textContent"],Tt={class:"symbol symbol-35px symbol-circle me-5"},Pt=["src"],Lt={class:"fw-semibold w-full"},zt=["textContent"],It=["textContent"],jt={class:"text-center"},Et=["textContent"],Wt={class:"card-body pt-0"},At={class:"settings-form"},Vt={class:"max-w-xl mb-6 mx-auto row"},Dt={class:"text-center mb-13"},Ot=["textContent"],Rt=["textContent"],qt={class:"w-100 relative mb-5",autocomplete:"off"},Nt=["placeholder"],Ut={class:"w-full"},Bt={class:"fw-semibold w-full"},Ft=["textContent"],Jt=["textContent"],Mt=["onClick","textContent"],Gt={class:"fw-semibold w-full"},Kt=["textContent"],Ht=["textContent"],Qt={class:"text-center"},Yt=["textContent"],Xt={class:"relative py-4"},Zt=["textContent"],$t={class:"row"},te={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},ee={class:"d-block fw-semibold text-start"},ne=["textContent"],se=["textContent"],ae={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},oe={class:"d-block fw-semibold text-start"},le=["textContent"],ie=["textContent"],ce={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},re={class:"d-block fw-semibold text-start"},de=["textContent"],_e=["textContent"],me={class:"text-center mt-10"},be=["textContent"],ue={class:"text-center mt-10"},xe=["textContent"];function he(_,s,m,t,u,k){const f=p("close_icon"),c=p("vue-feather");return l(),i("div",lt,[e("div",it,[h(f,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:t.back},null,8,["onClick"]),e("div",ct,[e("div",rt,[e("div",dt,[(l(!0),i(L,null,z(t.fillable,n=>(l(),i("div",{class:"stepper-item",onClick:x=>t.activeTab=n},[e("h3",{class:K([t.activeTab==n?"text-danger border-danger":"text-gray-400 border-transparent","cursor-pointer pb-3 px-2 stepper-title text-md border-b"]),textContent:a(n)},null,10,mt)],8,_t))),256))]),e("div",bt,[t.activeTab=="Student"?(l(),i("div",{class:"",key:t.activeTab},[(l(),i("div",{class:"card-body pt-0 mx-auto max-w-xl",key:_.students},[e("div",ut,[e("h1",{class:"mb-3",textContent:a(t.translate("Find student"))},null,8,xt),e("div",{class:"text-gray-400 font-semibold",textContent:a(t.translate("Search by name, parent name or contact number"))},null,8,ht)]),e("div",vt,[h(c,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),T(e("input",{type:"text",onChange:s[0]||(s[0]=(...n)=>t.findStudent&&t.findStudent(...n)),"onUpdate:modelValue":s[1]||(s[1]=n=>t.searchText=n),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name, parent name")},null,40,ft),[[V,t.searchText]])]),t.searchText?(l(!0),i(L,{key:0},z(m.allstudents,n=>(l(),i("div",pt,[n.show?(l(),i("a",{href:"javascript:;",key:n.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",gt,[e("img",{alt:"Pic",src:n.picture},null,8,yt)]),e("div",kt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:a(n.name)},null,8,Ct),e("span",{class:"block text-gray-500 text-sm",textContent:a(n.mobile)},null,8,wt)]),e("span",{onClick:x=>t.setStudent(n),class:"btn btn-danger btn-sm text-white",textContent:a(t.translate("Choose"))},null,8,St)])):d("",!0)]))),256)):d("",!0),t.activeItem.model?(l(),i("a",{href:"javascript:;",key:t.activeItem.model,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",Tt,[e("img",{alt:"Pic",src:t.activeItem.model.picture},null,8,Pt)]),e("div",Lt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:a(t.activeItem.model.name)},null,8,zt),e("span",{class:"block text-gray-500 text-sm",textContent:a(t.activeItem.model.mobile)},null,8,It)])])):d("",!0)])),e("p",jt,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:s[2]||(s[2]=n=>t.activeTab="Pickup location"),textContent:a(t.translate("Pickup location"))},null,8,Et)])])):d("",!0),t.activeTab=="Package"?(l(),i("div",{class:"",key:t.activeTab},[e("div",Wt,[e("div",At,[e("div",Vt,[(l(),i("div",{class:"card-body pt-0 mx-auto max-w-xl",key:m.packages},[e("div",Dt,[e("h1",{class:"mb-3",textContent:a(t.translate("Find Package"))},null,8,Ot),e("div",{class:"text-gray-400 font-semibold",textContent:a(t.translate("Search by name or description"))},null,8,Rt)]),e("div",qt,[h(c,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),T(e("input",{type:"text",onChange:s[3]||(s[3]=(...n)=>t.findPackage&&t.findPackage(...n)),"onUpdate:modelValue":s[4]||(s[4]=n=>t.searchText=n),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name, parent name")},null,40,Nt),[[V,t.searchText]])]),t.searchText?(l(!0),i(L,{key:0},z(m.packages,n=>(l(),i("div",Ut,[n&&n.show?(l(),i("a",{href:"javascript:;",key:n.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",Bt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:a(n.name)},null,8,Ft),e("span",{class:"block text-gray-500 text-sm",textContent:a(n.description)},null,8,Jt)]),e("span",{onClick:x=>t.setPackage(n),class:"btn btn-danger btn-sm text-white",textContent:a(t.translate("Choose"))},null,8,Mt)])):d("",!0)]))),256)):d("",!0),t.activeItem.package?(l(),i("a",{href:"javascript:;",key:t.activeItem.package,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1 gap-4"},[h(c,{type:"map",class:"w-3"}),e("div",Gt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:a(t.activeItem.package.name)},null,8,Kt),e("span",{class:"block text-gray-500 text-sm truncate",textContent:a(t.activeItem.package.description)},null,8,Ht)])])):d("",!0)]))])])]),e("p",Qt,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:s[5]||(s[5]=n=>t.activeTab="Subscription"),textContent:a(t.translate("Subscription"))},null,8,Yt)])])):d("",!0),t.activeTab=="Subscription"?(l(),i("div",{class:"",key:t.activeTab},[e("div",Xt,[e("label",{class:"nui-label w-full pb-2 block font-semibold text-lg",textContent:a(t.translate("Business type"))},null,8,Zt),e("div",$t,[e("div",{class:"col-lg-4",onClick:s[7]||(s[7]=n=>_.setType("month"))},[T(e("input",{type:"radio",class:"btn-check",value:"month","onUpdate:modelValue":s[6]||(s[6]=n=>t.activeItem.payment_type=n),name:"payment_type"},null,512),[[I,t.activeItem.payment_type]]),e("label",te,[h(c,{type:"book-open"}),e("span",ee,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:a(t.translate("Month"))},null,8,ne),e("span",{class:"text-muted fw-semibold fs-6",textContent:a(t.translate("Subscribe for 1 month"))},null,8,se)])])]),e("div",{class:"col-lg-4",onClick:s[9]||(s[9]=n=>_.setType("quarter"))},[T(e("input",{type:"radio",class:"btn-check",value:"quarter","onUpdate:modelValue":s[8]||(s[8]=n=>t.activeItem.payment_type=n),name:"payment_type"},null,512),[[I,t.activeItem.payment_type]]),e("label",ae,[h(c,{type:"book-open"}),e("span",oe,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:a(t.translate("Quarter"))},null,8,le),e("span",{class:"text-muted fw-semibold fs-6",textContent:a(t.translate("Subscribe for quarter"))},null,8,ie)])])]),e("div",{class:"col-lg-4",onClick:s[11]||(s[11]=n=>_.setType("year"))},[T(e("input",{type:"radio",class:"btn-check",value:"year","onUpdate:modelValue":s[10]||(s[10]=n=>t.activeItem.payment_type=n),name:"payment_type"},null,512),[[I,t.activeItem.payment_type]]),e("label",ce,[h(c,{type:"book-open"}),e("span",re,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:a(t.translate("Year"))},null,8,de),e("span",{class:"text-muted fw-semibold fs-6",textContent:a(t.translate("Subscribe for full year"))},null,8,_e)])])])])]),e("p",me,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:s[12]||(s[12]=n=>t.activeTab="Confirm"),textContent:a(t.translate("Next"))},null,8,be)])])):d("",!0),t.activeTab=="Confirm"?(l(),i("div",{class:"w-full mx-auto",key:t.activeTab},[e("p",ue,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:s[13]||(s[13]=(...n)=>t.savePackageSubscription&&t.savePackageSubscription(...n)),textContent:a(t.translate("Submit"))},null,8,xe)])])):d("",!0)])])])])])}const ve=O(ot,[["render",he]]),fe=g(()=>y(()=>import("./map-XRH7L8ya.min.js"),__vite__mapDeps([0,1,2,3]))),pe=g(()=>y(()=>import("./form_field-67i-FqgB.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),ge={components:{datatabble:R,maps:fe,delete_icon:q,car_icon:N,route_icon:U,form_field:pe,editable_map_location:F,student_subscription_wizard:ve,employee_location_wizard:tt},name:"Routes",setup(_){const s=_.conf.url+_.path+"?load=json",m=v({}),t=v({}),u=v(!1),k=()=>{u.value=!1};return(()=>{X(s).then(x=>{t.value=JSON.parse(JSON.stringify(x))})})(),{url:s,content:t,activeItem:m,translate:B,showWizard:u,closeSide:k,addLocationWizard:()=>{m.value={},u.value=!0},handleAction:(x,r)=>{switch(x){case"view":break;case"edit":m.value=r,u.value=!0;break;case"delete":Z("location_id",r,"RouteLocation.delete");break;case"close":showEditSide.value=!1,m.value={};break}}}},props:["path","lang","system_setting","business_setting","setting","conf","auth"]},ye={class:"w-full flex overflow-auto"},ke={key:0,class:"w-full relative"},Ce={key:1,class:""},we={class:"card"},Se={class:"card-body"},Te={class:"card-px text-center pt-15 pb-15"},Pe=["textContent"],Le=["textContent"],ze=["textContent"],Ie={class:"text-center pb-15 px-5"},je=["src"],Ee={key:2,class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},We={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},Ae=["textContent"],Ve=["textContent"],De=e("hr",{class:"mt-2"},null,-1),Oe={class:"w-full bg-white"},Re={key:0,class:"w-full flex gap-4"},qe=["src"],Ne=["textContent"],Ue=["onClick"],Be=["onClick"];function Fe(_,s,m,t,u,k){const f=p("student_subscription_wizard"),c=p("vue-feather"),n=p("delete_icon"),x=p("datatabble");return l(),i("div",ye,[t.content&&m.auth?(l(),i("div",ke,[t.showWizard&&m.auth.business&&m.auth.business.type=="school"?(l(),D(f,{onCallback:s[0]||(s[0]=r=>t.showWizard=!1),packages:t.content.packages,allstudents:t.content.students,key:t.showWizard,system_setting:m.system_setting,item:t.activeItem,business_setting:m.business_setting},null,8,["packages","allstudents","system_setting","item","business_setting"])):d("",!0),!t.showWizard&&t.content.items&&!t.content.items.length?(l(),i("div",Ce,[e("div",we,[e("div",Se,[e("div",Te,[e("h2",{class:"fs-2x fw-bold mb-0",textContent:a(t.content.title)},null,8,Pe),e("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:a(t.translate("Add your first pickup using this below wizard"))},null,8,Le),e("a",{textContent:a(t.translate("add_new")),onClick:s[1]||(s[1]=(...r)=>t.addLocationWizard&&t.addLocationWizard(...r)),href:"javascript:;",class:"text-white btn btn-primary er fs-6 px-8 py-4"},null,8,ze)]),e("div",Ie,[e("img",{src:"/src/asset/img/1.png",alt:"",class:"mx-auto mw-100 h-200px h-sm-325px"},null,8,je)])])])])):d("",!0),t.content.items&&t.content.items.length&&!t.showWizard?(l(),i("main",Ee,[e("div",We,[e("h1",{class:"font-bold text-lg w-full",textContent:a(t.content.title)},null,8,Ae),t.showWizard?d("",!0):(l(),i("a",{key:0,href:"javascript:;",class:"uppercase p-2 mx-2 text-center text-white w-32 rounded-lg bg-danger",onClick:s[2]||(s[2]=(...r)=>t.addLocationWizard&&t.addLocationWizard(...r)),textContent:a(t.translate("add_new"))},null,8,Ve))]),De,e("div",Oe,[t.content.columns?(l(),D(x,{key:0,class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":t.translate("lang")=="ar"?"right":"left","fixed-checkbox":"",headers:t.content.columns,items:t.content.items},{"item-name":j(r=>[r.model?(l(),i("div",Re,[e("img",{src:r.model.picture,class:"w-8 h-8 rounded-full"},null,8,qe),e("span",{textContent:a(r.model.name)},null,8,Ne)])):d("",!0)]),"item-edit":j(r=>[r.not_editable?d("",!0):(l(),i("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:P=>t.handleAction("edit",r)},[h(c,{class:"w-5",type:"edit"})],8,Ue))]),"item-delete":j(r=>[r.not_removeable?d("",!0):(l(),i("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:P=>t.handleAction("delete",r)},[h(n,{class:"w-5"})],8,Be))]),_:1},8,["body-text-direction","headers","items"])):d("",!0)])])):d("",!0)])):d("",!0)])}const Ze=O(ge,[["render",Fe]]);export{Ze as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["map-XRH7L8ya.min.js","index.es-08gBEiIi.min.js","index.min.js","index.min.css","side-form-create-H9wI8WKg.min.js","Field-I8Ovvng_.min.js","Field.min.css","side-form-update-04MNAfTa.min.js","form_field-67i-FqgB.min.js","editable_map_location-V2kNDwZy.min.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
