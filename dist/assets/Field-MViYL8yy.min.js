import{M as u,L as v}from"./Manager-g1q-MF-p.min.js";import{_ as b,f as c,r as g,o as n,c as o,g as i,k as d,h,l as w}from"./index.min.js";const p={name:"vue-medialibrary-field",components:{"vue-medialibrary-manager":u,"app-medialibrary-loader":v},props:{name:{type:String,required:!1},api_url:{type:String,required:!1},filepath:{type:Object|String,required:!1,default:()=>({})},types:{type:Object,required:!1,default:()=>({images:!0,files:!0})},filetypes:{type:Array,required:!1,default:()=>[]},helper:{type:String,required:!1}},emits:["input"],setup(s,{emit:a}){const l=c(),e=c(),r=c(),f=()=>{l.value=!l.value},_=y=>{l.value=!1,e.value=y.file_name,r.value=y.file_name,m()},t=()=>{r.value=e.value=null,a("input",null)},m=()=>{a("input",e)};return r.value=s.filepath,e.value=r.value,{insert:_,clear:t,change:m,showLibrary:f,showManager:l,file:e,content:r}}},k={class:"media-library-field"},L=["name","value"],S={key:1,class:"media-library-field__selector"},q={class:"media-library-field__selected__inner"},x={class:"w-full"},C=["src"],M={class:"block w-full"},B={class:"w-full flex",style:{margin:"2rem -0.5rem 0 -0.5rem"}},F={style:{"flex-grow":"1",padding:"0 0.5rem"}},j={style:{"flex-grow":"1",padding:"0 0.5rem"}};function A(s,a,l,e,r,f){const _=g("vue-medialibrary-manager");return n(),o("div",null,[i("div",k,[e.file?(n(),o("input",{key:e.file,name:l.name,type:"hidden",value:e.file},null,8,L)):d("",!0),e.content==null||e.content==""?(n(),o("div",S,[i("span",{onClick:a[0]||(a[0]=(...t)=>e.showLibrary&&e.showLibrary(...t)),class:"media-library-field__selector__button"},"Attach "+h(l.types.images&&l.types.files?"file":l.types.images&&!l.types.files?"image":"file"),1)])):d("",!0),e.file&&e.content?(n(),o("div",{key:e.file,class:"media-library-field__selected"},[i("div",q,[i("div",x,[i("div",null,[i("img",{src:e.file,style:{width:"auto",height:"auto","max-width":"100px"}},null,8,C)]),i("div",M,[i("div",B,[i("div",F,[i("span",{class:"media-library-field__selected__inner__details__button font-semibold",onClick:a[1]||(a[1]=(...t)=>e.showLibrary&&e.showLibrary(...t))},"Edit")]),i("div",j,[i("button",{onClick:a[2]||(a[2]=(...t)=>e.clear&&e.clear(...t)),class:"media-library-field__selected__inner__details__button media-library-field__selected__inner__details__button--delete"},"Remove")])])])])])])):d("",!0)]),e.showManager?(n(),w(_,{key:e.showManager,api_url:l.api_url,filetypes:l.filetypes,types:l.types,selected:s.value,selectable:!0,onClose:a[3]||(a[3]=t=>(e.showManager=!1,e.file=e.content=s.value)),onSelect:e.insert,onFailToFind:e.clear},null,8,["api_url","filetypes","types","selected","onSelect","onFailToFind"])):d("",!0)])}const O=b(p,[["render",A]]);export{O as f};
