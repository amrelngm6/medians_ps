import{_ as U,D as H,e as Q,y as X,z as Y,f as c,t as Z,r as p,o as d,c as y,g as w,h as u,i as h,j as P,A,a as V,d as C,b as x,m as $,s as ee,p as te}from"./index.min.js";const se=C(()=>x(()=>import("./map-OGlwx9xa.min.js"),__vite__mapDeps([0,1,2,3]))),ae=C(()=>x(()=>import("./trip_page-o4OZqEmS.min.js"),__vite__mapDeps([4,2,3,5,1]))),ne=C(()=>x(()=>import("./usertype_picker-iazfrFKo.min.js"),__vite__mapDeps([6,2,3]))),oe=C(()=>x(()=>import("./privateTripWizard-kcgh8-ti.min.js"),__vite__mapDeps([7,2,3,8,1,9]))),le={components:{datatabble:H,maps:se,delete_icon:Q,car_icon:X,route_icon:Y,trip_page:ae,usertype_picker:ne,private_trip_wizard:oe},name:"Private trips",setup(a){const l=a.conf.url+a.path+"?load=json",I=c(null),e=c({}),i=c({}),k=c({}),m=c([]),v=c(""),z=c(!1),f=c(!1),b=c(!1),n=c(!1),L=()=>{};(()=>{$(l).then(t=>{i.value=JSON.parse(JSON.stringify(t)),B(i.value.items),O()})})();const B=t=>{for(let s=0;s<t.length;s++)j(t[s])},N=(t,s)=>{e.value=t;for(let r=0;r<i.value.items.length;r++)i.value.items[r].selected=!1;i.value.items[s].selected=!0;let o,g,J=a.conf.url+"uploads/images/yellow_pin.gif",q=a.conf.url+"uploads/images/blue_pin.gif",G=a.conf.url+"uploads/images/car.svg",K=a.conf.url+"uploads/images/destination.svg",_=[],D={lat:parseFloat(t.vehicle.last_latitude),lng:parseFloat(t.vehicle.last_longitude)};_[0]={drag:!0,status:"waiting",icon:G,origin:D,destination:D};for(let r=0;r<t.pickup_locations.length;r++)o=t.pickup_locations[r],g=r?t.pickup_locations[r-1].location:o.location,_[r+1]={status:o.status,icon:o.status=="waiting"?q:J,origin:{lat:parseFloat(g.latitude),lng:parseFloat(g.longitude)},destination:{lat:parseFloat(o.location.latitude),lng:parseFloat(o.location.longitude)}};return _[_.length]={drag:!0,icon:K,origin:{lat:0,lng:0},destination:{lat:parseFloat(t.route.latitude),lng:parseFloat(t.route.longitude)}},k.value=_[0].destination,m.value=_,_},F=async()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{k.value={lat:t.coords.latitude,lng:t.coords.longitude}},t=>{ee(t.message,5e3)})};F();const O=()=>{for(let t=0;t<i.value.items.length;t++)i.value.items[t].active=v.value.trim()?E(i.value.items[t]):1},E=t=>{let s=!!t.student_name.toLowerCase().includes(v.value.toLowerCase());return s||!!t.location_name.toLowerCase().includes(v.toLowerCase())},R=t=>{e.value=t,T("edit",t)},S=(t,s,o)=>{e.value=o,e.value.latitude=o.destination.lat,e.value.longitude=o.destination.lng,T("edit",e.value)},j=t=>(t.icon=a.conf.url+"uploads/images/blue_pin.gif",t.origin=t.destination={lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},t.drag=!0,t),T=(t,s)=>{switch(t){case"view":break;case"edit":W(s,!0);break;case"delete":te("destination_id",s,"Destination.delete");break}},M=(t,s)=>{let o=[];for(let g=0;g<t.length;g++)t[g].status==s;return o},W=(t,s=!0)=>{f.value=s,e.value=t};return{showWizard:b,setType:t=>{e.value.usertype=t,n.value=!1,b.value=!0},showOptions:n,editFields:W,showTrip:f,activeTrip:I,locations:m,url:l,content:i,center:k,activeItem:e,callback:()=>{W(null,!1),f.value=!1},filterLocations:M,translate:Z,clickMarker:S,updateMarker:R,setLocationsMarkers:N,checkSimilar:E,searchTextChanged:O,searchText:v,getUserLocation:F,collapsed:z,closeSide:L,handleAction:T}},props:["path","lang","setting","conf","auth"]},ie={class:"w-full overflow-auto"},re={key:4,class:"w-full relative"},ce={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},de=["textContent"],ue=["textContent"],ge=h("hr",{class:"mt-2"},null,-1),_e={class:"w-full bg-white"},me=["src"],ve=["onClick"],he=["onClick"];function fe(a,l,I,e,i,k){const m=p("private_trip_wizard"),v=p("usertype_picker"),z=p("vue-feather"),f=p("delete_icon"),b=p("datatabble");return d(),y("div",ie,[e.showWizard&&e.activeItem.usertype=="employee"?(d(),w(m,{onCallback:l[0]||(l[0]=n=>e.showWizard=!1),usertype:e.activeItem.usertype,userslist:e.content.employees,key:e.showWizard,packages:e.content.packages,system_setting:a.system_setting,item:e.activeItem,business_setting:a.business_setting},null,8,["usertype","userslist","packages","system_setting","item","business_setting"])):u("",!0),e.showWizard&&e.activeItem.usertype=="supervisor"?(d(),w(m,{onCallback:l[1]||(l[1]=n=>e.showWizard=!1),usertype:e.activeItem.usertype,userslist:e.content.supervisors,key:e.showWizard,packages:e.content.packages,system_setting:a.system_setting,item:e.activeItem,business_setting:a.business_setting},null,8,["usertype","userslist","packages","system_setting","item","business_setting"])):u("",!0),e.showWizard&&e.activeItem.usertype=="student"?(d(),w(m,{onCallback:l[2]||(l[2]=n=>e.showWizard=!1),usertype:e.activeItem.usertype,userslist:e.content.students,key:e.showWizard,packages:e.content.packages,system_setting:a.system_setting,item:e.activeItem,business_setting:a.business_setting},null,8,["usertype","userslist","packages","system_setting","item","business_setting"])):u("",!0),!e.showWizard&&e.showOptions?(d(),w(v,{key:e.showOptions,auth:I.auth,item:e.activeItem,onCallback:e.setType},null,8,["auth","item","onCallback"])):u("",!0),!e.showWizard&&e.content&&!e.showTrip?(d(),y("div",re,[e.content?(d(),y("main",{key:e.content.items,class:"flex-1 overflow-x-hidden overflow-y-auto w-full"},[h("div",ce,[h("h1",{class:"font-bold text-lg w-full",textContent:P(e.content.title)},null,8,de),h("a",{href:"javascript:;",class:"uppercase p-2 mx-2 text-center text-white w-32 rounded-lg bg-danger",onClick:l[3]||(l[3]=n=>e.showOptions=!0),textContent:P(e.translate("add_new"))},null,8,ue)]),ge,h("div",_e,[e.content.columns?(d(),w(b,{key:0,class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":e.translate("lang")=="ar"?"right":"left","fixed-checkbox":"",headers:e.content.columns,items:e.content.items},{"item-picture":A(n=>[h("img",{src:n.picture,class:"w-8 h-8 rounded-full"},null,8,me)]),"item-details":A(n=>[n.not_editable?u("",!0):(d(),y("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:L=>e.handleAction("edit",n)},[V(z,{class:"w-5",type:"edit"})],8,ve))]),"item-delete":A(n=>[n.not_removeable?u("",!0):(d(),y("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:L=>e.handleAction("delete",n)},[V(f,{class:"w-5"})],8,he))]),_:1},8,["body-text-direction","headers","items"])):u("",!0)])])):u("",!0)])):u("",!0)])}const be=U(le,[["render",fe]]);export{be as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["map-OGlwx9xa.min.js","index.es-4z_hVD90.min.js","index.min.js","index.min.css","trip_page-o4OZqEmS.min.js","help-QMf3rqBc.min.js","usertype_picker-iazfrFKo.min.js","privateTripWizard-kcgh8-ti.min.js","editable_map_location-jkqEoD2B.min.js","tooltip-s9Xa9pgY.min.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
