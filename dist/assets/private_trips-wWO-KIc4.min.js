import{_ as G,D as K,e as U,y as H,z as Q,f as d,t as X,r as f,o as r,c as p,g as y,h as u,i as b,j as Y,A as W,a as x,d as B,b as E,m as Z,s as $,p as ee}from"./index.min.js";const te=B(()=>E(()=>import("./map-OGlwx9xa.min.js"),__vite__mapDeps([0,1,2,3]))),se=B(()=>E(()=>import("./trip_page-o4OZqEmS.min.js"),__vite__mapDeps([4,2,3,5,1]))),ae={components:{datatabble:K,maps:te,delete_icon:U,car_icon:H,route_icon:Q,trip_page:se},name:"Destinations",setup(s){const c=s.conf.url+s.path+"?load=json",w=d(null),t=d({}),l=d({}),k=d({}),_=d([]),v=d(""),C=d(!1),h=d(!1),I=()=>{};(()=>{Z(c).then(e=>{l.value=JSON.parse(JSON.stringify(e)),z(l.value.items),T()})})();const z=e=>{for(let a=0;a<e.length;a++)P(e[a])},N=(e,a)=>{t.value=e;for(let i=0;i<l.value.items.length;i++)l.value.items[i].selected=!1;l.value.items[a].selected=!0;let n,g,M=s.conf.url+"uploads/images/yellow_pin.gif",R=s.conf.url+"uploads/images/blue_pin.gif",J=s.conf.url+"uploads/images/car.svg",q=s.conf.url+"uploads/images/destination.svg",m=[],O={lat:parseFloat(e.vehicle.last_latitude),lng:parseFloat(e.vehicle.last_longitude)};m[0]={drag:!0,status:"waiting",icon:J,origin:O,destination:O};for(let i=0;i<e.pickup_locations.length;i++)n=e.pickup_locations[i],g=i?e.pickup_locations[i-1].location:n.location,m[i+1]={status:n.status,icon:n.status=="waiting"?R:M,origin:{lat:parseFloat(g.latitude),lng:parseFloat(g.longitude)},destination:{lat:parseFloat(n.location.latitude),lng:parseFloat(n.location.longitude)}};return m[m.length]={drag:!0,icon:q,origin:{lat:0,lng:0},destination:{lat:parseFloat(e.route.latitude),lng:parseFloat(e.route.longitude)}},k.value=m[0].destination,_.value=m,m},A=async()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{k.value={lat:e.coords.latitude,lng:e.coords.longitude}},e=>{$(e.message,5e3)})};A();const T=()=>{for(let e=0;e<l.value.items.length;e++)l.value.items[e].active=v.value.trim()?D(l.value.items[e]):1},D=e=>{let a=!!e.student_name.toLowerCase().includes(v.value.toLowerCase());return a||!!e.location_name.toLowerCase().includes(v.toLowerCase())},S=e=>{t.value=e,F("edit",e)},V=(e,a,n)=>{t.value=n,t.value.latitude=n.destination.lat,t.value.longitude=n.destination.lng,F("edit",t.value)},P=e=>(e.icon=s.conf.url+"uploads/images/blue_pin.gif",e.origin=e.destination={lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},e.drag=!0,e),F=(e,a)=>{switch(e){case"view":break;case"edit":L(a,!0);break;case"delete":ee("destination_id",a,"Destination.delete");break}},j=(e,a)=>{let n=[];for(let g=0;g<e.length;g++)e[g].status==a;return n},L=(e,a=!0)=>{h.value=a,t.value=e};return{editFields:L,showTrip:h,activeTrip:w,locations:_,url:c,content:l,center:k,activeItem:t,callback:()=>{L(null,!1),h.value=!1},filterLocations:j,translate:X,clickMarker:V,updateMarker:S,setLocationsMarkers:N,checkSimilar:D,searchTextChanged:T,searchText:v,getUserLocation:A,collapsed:C,closeSide:I,handleAction:F}},props:["path","lang","setting","conf","auth"]},ne={class:"w-full flex overflow-auto"},oe={key:4,class:"w-full relative"},le={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},ie=["textContent"],re=b("hr",{class:"mt-2"},null,-1),ce={class:"w-full bg-white"},ue=["src"],de=["onClick"],ge=["onClick"];function me(s,c,w,t,l,k){const _=f("subscription_wizard"),v=f("usertype_picker"),C=f("vue-feather"),h=f("delete_icon"),I=f("datatabble");return r(),p("div",ne,[s.showWizard&&t.activeItem.usertype=="employee"?(r(),y(_,{onCallback:c[0]||(c[0]=o=>s.showWizard=!1),usertype:t.activeItem.usertype,userslist:t.content.employees,key:s.showWizard,packages:t.content.packages,system_setting:s.system_setting,item:t.activeItem,business_setting:s.business_setting},null,8,["usertype","userslist","packages","system_setting","item","business_setting"])):u("",!0),s.showWizard&&t.activeItem.usertype=="supervisor"?(r(),y(_,{onCallback:c[1]||(c[1]=o=>s.showWizard=!1),usertype:t.activeItem.usertype,userslist:t.content.supervisors,key:s.showWizard,packages:t.content.packages,system_setting:s.system_setting,item:t.activeItem,business_setting:s.business_setting},null,8,["usertype","userslist","packages","system_setting","item","business_setting"])):u("",!0),s.showWizard&&t.activeItem.usertype=="student"?(r(),y(_,{onCallback:c[2]||(c[2]=o=>s.showWizard=!1),usertype:t.activeItem.usertype,userslist:t.content.students,key:s.showWizard,packages:t.content.packages,system_setting:s.system_setting,item:t.activeItem,business_setting:s.business_setting},null,8,["usertype","userslist","packages","system_setting","item","business_setting"])):u("",!0),!s.showWizard&&s.showOptions?(r(),y(v,{key:s.showOptions,auth:w.auth,item:t.activeItem},null,8,["auth","item"])):u("",!0),t.content&&!t.showTrip?(r(),p("div",oe,[t.content?(r(),p("main",{key:t.content.items,class:"flex-1 overflow-x-hidden overflow-y-auto w-full"},[b("div",le,[b("h1",{class:"font-bold text-lg w-full",textContent:Y(t.content.title)},null,8,ie)]),re,b("div",ce,[t.content.columns?(r(),y(I,{key:0,class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":t.translate("lang")=="ar"?"right":"left","fixed-checkbox":"",headers:t.content.columns,items:t.content.items},{"item-picture":W(o=>[b("img",{src:o.picture,class:"w-8 h-8 rounded-full"},null,8,ue)]),"item-details":W(o=>[o.not_editable?u("",!0):(r(),p("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:z=>t.handleAction("edit",o)},[x(C,{class:"w-5",type:"edit"})],8,de))]),"item-delete":W(o=>[o.not_removeable?u("",!0):(r(),p("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:z=>t.handleAction("delete",o)},[x(h,{class:"w-5"})],8,ge))]),_:1},8,["body-text-direction","headers","items"])):u("",!0)])])):u("",!0)])):u("",!0)])}const he=G(ae,[["render",me]]);export{he as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["map-OGlwx9xa.min.js","index.es-4z_hVD90.min.js","index.min.js","index.min.css","trip_page-o4OZqEmS.min.js","help-QMf3rqBc.min.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
