import{_ as g,r as h,o as l,c as i,a as e,t as o,F as _,i as m,d as c,j as f,k as w,n as b,l as y}from"./index-UtHAgJD4.js";const k={name:"Users",data(){return{url:this.conf.url+this.path+"?load=json",content:{title:this.__("users"),roles:[],users:[]},activeItem:null,showAddSide:!1,showEditSide:!1,showLoader:!1}},props:["path","lang","setting","conf","auth"],mounted(){this.load()},methods:{isMaster(){return this.auth&&this.auth.role_id==1},setActiveStatus(s){this.showLoader=!0,s.active=!s.active,this.showLoader=!1;var r=new URLSearchParams;r.append("type","User.updateStatus"),r.append("params",JSON.stringify(s)),this.$root.$children[0].handleRequest(r,"/api/handle").then(d=>{this.$alert(d.result).then(()=>{})})},load(){this.showLoader=!0,this.$parent.handleGetRequest(this.url).then(s=>{this.setValues(s),this.showLoader=!1})},setValues(s){return this.content=JSON.parse(JSON.stringify(s)),this},__(s){return this.$root.$children[0].__(s)}}},C={class:"w-full flex overflow-auto",style:{height:"85vh","z-index":"9999"}},S={class:"w-full"},L={key:0,class:"flex-1 overflow-x-hidden overflow-y-auto w-full"},A={class:"px-4 mb-6 py-4 rounded-lg shadow-lg bg-white dark:bg-gray-700 flex w-full"},N=["textContent"],U=e("hr",{class:"mt-2"},null,-1),I={class:"w-full flex gap gap-6"},V={key:0,class:"w-full"},B={class:"w-full pb-4"},E={class:"pb-b flex gap-4"},j=["textContent"],z=["textContent"],J=e("hr",null,null,-1),O={class:"w-full grid lg:grid-cols-3 gap gap-6"},R={class:"flex-shrink-0"},q={class:"relative"},F=e("div",{class:"absolute inset-0 rounded-full shadow-inner","aria-hidden":"true"},null,-1),P=["src"],T={class:"flex-grow w-full"},D={class:"text-lg font-medium text-gray-900"},G=["textContent"],M=["textContent"],H={class:"text-center"},K=["onClick"],Q=["textContent"],W=["textContent","onClick"];function X(s,r,d,Y,t,a){const p=h("side-form-create"),x=h("side-form-update");return l(),i("div",C,[e("div",S,[t.content&&!t.showLoader?(l(),i("main",L,[e("div",A,[e("h1",{class:"font-bold text-lg w-full",textContent:o(t.content.title)},null,8,N),e("a",{href:"javascript:;",class:"menu-dark uppercase p-2 mx-2 text-center text-white w-32 rounded bg-gradient-purple hover:bg-red-800",onClick:r[0]||(r[0]=u=>{t.showLoader=!0,t.showAddSide=!0,t.showLoader=!1,t.activeItem={}})},o(a.__("add_new")),1)]),U,e("div",I,[t.content.users?(l(),i("div",V,[(l(!0),i(_,null,m(t.content.roles,u=>(l(),i("div",B,[e("h3",E,[e("span",{textContent:o(u.name)},null,8,j),w(),e("span",{class:"pt-2 text-sm text-muted",textContent:o(u.id>1?a.__("Theese users can manage your account only"):"")},null,8,z)]),J,e("div",O,[s.user&&s.user.role_id==u.id?(l(!0),i(_,{key:0},m(t.content.users,n=>(l(),i("div",{key:n,class:"mb-2 rounded-lg flex items-center space-x-4 gap gap-4 bg-white p-4"},[e("div",R,[e("div",q,[F,e("img",{class:"relative w-12 h-12 rounded-full",src:n.photo,alt:"User avatar"},null,8,P)])]),e("div",T,[e("div",D,o(n.first_name)+" "+o(n.last_name),1),e("div",{class:"text-sm font-medium text-gray-500",textContent:o(n.phone)},null,8,G),e("div",{class:"text-sm font-medium text-gray-500",textContent:o(n.email)},null,8,M)]),e("div",H,[e("div",{class:"flex gap gap-2 cursor-pointer",onClick:v=>a.setActiveStatus(n)},[e("span",{class:b([n.active?"":"bg-inverse-dark","mt-1 bg-red-400 block h-4 relative rounded-full w-8"]),style:{direction:"ltr"}},[e("a",{class:"absolute bg-white block h-4 relative right-0 rounded-full w-4",style:y({left:n.active?"16px":0})},null,4)],2),e("span",{textContent:o(n.active?a.__("Active"):a.__("Pending")),class:"font-semibold inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"},null,8,Q)],8,K),n.id==d.auth.id||d.auth.role_id==1?(l(),i("span",{key:0,textContent:o(a.__("edit")),class:"hover:bg-purple-800 hover:text-gray-100 my-2 inline-flex items-center px-6 py-1 rounded-full text-xs pb-2 font-medium bg-blue-100 text-blue-800 cursor-pointer",onClick:v=>{t.showEditSide=!0,t.showAddSide=!1,t.activeItem=n}},null,8,W)):c("",!0)])]))),128)):c("",!0)])]))),256))])):c("",!0),t.showAddSide&&t.content&&t.content.fillable?(l(),f(p,{key:1,conf:d.conf,model:"User.create",columns:t.content.fillable,class:"col-md-3"},null,8,["conf","columns"])):c("",!0),t.showEditSide&&!t.showAddSide?(l(),f(x,{key:2,conf:d.conf,model:"User.update",item:t.activeItem,model_id:t.activeItem.id,index:"id",columns:t.content.fillable,class:"col-md-3"},null,8,["conf","item","model_id","columns"])):c("",!0)])])):c("",!0)])])}const $=g(k,[["render",X]]);export{$ as default};
