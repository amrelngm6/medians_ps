const __vite__fileDeps=["side-form-create-DwwFhpNu.min.js","index.min.js","index.min.css","Field-DGSjrbSi.min.js","Field.min.css","side-form-update-Ctrua2Pz.min.js","form_field-SijP9cSO.min.js","editable_map_location-C3m7cXEh.min.js","index.es-BqyRJkQ3.min.js","map-B_qpUccu.min.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as N,r as n,U as $,a as k,o as a,c as i,y as j,O as P,g as R,F as G,f as q,d as e,b as d,D as H,E as tt,x as K,G as Z,aj as et,ak as B,t as A,al as ot,e as o,i as nt,q as V,u as z,l as st,K as at,M as lt,H as it,w as J,v as ct,N as dt,j as rt,s as U,J as _t,L as ut,k as mt}from"./index.min.js";import{e as ht}from"./editable_map_location-C3m7cXEh.min.js";import{O as vt,L as ft,j as pt}from"./index.es-BqyRJkQ3.min.js";import{t as Q}from"./tooltip-B6mCVe86.min.js";const gt={components:{GoogleMap:vt,Polyline:ft,CustomMarker:pt},emits:["markerclicked"],setup(u,{emit:_}){const r=n(null),t=n(12),y=n([]),m=n([]),h=n([]),C=n({strokeColor:"#000000",strokeOpacity:.8,strokeWeight:2}),c=n(u.item),f=(v,w,g)=>{let p=JSON.parse(JSON.stringify(v));return p.icon=u.conf.url+"uploads/images/"+g,p.marker_position=w,p.drag=!1,p};(()=>{y.value=[f(c.value,{lat:c.value.start_latitude,lng:c.value.start_longitude},"yellow_pin.gif"),f(c.value,{lat:c.value.end_latitude,lng:c.value.end_longitude},"destination.svg")]})();const b=n(null),S=n(null),E=()=>{b.value=new window.google.maps.DirectionsService,S.value=new window.google.maps.DirectionsRenderer({draggable:!0,map,panel:document.getElementById("panel")}),D(mapOrigin.value,mapDestination.value,b.value,S.value)},D=(v,w,g,p)=>{g.route({origin:v,destination:w,travelMode:window.google.maps.TravelMode.DRIVING,avoidTolls:!0}).then(x=>{console.log(x);const T=O(x);h.value=T,m.value={path:T,geodesic:!0,strokeColor:"#000",strokeOpacity:.9,strokeWeight:2}}).catch(x=>{alert("Could not display directions due to: "+x)})},O=v=>{const w=v.routes[0].overview_polyline;return window.google.maps.geometry.encoding.decodePath(w).map(p=>({lat:p.lat(),lng:p.lng()}))};return $(()=>{r.value={lat:c.value.start_latitude,lng:c.value.start_longitude},E()}),{markerClicked:v=>{_("markerclicked",v)},markers:y,mapCenter:r,mapZoom:t,polylinePath:m,routeCoordinates:h,polylineOptions:C}},props:["system_setting","item","conf"]},xt={class:"w-full overflow-auto"},yt={style:{"text-align":"center"}},Ct=["src"];function bt(u,_,r,t,y,m){const h=k("Polyline"),C=k("CustomMarker"),c=k("GoogleMap");return a(),i("div",xt,[t.mapCenter?(a(),j(c,{"api-key":r.system_setting.google_map_api,ref:"mapRef",center:t.mapCenter,key:`${t.mapCenter.lat},${t.mapCenter.lng}`,options:{zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,rotateControl:!0,fullscreenControl:!0},zoom:t.mapZoom,style:{width:"100%",height:"calc(100vh - 100px)"}},{default:P(()=>[R(h,{options:t.polylinePath},null,8,["options"]),(a(!0),i(G,null,q(t.markers,(f,s)=>(a(),j(C,{options:{position:f.marker_position},onClick:b=>t.markerClicked(f)},{default:P(()=>[e("div",yt,[e("img",{src:f.icon,width:"40",class:"rouned-full",height:"40",style:{"margin-top":"8px"}},null,8,Ct)])]),_:2},1032,["options","onClick"]))),256))]),_:1},8,["api-key","center","zoom"])):d("",!0)])}const wt=N(gt,[["render",bt]]),kt=V(()=>z(()=>import("./side-form-create-DwwFhpNu.min.js"),__vite__mapDeps([0,1,2,3,4]))),It=V(()=>z(()=>import("./side-form-update-Ctrua2Pz.min.js"),__vite__mapDeps([5,1,2,3,4,6,7,8]))),St=V(()=>z(()=>import("./form_field-SijP9cSO.min.js"),__vite__mapDeps([6,1,2,3,4,7,8]))),Pt={components:{datatabble:H,SideFormCreate:kt,SideFormUpdate:It,close_icon:tt,delete_icon:K,car_icon:Z,form_field:St,static_map:wt,dashboard_card_white:et,tooltip:Q},name:"Route trips",emits:["callback"],setup(u,{emit:_}){const r=n(!1),t=n(!1),y=n(!1),m=n({}),h=n("Info"),C=n({}),c=n({}),f=n(["Info","Confirm"]);u.item?(m.value=u.item,m.value.date=u.item.date??B()):m.value.date=B();const s=u.userslist?n(u.userslist):n([]),b=()=>{r.value=!0;var I=new URLSearchParams;let v=JSON.parse(JSON.stringify(m.value)),w=Object.keys(v),g,p;for(let x=0;x<w.length;x++)g=w[x],p=typeof v[g]=="object"?JSON.stringify(v[g]):v[g],I.append("params["+g+"]",p);I.append("type","BusinessApplicant.update"),st(I,"/api/update").then(x=>{r.value=!1,at(x)})};return{loader:r,users:s,progressWidth:()=>lt(["driver_id","status"],m),showAddSide:t,showEditSide:y,content:C,fillable:f,center:c,activeItem:m,activeTab:h,rejectItem:()=>{window.confirm(A("Confirm and reject this member"))&&(m.value.status="rejected",b())},confirmItem:()=>{window.confirm(A("Confirm and add subscription to your business"))&&(m.value.status="approved",b())},translate:A,formatCustomTime:ot,saveItem:b,back:()=>{_("callback")}}},props:["conf","path","system_setting","business_setting","setting","item","userslist","usertype","drivers","vehicles"]},Ot={class:"w-full overflow-auto"},Mt=e("img",{class:"m-auto w-500px",src:"/uploads/loader.gif"},null,-1),Rt=[Mt],jt={class:"w-full relative"},Vt={class:"card w-full py-10"},zt={class:"w-full stepper stepper-links"},Et={key:0,class:"w-full"},Tt={class:""},At={class:"flex w-full gap-6"},Dt={key:0,class:"w-full"},Nt={class:"card w-full"},Lt={class:"card-header"},Wt={key:0,class:"card-title m-0 flex gap-4"},Ft={class:"bg-light overflow-hidden rounded-full symbol-50px w-50px"},Bt=["src"],Jt={class:"w-full"},Ut=["textContent"],Gt=["textContent"],qt={class:"card-body"},Ht={class:"table-responsive table-card"},Kt={class:"table table-borderless align-middle mb-0 w-full"},Zt={key:0},Qt=["textContent"],Xt={class:"py-2"},Yt=["textContent"],$t=["textContent"],te=["textContent"],ee=["textContent"],oe=["textContent"],ne=["textContent"],se=["textContent"],ae=["textContent"],le=["textContent"],ie={class:"font-bold py-2"},ce=["textContent"],de=e("td",{class:"font-bold py-2"},[e("hr")],-1),re=["textContent"],_e=["textContent"],ue=["textContent"],me=["textContent"],he={class:"font-bold py-2"},ve=["textContent"],fe=e("td",{class:"font-bold py-2"},[e("hr")],-1),pe=["textContent"],ge=["textContent"],xe=["textContent"],ye=["textContent"],Ce=["textContent"],be=["textContent"],we={key:0,class:"mx-auto flex gap-6 w-300px py-2"},ke={class:"text-center"},Ie=["textContent"],Se={class:"text-center"},Pe=["textContent"];function Oe(u,_,r,t,y,m){const h=k("close_icon"),C=k("static_map");return a(),i("div",Ot,[t.loader?(a(),i("div",{key:t.loader,class:"bg-white fixed w-full h-full top-0 left-0",style:{"z-index":"99999",opacity:".9"}},Rt)):d("",!0),e("div",jt,[R(h,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:t.back},null,8,["onClick"]),e("div",Vt,[e("div",zt,[t.activeItem?(a(),i("div",Et,[e("div",Tt,[(a(),i("div",{class:"card-body pt-0 mx-auto",key:t.activeItem},[e("div",At,[t.activeItem.model?(a(),i("div",Dt,[t.activeItem.model.route_location?(a(),j(C,{system_setting:r.system_setting,item:t.activeItem.model.route_location,key:t.activeItem,conf:r.conf},null,8,["system_setting","item","conf"])):d("",!0)])):d("",!0),e("div",Nt,[e("div",Lt,[t.activeItem.model?(a(),i("div",Wt,[e("div",Ft,[e("img",{src:t.activeItem.model.picture,alt:"image",class:"h-10 w-10"},null,8,Bt)]),e("div",Jt,[e("h5",{class:"text-sm mb-0",textContent:o(t.translate("Customer Info"))},null,8,Ut),e("div",{class:"font-bold",textContent:o(t.activeItem.model.name)},null,8,Gt)])])):d("",!0)]),e("div",qt,[e("div",Ht,[e("table",Kt,[t.activeItem.model?(a(),i("tbody",Zt,[e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("ID"))},null,8,Qt),e("td",Xt,[nt("#"),e("span",{id:"t-no",textContent:o(t.activeItem.applicant_id)},null,8,Yt)])]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("First Name"))},null,8,$t),e("td",{id:"t-client",class:"py-2",textContent:o(t.activeItem.model.name)},null,8,te)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("Mobile"))},null,8,ee),e("td",{id:"d-date",class:"py-2",textContent:o(t.activeItem.model.mobile)},null,8,oe)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("email"))},null,8,ne),e("td",{id:"d-date",class:"py-2",textContent:o(t.activeItem.model.email)},null,8,se)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("gender"))},null,8,ae),e("td",{id:"d-date",class:"py-2",textContent:o(t.activeItem.model.gender)},null,8,le)]),e("tr",null,[e("td",ie,[e("span",{class:"font-bold text-lg",textContent:o(t.translate("Application info"))},null,8,ce)]),de]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("Message"))},null,8,re),e("td",{id:"d-date",class:"py-2 font-bold",textContent:o(t.activeItem.message)},null,8,_e)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("Status"))},null,8,ue),e("td",{id:"d-date",class:"py-2 font-bold",textContent:o(t.activeItem.status)},null,8,me)]),e("tr",null,[e("td",he,[e("span",{class:"font-bold text-lg",textContent:o(t.translate("Subscription info"))},null,8,ve)]),fe]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("Package"))},null,8,pe),t.activeItem.subscription&&t.activeItem.subscription.package?(a(),i("td",{key:0,id:"d-date",class:"py-2 font-bold",textContent:o(t.activeItem.subscription.package.name)},null,8,ge)):d("",!0)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("total_cost"))},null,8,xe),t.activeItem.subscription?(a(),i("td",{key:0,id:"d-date",class:"py-2 font-bold",textContent:o(t.activeItem.subscription.total_cost)},null,8,ye)):d("",!0)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("payment_type"))},null,8,Ce),t.activeItem.subscription?(a(),i("td",{key:0,id:"d-date",class:"py-2 font-bold",textContent:o(t.activeItem.subscription.payment_type)},null,8,be)):d("",!0)])])):d("",!0)])])])])])])),t.activeItem.status=="new"?(a(),i("div",we,[e("div",ke,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:_[0]||(_[0]=(...c)=>t.confirmItem&&t.confirmItem(...c)),textContent:o(t.translate("Approve"))},null,8,Ie)]),e("div",Se,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center rounded-lg border-1 border-dark text-dark",onClick:_[1]||(_[1]=(...c)=>t.rejectItem&&t.rejectItem(...c)),textContent:o(t.translate("Reject"))},null,8,Pe)])])):d("",!0)])])):d("",!0)])])])])}const Me=N(Pt,[["render",Oe]]),Re=V(()=>z(()=>import("./map-B_qpUccu.min.js"),__vite__mapDeps([9,8,1,2]))),je=V(()=>z(()=>import("./form_field-SijP9cSO.min.js"),__vite__mapDeps([6,1,2,3,4,7,8]))),Ve={components:{datatabble:H,maps:Re,delete_icon:K,car_icon:Z,route_icon:it,form_field:je,editable_map_location:ht,model_applicant_wizard:Me,tooltip:Q},name:"Routes",setup(u){const _=u.conf.url+u.path+"?load=json",r=n(!1),t=n({}),y=n({}),m=n({}),h=n(!1),C=n(["Info","Time","Start location","End location","model"]),c=n([]),f=n(!1),s=n(""),b=n(""),S=n("#"),E=()=>{r.value=!1};(()=>{rt(_).then(l=>{y.value=JSON.parse(JSON.stringify(l)),S.value=y.value.columns[1].value})})();const O=async()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(l=>{t.value.start_latitude=l.coords.latitude,t.value.start_longitude=l.coords.longitude,t.value.end_latitude=l.coords.latitude,t.value.end_longitude=l.coords.longitude},l=>{t.value.start_latitude=30.06,t.value.start_longitude=31.21,t.value.end_latitude=30.06,t.value.end_longitude=31.21,U(l.message)}):U("location error")},I=()=>{t.value={},h.value=!0,O()},v=async()=>{let l=s.value.length>3?await _t(u.system_setting.google_map_api,s.value,u.business_setting.country):"";c.value=l.predictions},w=async l=>{t.value.start_latitude=l.lat(),t.value.start_longitude=l.lng(),t.value.start_address=await ut(l.lat(),l.lng())},g=l=>{t.value.end_latitude=l.lat(),t.value.end_longitude=l.lng()},p=(l,M,L)=>{},x=(l,M)=>{switch(l){case"view":break;case"edit":t.value=M,h.value=!0;break;case"delete":mt("applicant_id",M,"BusinessApplicant.delete");break;case"close":r.value=!1,t.value={};break}},T=n([]),X=async l=>{t.value.start_address=l.description;const M=new google.maps.places.PlacesService(document.createElement("div"));let L=l.place_id;M.getDetails({placeId:L},(W,Y)=>{if(Y===google.maps.places.PlacesServiceStatus.OK&&W){const F=W.geometry.location;t.value.start_longitude=F.lng(),t.value.start_latitude=F.lat(),c.value=[],f.value=!1}else console.error("Failed to fetch place details")})};return{showTip:n({}),setPlaceMarker:X,showPlaceSearch:f,startPlaceChanged:v,start_placeSearch:s,places:c,waypoints:T,showEditSide:r,url:_,content:y,fillable:C,center:m,activeItem:t,searchValue:b,searchField:S,translate:A,clickMarker:p,updateStartMarker:w,updateEndMarker:g,getUserLocation:O,showWizard:h,closeSide:E,addRouteWizard:I,handleAction:x}},props:["path","lang","system_setting","business_setting","setting","conf","auth","currency"]},ze={class:"w-full flex overflow-auto"},Ee={key:0,class:"w-full relative"},Te={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},Ae=["textContent"],De={class:"notice d-flex bg-light-warning rounded border-warning border border-dashed mb-12 p-6"},Ne={class:"d-flex flex-stack flex-grow-1"},Le={class:"fw-semibold"},We=["textContent"],Fe={class:"fs-6 text-gray-700"},Be=["innerHTML"],Je={key:1,class:""},Ue={class:"card"},Ge={class:"card-body"},qe={class:"card-px text-center pt-15 pb-15"},He=["textContent"],Ke=["textContent"],Ze=e("div",{class:"text-center pb-15 px-5"},[e("img",{src:"/uploads/img/start-wizard.png",alt:"",class:"mx-auto mw-100 h-200px h-sm-325px"})],-1),Qe={key:2,class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},Xe={class:"w-full bg-white"},Ye={class:"card-header align-items-center py-5 gap-2 gap-md-5 w-full flex px-4"},$e={class:"card-title"},to={class:"d-flex align-items-center position-relative my-1"},eo={class:"card-toolbar flex-row-fluid justify-content-end gap-5"},oo={class:"w-150px"},no=["textContent","value"],so=["src"],ao=["textContent"],lo=["textContent"],io=["textContent"],co=["onClick"],ro=["onClick"];function _o(u,_,r,t,y,m){const h=k("vue-feather"),C=k("model_applicant_wizard"),c=k("delete_icon"),f=k("datatabble");return a(),i("div",ze,[t.content?(a(),i("div",Ee,[e("div",Te,[e("h1",{class:"font-bold text-lg w-full",textContent:o(t.content.title)},null,8,Ae)]),e("div",De,[R(h,{type:"alert-octagon",class:"ki-duotone ki-information fs-2tx text-warning me-4"}),e("div",Ne,[e("div",Le,[e("h4",{class:"text-gray-900 fw-bold",textContent:o(t.translate("Important"))},null,8,We),e("div",Fe,[e("div",{innerHTML:t.translate("Users applicants note")},null,8,Be)])])])]),t.showWizard?(a(),j(C,{onCallback:_[0]||(_[0]=s=>t.showWizard=!1),currency:r.currency,key:t.showWizard,system_setting:r.system_setting,item:t.activeItem,business_setting:r.business_setting,conf:r.conf},null,8,["currency","system_setting","item","business_setting","conf"])):d("",!0),!t.showWizard&&t.content.items&&!t.content.items.length?(a(),i("div",Je,[e("div",Ue,[e("div",Ge,[e("div",qe,[e("h2",{class:"fs-2x fw-bold mb-0",textContent:o(t.content.title)},null,8,He),e("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:o(t.translate("Here you can find the sent Users applicantions to join your team"))},null,8,Ke)]),Ze])])])):d("",!0),t.content.items&&!t.showWizard&&t.content.items.length?(a(),i("main",Qe,[e("div",Xe,[e("div",Ye,[e("div",$e,[e("div",to,[J(e("input",{type:"text","onUpdate:modelValue":_[1]||(_[1]=s=>t.searchValue=s),"data-kt-ecommerce-order-filter":"search",class:"form-control form-control-solid w-250px ps-12",placeholder:"Search Report"},null,512),[[ct,t.searchValue]])])]),e("div",eo,[e("div",oo,[J(e("select",{"onUpdate:modelValue":_[2]||(_[2]=s=>t.searchField=s),class:"form-select form-select-solid select2-hidden-accessible","data-control":"select2","data-hide-search":"true","data-placeholder":"Rating","data-kt-ecommerce-order-filter":"rating","data-select2-id":"select2-data-9-zple",tabindex:"-1","aria-hidden":"true","data-kt-initialized":"1"},[(a(!0),i(G,null,q(t.content.columns,s=>(a(),i("option",{textContent:o(s.text),value:s.value},null,8,no))),256))],512),[[dt,t.searchField]])])])]),t.content.columns?(a(),j(f,{key:0,"search-field":t.searchField,"search-value":t.searchValue,alternating:"",class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":t.translate("is_rtl"),"fixed-checkbox":"",headers:t.content.columns,items:t.content.items},{"item-picture":P(s=>[e("img",{src:s.model.picture,class:"w-8 h-8 rounded-full"},null,8,so)]),"item-status":P(s=>[s.status=="approved"?(a(),i("span",{key:0,class:"bg-success px-2 py-1 rounded-lg text-white",textContent:o(s.status)},null,8,ao)):d("",!0),s.status=="rejected"?(a(),i("span",{key:1,class:"bg-danger px-2 py-1 rounded-lg text-white",textContent:o(s.status)},null,8,lo)):d("",!0),s.status=="new"?(a(),i("span",{key:2,class:"bg-info px-2 py-1 rounded-lg text-white",textContent:o(s.status)},null,8,io)):d("",!0)]),"item-edit":P(s=>[s.not_editable?d("",!0):(a(),i("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:b=>t.handleAction("edit",s)},[R(h,{class:"w-5",type:"edit"})],8,co))]),"item-delete":P(s=>[s.not_removeable?d("",!0):(a(),i("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:b=>t.handleAction("delete",s)},[R(c,{class:"w-5"})],8,ro))]),_:1},8,["search-field","search-value","body-text-direction","headers","items"])):d("",!0)])])):d("",!0)])):d("",!0)])}const po=N(Ve,[["render",_o]]);export{po as default};
