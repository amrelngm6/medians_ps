import{O as f,x as v,L as C,$ as w,j as x}from"./index.es-BqyRJkQ3.min.js";import{_ as y,r as i,a as _,o as l,c as h,y as k,O as m,F as M,f as b,d as c,g as B}from"./index.min.js";const N={components:{GoogleMap:f,Marker:v,Polyline:C,InfoWindow:w,CustomMarker:x},name:"Map",emits:["click-marker","update-marker"],emits:["setdriver"],setup(r,{emit:d}){const o=i(null),t=i(null),u=i(10),s=i({}),n=i([]);for(let e=0;e<r.drivers.length;e++){const a=r.drivers[e];n.value[e]={lat:Number(a.vehicle.latitude)??0,lng:Number(a.vehicle.longitude)??0}}return s.value=r.item?{lat:Number(r.item.pickup_latitude),lng:Number(r.item.pickup_longitude)}:n.value[0],{handleZoom:()=>{const e=new window.google.maps.LatLngBounds;n.value.forEach(a=>{e.extend(a)}),s.value=e.getCenter(),t.value.fitBounds(e)},markerClicked:e=>{d("setdriver",e)},zoom:u,map:t,mapRef:o,mapCenter:s,markers:n}},props:["path","lang","setting","conf","auth","item","drivers"]},z={class:"w-full overflow-auto"},L={style:{"text-align":"center"}},G=["src"],O=c("div",{style:{"text-align":"center"}},[c("img",{src:"/uploads/images/yellow_pin.gif",width:"30",class:"",height:"30",style:{"margin-top":"8px"}})],-1);function V(r,d,o,t,u,s){const n=_("CustomMarker"),p=_("GoogleMap");return l(),h("div",z,[(l(),k(p,{"api-key":o.setting.google_map_api,ref:"map",center:t.mapCenter,key:t.mapCenter,options:{zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,rotateControl:!0,fullscreenControl:!0},zoom:t.zoom,style:{width:"100%",height:"calc(100vh -  100px)"}},{default:m(()=>[(l(!0),h(M,null,b(t.markers,(g,e)=>(l(),k(n,{options:{position:g},onClick:a=>t.markerClicked(o.drivers[e])},{default:m(()=>[c("div",L,[c("img",{src:"/app/image.php?h=50&w=50&src="+o.drivers[e].picture,width:"40",class:"rounded-full bg-white",height:"40",style:{"margin-top":"8px"}},null,8,G)])]),_:2},1032,["options","onClick"]))),256)),B(n,{options:{position:{lat:o.item.pickup_latitude,lng:o.item.pickup_longitude}}},{default:m(()=>[O]),_:1},8,["options"])]),_:1},8,["api-key","center","zoom"]))])}const F=y(N,[["render",V]]);export{F as d};
