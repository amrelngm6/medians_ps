import{t as O,_ as U,r as f,o as l,c as i,i as e,j as n,a as u,h as d,D as B,G as $,e as F,y as J,z as M,f as p,F as W,k as E,x as R,H as C,I as L,P as N,B as tt,d as w,b as I,n as et,J as st,K as nt,Q as at,g as z,A as D,m as ot,p as lt}from"./index.min.js";import{e as G}from"./routeLocationWizard-rmqEShD6.min.js";import{e as K}from"./editable_map_location-jkqEoD2B.min.js";import{r as it}from"./route_map-065wsX5m.min.js";import"./tooltip-s9Xa9pgY.min.js";import"./index.es-4z_hVD90.min.js";const ct={components:{datatabble:Vue3EasyDataTable,maps,delete_icon,car_icon,route_icon,form_field,editable_map_location,subscription_wizard,employee_location_wizard:G},name:"Routes",emits:["callback"],setup(m,{emit:s}){const c=m.item;return{setType:b=>{s("callback",b)},activeItem:c,translate:O}},props:["path","lang","system_setting","business_setting","setting","conf","auth","item"]},dt={class:"w-full"},rt={class:"card"},_t={class:"card-body relative"},mt={class:"card-px text-center pt-15 pb-15"},ut=["textContent"],bt=["textContent"],ht={class:"text-center pb-15 px-5"},xt={class:"relative mx-auto max-w-6xl py-4"},pt={class:"w-full flex gap-10"},ft=["checked"],vt={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},yt={class:"d-block fw-semibold text-start"},gt=["textContent"],kt=["textContent"],Ct=["checked"],wt={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},It={class:"d-block fw-semibold text-start"},Tt=["textContent"],St=["textContent"],Pt=["checked"],zt={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},Lt={class:"d-block fw-semibold text-start"},Wt=["textContent"],Et=["textContent"];function Dt(m,s,c,t,b,v){const h=f("vue-feather");return l(),i("div",dt,[e("div",rt,[e("div",_t,[e("div",mt,[e("h2",{class:"fs-2x fw-bold mb-0",textContent:n(t.translate("Choose user type"))},null,8,ut),e("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:n(t.translate("Define the required user type to complete information"))},null,8,bt)]),e("div",ht,[e("div",xt,[e("div",pt,[c.auth&&c.auth.business.type=="school"?(l(),i("div",{key:0,class:"w-full",onClick:s[0]||(s[0]=r=>t.setType("student"))},[e("input",{type:"radio",class:"btn-check",value:"student",checked:t.activeItem.usertype=="student",name:"payment_type"},null,8,ft),e("label",vt,[u(h,{type:"users"}),e("span",yt,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:n(t.translate("Student"))},null,8,gt),e("span",{class:"text-muted fw-semibold fs-6",textContent:n(t.translate("Subscribe for Student"))},null,8,kt)])])])):d("",!0),e("div",{class:"w-full",onClick:s[1]||(s[1]=r=>t.setType("employee"))},[e("input",{type:"radio",class:"btn-check",value:"employee",checked:t.activeItem.usertype=="employee",name:"usertype"},null,8,Ct),e("label",wt,[u(h,{type:"user"}),e("span",It,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:n(t.translate("Employee"))},null,8,Tt),e("span",{class:"text-muted fw-semibold fs-6",textContent:n(t.translate("Add Employee location"))},null,8,St)])])]),e("div",{class:"w-full",onClick:s[2]||(s[2]=r=>t.setType("supervisor"))},[e("input",{type:"radio",class:"btn-check",value:"supervisor",checked:t.activeItem.usertype=="supervisor",name:"usertype"},null,8,Pt),e("label",zt,[u(h,{type:"user-check"}),e("span",Lt,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:n(t.translate("Supervisor"))},null,8,Wt),e("span",{class:"text-muted fw-semibold fs-6",textContent:n(t.translate("Add route supervisor"))},null,8,Et)])])])])])])])])])}const Ot=U(ct,[["render",Dt]]),Ut=w(()=>I(()=>import("./map-OGlwx9xa.min.js"),__vite__mapDeps([0,1,2,3]))),At=w(()=>I(()=>import("./side-form-create-kV2jB1Yb.min.js"),__vite__mapDeps([4,2,3,5,6]))),Vt=w(()=>I(()=>import("./side-form-update-0wjhPvKs.min.js"),__vite__mapDeps([7,2,3,5,6,8,9,1]))),jt=w(()=>I(()=>import("./form_field-7zjdT8gu.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),qt={components:{datatabble:B,SideFormCreate:At,SideFormUpdate:Vt,maps:Ut,close_icon:$,delete_icon:F,car_icon:J,route_icon:M,form_field:jt,editable_map_location:K,route_map:it},name:"PackageSubscriptions",emits:["callback"],setup(m,{emit:s}){const c=p(!1),t=p({}),b=p(m.usertype),v=p({}),h=p([m.usertype,"Package","Subscription","Confirm"]),r=p("");m.item&&(t.value=m.item);const g=()=>{var o=new URLSearchParams;let x=JSON.parse(JSON.stringify(t.value)),T=Object.keys(x),S,j;for(let P=0;P<T.length;P++)S=T[P],j=typeof x[S]=="object"?JSON.stringify(x[S]):x[S],o.append("params["+S+"]",j);let q=x.subscription_id>0?"update":"create";o.append("type","PackageSubscription."+q),et(o,"/api/"+q).then(P=>{st(P)})},a=()=>{s("callback")},y=()=>nt(["model_id","package_id","start_date","payment_type","daily_trips","payment_status"],t),_=o=>{let x=!!o.name.toLowerCase().includes(r.value.toLowerCase()),T=x||!!o.mobile.toLowerCase().includes(r.value.toLowerCase());return T||!!o.parent.name.toLowerCase().includes(r.value.toLowerCase())},k=o=>{t.value.model_id=m.usertype=="student"?o.student_id:o.customer_id,t.value.model=o,t.value.user_type=m.usertype,b.value="Package",r.value=null},Q=()=>{for(let o=0;o<m.userslist.length;o++)m.userslist[o].show=r.value.trim()?_(m.userslist[o]):1},A=o=>{let x=!!o.name.toLowerCase().includes(r.value.toLowerCase());return x||!!o.description.toLowerCase().includes(r.value.toLowerCase())},H=o=>{t.value.package_id=o.package_id,t.value.package=o,b.value="Subscription",r.value=null},Y=()=>{if(m.packages)for(let o=0;o<m.packages.length;o++)m.packages[o].show=r.value.trim()?A(m.packages[o]):1},X=o=>{t.value.payment_type=o,V()},V=()=>{if(!t.value.start_date)return null;let o=0;t.value.payment_type=="month"&&(o=1),t.value.payment_type=="quarter"&&(o=3),t.value.payment_type=="year"&&(o=12),t.value.end_date=at(t.value.start_date,o)},Z=p(!1);return{totalCost:()=>{let o=t.value.daily_trips==1?"single_cost_"+t.value.payment_type:"double_cost_"+t.value.payment_type;return t.value.total_cost=t.value.package[o],t.value.total_cost},showTip:Z,dateChanged:V,setType:X,findPackage:Y,checkSimilarPackage:A,setPackage:H,findUser:Q,setUser:k,checkSimilarUser:_,progressWidth:y,showEditSide:c,content:v,fillable:h,activeItem:t,activeTab:b,translate:O,savePackageSubscription:g,searchText:r,back:a}},props:["conf","path","system_setting","business_setting","item","userslist","usertype","packages"]},Rt={class:"w-full flex overflow-auto"},Nt={class:"w-full relative"},Bt={class:"card w-full py-10"},Ft={class:"w-full stepper stepper-links"},Jt={class:"stepper-nav justify-content-center py-2 mb-10"},Mt=["onClick"],Gt=["textContent"],Kt={class:"w-full"},Qt={class:"text-center mb-13"},Ht=["textContent"],Yt=["textContent"],Xt={class:"w-100 relative mb-5",autocomplete:"off"},Zt=["placeholder"],$t={class:"w-full"},te={class:"symbol symbol-35px symbol-circle me-5"},ee=["src"],se={class:"fw-semibold w-full"},ne=["textContent"],ae=["textContent"],oe=["onClick","textContent"],le={class:"symbol symbol-35px symbol-circle me-5"},ie=["src"],ce={class:"fw-semibold w-full"},de=["textContent"],re=["textContent"],_e={class:"text-center"},me=["textContent"],ue={class:"card-body pt-0"},be={class:"settings-form"},he={class:"max-w-xl mb-6 mx-auto row"},xe={class:"text-center mb-13"},pe=["textContent"],fe=["textContent"],ve={class:"w-100 relative mb-5",autocomplete:"off"},ye=["placeholder"],ge={class:"w-full"},ke={class:"fw-semibold w-full"},Ce=["textContent"],we=["textContent"],Ie=["onClick","textContent"],Te={class:"fw-semibold"},Se=["textContent"],Pe=["textContent"],ze={class:"text-center"},Le=["textContent"],We={class:"relative py-4"},Ee={class:"text-center mb-13"},De=["textContent"],Oe=["textContent"],Ue={class:"row"},Ae=["checked"],Ve={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},je={class:"d-block fw-semibold text-start"},qe=["textContent"],Re=["textContent"],Ne=["checked"],Be={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},Fe={class:"d-block fw-semibold text-start"},Je=["textContent"],Me=["textContent"],Ge=["checked"],Ke={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},Qe={class:"d-block fw-semibold text-start"},He=["textContent"],Ye=["textContent"],Xe={class:"relative py-4 max-w-xl mx-auto"},Ze=["textContent"],$e={class:"fv-row fv-plugins-icon-container fv-plugins-bootstrap5-row-valid"},ts={class:"d-flex align-items-center me-2"},es={class:"symbol symbol-50px me-6"},ss={class:"symbol-label bg-light-danger"},ns={class:"d-flex flex-column"},as=e("span",{class:"fw-bold fs-6"},"Double trips",-1),os=["textContent"],ls={class:"form-check form-check-custom form-check-solid"},is={class:"d-flex align-items-center me-2"},cs={class:"symbol symbol-50px me-6"},ds={class:"symbol-label bg-light-danger"},rs={class:"d-flex flex-column"},_s=e("span",{class:"fw-bold fs-6"},"Single trip",-1),ms=["textContent"],us={class:"form-check form-check-custom form-check-solid"},bs=e("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback"},null,-1),hs={class:"pt-0"},xs={class:"settings-form"},ps={class:"max-w-xl mb-6 mx-auto row"},fs=["textContent"],vs=["placeholder"],ys=["textContent"],gs=["placeholder"],ks={class:"text-center mt-10"},Cs=["textContent"],ws={class:"bg-gray-200 shadow-md mb-10 rounded-xl"},Is={class:"card-header border-0 pt-9"},Ts={key:0,class:"card-title m-0 flex gap-4"},Ss={class:"symbol symbol-50px w-50px bg-light"},Ps=["src"],zs=["textContent"],Ls={class:"flex gap-2 cursor-pointer"},Ws={class:"pt-3"},Es=["textContent"],Ds={key:0,class:"card-body p-9"},Os=["textContent"],Us=["textContent"],As={class:"mb-8 gap-4 notice d-flex bg-inverse-default rounded border-primary border border-dashed p-6"},Vs={class:"d-flex flex-stack flex-grow-1 flex-wrap flex-md-nowrap"},js={class:"mb-3 mb-md-0 fw-semibold"},qs=["textContent"],Rs=["textContent"],Ns={class:"h-4px w-100 bg-light mb-5"},Bs={key:0,class:"w-full flex gap-4"},Fs={class:"w-full flex gap-4"},Js={class:"block gap-4"},Ms=["textContent"],Gs=["textContent"],Ks={key:0,class:"w-full block gap-4"},Qs=["textContent"],Hs=["textContent"],Ys={key:1,class:"w-full block gap-4"},Xs={class:"w-full block gap-4"},Zs=["textContent"],$s=["textContent"],tn={class:"text-center mt-10"},en=["textContent"];function sn(m,s,c,t,b,v){const h=f("close_icon"),r=f("vue-feather"),g=f("form_field");return l(),i("div",Rt,[e("div",Nt,[u(h,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:t.back},null,8,["onClick"]),e("div",Bt,[e("div",Ft,[e("div",Jt,[(l(!0),i(W,null,E(t.fillable,a=>(l(),i("div",{class:"stepper-item",onClick:y=>t.activeTab=a},[e("h3",{class:R([t.activeTab==a?"text-danger border-danger":"text-gray-400 border-transparent","cursor-pointer pb-3 px-2 stepper-title text-md border-b"]),textContent:n(a)},null,10,Gt)],8,Mt))),256))]),e("div",Kt,[t.activeTab==c.usertype?(l(),i("div",{class:"",key:t.activeTab},[(l(),i("div",{class:"card-body pt-0 mx-auto max-w-xl",key:c.userslist},[e("div",Qt,[e("h1",{class:"mb-3",textContent:n(t.translate("Find "+c.usertype))},null,8,Ht),e("div",{class:"text-gray-400 font-semibold",textContent:n(t.translate("Search by name, parent name or contact number"))},null,8,Yt)]),e("div",Xt,[u(r,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),C(e("input",{type:"text",onChange:s[0]||(s[0]=(...a)=>t.findUser&&t.findUser(...a)),onInput:s[1]||(s[1]=(...a)=>t.findUser&&t.findUser(...a)),"onUpdate:modelValue":s[2]||(s[2]=a=>t.searchText=a),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name, parent name")},null,40,Zt),[[L,t.searchText]])]),t.searchText?(l(!0),i(W,{key:0},E(c.userslist,a=>(l(),i("div",$t,[a.show?(l(),i("a",{href:"javascript:;",key:a.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",te,[e("img",{alt:"Pic",src:a.picture},null,8,ee)]),e("div",se,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(a.name)},null,8,ne),e("span",{class:"block text-gray-500 text-sm",textContent:n(a.mobile)},null,8,ae)]),e("span",{onClick:y=>t.setUser(a),class:"btn btn-danger btn-sm text-white",textContent:n(t.translate("Choose"))},null,8,oe)])):d("",!0)]))),256)):d("",!0),t.activeItem.model?(l(),i("a",{href:"javascript:;",key:t.activeItem.model,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",le,[e("img",{alt:"Pic",src:t.activeItem.model.picture},null,8,ie)]),e("div",ce,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(t.activeItem.model.name)},null,8,de),e("span",{class:"block text-gray-500 text-sm",textContent:n(t.activeItem.model.mobile)},null,8,re)])])):d("",!0)])),e("p",_e,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:s[3]||(s[3]=a=>t.activeTab="Package"),textContent:n(t.translate("Package"))},null,8,me)])])):d("",!0),t.activeTab=="Package"?(l(),i("div",{class:"",key:t.activeTab},[e("div",ue,[e("div",be,[e("div",he,[(l(),i("div",{class:"card-body pt-0 mx-auto max-w-xl",key:c.packages},[e("div",xe,[e("h1",{class:"mb-3",textContent:n(t.translate("Find Package"))},null,8,pe),e("div",{class:"text-gray-400 font-semibold",textContent:n(t.translate("Search by name or description"))},null,8,fe)]),e("div",ve,[u(r,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),C(e("input",{type:"text",onChange:s[4]||(s[4]=(...a)=>t.findPackage&&t.findPackage(...a)),onInput:s[5]||(s[5]=(...a)=>t.findPackage&&t.findPackage(...a)),"onUpdate:modelValue":s[6]||(s[6]=a=>t.searchText=a),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name, parent name")},null,40,ye),[[L,t.searchText]])]),t.searchText?(l(!0),i(W,{key:0},E(c.packages,a=>(l(),i("div",ge,[a&&a.show?(l(),i("a",{href:"javascript:;",key:a.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",ke,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(a.name)},null,8,Ce),e("span",{class:"block text-gray-500 text-sm",textContent:n(a.description)},null,8,we)]),e("span",{onClick:y=>t.setPackage(a),class:"btn btn-danger btn-sm text-white",textContent:n(t.translate("Choose"))},null,8,Ie)])):d("",!0)]))),256)):d("",!0),t.activeItem.package?(l(),i("a",{href:"javascript:;",key:t.activeItem.package,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1 gap-4"},[u(r,{type:"map"}),e("div",Te,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(t.activeItem.package.name)},null,8,Se),e("span",{class:"block text-gray-500 text-sm truncate",textContent:n(t.activeItem.package.description)},null,8,Pe)])])):d("",!0)]))])])]),e("p",ze,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:s[7]||(s[7]=a=>t.activeTab="Subscription"),textContent:n(t.translate("Subscription"))},null,8,Le)])])):d("",!0),t.activeTab=="Subscription"?(l(),i("div",{class:"mx-auto max-w-4xl",key:t.activeTab},[e("div",We,[e("div",Ee,[e("h1",{class:"mb-3",textContent:n(t.translate("Subscription duration"))},null,8,De),e("div",{class:"text-gray-400 font-semibold",textContent:n(t.translate("Choose the duration of the subscription to set the end date"))},null,8,Oe)]),e("div",Ue,[e("div",{class:"col-lg-4",onClick:s[8]||(s[8]=a=>t.setType("month"))},[e("input",{type:"radio",class:"btn-check",value:"month",checked:t.activeItem.payment_type=="month",name:"payment_type"},null,8,Ae),e("label",Ve,[u(r,{type:"server"}),e("span",je,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:n(t.translate("Month"))},null,8,qe),e("span",{class:"text-muted fw-semibold fs-6",textContent:n(t.translate("Subscribe for month"))},null,8,Re)])])]),e("div",{class:"col-lg-4",onClick:s[9]||(s[9]=a=>t.setType("quarter"))},[e("input",{type:"radio",class:"btn-check",value:"quarter",checked:t.activeItem.payment_type=="quarter",name:"payment_type"},null,8,Ne),e("label",Be,[u(r,{type:"server"}),e("span",Fe,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:n(t.translate("Quarter"))},null,8,Je),e("span",{class:"text-muted fw-semibold fs-6",textContent:n(t.translate("Subscribe for quarter"))},null,8,Me)])])]),e("div",{class:"col-lg-4",onClick:s[10]||(s[10]=a=>t.setType("year"))},[e("input",{type:"radio",class:"btn-check",value:"year",checked:t.activeItem.payment_type=="year",name:"payment_type"},null,8,Ge),e("label",Ke,[u(r,{type:"server"}),e("span",Qe,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:n(t.translate("Year"))},null,8,He),e("span",{class:"text-muted fw-semibold fs-6",textContent:n(t.translate("Subscribe for year"))},null,8,Ye)])])])])]),e("div",Xe,[e("label",{class:"nui-label w-full pb-2 px-5 block font-semibold text-lg",textContent:n(t.translate("Route type"))},null,8,Ze),e("div",$e,[e("label",{class:"d-flex flex-stack mb-5 cursor-pointer",onClick:s[12]||(s[12]=a=>t.activeItem.daily_trips=2)},[e("span",ts,[e("span",es,[e("span",ss,[u(r,{type:"map-pin"})])]),e("span",ns,[as,e("span",{class:"fs-7 text-muted",textContent:n(t.translate("Two trips per day going and return"))},null,8,os)])]),e("span",ls,[C(e("input",{class:"form-check-input","onUpdate:modelValue":s[11]||(s[11]=a=>t.activeItem.daily_trips=a),type:"radio",name:"daily_trips",value:"2"},null,512),[[N,t.activeItem.daily_trips]])])]),e("label",{class:"d-flex flex-stack mb-5 cursor-pointer",onClick:s[14]||(s[14]=a=>t.activeItem.daily_trips=1)},[e("span",is,[e("span",cs,[e("span",ds,[u(r,{type:"map-pin"})])]),e("span",rs,[_s,e("span",{class:"fs-7 text-muted",textContent:n(t.translate("One trip per day going"))},null,8,ms)])]),e("span",us,[C(e("input",{class:"form-check-input","onUpdate:modelValue":s[13]||(s[13]=a=>t.activeItem.daily_trips=a),type:"radio",name:"daily_trips",value:"1"},null,512),[[N,t.activeItem.daily_trips]])])]),bs,e("div",hs,[e("div",xs,[e("div",ps,[e("div",null,[e("label",{class:"col-lg-4 py-4 required font-semibold fs-6",textContent:n(t.translate("Start date"))},null,8,fs),C(e("input",{onChange:s[15]||(s[15]=(...a)=>t.dateChanged&&t.dateChanged(...a)),required:!0,autocomplete:"off",name:"params[start_date]",class:"form-control form-control-solid",placeholder:t.translate("Start date"),type:"date","onUpdate:modelValue":s[16]||(s[16]=a=>t.activeItem.start_date=a)},null,40,vs),[[L,t.activeItem.start_date]])]),e("div",null,[e("label",{class:"col-lg-4 py-4 required font-semibold fs-6",textContent:n(t.translate("End date"))},null,8,ys),C(e("input",{required:!0,autocomplete:"off",disabled:!0,name:"params[end_date]",class:"form-control form-control-solid",placeholder:t.translate("End date"),type:"date","onUpdate:modelValue":s[17]||(s[17]=a=>t.activeItem.end_date=a)},null,8,gs),[[L,t.activeItem.end_date]])])])])])])]),e("p",ks,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:s[18]||(s[18]=a=>t.activeTab="Confirm"),textContent:n(t.translate("Next"))},null,8,Cs)])])):d("",!0),t.activeTab=="Confirm"?(l(),i("div",{class:"max-w-xl mx-auto",key:t.activeTab},[e("div",ws,[e("div",Is,[t.activeItem&&t.activeItem.model?(l(),i("div",Ts,[e("div",Ss,[e("img",{src:t.activeItem.model.picture,alt:"image",class:"p-3"},null,8,Ps)]),e("span",{class:"",textContent:n(t.activeItem.model.name)},null,8,zs)])):d("",!0),e("label",Ls,[u(g,{class:"flex-end",item:t.activeItem,column:{key:"is_paid",column_type:"checkbox",hide_text:!0}},null,8,["item"]),e("div",Ws,[e("span",{class:"badge badge-light fw-bold me-auto px-4 py-3",textContent:n(t.activeItem.is_paid?"Paid":"Unpaid")},null,8,Es)])])]),t.activeItem.package?(l(),i("div",Ds,[e("div",{class:"fs-3 fw-bold text-gray-900",textContent:n(t.activeItem.package.name)},null,8,Os),e("p",{class:"text-gray-500 fw-semibold fs-5 mt-1 mb-7",textContent:n(t.activeItem.package.description)},null,8,Us),e("div",As,[u(r,{type:"map"}),e("div",Vs,[e("div",js,[e("h4",{class:"text-gray-900 fw-bold",textContent:n(t.activeItem.daily_trips==1?t.translate("Single trip"):t.translate("Double trips"))},null,8,qs),e("div",{class:"fs-6 text-gray-700 pe-7",textContent:n(t.activeItem.daily_trips==1?t.translate("Single trip per day"):t.translate("Two trips per day going and return"))},null,8,Rs)])])]),e("div",Ns,[e("div",{class:R(["rounded h-4px",t.progressWidth()<100?"bg-info":"bg-success"]),role:"progressbar",style:tt({width:t.progressWidth()+"%"})},null,6)]),t.activeItem.package?(l(),i("div",Bs,[e("div",Fs,[u(r,{type:"credit-card"}),e("div",Js,[e("span",{class:"w-full block font-semibold",textContent:n(t.translate("Total cost"))},null,8,Ms),e("span",{class:"w-full block",textContent:n(t.totalCost())},null,8,Gs)])]),t.activeItem.start_date?(l(),i("div",Ks,[e("span",{class:"w-full block font-semibold",textContent:n(t.translate("Start date"))},null,8,Qs),e("span",{class:"w-full block",textContent:n(t.activeItem.start_date)},null,8,Hs)])):d("",!0),t.activeItem.end_date?(l(),i("div",Ys,[e("div",Xs,[e("span",{class:"w-full block font-semibold",textContent:n(t.translate("End date"))},null,8,Zs),e("span",{class:"w-full block",textContent:n(t.activeItem.end_date)},null,8,$s)])])):d("",!0)])):d("",!0)])):d("",!0)]),e("p",tn,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:s[19]||(s[19]=(...a)=>t.savePackageSubscription&&t.savePackageSubscription(...a)),textContent:n(t.translate("Submit"))},null,8,en)])])):d("",!0)])])])])])}const nn=U(qt,[["render",sn]]),an=w(()=>I(()=>import("./map-OGlwx9xa.min.js"),__vite__mapDeps([0,1,2,3]))),on=w(()=>I(()=>import("./form_field-7zjdT8gu.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),ln={components:{datatabble:B,maps:an,delete_icon:F,car_icon:J,route_icon:M,form_field:on,editable_map_location:K,subscription_wizard:nn,employee_location_wizard:G,usertype_picker:Ot},name:"Routes",setup(m){const s=m.conf.url+m.path+"?load=json",c=p({}),t=p({}),b=p(!1),v=p(!1),h=()=>{b.value=!1};return(()=>{ot(s).then(_=>{t.value=JSON.parse(JSON.stringify(_))})})(),{setType:_=>{c.value.usertype=_,v.value=!1,b.value=!0},url:s,content:t,activeItem:c,translate:O,showWizard:b,showOptions:v,closeSide:h,addLocationWizard:()=>{c.value={},v.value=!0},handleAction:(_,k)=>{switch(_){case"view":break;case"edit":c.value=k,b.value=!0;break;case"delete":lt("location_id",k,"RouteLocation.delete");break;case"close":showEditSide.value=!1,c.value={};break}}}},props:["path","lang","system_setting","business_setting","setting","conf","auth"]},cn={class:"w-full flex overflow-auto"},dn={key:0,class:"w-full relative"},rn={key:4,class:""},_n={class:"card"},mn={class:"card-body"},un={class:"card-px text-center pt-15 pb-15"},bn=["textContent"],hn=["textContent"],xn=["textContent"],pn={class:"text-center pb-15 px-5"},fn=["src"],vn={key:5,class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},yn={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},gn=["textContent"],kn=["textContent"],Cn=e("hr",{class:"mt-2"},null,-1),wn={class:"w-full bg-white"},In={key:0,class:"w-full flex gap-4"},Tn=["src"],Sn=["textContent"],Pn=["onClick"],zn=["onClick"];function Ln(m,s,c,t,b,v){const h=f("subscription_wizard"),r=f("usertype_picker"),g=f("vue-feather"),a=f("delete_icon"),y=f("datatabble");return l(),i("div",cn,[t.content&&c.auth?(l(),i("div",dn,[t.showWizard&&t.activeItem.usertype=="employee"?(l(),z(h,{onCallback:s[0]||(s[0]=_=>t.showWizard=!1),usertype:t.activeItem.usertype,userslist:t.content.employees,key:t.showWizard,packages:t.content.packages,system_setting:c.system_setting,item:t.activeItem,business_setting:c.business_setting},null,8,["usertype","userslist","packages","system_setting","item","business_setting"])):d("",!0),t.showWizard&&t.activeItem.usertype=="supervisor"?(l(),z(h,{onCallback:s[1]||(s[1]=_=>t.showWizard=!1),usertype:t.activeItem.usertype,userslist:t.content.supervisors,key:t.showWizard,packages:t.content.packages,system_setting:c.system_setting,item:t.activeItem,business_setting:c.business_setting},null,8,["usertype","userslist","packages","system_setting","item","business_setting"])):d("",!0),t.showWizard&&t.activeItem.usertype=="student"?(l(),z(h,{onCallback:s[2]||(s[2]=_=>t.showWizard=!1),usertype:t.activeItem.usertype,userslist:t.content.students,key:t.showWizard,packages:t.content.packages,system_setting:c.system_setting,item:t.activeItem,business_setting:c.business_setting},null,8,["usertype","userslist","packages","system_setting","item","business_setting"])):d("",!0),!t.showWizard&&t.showOptions?(l(),z(r,{key:t.showOptions,auth:c.auth,item:t.activeItem},null,8,["auth","item"])):d("",!0),!t.showWizard&&!t.showOptions&&t.content.items&&!t.content.items.length?(l(),i("div",rn,[e("div",_n,[e("div",mn,[e("div",un,[e("h2",{class:"fs-2x fw-bold mb-0",textContent:n(t.content.title)},null,8,bn),e("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:n(t.translate("Add your first pickup using this below wizard"))},null,8,hn),e("a",{textContent:n(t.translate("add_new")),onClick:s[3]||(s[3]=(..._)=>t.addLocationWizard&&t.addLocationWizard(..._)),href:"javascript:;",class:"text-white btn btn-primary er fs-6 px-8 py-4"},null,8,xn)]),e("div",pn,[e("img",{src:"/src/asset/img/1.png",alt:"",class:"mx-auto mw-100 h-200px h-sm-325px"},null,8,fn)])])])])):d("",!0),t.content.items&&t.content.items.length&&!t.showWizard?(l(),i("main",vn,[e("div",yn,[e("h1",{class:"font-bold text-lg w-full",textContent:n(t.content.title)},null,8,gn),t.showWizard?d("",!0):(l(),i("a",{key:0,href:"javascript:;",class:"uppercase p-2 mx-2 text-center text-white w-32 rounded-lg bg-danger",onClick:s[4]||(s[4]=(..._)=>t.addLocationWizard&&t.addLocationWizard(..._)),textContent:n(t.translate("add_new"))},null,8,kn))]),Cn,e("div",wn,[t.content.columns?(l(),z(y,{key:0,class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":t.translate("lang")=="ar"?"right":"left","fixed-checkbox":"",headers:t.content.columns,items:t.content.items},{"item-name":D(_=>[_.model?(l(),i("div",In,[e("img",{src:_.model.picture,class:"w-8 h-8 rounded-full"},null,8,Tn),e("span",{textContent:n(_.model.name)},null,8,Sn)])):d("",!0)]),"item-edit":D(_=>[_.not_editable?d("",!0):(l(),i("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:k=>t.handleAction("edit",_)},[u(g,{class:"w-5",type:"edit"})],8,Pn))]),"item-delete":D(_=>[_.not_removeable?d("",!0):(l(),i("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:k=>t.handleAction("delete",_)},[u(a,{class:"w-5"})],8,zn))]),_:1},8,["body-text-direction","headers","items"])):d("",!0)])])):d("",!0)])):d("",!0)])}const jn=U(ln,[["render",Ln]]);export{jn as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["map-OGlwx9xa.min.js","index.es-4z_hVD90.min.js","index.min.js","index.min.css","side-form-create-kV2jB1Yb.min.js","Field-3Iuak0fV.min.js","Field.min.css","side-form-update-0wjhPvKs.min.js","form_field-7zjdT8gu.min.js","editable_map_location-jkqEoD2B.min.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
