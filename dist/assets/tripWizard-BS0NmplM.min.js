const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["side-form-create-B2Ekk4lj.min.js","index.min.js","index.min.css","Field-DXr5lNQ3.min.js","Field.min.css","side-form-update-Bpfkw8M2.min.js","form_field-DiE37Nzp.min.js","editable_map_location-CbjDPe7S.min.js"])))=>i.map(i=>d[i]);
import{_ as z,T as M,ak as B,q as S,K as F,A as J,M as U,D as K,r as m,c as l,o,a,b as t,f as v,F as q,e as A,d as s,n as E,x as w,N as G,j as c,t as b,al as V,am as H,u as L,m as Q,P as X,S as Y}from"./index.min.js";import{e as Z}from"./editable_map_location-CbjDPe7S.min.js";import{t as $}from"./trip_map-DvcTC9XE.min.js";const tt=S(()=>L(()=>import("./side-form-create-B2Ekk4lj.min.js"),__vite__mapDeps([0,1,2,3,4]))),et=S(()=>L(()=>import("./side-form-update-Bpfkw8M2.min.js"),__vite__mapDeps([5,1,2,3,4,6,7]))),st=S(()=>L(()=>import("./form_field-DiE37Nzp.min.js"),__vite__mapDeps([6,1,2,3,4,7]))),ot={components:{datatabble:K,SideFormCreate:tt,SideFormUpdate:et,trip_map:$,close_icon:U,delete_icon:J,car_icon:F,form_field:st,editable_map_location:Z,dashboard_card_white:B,tooltip:M},name:"Route trips",emits:["callback"],setup(d,{emit:i}){const r=c(!1),e=c(!1),D=c(!1),_=c({}),p=c("Info"),x=c({}),k=c({}),I=c("");c(null);const T=c(!1),h=c(["Info","Locations","Confirm"]),n=c([]),g=c(!1),N=c(""),O=c(""),R=c([{title:b("Scheduled"),status:"scheduled"},{title:b("Started"),status:"started"},{title:b("Completed"),status:"completed"},{title:b("Cancelled"),status:"cancelled"}]);d.active_tab&&(p.value=d.active_tab),d.item?(_.value=d.item,_.value.date=d.item.date??V()):_.value.date=V();const W=d.userslist?c(d.userslist):c([]);return{loader:r,tripsStatusList:R,users:W,progressWidth:()=>Y(["vehicle_id","driver_id","locations","date","status"],_),showPlaceSearch:g,pickup_placeSearch:N,destination_placeSearch:O,places:n,showAddSide:e,showEditSide:D,content:x,fillable:h,center:k,activeItem:_,activeTab:p,translate:b,formatCustomTime:H,searchText:I,collapsed:T,saveTrip:()=>{r.value=!0;var y=new URLSearchParams;let C=JSON.parse(JSON.stringify(_.value)),j=Object.keys(C),f,P;for(let u=0;u<j.length;u++)f=j[u],P=typeof C[f]=="object"?JSON.stringify(C[f]):C[f],y.append("params["+f+"]",P);y.append("type","Trip.update"),Q(y,"/api/update").then(u=>{r.value=!1,X(u)})},back:()=>{i("callback")}}},props:["conf","path","system_setting","business_setting","setting","item","userslist","usertype","drivers","vehicles","active_tab"]},lt={class:"w-full overflow-auto"},nt={class:"w-full relative"},at={class:"card w-full py-10"},it={class:"w-full stepper stepper-links"},ct={class:"stepper-nav justify-content-center py-2 mb-10"},dt=["onClick"],rt=["textContent"],_t={class:"w-full"},mt={class:"mb-6 mx-auto flex"},vt=["textContent"],xt=["textContent"],ht={class:"mb-6 mx-auto flex"},ft=["textContent"],ut=["textContent"],bt={class:"mb-6 mx-auto flex"},pt=["textContent"],gt={class:"symbol symbol-35px symbol-circle me-5"},yt=["src"],Ct={class:"fw-semibold w-full"},wt=["textContent"],kt=["textContent"],It={class:"mb-6 mx-auto flex"},Tt=["textContent"],St={class:"symbol symbol-35px symbol-circle me-5"},Lt=["src"],Dt={class:"fw-semibold w-full"},jt=["textContent"],Pt=["textContent"],qt={class:"text-center"},At=["textContent"],Et={class:"card-body pt-0"},Vt={class:"settings-form"},Nt={class:"px-10 mb-6 mx-auto row"},Ot={class:"lg:flex w-full gap-6"},Rt={class:"mt-10 w-full"},Wt={class:"flex gap-6"},zt=["textContent"],Mt=["textContent"],Bt={class:"d-flex flex-stack pt-4"},Ft={class:"symbol symbol-40px me-5"},Jt=["src"],Ut={key:0,class:"flex align-items-center w-full"},Kt={class:"flex-grow-1 me-2"},Gt=["textContent"],Ht=["textContent"],Qt=["onMouseover","onMouseleave"],Xt=["textContent"],Yt={class:"w-full"},Zt={class:"text-center"},$t=["textContent"],te={class:"max-w-xl mx-auto"},ee={class:"w-full"},se={class:"bg-gray-200 shadow-md mb-10 rounded-xl"},oe={class:"card-header border-0 pt-9"},le={key:0,class:"card-title m-0 flex gap-4"},ne={class:"symbol symbol-50px w-50px bg-light"},ae=["src"],ie={class:"w-full"},ce=["textContent"],de=["textContent"],re={class:"flex gap-2 cursor-pointer"},_e={class:"pt-3"},me={class:"relative badge badge-light fw-bold me-auto px-4 py-3"},ve={key:0,class:"card-body p-9"},xe={class:"timeline timeline-border-dashed"},he={class:"timeline-item"},fe={class:"timeline-icon me-4"},ue={class:"timeline-content mb-10 mt-n2"},be={class:"overflow-auto pe-3"},pe=["textContent"],ge={class:"d-flex align-items-center mt-1 fs-6"},ye=["textContent"],Ce={class:"timeline-item"},we={class:"timeline-icon me-4"},ke={class:"timeline-content mb-10 mt-n2"},Ie={class:"overflow-auto pe-3"},Te=["textContent"],Se={class:"d-flex align-items-center mt-1 fs-6"},Le=["textContent"],De={class:"h-4px w-100 bg-light mb-5"},je={key:0,class:"w-full flex gap-4"},Pe={key:0,class:"flex gap-4 min-w-175px"},qe=["src"],Ae={class:"block gap-4 w-full"},Ee=["textContent"],Ve=["textContent"],Ne={key:1,class:"w-150px flex gap-4"},Oe={class:"block gap-4"},Re=["textContent"],We=["textContent"],ze={key:2,class:"w-125px flex-end"},Me=["textContent"],Be={class:"w-full flex gap-4"},Fe=["textContent"],Je=["textContent"],Ue={class:"text-center mt-10"},Ke=["textContent"];function Ge(d,i,r,e,D,_){const p=m("close_icon"),x=m("car_icon"),k=m("tooltip"),I=m("trip_map"),T=m("form_field"),h=m("vue-feather");return o(),l("div",lt,[e.loader?(o(),l("div",{key:e.loader,class:"bg-white fixed w-full h-full top-0 left-0",style:{"z-index":"99999",opacity:".9"}},[...i[3]||(i[3]=[t("img",{class:"m-auto w-500px",src:"/uploads/loader.gif"},null,-1)])])):a("",!0),t("div",nt,[v(p,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:e.back},null,8,["onClick"]),t("div",at,[t("div",it,[t("div",ct,[(o(!0),l(q,null,A(e.fillable,n=>(o(),l("div",{class:"stepper-item",onClick:g=>e.activeTab=n},[t("h3",{class:E([e.activeTab==n?"text-danger border-danger":"text-gray-400 border-transparent","cursor-pointer pb-3 px-2 stepper-title text-md border-b"]),textContent:s(e.translate(n))},null,10,rt)],8,dt))),256))]),t("div",_t,[e.activeTab=="Info"?(o(),l("div",{class:"",key:e.activeTab},[(o(),l("div",{class:"card-body pt-0 mx-auto max-w-xl",key:e.users},[t("div",mt,[t("label",{class:"w-200px col-form-label required fw-semibold fs-6",textContent:s(e.translate("Trip Date"))},null,8,vt),t("span",{textContent:s(e.activeItem.date),class:"fw-semibold text-lg"},null,8,xt)]),i[4]||(i[4]=t("hr",{class:"block mt-6 my-2 opacity-10"},null,-1)),t("div",ht,[t("label",{class:"w-200px col-form-label required fw-semibold fs-6",textContent:s(e.translate("Start time"))},null,8,ft),t("span",{textContent:s(e.formatCustomTime(e.activeItem.created_at,"hh:mm:ss")),class:"fw-semibold text-lg"},null,8,ut)]),t("div",bt,[t("label",{class:"w-200px my-2 col-form-label required fw-semibold fs-6",textContent:s(e.translate("Driver"))},null,8,pt),e.activeItem.driver?(o(),l("a",{href:"javascript:;",key:e.activeItem.driver,class:"w-full d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1 gap-4"},[t("div",gt,[e.activeItem.driver.picture?a("",!0):(o(),w(x,{key:0})),e.activeItem.driver.picture?(o(),l("img",{key:1,alt:"Pic",src:e.activeItem.driver.picture},null,8,yt)):a("",!0)]),t("div",Ct,[t("span",{class:"text-lg text-danger font-semibold me-2",textContent:s(e.activeItem.driver.name)},null,8,wt),t("span",{class:"block text-gray-500 text-sm truncate",textContent:s(e.activeItem.driver.mobile)},null,8,kt)])])):a("",!0)]),t("div",It,[t("label",{class:"w-200px my-2 col-form-label required fw-semibold fs-6",textContent:s(e.translate("Vehicle"))},null,8,Tt),e.activeItem.vehicle?(o(),l("a",{href:"javascript:;",key:e.activeItem.vehicle,class:"w-full d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[t("div",St,[e.activeItem.vehicle.picture?a("",!0):(o(),w(x,{key:0})),e.activeItem.vehicle.picture?(o(),l("img",{key:1,alt:"Pic",src:e.activeItem.vehicle.picture},null,8,Lt)):a("",!0)]),t("div",Dt,[t("span",{class:"text-lg text-danger font-semibold me-2",textContent:s(e.activeItem.vehicle.vehicle_name)},null,8,jt),t("span",{class:"block text-gray-500 text-sm",textContent:s(e.activeItem.vehicle.plate_number)},null,8,Pt)])])):a("",!0)])])),t("p",qt,[t("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:i[0]||(i[0]=n=>e.activeTab="Locations"),textContent:s(e.translate("Locations"))},null,8,At)])])):a("",!0),e.activeTab=="Locations"?(o(),l("div",{class:"",key:e.activeTab},[t("div",Et,[t("div",Vt,[t("div",Nt,[t("div",Ot,[t("div",Rt,[t("div",Wt,[t("h3",{class:"mb-3 w-full",textContent:s(e.translate("Location Address"))},null,8,zt),t("p",{class:"text-center px-6",textContent:s(e.translate("Last action"))},null,8,Mt)]),(o(!0),l(q,null,A(e.activeItem.locations,n=>(o(),l("div",Bt,[t("div",Ft,[t("img",{src:n.model.picture,class:"h-50 align-self-center",alt:""},null,8,Jt)]),n.model&&n.location?(o(),l("div",Ut,[t("div",Kt,[t("a",{href:"javascript:;",class:"text-gray-800 text-hover-primary fs-6 fw-bold",textContent:s(n.model.name)},null,8,Gt),t("span",{class:"text-muted fw-semibold d-block fs-7",textContent:s(n.location.start_address)},null,8,Ht)]),t("div",null,[t("div",{onMouseover:g=>n.showTip=!0,onMouseleave:g=>n.showTip=!1,class:"relative"},[t("a",{href:"javascript:;",class:"btn btn-sm btn-light fs-8 fw-bold",textContent:s(n.status)},null,8,Xt),n.showTip?(o(),w(k,{key:n.showTip,title:n.time},null,8,["title"])):a("",!0)],40,Qt)])])):a("",!0)]))),256))]),t("div",Yt,[(o(),w(I,{system_setting:r.system_setting,setting:r.system_setting,trip:e.activeItem,conf:r.conf,key:e.activeItem,waypoints:e.activeItem.locations},null,8,["system_setting","setting","trip","conf","waypoints"]))])])])])]),t("p",Zt,[t("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:i[1]||(i[1]=n=>e.activeTab="Confirm"),textContent:s(e.translate("Confirm"))},null,8,$t)])])):a("",!0),e.activeTab=="Confirm"?(o(),l("div",{class:"w-full mx-auto",key:e.activeTab},[t("div",te,[t("div",ee,[i[7]||(i[7]=t("hr",{class:"block mt-6 my-2 opacity-10"},null,-1)),t("div",se,[t("div",oe,[e.activeItem.model?(o(),l("div",le,[t("div",ne,[t("img",{src:e.activeItem.model.picture,alt:"image",class:"p-3"},null,8,ae)]),t("div",ie,[t("div",{class:"font-semibold",textContent:s(e.activeItem.model.name)},null,8,ce),t("div",{class:"",textContent:s(e.activeItem.model.mobile)},null,8,de)])])):a("",!0),t("label",re,[t("div",_e,[t("span",me,[v(T,{class:"flex-end",item:e.activeItem,column:{key:"status",title:e.translate("Status"),column_type:"select",text_key:"title",data:e.tripsStatusList,hide_text:!0}},null,8,["item","column"]),v(h,{class:"absolute right-4",type:"chevron-down"})])])])]),e.activeItem?(o(),l("div",ve,[t("div",xe,[t("div",he,[i[5]||(i[5]=t("div",{class:"timeline-line"},null,-1)),t("div",fe,[v(h,{type:"circle",class:"fs-2 text-success"})]),t("div",ue,[t("div",be,[e.activeItem?(o(),l("div",{key:0,class:"fs-5 fw-semibold mb-2",textContent:s(e.activeItem.route.position.start_address)},null,8,pe)):a("",!0),t("div",ge,[t("div",{class:"text-muted me-2 fs-7",textContent:s(e.translate("Pickup"))},null,8,ye)])])])]),t("div",Ce,[i[6]||(i[6]=t("div",{class:"timeline-line"},null,-1)),t("div",we,[v(h,{type:"map-pin",class:"fs-2 text-danger"})]),t("div",ke,[t("div",Ie,[e.activeItem?(o(),l("div",{key:0,class:"fs-5 fw-semibold mb-2",textContent:s(e.activeItem.route.position.end_address)},null,8,Te)):a("",!0),t("div",Se,[t("div",{class:"text-muted me-2 fs-7",textContent:s(e.translate("Destination"))},null,8,Le)])])])])]),t("div",De,[t("div",{class:E(["rounded h-4px transition transition-all",e.progressWidth()<100?"bg-info":"bg-success"]),role:"progressbar",style:G({width:e.progressWidth()+"%"})},null,6)]),e.activeItem?(o(),l("div",je,[e.activeItem.driver?(o(),l("div",Pe,[t("img",{src:e.activeItem.driver.picture,class:"rounded-full bg-white border-1 border border-gray-600 p-1 w-12 h-12"},null,8,qe),t("div",Ae,[t("span",{class:"w-full block font-semibold",textContent:s(e.translate("Driver"))},null,8,Ee),t("span",{class:"w-full block",textContent:s(e.activeItem.driver.name)},null,8,Ve)])])):a("",!0),e.activeItem.vehicle?(o(),l("div",Ne,[v(x),t("div",Oe,[t("span",{class:"w-full block font-semibold",textContent:s(e.translate("Vehicle"))},null,8,Re),t("span",{class:"w-full block",textContent:s(e.activeItem.vehicle.plate_number)},null,8,We)])])):a("",!0),e.activeItem.date?(o(),l("div",ze,[t("span",{class:"w-full block font-semibold",textContent:s(e.translate("Trip date"))},null,8,Me),t("div",Be,[t("span",{class:"",textContent:s(e.activeItem.date)},null,8,Fe),t("span",{class:"",textContent:s(e.activeItem.start_time)},null,8,Je)])])):a("",!0)])):a("",!0)])):a("",!0)])])]),t("p",Ue,[t("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:i[2]||(i[2]=(...n)=>e.saveTrip&&e.saveTrip(...n)),textContent:s(e.translate("Submit"))},null,8,Ke)])])):a("",!0)])])])])])}const ts=z(ot,[["render",Ge]]);export{ts as default};
