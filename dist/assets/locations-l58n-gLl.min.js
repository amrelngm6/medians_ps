import{_ as ot,D as at,I as mt,e as ct,y as it,z as dt,f as r,t as rt,r as C,o,c as a,i as e,a as h,F as I,k as P,x as U,j as n,J as z,K as F,h as d,g as D,B as ut,d as E,b as M,s as N,C as J,n as ht,L as vt,E as q,M as xt,l as gt,A as nt,m as yt,p as wt}from"./index.min.js";import{e as _t}from"./editable_map_location-LvaiUbT8.min.js";import{t as ft}from"./tooltip-s9Xa9pgY.min.js";import"./index.es-OI7vI1FE.min.js";const Ct=E(()=>M(()=>import("./map-5GV_4fzv.min.js"),__vite__mapDeps([0,1,2,3]))),kt=E(()=>M(()=>import("./side-form-create-xsfGXZTQ.min.js"),__vite__mapDeps([4,2,3,5,6]))),pt=E(()=>M(()=>import("./side-form-update-dhD2nQC8.min.js"),__vite__mapDeps([7,2,3,5,6,8,9,1]))),St=E(()=>M(()=>import("./form_field-wtcjT_eT.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),It={components:{datatabble:at,SideFormCreate:kt,SideFormUpdate:pt,maps:Ct,close_icon:mt,delete_icon:ct,car_icon:it,route_icon:dt,form_field:St,editable_map_location:_t,tooltip:ft},name:"Routes",emits:["callback"],setup(_,{emit:c}){const v=r(!1),t=r(!1);r(null);const i=r({}),p=r("Student"),k=r({}),y=r({});r([]),r(!0);const u=r(""),f=r(null),T=r(!1),s=r(["Student","Pickup location","Destination","Pickup days","Route","Confirm"]),m=r([]),R=r(!1),W=r(""),A=r(""),B=r([{k:"saturday",s:"SA",class:"bg-warning"},{k:"sunday",s:"SU",class:"bg-danger"},{k:"monday",s:"MO",class:"bg-info"},{k:"tuesday",s:"TU",class:"bg-success"},{k:"wednesday",s:"WE",class:"bg-primary"},{k:"thursday",s:"TH",class:"bg-gradient-secondary"},{k:"friday",s:"FR",class:"bg-dark-subtle"}]);_.item&&(i.value=_.item),_.allstudents?r(_.allstudents):r([]);const V=async()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(l=>{i.value.start_latitude=l.coords.latitude,i.value.start_longitude=l.coords.longitude,i.value.end_latitude=l.coords.latitude,i.value.end_longitude=l.coords.longitude},l=>{i.value.start_latitude=i.value.start_latitude??30.06,i.value.start_longitude=i.value.start_longitude??31.21,i.value.end_latitude=i.value.end_latitude??30.06,i.value.end_longitude=i.value.end_longitude??31.21,N(l.message)}):(N("location error"),f.value="Geolocation is not supported by this browser.")};V();const K=async()=>{let l=W.value.length>3?await J(_.system_setting.google_map_api,W.value,_.business_setting.country):"";m.value=l.predictions},b=async()=>{let l=A.value.length>3?await J(_.system_setting.google_map_api,A.value,_.business_setting.country):"";m.value=l.predictions},O=()=>{var l=new URLSearchParams;let x=JSON.parse(JSON.stringify(i.value)),S=Object.keys(x),w,L;for(let g=0;g<S.length;g++)w=S[g],L=typeof x[w]=="object"?JSON.stringify(x[w]):x[w],l.append("params["+w+"]",L);let j=x.location_id>0?"update":"create";l.append("type","RouteLocation."+j),ht(l,"/api/"+j).then(g=>{vt(g)})},G=async l=>{i.value.start_latitude=l.lat(),i.value.start_longitude=l.lng(),i.value.start_address=await q(l.lat(),l.lng())},H=async l=>{i.value.end_latitude=l.lat(),i.value.end_longitude=l.lng(),i.value.end_address=await q(l.lat(),l.lng())},Q=async(l,x)=>{const S=new google.maps.places.PlacesService(document.createElement("div"));let w=l.place_id;S.getDetails({placeId:w},(L,j)=>{if(j===google.maps.places.PlacesServiceStatus.OK&&L){const g=L.geometry.location;x=="start"&&(i.value.start_address=l.description,i.value.start_latitude=g.lat(),i.value.start_longitude=g.lng()),x=="end"&&(i.value.end_address=l.description,i.value.end_latitude=g.lat(),i.value.end_longitude=g.lng()),m.value=[],R.value=!1}else console.error("Failed to fetch place details")})},X=()=>{c("callback")},Y=l=>{let x=!!l.student_name.toLowerCase().includes(u.value.toLowerCase()),S=x||!!l.contact_number.toLowerCase().includes(u.value.toLowerCase());return S||!!l.parent.name.toLowerCase().includes(u.value.toLowerCase())},Z=l=>{i.value.model_id=l.student_id,i.value.student=l,p.value="Pickup location",u.value=null},$=()=>{for(let l=0;l<_.allstudents.length;l++)_.allstudents[l].show=u.value.trim()?Y(_.allstudents[l]):1},tt=l=>{let x=!!l.route_name.toLowerCase().includes(u.value.toLowerCase());return x||!!l.description.toLowerCase().includes(u.value.toLowerCase())},et=l=>{i.value.route_id=l.route_id,i.value.route=l,p.value="Confirm",u.value=null},st=()=>{if(_.routes){for(let l=0;l<_.routes.length;l++)_.routes[l].show=u.value.trim()?tt(_.routes[l]):1;console.log(_.routes)}},lt=r({});return{progressWidth:()=>xt(["model_id","route_id","start_address","end_address","status"],i),weekDays:B,showTip:lt,setRoute:et,findRoute:st,setStudent:Z,findStudent:$,setPlaceMarker:Q,showPlaceSearch:R,startPlaceChanged:K,endPlaceChanged:b,start_placeSearch:W,end_placeSearch:A,places:m,showAddSide:v,showEditSide:t,content:k,fillable:s,center:y,activeItem:i,activeTab:p,translate:rt,updateStartMarker:G,updateEndMarker:H,searchText:u,getUserLocation:V,collapsed:T,saveRoute:O,back:X}},props:["conf","path","system_setting","business_setting","setting","item","allstudents","routes"]},Pt={class:"w-full flex overflow-auto"},Tt={class:"w-full relative"},Lt={class:"card w-full py-10"},Rt={class:"w-full stepper stepper-links"},Et={class:"stepper-nav justify-content-center py-2 mb-10"},Mt=["onClick"],jt=["textContent"],Dt={class:"w-full"},Wt={class:"text-center mb-13"},At=["textContent"],zt=["textContent"],Ft={class:"w-100 relative mb-5",autocomplete:"off"},Ot=["placeholder"],Vt={class:"w-full students"},Ut={class:"symbol symbol-35px symbol-circle me-5"},Nt=["src"],Jt={class:"fw-semibold w-full"},qt=["textContent"],Bt=["textContent"],Kt=["onClick","textContent"],Gt={class:"symbol symbol-35px symbol-circle me-5"},Ht=["src"],Qt={class:"fw-semibold w-full"},Xt=["textContent"],Yt=["textContent"],Zt={class:"text-center"},$t=["textContent"],te={class:"card-body pt-0"},ee={class:"settings-form"},se={class:"px-10 mb-6 mx-auto row"},le={class:"lg:flex w-full"},ne={class:"mt-10 w-full"},oe=["textContent"],ae={class:"fw-semibold text-gray-600 fs-6"},ce=["textContent"],ie=["textContent"],de=["placeholder"],re={class:"w-full"},_e={key:0,class:"d-flex align-items-center mb-8"},me=e("span",{class:"bullet bullet-vertical h-40px bg-success"},null,-1),ue=["onClick"],he=e("input",{class:"form-check-input",type:"checkbox",value:""},null,-1),ve=[he],xe=["onClick"],fe=["textContent"],be=["textContent"],ge=e("span",{class:"badge badge-light-success fs-8 fw-bold"},null,-1),ye={class:"w-full"},we={class:"text-center"},Ce=["textContent"],ke={class:"card-body pt-0"},pe={class:"px-10 mb-6 mx-auto row"},Se={class:"lg:flex w-full"},Ie={class:"mt-10 w-full"},Pe=["textContent"],Te={class:"fw-semibold text-gray-600 fs-6"},Le=["textContent"],Re=["textContent"],Ee=["placeholder"],Me={class:"w-full"},je={key:0,class:"d-flex align-items-center mb-8"},De=e("span",{class:"bullet bullet-vertical h-40px bg-success"},null,-1),We=["onClick"],Ae=e("input",{class:"form-check-input",type:"checkbox",value:""},null,-1),ze=[Ae],Fe=["onClick"],Oe=["textContent"],Ve=["textContent"],Ue=e("span",{class:"badge badge-light-success fs-8 fw-bold"},null,-1),Ne={class:"w-full"},Je={class:"text-center"},qe=["textContent"],Be={class:"card-body pt-0"},Ke={class:"settings-form"},Ge={class:"max-w-xl mb-6 mx-auto row"},He={class:"w-full flex"},Qe=["textContent"],Xe=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),Ye={class:"w-full flex"},Ze=["textContent"],$e=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),ts={class:"w-full flex"},es=["textContent"],ss=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),ls={class:"w-full flex"},ns=["textContent"],os=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),as={class:"w-full flex"},cs=["textContent"],is=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),ds={class:"w-full flex"},rs=["textContent"],_s=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),ms={class:"w-full flex"},us=["textContent"],hs={class:"text-center"},vs=["textContent"],xs={class:"card-body pt-0"},fs={class:"settings-form"},bs={class:"max-w-xl mb-6 mx-auto row"},gs={class:"text-center mb-13"},ys=["textContent"],ws=["textContent"],Cs={class:"w-100 relative mb-5",autocomplete:"off"},ks=["placeholder"],ps={class:"w-full"},Ss={class:"symbol symbol-35px symbol-circle me-5"},Is=["src"],Ps={class:"fw-semibold w-full"},Ts=["textContent"],Ls=["textContent"],Rs=["onClick","textContent"],Es={class:"fw-semibold w-full"},Ms=["textContent"],js=["textContent"],Ds={class:"text-center"},Ws=["textContent"],As=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),zs={class:"bg-gray-200 shadow-md mb-10 rounded-xl"},Fs={class:"card-header border-0 pt-9"},Os={key:0,class:"card-title m-0 flex gap-4"},Vs={class:"symbol symbol-50px w-50px bg-light"},Us=["src"],Ns=["textContent"],Js={class:"flex gap-2 cursor-pointer"},qs={class:"pt-3"},Bs=["textContent"],Ks={key:0,class:"card-body p-9"},Gs=["textContent"],Hs=["textContent"],Qs={class:"timeline timeline-border-dashed"},Xs={class:"timeline-item"},Ys=e("div",{class:"timeline-line"},null,-1),Zs={class:"timeline-icon me-4"},$s={class:"timeline-content mb-10 mt-n2"},tl={class:"overflow-auto pe-3"},el=["textContent"],sl={class:"d-flex align-items-center mt-1 fs-6"},ll=["textContent"],nl={class:"timeline-item"},ol=e("div",{class:"timeline-line"},null,-1),al={class:"timeline-icon me-4"},cl={class:"timeline-content mb-10 mt-n2"},il={class:"overflow-auto pe-3"},dl=["textContent"],rl={class:"d-flex align-items-center mt-1 fs-6"},_l=["textContent"],ml={class:"h-4px w-100 bg-light mb-5"},ul={class:"w-full flex gap-4"},hl=["textContent"],vl={class:"symbol-group symbol-hover"},xl=["onMouseover","onMouseleave"],fl=["textContent"],bl={class:"text-center"},gl=["textContent"];function yl(_,c,v,t,i,p){const k=C("close_icon"),y=C("vue-feather"),u=C("editable_map_location"),f=C("form_field"),T=C("tooltip");return o(),a("div",Pt,[e("div",Tt,[h(k,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:t.back},null,8,["onClick"]),e("div",Lt,[e("div",Rt,[e("div",Et,[(o(!0),a(I,null,P(t.fillable,s=>(o(),a("div",{class:"stepper-item",onClick:m=>t.activeTab=s},[e("h3",{class:U([t.activeTab==s?"text-danger border-danger":"text-gray-400 border-transparent","cursor-pointer pb-3 px-2 stepper-title text-md border-b"]),textContent:n(s)},null,10,jt)],8,Mt))),256))]),e("div",Dt,[t.activeTab=="Student"?(o(),a("div",{class:"",key:t.activeTab},[(o(),a("div",{class:"card-body pt-0 mx-auto max-w-xl",key:_.students},[e("div",Wt,[e("h1",{class:"mb-3",textContent:n(t.translate("Find student"))},null,8,At),e("div",{class:"text-gray-400 font-semibold",textContent:n(t.translate("Search by name, parent name or contact number"))},null,8,zt)]),e("div",Ft,[h(y,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),z(e("input",{type:"text",onChange:c[0]||(c[0]=(...s)=>t.findStudent&&t.findStudent(...s)),"onUpdate:modelValue":c[1]||(c[1]=s=>t.searchText=s),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name, parent name")},null,40,Ot),[[F,t.searchText]])]),t.searchText?(o(!0),a(I,{key:0},P(v.allstudents,s=>(o(),a("div",Vt,[s.show?(o(),a("a",{href:"javascript:;",key:s.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",Ut,[e("img",{alt:"Pic",src:s.picture},null,8,Nt)]),e("div",Jt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(s.name)},null,8,qt),e("span",{class:"block text-gray-500 text-sm",textContent:n(s.contact_number)},null,8,Bt)]),e("span",{onClick:m=>t.setStudent(s),class:"btn btn-danger btn-sm text-white",textContent:n(t.translate("Choose"))},null,8,Kt)])):d("",!0)]))),256)):d("",!0),t.activeItem.student?(o(),a("a",{href:"javascript:;",key:t.activeItem.student,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",Gt,[e("img",{alt:"Pic",src:t.activeItem.student.picture},null,8,Ht)]),e("div",Qt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(t.activeItem.student.name)},null,8,Xt),e("span",{class:"block text-gray-500 text-sm",textContent:n(t.activeItem.student.contact_number)},null,8,Yt)])])):d("",!0)])),e("p",Zt,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[2]||(c[2]=s=>t.activeTab="Pickup location"),textContent:n(t.translate("Pickup location"))},null,8,$t)])])):d("",!0),t.activeTab=="Pickup location"?(o(),a("div",{class:"",key:t.activeTab},[e("div",te,[e("div",ee,[e("div",se,[e("div",le,[e("div",ne,[e("h3",{class:"mb-3",textContent:n(t.translate("Location Address"))},null,8,oe),e("div",ae,[(o(),a("span",{class:"d-block fw-bold pb-3 text-gray-400",key:t.activeItem.start_address,textContent:n(t.activeItem.start_address)},null,8,ce)),e("a",{class:"fw-bold",onClick:c[3]||(c[3]=s=>t.showPlaceSearch=!0),href:"javascript:;",textContent:n(t.translate("Change"))},null,8,ie)]),t.showPlaceSearch?(o(),a("div",{key:t.showPlaceSearch},[z(e("input",{autocomplete:"off",onChange:c[4]||(c[4]=(...s)=>t.startPlaceChanged&&t.startPlaceChanged(...s)),"onUpdate:modelValue":c[5]||(c[5]=s=>t.start_placeSearch=s),type:"text",class:"form-control form-control-solid",placeholder:t.translate("Find Location")},null,40,de),[[F,t.start_placeSearch]]),t.places?(o(),a("div",{class:"mt-3 w-full card-body",key:t.places},[(o(!0),a(I,null,P(t.places,s=>(o(),a("div",re,[s?(o(),a("div",_e,[me,e("div",{class:"form-check form-check-custom form-check-solid mx-5 cursor-pointer",onClick:m=>t.setPlaceMarker(s,"start")},ve,8,ue),e("div",{class:"flex-grow-1 cursor-pointer",onClick:m=>t.setPlaceMarker(s,"start")},[s.structured_formatting?(o(),a("a",{key:0,href:"#",class:"text-gray-800 text-hover-primary fw-bold fs-6",textContent:n(s.structured_formatting.main_text)},null,8,fe)):d("",!0),e("span",{class:"text-muted fw-semibold d-block",textContent:n(s.description)},null,8,be)],8,xe),ge])):d("",!0)]))),256))])):d("",!0)])):d("",!0)]),e("div",ye,[(o(),D(u,{system_setting:v.system_setting,item:t.activeItem,onSetlocation:t.updateStartMarker,key:t.activeItem.start_latitude,location:{lat:t.activeItem.start_latitude,lng:t.activeItem.start_longitude}},null,8,["system_setting","item","onSetlocation","location"]))])])])])]),e("p",we,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[6]||(c[6]=s=>t.activeTab="Destination"),textContent:n(t.translate("Destination"))},null,8,Ce)])])):d("",!0),t.activeTab=="Destination"?(o(),a("div",{class:"",key:t.activeTab},[e("div",ke,[e("div",pe,[e("div",Se,[e("div",Ie,[e("h3",{class:"mb-3",textContent:n(t.translate("Location Address"))},null,8,Pe),e("div",Te,[(o(),a("span",{class:"d-block fw-bold pb-3 text-gray-400",key:t.activeItem.end_address,textContent:n(t.activeItem.end_address)},null,8,Le)),e("a",{class:"fw-bold",onClick:c[7]||(c[7]=s=>t.showPlaceSearch=!0),href:"javascript:;",textContent:n(t.translate("Change"))},null,8,Re)]),t.showPlaceSearch?(o(),a("div",{key:t.showPlaceSearch},[z(e("input",{autocomplete:"off",onChange:c[8]||(c[8]=(...s)=>t.endPlaceChanged&&t.endPlaceChanged(...s)),"onUpdate:modelValue":c[9]||(c[9]=s=>t.end_placeSearch=s),type:"text",class:"form-control form-control-solid",placeholder:t.translate("Find Location")},null,40,Ee),[[F,t.end_placeSearch]]),t.places&&t.end_placeSearch.length?(o(),a("div",{class:"mt-3 w-full card-body",key:t.places},[(o(!0),a(I,null,P(t.places,s=>(o(),a("div",Me,[s?(o(),a("div",je,[De,e("div",{class:"form-check form-check-custom form-check-solid mx-5 cursor-pointer",onClick:m=>t.setPlaceMarker(s,"end")},ze,8,We),e("div",{class:"flex-grow-1 cursor-pointer",onClick:m=>t.setPlaceMarker(s,"end")},[s.structured_formatting?(o(),a("a",{key:0,href:"#",class:"text-gray-800 text-hover-primary fw-bold fs-6",textContent:n(s.structured_formatting.main_text)},null,8,Oe)):d("",!0),e("span",{class:"text-muted fw-semibold d-block",textContent:n(s.description)},null,8,Ve)],8,Fe),Ue])):d("",!0)]))),256))])):d("",!0)])):d("",!0)]),e("div",Ne,[(o(),D(u,{system_setting:v.system_setting,item:t.activeItem,onSetlocation:t.updateEndMarker,key:t.activeItem.end_latitude,location:{lat:t.activeItem.end_latitude,lng:t.activeItem.end_longitude}},null,8,["system_setting","item","onSetlocation","location"]))])])])]),e("p",Je,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[10]||(c[10]=s=>t.activeTab="Pickup days"),textContent:n(t.translate("Pickup days"))},null,8,qe)])])):d("",!0),t.activeTab=="Pickup days"?(o(),a("div",{class:"",key:t.activeTab},[e("div",Be,[e("div",Ke,[e("div",Ge,[e("div",He,[e("label",{class:"w-full col-form-label fw-semibold fs-6",textContent:n(t.translate("Saturday"))},null,8,Qe),h(f,{class:"w-full",item:t.activeItem,column:{key:"saturday",title:t.translate("Saturday"),column_type:"checkbox"}},null,8,["item","column"])]),Xe,e("div",Ye,[e("label",{class:"w-full col-form-label fw-semibold fs-6",textContent:n(t.translate("Sunday"))},null,8,Ze),h(f,{class:"w-full",item:t.activeItem,column:{key:"sunday",title:t.translate("Sunday"),column_type:"checkbox"}},null,8,["item","column"])]),$e,e("div",ts,[e("label",{class:"w-full col-form-label fw-semibold fs-6",textContent:n(t.translate("Monday"))},null,8,es),h(f,{class:"w-full",item:t.activeItem,column:{key:"monday",title:t.translate("Monday"),column_type:"checkbox"}},null,8,["item","column"])]),ss,e("div",ls,[e("label",{class:"w-full col-form-label fw-semibold fs-6",textContent:n(t.translate("Tuesday"))},null,8,ns),h(f,{class:"w-full",item:t.activeItem,column:{key:"tuesday",title:t.translate("Tuesday"),column_type:"checkbox"}},null,8,["item","column"])]),os,e("div",as,[e("label",{class:"w-full col-form-label fw-semibold fs-6",textContent:n(t.translate("Wednesday"))},null,8,cs),h(f,{class:"w-full",item:t.activeItem,column:{key:"wednesday",title:t.translate("Wednesday"),column_type:"checkbox"}},null,8,["item","column"])]),is,e("div",ds,[e("label",{class:"w-full col-form-label fw-semibold fs-6",textContent:n(t.translate("Thursday"))},null,8,rs),h(f,{class:"w-full",item:t.activeItem,column:{key:"thursday",title:t.translate("Thursday"),column_type:"checkbox"}},null,8,["item","column"])]),_s,e("div",ms,[e("label",{class:"w-full col-form-label fw-semibold fs-6",textContent:n(t.translate("Friday"))},null,8,us),h(f,{class:"w-full",item:t.activeItem,column:{key:"friday",title:t.translate("Friday"),column_type:"checkbox"}},null,8,["item","column"])])])])]),e("p",hs,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[11]||(c[11]=s=>t.activeTab="Route"),textContent:n(t.translate("Set Route"))},null,8,vs)])])):d("",!0),t.activeTab=="Route"?(o(),a("div",{class:"",key:t.activeTab},[e("div",xs,[e("div",fs,[e("div",bs,[(o(),a("div",{class:"card-body pt-0 mx-auto max-w-xl",key:v.routes},[e("div",gs,[e("h1",{class:"mb-3",textContent:n(t.translate("Find Route"))},null,8,ys),e("div",{class:"text-gray-400 font-semibold",textContent:n(t.translate("Search by name or description"))},null,8,ws)]),e("div",Cs,[h(y,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),z(e("input",{type:"text",onChange:c[12]||(c[12]=(...s)=>t.findRoute&&t.findRoute(...s)),"onUpdate:modelValue":c[13]||(c[13]=s=>t.searchText=s),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name, parent name")},null,40,ks),[[F,t.searchText]])]),t.searchText?(o(!0),a(I,{key:0},P(v.routes,s=>(o(),a("div",ps,[s&&s.show?(o(),a("a",{href:"javascript:;",key:s.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",Ss,[e("img",{alt:"Pic",src:"/src/asset/img/300-6.jpg"},null,8,Is)]),e("div",Ps,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(s.route_name)},null,8,Ts),e("span",{class:"block text-gray-500 text-sm",textContent:n(s.description)},null,8,Ls)]),e("span",{onClick:m=>t.setRoute(s),class:"btn btn-danger btn-sm text-white",textContent:n(t.translate("Choose"))},null,8,Rs)])):d("",!0)]))),256)):d("",!0),t.activeItem.route?(o(),a("a",{href:"javascript:;",key:t.activeItem.route,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1 gap-4"},[h(y,{type:"map-pin",class:"w-3"}),e("div",Es,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(t.activeItem.route.route_name)},null,8,Ms),e("span",{class:"block text-gray-500 text-sm truncate",textContent:n(t.activeItem.route.desc)},null,8,js)])])):d("",!0)]))])])]),e("p",Ds,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[14]||(c[14]=s=>t.activeTab="Confirm"),textContent:n(t.translate("Confirm"))},null,8,Ws)])])):d("",!0),t.activeTab=="Confirm"?(o(),a("div",{class:"max-w-xl mx-auto",key:t.activeTab},[As,e("div",zs,[e("div",Fs,[t.activeItem&&t.activeItem.student?(o(),a("div",Os,[e("div",Vs,[e("img",{src:t.activeItem.student.picture,alt:"image",class:"p-3"},null,8,Us)]),e("span",{class:"",textContent:n(t.activeItem.student.name)},null,8,Ns)])):d("",!0),e("label",Js,[h(f,{class:"flex-end",item:t.activeItem,column:{key:"status",title:t.translate("Status"),column_type:"checkbox",hide_text:!0}},null,8,["item","column"]),e("div",qs,[e("span",{class:"badge badge-light fw-bold me-auto px-4 py-3",textContent:n(t.activeItem.status?"Active":"Pending")},null,8,Bs)])])]),t.activeItem.route?(o(),a("div",Ks,[e("div",{class:"fs-3 fw-bold text-gray-900",textContent:n(t.activeItem.route.route_name)},null,8,Gs),e("p",{class:"text-gray-500 fw-semibold fs-5 mt-1 mb-7",textContent:n(t.activeItem.route.description)},null,8,Hs),e("div",Qs,[e("div",Xs,[Ys,e("div",Zs,[h(y,{type:"circle",class:"fs-2 text-success"})]),e("div",$s,[e("div",tl,[e("div",{class:"fs-5 fw-semibold mb-2",textContent:n(t.activeItem.start_address)},null,8,el),e("div",sl,[e("div",{class:"text-muted me-2 fs-7",textContent:n(t.translate("Pickup"))},null,8,ll)])])])]),e("div",nl,[ol,e("div",al,[h(y,{type:"map-pin",class:"fs-2 text-danger"})]),e("div",cl,[e("div",il,[e("div",{class:"fs-5 fw-semibold mb-2",textContent:n(t.activeItem.end_address)},null,8,dl),e("div",rl,[e("div",{class:"text-muted me-2 fs-7",textContent:n(t.translate("Destination"))},null,8,_l)])])])])]),e("div",ml,[e("div",{class:U(["rounded h-4px",t.progressWidth()<100?"bg-info":"bg-success"]),role:"progressbar",style:ut({width:t.progressWidth()+"%"})},null,6)]),e("div",ul,[e("span",{class:"font-semibold pt-2",textContent:n(t.translate("Pickup days"))},null,8,hl),e("div",vl,[(o(!0),a(I,null,P(t.weekDays,(s,m)=>(o(),a("div",null,[t.activeItem[s.k]?(o(),a("div",{key:0,onMouseover:R=>t.showTip[m]=!0,onMouseleave:R=>t.showTip[m]=!1,style:{"margin-left":"-7px"},class:"symbol symbol-35px symbol-circle"},[e("span",{class:U([s.class,"symbol-label text-inverse-warning fw-bold"]),textContent:n(s.s)},null,10,fl),t.showTip[m]?(o(),D(T,{key:t.showTip[m],title:s.k},null,8,["title"])):d("",!0)],40,xl)):d("",!0)]))),256))])])])):d("",!0)]),e("p",bl,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[15]||(c[15]=(...s)=>t.saveRoute&&t.saveRoute(...s)),textContent:n(t.translate("Submit"))},null,8,gl)])])):d("",!0)])])])])])}const wl=ot(It,[["render",yl]]),Cl=E(()=>M(()=>import("./map-5GV_4fzv.min.js"),__vite__mapDeps([0,1,2,3]))),kl=E(()=>M(()=>import("./side-form-create-xsfGXZTQ.min.js"),__vite__mapDeps([4,2,3,5,6]))),pl=E(()=>M(()=>import("./side-form-update-dhD2nQC8.min.js"),__vite__mapDeps([7,2,3,5,6,8,9,1]))),Sl=E(()=>M(()=>import("./form_field-wtcjT_eT.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),Il={components:{datatabble:at,SideFormCreate:kl,SideFormUpdate:pl,maps:Cl,close_icon:mt,delete_icon:ct,car_icon:it,route_icon:dt,form_field:Sl,editable_map_location:_t,tooltip:ft},name:"Routes",emits:["callback"],setup(_,{emit:c}){const v=r(!1),t=r(!1);r(null);const i=r({}),p=r("Employee"),k=r({}),y=r({});r([]),r(!0);const u=r(""),f=r(null),T=r(!1),s=r(["Employee","Pickup location","Destination","Pickup days","Route","Confirm"]),m=r([]),R=r(!1),W=r(""),A=r(""),B=r([{k:"saturday",s:"SA",class:"bg-warning"},{k:"sunday",s:"SU",class:"bg-danger"},{k:"monday",s:"MO",class:"bg-info"},{k:"tuesday",s:"TU",class:"bg-success"},{k:"wednesday",s:"WE",class:"bg-primary"},{k:"thursday",s:"TH",class:"bg-gradient-secondary"},{k:"friday",s:"FR",class:"bg-dark-subtle"}]);_.item&&(i.value=_.item),_.allemployees?r(_.allemployees):r([]);const V=async()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(l=>{i.value.start_latitude=l.coords.latitude,i.value.start_longitude=l.coords.longitude,i.value.end_latitude=l.coords.latitude,i.value.end_longitude=l.coords.longitude},l=>{i.value.start_latitude=i.value.start_latitude??30.06,i.value.start_longitude=i.value.start_longitude??31.21,i.value.end_latitude=i.value.end_latitude??30.06,i.value.end_longitude=i.value.end_longitude??31.21,N(l.message)}):(N("location error"),f.value="Geolocation is not supported by this browser.")};V();const K=async()=>{let l=W.value.length>3?await J(_.system_setting.google_map_api,W.value,_.business_setting.country):"";m.value=l.predictions},b=async()=>{let l=A.value.length>3?await J(_.system_setting.google_map_api,A.value,_.business_setting.country):"";m.value=l.predictions},O=()=>{var l=new URLSearchParams;let x=JSON.parse(JSON.stringify(i.value)),S=Object.keys(x),w,L;for(let g=0;g<S.length;g++)w=S[g],L=typeof x[w]=="object"?JSON.stringify(x[w]):x[w],l.append("params["+w+"]",L);let j=x.location_id>0?"update":"create";l.append("type","RouteLocation."+j),ht(l,"/api/"+j).then(g=>{vt(g)})},G=async l=>{i.value.start_latitude=l.lat(),i.value.start_longitude=l.lng(),i.value.start_address=await q(l.lat(),l.lng())},H=async l=>{i.value.end_latitude=l.lat(),i.value.end_longitude=l.lng(),i.value.end_address=await q(l.lat(),l.lng())},Q=async(l,x)=>{const S=new google.maps.places.PlacesService(document.createElement("div"));let w=l.place_id;S.getDetails({placeId:w},(L,j)=>{if(j===google.maps.places.PlacesServiceStatus.OK&&L){const g=L.geometry.location;x=="start"&&(i.value.start_address=l.description,i.value.start_latitude=g.lat(),i.value.start_longitude=g.lng()),x=="end"&&(i.value.end_address=l.description,i.value.end_latitude=g.lat(),i.value.end_longitude=g.lng()),m.value=[],R.value=!1}else console.error("Failed to fetch place details")})},X=()=>{c("callback")},Y=l=>{let x=!!l.name.toLowerCase().includes(u.value.toLowerCase());return x||!!l.mobile.toLowerCase().includes(u.value.toLowerCase())},Z=l=>{i.value.model_id=l.customer_id,i.value.model=l,p.value="Pickup location",u.value=null},$=()=>{if(_.allemployees)for(let l=0;l<_.allemployees.length;l++)_.allemployees[l].show=u.value.trim()?Y(_.allemployees[l]):1},tt=l=>{let x=!!l.route_name.toLowerCase().includes(u.value.toLowerCase());return x||!!l.description.toLowerCase().includes(u.value.toLowerCase())},et=l=>{i.value.route_id=l.route_id,i.value.route=l,p.value="Confirm",u.value=null},st=()=>{if(_.routes){for(let l=0;l<_.routes.length;l++)_.routes[l].show=u.value.trim()?tt(_.routes[l]):1;console.log(_.routes)}},lt=r({});return{progressWidth:()=>xt(["model_id","route_id","start_address","end_address","status"],i),weekDays:B,showTip:lt,setRoute:et,findRoute:st,setEmployee:Z,findEmployee:$,setPlaceMarker:Q,showPlaceSearch:R,startPlaceChanged:K,endPlaceChanged:b,start_placeSearch:W,end_placeSearch:A,places:m,showAddSide:v,showEditSide:t,content:k,fillable:s,center:y,activeItem:i,activeTab:p,translate:rt,updateStartMarker:G,updateEndMarker:H,searchText:u,getUserLocation:V,collapsed:T,saveRoute:O,back:X}},props:["conf","path","system_setting","business_setting","setting","item","allemployees","routes"]},Pl={class:"w-full flex overflow-auto"},Tl={class:"w-full relative"},Ll={class:"card w-full py-10"},Rl={class:"w-full stepper stepper-links"},El={class:"stepper-nav justify-content-center py-2 mb-10"},Ml=["onClick"],jl=["textContent"],Dl={class:"w-full"},Wl={class:"text-center mb-13"},Al=["textContent"],zl=["textContent"],Fl={class:"w-100 relative mb-5",autocomplete:"off"},Ol=["placeholder"],Vl={class:"w-full employees"},Ul={class:"symbol symbol-35px symbol-circle me-5"},Nl=["src"],Jl={class:"fw-semibold w-full"},ql=["textContent"],Bl=["textContent"],Kl=["onClick","textContent"],Gl={class:"symbol symbol-35px symbol-circle me-5"},Hl=["src"],Ql={class:"fw-semibold w-full"},Xl=["textContent"],Yl=["textContent"],Zl={class:"text-center"},$l=["textContent"],tn={class:"card-body pt-0"},en={class:"settings-form"},sn={class:"px-10 mb-6 mx-auto row"},ln={class:"lg:flex w-full"},nn={class:"mt-10 w-full"},on=["textContent"],an={class:"fw-semibold text-gray-600 fs-6"},cn=["textContent"],dn=["textContent"],rn=["placeholder"],_n={class:"w-full"},mn={key:0,class:"d-flex align-items-center mb-8"},un=e("span",{class:"bullet bullet-vertical h-40px bg-success"},null,-1),hn=["onClick"],vn=e("input",{class:"form-check-input",type:"checkbox",value:""},null,-1),xn=[vn],fn=["onClick"],bn=["textContent"],gn=["textContent"],yn=e("span",{class:"badge badge-light-success fs-8 fw-bold"},null,-1),wn={class:"w-full"},Cn={class:"text-center"},kn=["textContent"],pn={class:"card-body pt-0"},Sn={class:"px-10 mb-6 mx-auto row"},In={class:"lg:flex w-full"},Pn={class:"mt-10 w-full"},Tn=["textContent"],Ln={class:"fw-semibold text-gray-600 fs-6"},Rn=["textContent"],En=["textContent"],Mn=["placeholder"],jn={class:"w-full"},Dn={key:0,class:"d-flex align-items-center mb-8"},Wn=e("span",{class:"bullet bullet-vertical h-40px bg-success"},null,-1),An=["onClick"],zn=e("input",{class:"form-check-input",type:"checkbox",value:""},null,-1),Fn=[zn],On=["onClick"],Vn=["textContent"],Un=["textContent"],Nn=e("span",{class:"badge badge-light-success fs-8 fw-bold"},null,-1),Jn={class:"w-full"},qn={class:"text-center"},Bn=["textContent"],Kn={class:"card-body pt-0"},Gn={class:"settings-form"},Hn={class:"max-w-xl mb-6 mx-auto row"},Qn={class:"w-full flex"},Xn=["textContent"],Yn=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),Zn={class:"w-full flex"},$n=["textContent"],to=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),eo={class:"w-full flex"},so=["textContent"],lo=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),no={class:"w-full flex"},oo=["textContent"],ao=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),co={class:"w-full flex"},io=["textContent"],ro=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),_o={class:"w-full flex"},mo=["textContent"],uo=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),ho={class:"w-full flex"},vo=["textContent"],xo={class:"text-center"},fo=["textContent"],bo={class:"card-body pt-0"},go={class:"settings-form"},yo={class:"max-w-xl mb-6 mx-auto row"},wo={class:"text-center mb-13"},Co=["textContent"],ko=["textContent"],po={class:"w-100 relative mb-5",autocomplete:"off"},So=["placeholder"],Io={class:"w-full"},Po={class:"fw-semibold w-full"},To=["textContent"],Lo=["textContent"],Ro=["onClick","textContent"],Eo={class:"fw-semibold w-full"},Mo=["textContent"],jo=["textContent"],Do={class:"text-center"},Wo=["textContent"],Ao=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),zo={class:"bg-gray-200 shadow-md mb-10 rounded-xl"},Fo={class:"card-header border-0 pt-9"},Oo={key:0,class:"card-title m-0 flex gap-4"},Vo={class:"symbol symbol-50px w-50px bg-light"},Uo=["src"],No=["textContent"],Jo={class:"flex gap-2 cursor-pointer"},qo={class:"pt-3"},Bo=["textContent"],Ko={key:0,class:"card-body p-9"},Go=["textContent"],Ho=["textContent"],Qo={class:"timeline timeline-border-dashed"},Xo={class:"timeline-item"},Yo=e("div",{class:"timeline-line"},null,-1),Zo={class:"timeline-icon me-4"},$o={class:"timeline-content mb-10 mt-n2"},ta={class:"overflow-auto pe-3"},ea=["textContent"],sa={class:"d-flex align-items-center mt-1 fs-6"},la=["textContent"],na={class:"timeline-item"},oa=e("div",{class:"timeline-line"},null,-1),aa={class:"timeline-icon me-4"},ca={class:"timeline-content mb-10 mt-n2"},ia={class:"overflow-auto pe-3"},da=["textContent"],ra={class:"d-flex align-items-center mt-1 fs-6"},_a=["textContent"],ma={class:"h-4px w-100 bg-light mb-5"},ua={class:"w-full flex gap-4"},ha=["textContent"],va={class:"symbol-group symbol-hover"},xa=["onMouseover","onMouseleave"],fa=["textContent"],ba={class:"text-center"},ga=["textContent"];function ya(_,c,v,t,i,p){const k=C("close_icon"),y=C("vue-feather"),u=C("editable_map_location"),f=C("form_field"),T=C("tooltip");return o(),a("div",Pl,[e("div",Tl,[h(k,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:t.back},null,8,["onClick"]),e("div",Ll,[e("div",Rl,[e("div",El,[(o(!0),a(I,null,P(t.fillable,s=>(o(),a("div",{class:"stepper-item",onClick:m=>t.activeTab=s},[e("h3",{class:U([t.activeTab==s?"text-danger border-danger":"text-gray-400 border-transparent","cursor-pointer pb-3 px-2 stepper-title text-md border-b"]),textContent:n(s)},null,10,jl)],8,Ml))),256))]),e("div",Dl,[t.activeTab=="Employee"?(o(),a("div",{class:"",key:t.activeTab},[(o(),a("div",{class:"card-body pt-0 mx-auto max-w-xl",key:_.employees},[e("div",Wl,[e("h1",{class:"mb-3",textContent:n(t.translate("Find employee"))},null,8,Al),e("div",{class:"text-gray-400 font-semibold",textContent:n(t.translate("Search by name, parent name or contact number"))},null,8,zl)]),e("div",Fl,[h(y,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),z(e("input",{type:"text",onChange:c[0]||(c[0]=(...s)=>t.findEmployee&&t.findEmployee(...s)),"onUpdate:modelValue":c[1]||(c[1]=s=>t.searchText=s),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name, parent name")},null,40,Ol),[[F,t.searchText]])]),t.searchText?(o(!0),a(I,{key:0},P(v.allemployees,s=>(o(),a("div",Vl,[s.show?(o(),a("a",{href:"javascript:;",key:s.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",Ul,[e("img",{alt:"Pic",src:s.picture},null,8,Nl)]),e("div",Jl,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(s.name)},null,8,ql),e("span",{class:"block text-gray-500 text-sm",textContent:n(s.mobile)},null,8,Bl)]),e("span",{onClick:m=>t.setEmployee(s),class:"btn btn-danger btn-sm text-white",textContent:n(t.translate("Choose"))},null,8,Kl)])):d("",!0)]))),256)):d("",!0),gt(" "+n(t.activeItem)+" ",1),t.activeItem.model?(o(),a("a",{href:"javascript:;",key:t.activeItem.model,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",Gl,[e("img",{alt:"Pic",src:t.activeItem.model.picture},null,8,Hl)]),e("div",Ql,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(t.activeItem.model.name)},null,8,Xl),e("span",{class:"block text-gray-500 text-sm",textContent:n(t.activeItem.model.mobile)},null,8,Yl)])])):d("",!0)])),e("p",Zl,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[2]||(c[2]=s=>t.activeTab="Pickup location"),textContent:n(t.translate("Pickup location"))},null,8,$l)])])):d("",!0),t.activeTab=="Pickup location"?(o(),a("div",{class:"",key:t.activeTab},[e("div",tn,[e("div",en,[e("div",sn,[e("div",ln,[e("div",nn,[e("h3",{class:"mb-3",textContent:n(t.translate("Location Address"))},null,8,on),e("div",an,[(o(),a("span",{class:"d-block fw-bold pb-3 text-gray-400",key:t.activeItem.start_address,textContent:n(t.activeItem.start_address)},null,8,cn)),e("a",{class:"fw-bold",onClick:c[3]||(c[3]=s=>t.showPlaceSearch=!0),href:"javascript:;",textContent:n(t.translate("Change"))},null,8,dn)]),t.showPlaceSearch?(o(),a("div",{key:t.showPlaceSearch},[z(e("input",{autocomplete:"off",onChange:c[4]||(c[4]=(...s)=>t.startPlaceChanged&&t.startPlaceChanged(...s)),"onUpdate:modelValue":c[5]||(c[5]=s=>t.start_placeSearch=s),type:"text",class:"form-control form-control-solid",placeholder:t.translate("Find Location")},null,40,rn),[[F,t.start_placeSearch]]),t.places?(o(),a("div",{class:"mt-3 w-full card-body",key:t.places},[(o(!0),a(I,null,P(t.places,s=>(o(),a("div",_n,[s?(o(),a("div",mn,[un,e("div",{class:"form-check form-check-custom form-check-solid mx-5 cursor-pointer",onClick:m=>t.setPlaceMarker(s,"start")},xn,8,hn),e("div",{class:"flex-grow-1 cursor-pointer",onClick:m=>t.setPlaceMarker(s,"start")},[s.structured_formatting?(o(),a("a",{key:0,href:"#",class:"text-gray-800 text-hover-primary fw-bold fs-6",textContent:n(s.structured_formatting.main_text)},null,8,bn)):d("",!0),e("span",{class:"text-muted fw-semibold d-block",textContent:n(s.description)},null,8,gn)],8,fn),yn])):d("",!0)]))),256))])):d("",!0)])):d("",!0)]),e("div",wn,[(o(),D(u,{system_setting:v.system_setting,item:t.activeItem,onSetlocation:t.updateStartMarker,key:t.activeItem.start_latitude,location:{lat:t.activeItem.start_latitude,lng:t.activeItem.start_longitude}},null,8,["system_setting","item","onSetlocation","location"]))])])])])]),e("p",Cn,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[6]||(c[6]=s=>t.activeTab="Destination"),textContent:n(t.translate("Destination"))},null,8,kn)])])):d("",!0),t.activeTab=="Destination"?(o(),a("div",{class:"",key:t.activeTab},[e("div",pn,[e("div",Sn,[e("div",In,[e("div",Pn,[e("h3",{class:"mb-3",textContent:n(t.translate("Location Address"))},null,8,Tn),e("div",Ln,[(o(),a("span",{class:"d-block fw-bold pb-3 text-gray-400",key:t.activeItem.end_address,textContent:n(t.activeItem.end_address)},null,8,Rn)),e("a",{class:"fw-bold",onClick:c[7]||(c[7]=s=>t.showPlaceSearch=!0),href:"javascript:;",textContent:n(t.translate("Change"))},null,8,En)]),t.showPlaceSearch?(o(),a("div",{key:t.showPlaceSearch},[z(e("input",{autocomplete:"off",onChange:c[8]||(c[8]=(...s)=>t.endPlaceChanged&&t.endPlaceChanged(...s)),"onUpdate:modelValue":c[9]||(c[9]=s=>t.end_placeSearch=s),type:"text",class:"form-control form-control-solid",placeholder:t.translate("Find Location")},null,40,Mn),[[F,t.end_placeSearch]]),t.places&&t.end_placeSearch.length?(o(),a("div",{class:"mt-3 w-full card-body",key:t.places},[(o(!0),a(I,null,P(t.places,s=>(o(),a("div",jn,[s?(o(),a("div",Dn,[Wn,e("div",{class:"form-check form-check-custom form-check-solid mx-5 cursor-pointer",onClick:m=>t.setPlaceMarker(s,"end")},Fn,8,An),e("div",{class:"flex-grow-1 cursor-pointer",onClick:m=>t.setPlaceMarker(s,"end")},[s.structured_formatting?(o(),a("a",{key:0,href:"#",class:"text-gray-800 text-hover-primary fw-bold fs-6",textContent:n(s.structured_formatting.main_text)},null,8,Vn)):d("",!0),e("span",{class:"text-muted fw-semibold d-block",textContent:n(s.description)},null,8,Un)],8,On),Nn])):d("",!0)]))),256))])):d("",!0)])):d("",!0)]),e("div",Jn,[(o(),D(u,{system_setting:v.system_setting,item:t.activeItem,onSetlocation:t.updateEndMarker,key:t.activeItem.end_latitude,location:{lat:t.activeItem.end_latitude,lng:t.activeItem.end_longitude}},null,8,["system_setting","item","onSetlocation","location"]))])])])]),e("p",qn,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[10]||(c[10]=s=>t.activeTab="Pickup days"),textContent:n(t.translate("Pickup days"))},null,8,Bn)])])):d("",!0),t.activeTab=="Pickup days"?(o(),a("div",{class:"",key:t.activeTab},[e("div",Kn,[e("div",Gn,[e("div",Hn,[e("div",Qn,[e("label",{class:"w-full col-form-label fw-semibold fs-6",textContent:n(t.translate("Saturday"))},null,8,Xn),h(f,{class:"w-full",item:t.activeItem,column:{key:"saturday",title:t.translate("Saturday"),column_type:"checkbox"}},null,8,["item","column"])]),Yn,e("div",Zn,[e("label",{class:"w-full col-form-label fw-semibold fs-6",textContent:n(t.translate("Sunday"))},null,8,$n),h(f,{class:"w-full",item:t.activeItem,column:{key:"sunday",title:t.translate("Sunday"),column_type:"checkbox"}},null,8,["item","column"])]),to,e("div",eo,[e("label",{class:"w-full col-form-label fw-semibold fs-6",textContent:n(t.translate("Monday"))},null,8,so),h(f,{class:"w-full",item:t.activeItem,column:{key:"monday",title:t.translate("Monday"),column_type:"checkbox"}},null,8,["item","column"])]),lo,e("div",no,[e("label",{class:"w-full col-form-label fw-semibold fs-6",textContent:n(t.translate("Tuesday"))},null,8,oo),h(f,{class:"w-full",item:t.activeItem,column:{key:"tuesday",title:t.translate("Tuesday"),column_type:"checkbox"}},null,8,["item","column"])]),ao,e("div",co,[e("label",{class:"w-full col-form-label fw-semibold fs-6",textContent:n(t.translate("Wednesday"))},null,8,io),h(f,{class:"w-full",item:t.activeItem,column:{key:"wednesday",title:t.translate("Wednesday"),column_type:"checkbox"}},null,8,["item","column"])]),ro,e("div",_o,[e("label",{class:"w-full col-form-label fw-semibold fs-6",textContent:n(t.translate("Thursday"))},null,8,mo),h(f,{class:"w-full",item:t.activeItem,column:{key:"thursday",title:t.translate("Thursday"),column_type:"checkbox"}},null,8,["item","column"])]),uo,e("div",ho,[e("label",{class:"w-full col-form-label fw-semibold fs-6",textContent:n(t.translate("Friday"))},null,8,vo),h(f,{class:"w-full",item:t.activeItem,column:{key:"friday",title:t.translate("Friday"),column_type:"checkbox"}},null,8,["item","column"])])])])]),e("p",xo,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[11]||(c[11]=s=>t.activeTab="Route"),textContent:n(t.translate("Set Route"))},null,8,fo)])])):d("",!0),t.activeTab=="Route"?(o(),a("div",{class:"",key:t.activeTab},[e("div",bo,[e("div",go,[e("div",yo,[(o(),a("div",{class:"card-body pt-0 mx-auto max-w-xl",key:v.routes},[e("div",wo,[e("h1",{class:"mb-3",textContent:n(t.translate("Find Route"))},null,8,Co),e("div",{class:"text-gray-400 font-semibold",textContent:n(t.translate("Search by name or description"))},null,8,ko)]),e("div",po,[h(y,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),z(e("input",{type:"text",onChange:c[12]||(c[12]=(...s)=>t.findRoute&&t.findRoute(...s)),"onUpdate:modelValue":c[13]||(c[13]=s=>t.searchText=s),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name, parent name")},null,40,So),[[F,t.searchText]])]),t.searchText?(o(!0),a(I,{key:0},P(v.routes,s=>(o(),a("div",Io,[s&&s.show?(o(),a("a",{href:"javascript:;",key:s.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",Po,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(s.route_name)},null,8,To),e("span",{class:"block text-gray-500 text-sm",textContent:n(s.description)},null,8,Lo)]),e("span",{onClick:m=>t.setRoute(s),class:"btn btn-danger btn-sm text-white",textContent:n(t.translate("Choose"))},null,8,Ro)])):d("",!0)]))),256)):d("",!0),t.activeItem.route?(o(),a("a",{href:"javascript:;",key:t.activeItem.route,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1 gap-4"},[h(y,{type:"map-pin",class:"w-3"}),e("div",Eo,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(t.activeItem.route.route_name)},null,8,Mo),e("span",{class:"block text-gray-500 text-sm truncate",textContent:n(t.activeItem.route.desc)},null,8,jo)])])):d("",!0)]))])])]),e("p",Do,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[14]||(c[14]=s=>t.activeTab="Confirm"),textContent:n(t.translate("Confirm"))},null,8,Wo)])])):d("",!0),t.activeTab=="Confirm"?(o(),a("div",{class:"max-w-xl mx-auto",key:t.activeTab},[Ao,e("div",zo,[e("div",Fo,[t.activeItem&&t.activeItem.model?(o(),a("div",Oo,[e("div",Vo,[e("img",{src:t.activeItem.model.picture,alt:"image",class:"p-3"},null,8,Uo)]),e("span",{class:"",textContent:n(t.activeItem.model.name)},null,8,No)])):d("",!0),e("label",Jo,[h(f,{class:"flex-end",item:t.activeItem,column:{key:"status",title:t.translate("Status"),column_type:"checkbox",hide_text:!0}},null,8,["item","column"]),e("div",qo,[e("span",{class:"badge badge-light fw-bold me-auto px-4 py-3",textContent:n(t.activeItem.status?"Active":"Pending")},null,8,Bo)])])]),t.activeItem.route?(o(),a("div",Ko,[e("div",{class:"fs-3 fw-bold text-gray-900",textContent:n(t.activeItem.route.route_name)},null,8,Go),e("p",{class:"text-gray-500 fw-semibold fs-5 mt-1 mb-7",textContent:n(t.activeItem.route.description)},null,8,Ho),e("div",Qo,[e("div",Xo,[Yo,e("div",Zo,[h(y,{type:"circle",class:"fs-2 text-success"})]),e("div",$o,[e("div",ta,[e("div",{class:"fs-5 fw-semibold mb-2",textContent:n(t.activeItem.start_address)},null,8,ea),e("div",sa,[e("div",{class:"text-muted me-2 fs-7",textContent:n(t.translate("Pickup"))},null,8,la)])])])]),e("div",na,[oa,e("div",aa,[h(y,{type:"map-pin",class:"fs-2 text-danger"})]),e("div",ca,[e("div",ia,[e("div",{class:"fs-5 fw-semibold mb-2",textContent:n(t.activeItem.end_address)},null,8,da),e("div",ra,[e("div",{class:"text-muted me-2 fs-7",textContent:n(t.translate("Destination"))},null,8,_a)])])])])]),e("div",ma,[e("div",{class:U(["rounded h-4px",t.progressWidth()<100?"bg-info":"bg-success"]),role:"progressbar",style:ut({width:t.progressWidth()+"%"})},null,6)]),e("div",ua,[e("span",{class:"font-semibold pt-2",textContent:n(t.translate("Pickup days"))},null,8,ha),e("div",va,[(o(!0),a(I,null,P(t.weekDays,(s,m)=>(o(),a("div",null,[t.activeItem[s.k]?(o(),a("div",{key:0,onMouseover:R=>t.showTip[m]=!0,onMouseleave:R=>t.showTip[m]=!1,style:{"margin-left":"-7px"},class:"symbol symbol-35px symbol-circle"},[e("span",{class:U([s.class,"symbol-label text-inverse-warning fw-bold"]),textContent:n(s.s)},null,10,fa),t.showTip[m]?(o(),D(T,{key:t.showTip[m],title:s.k},null,8,["title"])):d("",!0)],40,xa)):d("",!0)]))),256))])])])):d("",!0)]),e("p",ba,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[15]||(c[15]=(...s)=>t.saveRoute&&t.saveRoute(...s)),textContent:n(t.translate("Submit"))},null,8,ga)])])):d("",!0)])])])])])}const wa=ot(Il,[["render",ya]]),Ca=E(()=>M(()=>import("./map-5GV_4fzv.min.js"),__vite__mapDeps([0,1,2,3]))),ka=E(()=>M(()=>import("./form_field-wtcjT_eT.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),pa={components:{datatabble:at,maps:Ca,delete_icon:ct,car_icon:it,route_icon:dt,form_field:ka,editable_map_location:_t,student_location_wizard:wl,employee_location_wizard:wa},name:"Routes",setup(_){const c=_.conf.url+_.path+"?load=json",v=r(!1),t=r({}),i=r({}),p=r({}),k=r(!1),y=r([]),u=r(!1),f=r(""),T=()=>{v.value=!1};(()=>{yt(c).then(b=>{i.value=JSON.parse(JSON.stringify(b))})})();const m=async()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(b=>{t.value.start_latitude=b.coords.latitude,t.value.start_longitude=b.coords.longitude,t.value.end_latitude=b.coords.latitude,t.value.end_longitude=b.coords.longitude},b=>{t.value.start_latitude=30.06,t.value.start_longitude=31.21,t.value.end_latitude=30.06,t.value.end_longitude=31.21,N(b.message)}):N("location error")};return{showPlaceSearch:u,startPlaceChanged:async()=>{let b=f.value.length>3?await J(_.system_setting.google_map_api,f.value,_.business_setting.country):"";y.value=b.predictions},start_placeSearch:f,places:y,showEditSide:v,url:c,content:i,center:p,activeItem:t,translate:rt,clickMarker:(b,O,G)=>{},updateStartMarker:async b=>{t.value.start_latitude=b.lat(),t.value.start_longitude=b.lng(),t.value.start_address=await q(b.lat(),b.lng())},updateEndMarker:b=>{t.value.end_latitude=b.lat(),t.value.end_longitude=b.lng()},getUserLocation:m,showWizard:k,closeSide:T,addLocationWizard:()=>{t.value={},k.value=!0,m()},handleAction:(b,O)=>{switch(b){case"view":break;case"edit":t.value=O,k.value=!0;break;case"delete":wt("route_id",O,"Route.delete");break;case"close":v.value=!1,t.value={};break}}}},props:["path","lang","system_setting","business_setting","setting","conf","auth"]},Sa={class:"w-full flex overflow-auto"},Ia={key:0,class:"w-full relative"},Pa={key:2,class:""},Ta={class:"card"},La={class:"card-body"},Ra={class:"card-px text-center pt-15 pb-15"},Ea=["textContent"],Ma=["textContent"],ja=["textContent"],Da={class:"text-center pb-15 px-5"},Wa=["src"],Aa={key:3,class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},za={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},Fa=["textContent"],Oa=e("hr",{class:"mt-2"},null,-1),Va={class:"w-full"},Ua={key:0,class:"w-full flex gap-4"},Na=["src"],Ja=["textContent"],qa={key:1,class:"w-full flex gap-4"},Ba=["src"],Ka=["textContent"],Ga=["onClick"],Ha=["onClick"];function Qa(_,c,v,t,i,p){const k=C("employee_location_wizard"),y=C("student_location_wizard"),u=C("vue-feather"),f=C("delete_icon"),T=C("datatabble");return o(),a("div",Sa,[t.content&&v.auth?(o(),a("div",Ia,[t.showWizard&&v.auth.business&&v.auth.business.type=="company"?(o(),D(k,{onCallback:c[0]||(c[0]=s=>t.showWizard=!1),routes:t.content.routes,allemployees:t.content.employees,key:t.showWizard,system_setting:v.system_setting,item:t.activeItem,business_setting:v.business_setting},null,8,["routes","allemployees","system_setting","item","business_setting"])):d("",!0),t.showWizard&&v.auth.business&&v.auth.business.type=="school"?(o(),D(y,{onCallback:c[1]||(c[1]=s=>t.showWizard=!1),routes:t.content.routes,allstudents:t.content.students,key:t.showWizard,system_setting:v.system_setting,item:t.activeItem,business_setting:v.business_setting},null,8,["routes","allstudents","system_setting","item","business_setting"])):d("",!0),!t.showWizard&&t.content.items&&!t.content.items.length?(o(),a("div",Pa,[e("div",Ta,[e("div",La,[e("div",Ra,[e("h2",{class:"fs-2x fw-bold mb-0",textContent:n(t.content.title)},null,8,Ea),e("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:n(t.translate("Add your first route using this below wizard"))},null,8,Ma),e("a",{textContent:n(t.translate("add_new")),onClick:c[2]||(c[2]=(...s)=>t.addLocationWizard&&t.addLocationWizard(...s)),href:"javascript:;",class:"text-white btn btn-primary er fs-6 px-8 py-4"},null,8,ja)]),e("div",Da,[e("img",{src:"/src/asset/img/1.png",alt:"",class:"mx-auto mw-100 h-200px h-sm-325px"},null,8,Wa)])])])])):d("",!0),t.content.items&&t.content.items.length&&!t.showWizard?(o(),a("main",Aa,[e("div",za,[e("h1",{class:"font-bold text-lg w-full",textContent:n(t.content.title)},null,8,Fa),t.showWizard?d("",!0):(o(),a("a",{key:0,href:"javascript:;",class:"uppercase p-2 mx-2 text-center text-white w-32 rounded-lg bg-danger",onClick:c[3]||(c[3]=(...s)=>t.addLocationWizard&&t.addLocationWizard(...s))},n(t.translate("add_new")),1))]),Oa,e("div",Va,[t.content.columns?(o(),D(T,{key:0,class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":t.translate("lang")=="ar"?"right":"left","fixed-checkbox":"",headers:t.content.columns,items:t.content.items},{"item-name":nt(s=>[s.student?(o(),a("div",Ua,[e("img",{src:s.student.picture,class:"w-8 h-8 rounded-full"},null,8,Na),e("span",{textContent:n(s.student.student_name)},null,8,Ja)])):d("",!0),s.employee?(o(),a("div",qa,[e("img",{src:s.employee.picture,class:"w-8 h-8 rounded-full"},null,8,Ba),e("span",{textContent:n(s.employee.name)},null,8,Ka)])):d("",!0)]),"item-edit":nt(s=>[s.not_editable?d("",!0):(o(),a("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:m=>t.handleAction("edit",s)},[h(u,{class:"w-5",type:"edit"})],8,Ga))]),"item-delete":nt(s=>[s.not_removeable?d("",!0):(o(),a("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:m=>t.handleAction("delete",s)},[h(f,{class:"w-5"})],8,Ha))]),_:1},8,["body-text-direction","headers","items"])):d("",!0)])])):d("",!0)])):d("",!0)])}const tc=ot(pa,[["render",Qa]]);export{tc as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["map-5GV_4fzv.min.js","index.es-OI7vI1FE.min.js","index.min.js","index.min.css","side-form-create-xsfGXZTQ.min.js","Field-9eeFsY92.min.js","Field.min.css","side-form-update-dhD2nQC8.min.js","form_field-wtcjT_eT.min.js","editable_map_location-LvaiUbT8.min.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
