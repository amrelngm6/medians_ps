import{_ as D,f as F,E as A,l as S,k as b,r as f,o,c as i,a as t,t as s,b as m,x as I,d as _,n as u,F as j,i as z,j as B,y as L}from"./index-j20_Rz0X.js";import{h as N}from"./help-8jYtRDQI.js";import P from"./trip_map-LdU7S0Dp.js";import"./index.es-5NFOH8Xl.js";const T={components:{dashboard_card_white:F,help_icon:N,trip_map:P,close_icon:A,translate:S},emits:["close"],setup(a,{emit:c}){const r=a.conf.url+a.path+"?load=json",e=b({}),y=b({}),k=b([]),v=b("info"),w=b(!0),x=()=>{e.value=a.trip;let d=[];d[0]=g(a.trip.vehicle,a.trip.route,"car.svg"),y.value=d[0];let h,p;console.log(a.trip);for(let l=0;l<a.trip.pickup_locations.length;l++)h=a.trip.pickup_locations[l].status!="waiting"?"yellow_pin.gif":"blue_pin.gif",p=a.trip.destinations[l].status!="waiting"?"yellow_pin.gif":"blue_pin.gif",d.push(g(a.trip.pickup_locations[l],a.trip.destinations[l],h)),d.push(g(a.trip.destinations[l],a.trip.pickup_locations[l],p));d.push(g(a.trip.route,a.trip.vehicle,"destination.svg")),k.value=d},C=()=>{limitCount.value+=5,limitCount.value>e.value.last_trips.length&&(w.value=!1)},n=d=>{console.log(d),v.value=d},g=(d,h,p)=>{let l={};return l.icon=a.conf.url+"uploads/images/"+p,l.origin={lat:parseFloat(d.latitude),lng:parseFloat(d.longitude)},l.destination={lat:parseFloat(h.latitude),lng:parseFloat(h.longitude)},l.drag=!1,l};return x(),{url:r,locations:k,center:y,activeItem:e,activeStatus:v,close:()=>{c("close")},setActiveStatus:n,loadmore:C,handlePickup:g,setLocations:x,translate:S}},props:["path","lang","setting","conf","auth","trip"]},V={class:"w-full"},M={key:0,class:"grid xl:grid-cols-12 lg:grid-cols-12 grid-cols-1 gap-6"},E={class:"xl:col-span-3 lg:col-span-5"},R={class:"card px-4 py-6 mb-6"},K={key:0,class:"text-center"},W=["textContent"],q=["textContent"],G=t("hr",{class:"mt-5 dark:border-gray-600"},null,-1),H={class:"text-start mt-6 text-sm"},J={class:"space-y-7"},O={class:"text-zinc-400 dark:text-gray-400 flex gap-4"},Q=["textContent"],U=["textContent"],X={class:"text-zinc-400 dark:text-gray-400 flex gap-4"},Y=["textContent"],Z=["textContent"],$={class:"text-zinc-400 dark:text-gray-400 flex gap-4"},tt=["textContent"],et=["textContent"],st={class:"text-zinc-400 dark:text-gray-400 flex gap-4"},nt=["textContent"],at=["textContent"],ot=t("hr",{class:"my-5 dark:border-gray-600"},null,-1),it={class:"xl:col-span-9 lg:col-span-7"},lt={class:"card"},rt={class:"p-6"},ct={class:"lg:flex items-center justify-around rounded-xl space-x-3 bg-gray-100 p-2 dark:bg-gray-900/30","aria-label":"Tabs",role:"tablist"},dt=["textContent"],_t=["textContent"],ut=["textContent"],xt=["textContent"],gt={class:"mt-3 overflow-hidden"},ht={key:0,class:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full border-b border-gray-100"},bt={class:"w-full relative"},mt={class:"dark:border-border-dark dark:border-dashed border border-border-light border-dashed p-4 flex flex-col gap-5"},vt={class:"flex items-start justify-between"},pt={class:"border border-1 grid p-3 rounded-full sm:p-2 place-content-center"},ft=["textContent"],yt={class:"flex flex-col gap-2"},kt=["textContent"],wt=["textContent"],Ct=["textContent"],St={class:"mt-6 w-full"},It={class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-6"},jt={key:2,class:"w-full border-b border-gray-100"},zt={class:"md:text-start lg:flex mb-5 mt-5"},Dt={class:"w-full"},Ft=["textContent"],At=["textContent"],Bt={class:"w-full"},Lt=["textContent"],Nt=["textContent"],Pt={class:"w-full"},Tt=["textContent"],Vt=["textContent"],Mt={class:"text-start"},Et={class:"absolute start-7 mt-6"},Rt={class:"relative"},Kt={class:"w-9 h-9 flex justify-center items-center rounded-full bg-white text-info dark:bg-gray-800"},Wt=["src"],qt=t("div",{class:"absolute top-4 -end-6 w-12 h-[2px] bg-gray-400 -z-10"},null,-1),Gt={class:"grid grid-cols-1"},Ht={class:"md:col-start-1 col-span-2"},Jt={class:"flex md:flex-nowrap items-center gap-6 ms-10 md:mt-0 mt-5"},Ot={class:"ms-10"},Qt=["textContent"],Ut={class:"relative me-5 md:ps-0 ps-10 overflow-auto"},Xt={class:"pt-3"},Yt=["textContent"],Zt=["textContent"],$t={key:0,class:"text-center"};function te(a,c,r,e,y,k){const v=f("close_icon"),w=f("help_icon"),x=f("dashboard_card_white"),C=f("trip_map");return o(),i("div",V,[r.trip?(o(),i("div",M,[t("div",E,[t("div",R,[e.activeItem&&e.activeItem.driver?(o(),i("div",K,[t("h4",{class:"mb-1 mt-3 text-lg dark:text-gray-300",textContent:s(e.translate("Trip")+e.translate(" #")+e.activeItem.trip_id)},null,8,W),t("button",{type:"button",onClick:c[0]||(c[0]=(...n)=>e.close&&e.close(...n)),class:"mx-auto text-center hover:bg-primary mb-3 px-6 py-2 flex text-danger gap gap-6"},[m(v,{class:"w-4"}),I(),t("span",{class:"text-base",textContent:s(e.translate("Back"))},null,8,q)])])):_("",!0),G,t("div",H,[t("div",J,[t("p",O,[t("strong",{textContent:s(e.translate("Duration"))},null,8,Q),t("span",{class:"ms-2",textContent:s(e.activeItem.duration)},null,8,U)]),t("p",X,[t("strong",{textContent:s(e.translate("Pickup locations"))},null,8,Y),I(),t("span",{class:"ms-2",textContent:s(e.activeItem.pickup_locations_count)},null,8,Z)]),t("p",$,[t("strong",{textContent:s(e.translate("Route"))},null,8,tt),t("span",{class:"ms-2",textContent:s(e.activeItem.route?e.activeItem.route.route_name:"")},null,8,et)]),t("p",st,[t("strong",{textContent:s(e.translate("Driver"))},null,8,nt),t("span",{class:"ms-2",textContent:s(e.activeItem.driver_name)},null,8,at)])])]),ot])]),t("div",it,[t("div",lt,[t("div",rt,[(o(),i("div",{class:"w-full",key:e.activeStatus},[t("nav",ct,[t("button",{onClick:c[1]||(c[1]=n=>e.setActiveStatus("info")),type:"button",textContent:s(e.translate("Info")),class:u([e.activeStatus=="info"?"menu-dark text-white font-semibold":"text-gray-500","hover:bg-white hover:text-blue-800 hs-tab-active:font-semibold hs-tab-active:bg-white dark:hs-tab-active:bg-gray-700 w-full flex justify-center py-2 rounded items-center gap-2 border-b-2 border-transparent -mb-px transition-all text-sm whitespace-nowrap dark:text-white active"])},null,10,dt),t("button",{onClick:c[2]||(c[2]=n=>e.setActiveStatus("pickup_locations")),type:"button",textContent:s(e.translate("Pickup locations")),class:u([e.activeStatus=="pickup_locations"?"menu-dark text-white font-semibold":"text-gray-500","hover:bg-white hover:text-blue-800 hs-tab-active:font-semibold hs-tab-active:bg-white dark:hs-tab-active:bg-gray-700 w-full flex justify-center py-2 rounded items-center gap-2 border-b-2 border-transparent -mb-px transition-all text-sm whitespace-nowrap dark:text-white"])},null,10,_t),t("button",{type:"button",onClick:c[3]||(c[3]=n=>e.setActiveStatus("map")),class:u([e.activeStatus=="map"?"menu-dark text-white font-semibold":"text-gray-500","hover:bg-white hover:text-blue-800 hs-tab-active:font-semibold hs-tab-active:bg-white dark:hs-tab-active:bg-gray-700 w-full flex justify-center py-2 rounded items-center gap-2 border-b-2 border-transparent -mb-px transition-all text-sm whitespace-nowrap dark:text-white"]),textContent:s(e.translate("Map"))},null,10,ut),t("button",{onClick:c[4]||(c[4]=n=>e.setActiveStatus("reviews")),type:"button",textContent:s(e.translate("Reviews")),class:u([e.activeStatus=="reviews"?"menu-dark text-white font-semibold":"text-gray-500","hover:bg-white hover:text-blue-800 hs-tab-active:font-semibold hs-tab-active:bg-white dark:hs-tab-active:bg-gray-700 w-full flex justify-center py-2 rounded items-center gap-2 border-b-2 border-transparent -mb-px transition-all text-sm whitespace-nowrap dark:text-white"])},null,10,xt)]),t("div",gt,[(o(),i("div",{key:e.activeStatus,id:"basic-tabs-1",class:"transition-all duration-300 transform"},[e.activeStatus=="help_messages"?(o(),i("div",ht,[(o(!0),i(j,null,z(e.activeItem.help_messages,n=>(o(),i("div",bt,[t("div",mt,[t("div",vt,[t("span",pt,[m(w,{class:"text-primary w-10 h-10"})]),t("span",{class:"text-content3 text-2xs text-muted p-3",textContent:s(n.date)},null,8,ft)]),t("div",yt,[t("div",null,[t("p",{class:"text-title text-sm font-semibold mb-1 dark:text-white",textContent:s(n.subject)},null,8,kt),t("p",{class:"text-content3 text-2xs truncate",textContent:s(n.message)},null,8,wt)]),t("div",{class:u([e.translate("lang")=="ar"?"left-0":"right-0","absolute flex items-center justify-between gap-1"])},[t("span",{class:"bg-blue-50 px-4 py-1 text-secondary badge-sm rounded-5",textContent:s(n.status)},null,8,Ct)],2)])])]))),256))])):_("",!0),e.activeStatus=="info"?(o(),i("div",{class:"w-full border-b border-gray-100",key:e.activeStatus},[t("div",St,[t("div",It,[m(x,{icon:"/uploads/img/products_icome.png",classes:"bg-gradient-success",class:"border border-1",title:e.translate("Duration"),value:e.activeItem.duration?e.activeItem.duration:"0"},null,8,["title","value"]),m(x,{icon:"/uploads/img/products_icome.png",classes:"bg-gradient-info",class:"border border-1",title:e.translate("Pickup locations"),value:e.activeItem.pickup_locations_count},null,8,["title","value"]),m(x,{icon:"/uploads/img/products_icome.png",classes:"bg-gradient-danger",class:"border border-1",title:e.translate("Distance"),value:e.activeItem.distance},null,8,["title","value"])])])])):_("",!0),e.activeStatus=="pickup_locations"&&r.trip?(o(),i("div",jt,[t("div",{class:u([e.translate("lang")=="ar"?"right-4":"left-4","absolute border-s-2 border border-gray-300 h-full top-20 start-10 -z-10 dark:border-white/10"])},null,2),t("div",zt,[t("div",Dt,[t("h5",{class:"font-semibold bg-white dark:bg-gray-700 dark:text-gray-300 inline rounded",textContent:s(e.translate("Trip number")+" #"+r.trip.trip_id)},null,8,Ft),t("p",{class:"text-muted text-sm",textContent:s(r.trip.trip_date)},null,8,At)]),t("div",Bt,[t("h5",{class:"font-semibold bg-white dark:bg-gray-700 dark:text-gray-300 inline rounded",textContent:s(r.trip.duration)},null,8,Lt),t("p",{class:"text-muted text-sm",textContent:s(e.translate("Duration"))},null,8,Nt)]),t("div",Pt,[t("h5",{class:"font-semibold bg-white dark:bg-gray-700 dark:text-gray-300 inline rounded",textContent:s(r.trip.distance+" KM")},null,8,Tt),t("p",{class:"text-muted text-sm",textContent:s(e.translate("Distance"))},null,8,Vt)])]),(o(!0),i(j,null,z(r.trip.pickup_locations,n=>(o(),i("div",{class:"space-y-4",key:r.trip},[t("div",Mt,[t("div",Et,[t("div",Rt,[t("div",Kt,[n.model?(o(),i("img",{key:0,src:"/app/image.php?w=100&h=100&src="+n.model.picture,class:"rounded-full",alt:""},null,8,Wt)):_("",!0)]),qt])]),t("div",Gt,[t("div",Ht,[t("div",Jt,[t("div",Ot,[t("h2",{class:u([e.translate("lang")=="ar"?"bg-gradient-to-l":"bg-gradient-to-r","font-semibold p-2 rounded text-primary flex items-center justify-center text-sm mx-16"]),textContent:s(n.boarding_time?n.time:e.translate("Waiting"))},null,10,Qt)]),t("div",Ut,[t("div",Xt,[n.model?(o(),i("h4",{key:0,class:"mb-1.5 text-base dark:text-gray-300",textContent:s(n.model.name)},null,8,Yt)):_("",!0),n.location?(o(),i("p",{key:1,style:L([{"white-space":"nowrap"},{"white-space":"nowrap"}]),class:"mb-4 text-gray-500 dark:text-gray-400",textContent:s(n.location.address)},null,8,Zt)):_("",!0)])])])])])])]))),128))])):_("",!0)]))])]))])]),e.activeStatus=="map"?(o(),i("p",$t,[(o(),B(C,{conf:r.conf,setting:r.setting,trip:r.trip,center:e.center,key:e.locations,waypoints:e.locations,onIntervalCallback:a.callback},null,8,["conf","setting","trip","center","waypoints","onIntervalCallback"]))])):_("",!0)])])):_("",!0)])}const ie=D(T,[["render",te]]);export{ie as default};
