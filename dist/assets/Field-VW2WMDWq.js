import{M as f,L as u}from"./Manager-KfbqTt2c.js";import{_,r as c,o as n,c as r,a as i,d,t as h,j as m}from"./index-BMnXfHrC.js";const y={name:"vue-medialibrary-field",components:{"vue-medialibrary-manager":f,"app-medialibrary-loader":u},props:{name:{type:String,required:!1},api_url:{type:String,required:!1},value:{type:Object|String,required:!1,default:()=>({})},types:{type:Object,required:!1,default:()=>({images:!0,files:!0})},filetypes:{type:Array,required:!1,default:()=>[]},helper:{type:String,required:!1}},data:()=>({loading:!0,showManager:!1,file:{},content:null}),mounted(){this.content=this.value?this.value:this.content,this.content?this.file=this.content:this.content=null,this.loading=!1},methods:{showLibrary(){this.showManager=!this.showManager},insert(e){this.loading=!1,this.showManager=!1,this.file=e.file_name,this.content=e.file_name,this.change()},clear(){this.loading=!1,this.content=this.file=null,this.$emit("input",null)},change(){this.$emit("input",this.file)}},watch:{value(){typeof this.file>"u"&&(this.loading=!0)},showManager(){console.log("changed")}}},g={class:"media-library-field"},b=["name","value"],v={key:1,class:"media-library-field__selector"},p={key:2,class:"media-library-field__selected"},w={class:"media-library-field__selected__inner"},k={class:"w-full"},M=["src"],L={class:"block w-full"},S={class:"w-full flex",style:{margin:"2rem -0.5rem 0 -0.5rem"}},q={style:{"flex-grow":"1",padding:"0 0.5rem"}},C={style:{"flex-grow":"1",padding:"0 0.5rem"}};function B(e,l,t,F,j,a){const o=c("vue-medialibrary-manager");return n(),r("div",null,[i("div",g,[e.file?(n(),r("input",{key:0,name:t.name,type:"hidden",value:e.file},null,8,b)):d("",!0),e.content==null?(n(),r("div",v,[i("span",{onClick:l[0]||(l[0]=(...s)=>a.showLibrary&&a.showLibrary(...s)),class:"media-library-field__selector__button"},"Attach "+h(t.types.images&&t.types.files?"file":t.types.images&&!t.types.files?"image":"file"),1)])):d("",!0),e.file&&e.content?(n(),r("div",p,[i("div",w,[i("div",k,[i("div",null,[i("img",{src:e.file,style:{width:"auto",height:"auto","max-width":"180px"}},null,8,M)]),i("div",L,[i("div",S,[i("div",q,[i("span",{class:"media-library-field__selected__inner__details__button font-semibold",onClick:l[1]||(l[1]=(...s)=>a.showLibrary&&a.showLibrary(...s))},"Edit")]),i("div",C,[i("button",{onClick:l[2]||(l[2]=(...s)=>a.clear&&a.clear(...s)),class:"media-library-field__selected__inner__details__button media-library-field__selected__inner__details__button--delete"},"Remove")])])])])])])):d("",!0)]),e.showManager?(n(),m(o,{key:e.showManager,api_url:t.api_url,filetypes:t.filetypes,types:t.types,selected:t.value,selectable:!0,onClose:l[3]||(l[3]=s=>(e.showManager=!1,e.file=e.content=t.value)),onSelect:a.insert,onFailToFind:a.clear},null,8,["api_url","filetypes","types","selected","onSelect","onFailToFind"])):d("",!0)])}const N=_(y,[["render",B]]);export{N as f};
