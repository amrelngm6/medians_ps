import{_ as k,t as _,a as y,o,c as l,d as t,b as r,e as s,i as b,n as w,g as p,F as v,f as g,w as j,v as T,l as N,s as E,r as f,u as M,j as V,p as L}from"./index.min.js";const D={components:{translate:_},emits:["callback"],setup(a,{emit:d}){return{translate:_,emit:d,close:()=>{if(!window.confirm(_("confirm_close_ticket")))return null;var e=new URLSearchParams;e.append("type","HelpMessage.close"),e.append("params[message_id]",a.item.message_id),e.append("params[status]","completed"),N(e,"/api/update").then(u=>{E(u.result)})}}},props:["path","langs","setting","conf","auth","item"]},B={class:"w-full"},F={class:"container-fluid"},O={class:"row"},R={class:"col-lg-12"},q={class:"card mt-n4 mx-n4 card-border-effect-none mb-n5 border-bottom-0 border-start-0 rounded-0"},A={class:"card-body pb-4 mb-0"},H={class:"row"},P={class:"col-md"},U={class:"flex align-items-center"},J={class:"px-1 pt-1"},z=["src"],G={class:"col-md"},I=["textContent"],W={class:"hstack gap-3 flex h-8"},K={class:"text-muted"},Q=t("i",{class:"ri-building-line align-bottom me-1"},null,-1),X=["textContent"],Y=t("div",{class:"vr"},null,-1),Z={class:"text-muted"},$=["textContent"],tt=["textContent"],et=t("div",{class:"vr"},null,-1),st={class:"text-muted"},nt=["textContent"],ot=["textContent"],lt=t("div",{class:"vr"},null,-1),at=["textContent"],it=["textContent"],ct={class:"lg:flex gap-6 mt-4"},dt={class:"col-xxl-9 w-full"},rt={class:"card"},_t={class:"card-body p-4"},mt=["textContent"],ut=["textContent"],ht={class:"card-body p-4"},xt=["textContent"],ft={"data-simplebar":"init",style:{"max-height":"300px"},class:"overflow-y-auto"},vt={class:"simplebar-wrapper"},gt=t("div",{class:"simplebar-height-auto-observer-wrapper"},[t("div",{class:"simplebar-height-auto-observer"})],-1),pt={class:"simplebar-mask"},Ct={class:"simplebar-offset"},bt={class:"simplebar-content-wrapper",tabindex:"0",role:"region","aria-label":"scrollable content"},yt={class:"simplebar-content"},wt={class:"flex gap-2 mb-4"},kt={key:0,class:"flex-shrink-0"},St=["src"],jt={key:1,class:"flex-grow-1 ms-3"},Tt={class:"fs-13 flex gap-2"},Nt=["textContent"],Et=["textContent"],Mt=["textContent"],Vt={action:"/api/create",method:"POST","data-refresh":"1",id:"add-device-form",class:"action my-2 rounded-lg pb-2"},Lt=t("input",{name:"type",type:"hidden",value:"HelpMessageComment.create"},null,-1),Dt=["value"],Bt=["name"],Ft={class:"row g-3"},Ot={class:"col-lg-12"},Rt=["textContent"],qt=t("textarea",{name:"params[comment]",class:"form-control bg-light border-light",id:"exampleFormControlTextarea1",rows:"3",placeholder:"Enter comments"},null,-1),At={class:"col-lg-12 text-end mt-4"},Ht=["textContent"],Pt={class:"w-96"},Ut={class:"card"},Jt={class:"card-header"},zt=["textContent"],Gt={class:"card-body"},It={class:"table-responsive table-card"},Wt={class:"table table-borderless align-middle mb-0 w-full"},Kt=["textContent"],Qt={class:"py-2"},Xt=["textContent"],Yt=["textContent"],Zt=["textContent"],$t=["textContent"],te={class:"py-2"},ee=["textContent"],se=["textContent"],ne={class:"py-2"},oe=["textContent"],le=["textContent"],ae=["textContent"],ie=["textContent"],ce=["textContent"],de=["textContent"],re={id:"d-date",class:"py-2 flex"},_e=["textContent"];function me(a,d,n,e,u,h){const m=y("vue-feather");return o(),l("div",B,[t("div",F,[t("div",O,[t("div",R,[t("div",q,[t("div",A,[t("div",H,[t("div",P,[t("div",U,[t("div",J,[n.item?(o(),l("img",{key:0,src:n.item.user?n.item.user.photo?n.item.user.photo:n.item.user.picture:"",alt:"",width:"36",height:"36",class:"rounded"},null,8,z)):r("",!0)]),t("div",G,[t("h4",{class:"fw-semibold px-1",id:"ticket-title",textContent:s(n.item.user?n.item.user.name:"")},null,8,I),t("div",W,[t("div",K,[Q,t("span",{id:"ticket-client",textContent:s(n.item.subject)},null,8,X)]),Y,t("div",Z,[t("span",{textContent:s(e.translate("Created at"))},null,8,$),b(" : "),t("span",{class:"fw-medium",id:"create-date",textContent:s(n.item.date)},null,8,tt)]),et,t("div",st,[t("span",{textContent:s(e.translate("Last update"))},null,8,nt),b(" : "),t("span",{class:"fw-medium",id:"update-date",textContent:s(n.item.last_update)},null,8,ot)]),lt,n.item.status?(o(),l("div",{key:0,class:w(["badge rounded-pill fs-12 text-white",n.item.status=="new"?"bg-info":"bg-success"]),id:"ticket-status",textContent:s(n.item.status)},null,10,at)):r("",!0),n.item.priority?(o(),l("div",{key:1,class:"badge rounded-pill bg-danger fs-12 text-white",id:"ticket-priority",textContent:s(n.item.priority)},null,8,it)):r("",!0)])]),t("span",{class:"w-auto py-2 px-4 cursor-pointer text-lg",onClick:d[0]||(d[0]=i=>e.emit("callback"))},[p(m,{class:"w-5",type:"x-circle"})])])])])])])])]),t("div",ct,[t("div",dt,[t("div",rt,[t("div",_t,[t("h6",{class:"fw-semibold text-uppercase mb-3",textContent:s(e.translate("Ticket Discripation"))},null,8,mt),t("p",{class:"text-muted font-bold pt-10",textContent:s(n.item.message)},null,8,ut)]),t("div",ht,[t("h5",{class:"card-title text-sm font-semibold mb-4",textContent:s(e.translate("Comments"))},null,8,xt),t("div",ft,[t("div",vt,[gt,t("div",pt,[t("div",Ct,[t("div",bt,[t("div",yt,[(o(!0),l(v,null,g(n.item.comments,i=>(o(),l("div",wt,[i.user?(o(),l("div",kt,[t("img",{src:n.item.user.photo?n.item.user.photo:n.item.user.picture,alt:"",class:"h-10 w-10 mt-2 avatar-xs rounded-circle"},null,8,St)])):r("",!0),i.user?(o(),l("div",jt,[t("h5",Tt,[t("span",{textContent:s(i.user.name)},null,8,Nt),t("small",{class:"text-muted",textContent:s(i.date)},null,8,Et)]),t("p",{class:"text-muted",textContent:s(i.comment)},null,8,Mt)])):r("",!0)]))),256))])])])])])]),t("form",Vt,[Lt,t("input",{name:"params[message_id]",type:"hidden",value:n.item.message_id},null,8,Dt),a.model_id&&a.column&&a.column.column_type=="hidden"?j((o(),l("input",{key:0,name:"params["+a.column.key+"]",type:"hidden","onUpdate:modelValue":d[1]||(d[1]=i=>a.column.default=i)},null,8,Bt)),[[T,a.column.default]]):r("",!0),t("div",Ft,[t("div",Ot,[t("label",{for:"exampleFormControlTextarea1",class:"form-label",textContent:s(e.translate("WRITE_COMMENT"))},null,8,Rt),qt]),t("div",At,[t("button",{type:"submit",href:"javascript:void(0);",class:"btn btn-primary",textContent:s(e.translate("Send"))},null,8,Ht)])])])])])]),t("div",Pt,[t("div",Ut,[t("div",Jt,[t("h5",{class:"card-title mb-0",textContent:s(e.translate("Ticket Details"))},null,8,zt)]),t("div",Gt,[t("div",It,[t("table",Wt,[t("tbody",null,[t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Ticket"))},null,8,Kt),t("td",Qt,[b("#"),t("span",{id:"t-no",textContent:s(n.item.message_id)},null,8,Xt)])]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("User"))},null,8,Yt),t("td",{id:"t-client",class:"py-2",textContent:s(n.item.user?n.item.user.name:"")},null,8,Zt)]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Status"))},null,8,$t),t("td",te,[t("span",{class:"font-bold",id:"t-status",textContent:s(n.item.status)},null,8,ee)])]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Priority"))},null,8,se),t("td",ne,[t("span",{class:"badge bg-danger text-white",id:"t-priority",textContent:s(n.item.priority)},null,8,oe)])]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Created at"))},null,8,le),t("td",{id:"c-date",class:"py-2",textContent:s(n.item.date)},null,8,ae)]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Last update"))},null,8,ie),t("td",{id:"d-date",class:"py-2",textContent:s(n.item.last_update)},null,8,ce)]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Close ticket"))},null,8,de),t("td",re,[t("div",{onClick:d[3]||(d[3]=(...i)=>e.close&&e.close(...i)),class:"cursor-pointer hover:bg-red-800 hover:text-gray-100 px-3 py-2 text-sm border-red-600 border-1 rounded border mt-2 block text-center"},[p(m,{class:"w-4 mx-1",type:"power"}),t("span",{onClick:d[2]||(d[2]=(...i)=>e.close&&e.close(...i)),textContent:s(e.translate("Close"))},null,8,_e)])])])])])])])])])])])])}const ue=k(D,[["render",me]]),he={components:{item_details:ue,translate:_},setup(a){const d=a.conf.url+a.path+"?load=json",n=f({}),e=f({}),u=f(!1),h=f(!1),m=f("0"),i=()=>{h.value=!1,e.value=null},c=x=>{m.value=x},C=x=>{h.value=!0,e.value=x};(()=>{V(d).then(x=>{n.value=JSON.parse(JSON.stringify(x))})})();let S=[{text:_("Inactive"),status:"0",icon:"delete",desc:_("New posts those not opened yet")},{text:_("Active"),status:"on",icon:"check-square",desc:_("posts needs customer reply")}];return{content:n,activeItem:e,closeMessage:i,switchStatus:c,showDetails:C,showAddSide:u,showEditSide:h,activeStatus:m,statusList:S,translate:_}},props:["path","langs","setting","conf","auth"]},xe={class:"w-full"},fe={key:1,class:"container-fluid"},ve={class:"card"},ge={class:"card-body"},pe={class:"d-flex flex-column flex-xl-row p-7"},Ce={class:"flex-lg-row-fluid me-xl-15 mb-20 mb-xl-0"},be={class:"mb-0"},ye=t("form",{method:"post",action:"#",class:"form mb-15"},[t("div",{class:"position-relative"},[t("i",{class:"ki-duotone ki-magnifier fs-1 text-primary position-absolute top-50 translate-middle ms-9"},[t("span",{class:"path1"}),t("span",{class:"path2"})]),t("input",{type:"text",class:"form-control form-control-lg form-control-solid ps-14",name:"search",value:"",placeholder:"Search"})])],-1),we=["textContent"],ke={class:"w-full"},Se={key:0,class:"d-flex mb-10 gap-4"},je=["onClick"],Te={class:"d-flex align-items-center mb-2"},Ne=["textContent"],Ee=["textContent"],Me=["textContent"],Ve=["textContent"],Le={class:"w-full flex-col justify-start items-start gap-10 inline-flex bg-gray-100 p-4 rounded-lg shadow-md bg-white"},De={class:"flex-col justify-start items-start gap-2.5 flex"},Be={class:"mt-2 justify-start items-start gap-2.5 inline-flex"},Fe={class:"px-2.5 py-1 bg-blue-100 rounded-lg justify-center items-center gap-2.5 flex"},Oe=["textContent"],Re=["href","textContent"],qe={class:"flex w-full"},Ae={key:0,class:"w-full justify-start items-center gap-2 inline-flex"},He={class:"relative flex"},Pe=["src"],Ue=L('<div class="justify-between items-center flex"><div class="flex-col justify-start items-start inline-flex"><div class="justify-start items-center gap-1 inline-flex"><div class="text-sm font-semibold text-gray-500">أستاذ دكتور إسماعيل أبو الفتوح</div></div><div class="text-sm pt-1 font-normal leading-none text-gray-800">أجاب عن السؤال</div></div></div>',1),Je={class:"justify-start gap-10 flex"},ze={class:"flex gap-1 text-sm font-normal relative"},Ge=["textContent"],Ie=t("span",{class:"pt-2"},"1",-1),We=t("img",{src:"/src/front_assets/svg/views.svg",width:"40"},null,-1),Ke={class:"flex gap-1 text-sm font-normal relative"},Qe=["textContent"],Xe=t("span",{class:"pt-2"},"1",-1),Ye=t("img",{src:"/src/front_assets/svg/comments.svg",width:"40"},null,-1),Ze={class:"flex gap-1 text-sm font-normal relative"},$e=["textContent"],ts=t("span",{class:"pt-2"},"1",-1),es=t("img",{src:"/src/front_assets/svg/shares.svg",width:"36"},null,-1),ss={class:"flex-column flex-lg-row-auto w-100 mw-lg-300px mw-xxl-350px"},ns={class:"card-rounded bg-primary bg-opacity-5 p-10 mb-15"},os=["textContent"],ls={class:"d-flex align-items-center mb-10 gap-4"},as=["onClick"],is=["textContent"],cs={class:"fw-semibold"},ds=["textContent"];function rs(a,d,n,e,u,h){const m=y("item_details"),i=y("vue-feather");return o(),l("div",xe,[e.showEditSide?(o(),M(m,{key:0,item:e.activeItem,ref:"activeHelpMessage",onCallback:e.closeMessage},null,8,["item","onCallback"])):r("",!0),e.showEditSide?r("",!0):(o(),l("div",fe,[t("div",ve,[t("div",ge,[t("div",pe,[t("div",Ce,[t("div",be,[ye,t("h1",{class:"text-gray-900 mb-10",textContent:s(e.content.title)},null,8,we),(o(!0),l(v,null,g(e.content.items,c=>(o(),l("div",ke,[c.status==e.activeStatus?(o(),l("div",Se,[p(i,{type:"bell",class:"mt-5"}),t("div",{class:"d-flex flex-column",onClick:C=>(e.activeItem=c,e.showEditSide=!0)},[t("div",Te,[t("a",{href:"javascript:;",class:"font-semibold text-gray-800 text-hover-primary fs-4 me-3",textContent:s(c.customer_name)},null,8,Ne),t("span",{class:"truncate max-w-sm badge badge-light my-1 bg-gray-100",textContent:s(c.subject)},null,8,Ee),t("span",{class:w(["badge badge-light mx-2 my-1 text-white",{"bg-primary":c.status=="on","bg-danger":c.status=="0"}]),textContent:s(c.status)},null,10,Me)]),t("span",{class:"truncate text-muted fw-semibold fs-6",textContent:s(c.content)},null,8,Ve)],8,je)])):r("",!0)]))),256)),(o(!0),l(v,null,g(e.content.items,c=>(o(),l("div",Le,[t("div",De,[t("div",Be,[t("div",Fe,[t("div",{class:"font-normal text-sm leading-none",textContent:s(a.item.category_name)},null,8,Oe)])]),t("a",{href:"/forum-post/"+a.item.id,target:"_blank",class:"pt-1 text-lg font-semibold leading-relaxed purple-color hover:text-gray-500",textContent:s(a.item.subject)},null,8,Re)]),t("div",qe,[a.item.doctor?(o(),l("div",Ae,[t("div",He,[t("img",{class:"w-10 h-10 relative rounded-full",src:a.item.doctor?a.item.doctor.picture:""},null,8,Pe)]),Ue])):r("",!0),t("div",Je,[t("div",ze,[t("span",{class:"tooltiptext",textContent:s(e.translate("Views"))},null,8,Ge),Ie,We]),t("div",Ke,[t("span",{class:"tooltiptext",textContent:s(e.translate("Comments"))},null,8,Qe),Xe,Ye]),t("div",Ze,[t("span",{class:"tooltiptext",textContent:s(e.translate("Shares"))},null,8,$e),ts,es])])])]))),256))])]),t("div",ss,[t("div",ns,[t("h2",{class:"text-gray-900 fw-bold mb-11",textContent:s(e.translate("Status"))},null,8,os),(o(!0),l(v,null,g(e.statusList,c=>(o(),l("div",ls,[p(i,{type:c.icon},null,8,["type"]),t("div",{class:"d-flex flex-column cursor-pointer",onClick:C=>e.switchStatus(c.status)},[t("h5",{class:w(["",c.status==e.activeStatus?"text-gray-800":"text-gray-500"]),textContent:s(c.text)},null,10,is),t("div",cs,[t("span",{class:"text-muted",textContent:s(c.desc)},null,8,ds)])],8,as)]))),256))])])])])])]))])}const us=k(he,[["render",rs]]);export{us as default};
