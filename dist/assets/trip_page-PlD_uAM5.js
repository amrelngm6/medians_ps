import{_ as w,f as C,q as b,r as g,o as r,c,a as t,t as a,k as f,d,n as h,F as k,i as y,b as v,j as S,l as I}from"./index-27HwXj_a.js";import{h as j}from"./help-kD5vM-Np.js";const M={components:{dashboard_card_white:C,help_icon:j},setup(s){const i=s.conf.url+s.path+"?load=json",e=b({});b({}),b({}),e.value=s.trip;const n=()=>{e.value.locations=[handlePickup(e.value.vehicle,e.value.route,"car.svg")];let _,l;for(let u=0;u<e.value.pickup_locations.length;u++)_=e.value.pickup_locations[u].time?"yellow_pin.gif":"blue_pin.gif",l=e.value.destinations[u].time?"yellow_pin.gif":"blue_pin.gif",e.value.locations.push(handlePickup(e.value.pickup_locations[u],e.value.destinations[u],_)),e.value.locations.push(handlePickup(e.value.destinations[u],e.value.pickup_locations[u],l));e.value.locations.push(handlePickup(e.value.route,e.value.vehicle,"destination.svg"))},x=b("info"),o=b(!0);return{url:i,activeItem:e,setActiveStatus:_=>{x.value=_},loadmore:()=>{limitCount.value+=5,limitCount.value>e.value.last_trips.length&&(o.value=!1)},setLocations:n}},props:["path","lang","setting","conf","auth","trip"],mounted(){},methods:{update(){this.$emit("edit","edit",this.activeItem)},close(){this.$emit("close","close",this.activeItem,!1)},handleAction(s,i){switch(s){case"view":break;case"edit":this.showEditSide=!0,this.showAddSide=!1,this.activeItem=i;break;case"delete":this.$root.$children[0].deleteByKey("driver_id",i,"Driver.delete");break}},load(){this.showLoader=!0,this.$root.$children[0].handleGetRequest(this.url).then(s=>{this.setValues(s),this.showLoader=!1})},setValues(s){return this.content=JSON.parse(JSON.stringify(s)),this},handlePickup(s,i,e){let n={};return n.icon=this.conf.url+"uploads/images/"+e,n.origin={lat:parseFloat(s.latitude),lng:parseFloat(s.longitude)},n.destination={lat:parseFloat(i.latitude),lng:parseFloat(i.longitude)},n.drag=!1,n},translate(s){return this.$root.$children[0].translate(s)}}},z={class:"w-full"},A={key:0,class:"grid xl:grid-cols-12 lg:grid-cols-12 grid-cols-1 gap-6"},D={class:"xl:col-span-3 lg:col-span-5"},P={class:"card px-4 py-6 mb-6"},B={key:0,class:"text-center"},F=["textContent"],L=t("i",{class:"fa fa-close px-2"},null,-1),N=["textContent"],V=t("hr",{class:"mt-5 dark:border-gray-600"},null,-1),T={class:"text-start mt-6 text-sm"},R={class:"space-y-7"},q={class:"text-zinc-400 dark:text-gray-400 flex gap-4"},E=["textContent"],J=["textContent"],K={class:"text-zinc-400 dark:text-gray-400 flex gap-4"},O=["textContent"],U=["textContent"],G={class:"text-zinc-400 dark:text-gray-400 flex gap-4"},W=["textContent"],H=["textContent"],Q={class:"text-zinc-400 dark:text-gray-400 flex gap-4"},X=["textContent"],Y=["textContent"],Z=t("hr",{class:"my-5 dark:border-gray-600"},null,-1),$={class:"xl:col-span-9 lg:col-span-7"},tt={class:"card"},et={class:"p-6"},st={class:"w-full"},at={class:"lg:flex items-center justify-around rounded-xl space-x-3 bg-gray-100 p-2 dark:bg-gray-900/30","aria-label":"Tabs",role:"tablist"},nt=["textContent"],ot=["textContent"],lt=["textContent"],it=["textContent"],rt={class:"mt-3 overflow-hidden"},ct={id:"basic-tabs-1",class:"transition-all duration-300 transform"},dt={key:0,class:"grid grid-cols-1 lg:grid-cols-2 gap-6 w-full border-b border-gray-100"},ut={class:"w-full relative"},ht={class:"dark:border-border-dark dark:border-dashed border border-border-light border-dashed p-4 flex flex-col gap-5"},_t={class:"flex items-start justify-between"},bt={class:"border border-1 grid p-3 rounded-full sm:p-2 place-content-center"},mt=["textContent"],vt={class:"flex flex-col gap-2"},gt=["textContent"],xt=["textContent"],pt=["textContent"],ft={key:1,class:"w-full border-b border-gray-100"},kt={class:"mt-6 w-full"},yt={class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6 mb-6"},wt={key:2,class:"w-full border-b border-gray-100"},Ct={class:"md:text-start lg:flex mb-5 mt-5"},St={class:"w-full"},It=["textContent"],jt=["textContent"],Mt={class:"w-full"},zt=["textContent"],At=["textContent"],Dt={class:"w-full"},Pt=["textContent"],Bt=["textContent"],Ft={class:"text-start"},Lt={class:"absolute start-7 mt-6"},Nt={class:"relative"},Vt={class:"w-9 h-9 flex justify-center items-center rounded-full bg-white text-info dark:bg-gray-800"},Tt=["src"],Rt=t("div",{class:"absolute top-4 -end-6 w-12 h-[2px] bg-gray-400 -z-10"},null,-1),qt={class:"grid grid-cols-1"},Et={class:"md:col-start-1 col-span-2"},Jt={class:"flex md:flex-nowrap items-center gap-6 ms-10 md:mt-0 mt-5"},Kt={class:"ms-10"},Ot=["textContent"],Ut={class:"relative me-5 md:ps-0 ps-10 overflow-auto"},Gt={class:"pt-3"},Wt=["textContent"],Ht=["textContent"],Qt={key:0,class:"text-center"};function Xt(s,i,e,n,x,o){const p=g("help_icon"),m=g("dashboard_card_white"),_=g("trip_map");return r(),c("div",z,[!s.showLoader&&e.trip?(r(),c("div",A,[t("div",D,[t("div",P,[n.activeItem&&n.activeItem.driver?(r(),c("div",B,[t("h4",{class:"mb-1 mt-3 text-lg dark:text-gray-300",textContent:a(o.translate("Trip")+o.translate(" #")+n.activeItem.trip_id)},null,8,F),t("button",{type:"button",onClick:i[0]||(i[0]=(...l)=>o.close&&o.close(...l)),class:"hover:bg-primary mb-3 px-6 py-2 text-danger"},[L,f(),t("span",{textContent:a(o.translate("Back"))},null,8,N)])])):d("",!0),V,t("div",T,[t("div",R,[t("p",q,[t("strong",{textContent:a(o.translate("Duration"))},null,8,E),t("span",{class:"ms-2",textContent:a(n.activeItem.duration)},null,8,J)]),t("p",K,[t("strong",{textContent:a(o.translate("Pickup locations"))},null,8,O),f(),t("span",{class:"ms-2",textContent:a(n.activeItem.pickup_locations_count)},null,8,U)]),t("p",G,[t("strong",{textContent:a(o.translate("Route"))},null,8,W),t("span",{class:"ms-2",textContent:a(n.activeItem.route?n.activeItem.route.route_name:"")},null,8,H)]),t("p",Q,[t("strong",{textContent:a(o.translate("Driver"))},null,8,X),t("span",{class:"ms-2",textContent:a(n.activeItem.driver_name)},null,8,Y)])])]),Z])]),t("div",$,[t("div",tt,[t("div",et,[t("div",st,[t("nav",at,[t("button",{onClick:i[1]||(i[1]=l=>n.setActiveStatus("info")),type:"button",textContent:a(o.translate("Info")),class:h([s.activeStatus=="info"?"menu-dark text-white font-semibold":"text-gray-500","hover:bg-white hover:text-blue-800 hs-tab-active:font-semibold hs-tab-active:bg-white dark:hs-tab-active:bg-gray-700 w-full flex justify-center py-2 rounded items-center gap-2 border-b-2 border-transparent -mb-px transition-all text-sm whitespace-nowrap dark:text-white active"])},null,10,nt),t("button",{onClick:i[2]||(i[2]=l=>n.setActiveStatus("pickup_locations")),type:"button",textContent:a(o.translate("Pickup locations")),class:h([s.activeStatus=="pickup_locations"?"menu-dark text-white font-semibold":"text-gray-500","hover:bg-white hover:text-blue-800 hs-tab-active:font-semibold hs-tab-active:bg-white dark:hs-tab-active:bg-gray-700 w-full flex justify-center py-2 rounded items-center gap-2 border-b-2 border-transparent -mb-px transition-all text-sm whitespace-nowrap dark:text-white"])},null,10,ot),t("button",{type:"button",onClick:i[3]||(i[3]=l=>n.setActiveStatus("map")),class:h([s.activeStatus=="map"?"menu-dark text-white font-semibold":"text-gray-500","hover:bg-white hover:text-blue-800 hs-tab-active:font-semibold hs-tab-active:bg-white dark:hs-tab-active:bg-gray-700 w-full flex justify-center py-2 rounded items-center gap-2 border-b-2 border-transparent -mb-px transition-all text-sm whitespace-nowrap dark:text-white"]),textContent:a(o.translate("Map"))},null,10,lt),t("button",{onClick:i[4]||(i[4]=l=>n.setActiveStatus("reviews")),type:"button",textContent:a(o.translate("Reviews")),class:h([s.activeStatus=="reviews"?"menu-dark text-white font-semibold":"text-gray-500","hover:bg-white hover:text-blue-800 hs-tab-active:font-semibold hs-tab-active:bg-white dark:hs-tab-active:bg-gray-700 w-full flex justify-center py-2 rounded items-center gap-2 border-b-2 border-transparent -mb-px transition-all text-sm whitespace-nowrap dark:text-white"])},null,10,it)]),t("div",rt,[t("div",ct,[s.activeStatus=="help_messages"?(r(),c("div",dt,[(r(!0),c(k,null,y(n.activeItem.help_messages,l=>(r(),c("div",ut,[t("div",ht,[t("div",_t,[t("span",bt,[v(p,{class:"text-primary w-10 h-10"})]),t("span",{class:"text-content3 text-2xs text-muted p-3",textContent:a(l.date)},null,8,mt)]),t("div",vt,[t("div",null,[t("p",{class:"text-title text-sm font-semibold mb-1 dark:text-white",textContent:a(l.subject)},null,8,gt),t("p",{class:"text-content3 text-2xs truncate",textContent:a(l.message)},null,8,xt)]),t("div",{class:h([o.translate("lang")=="ar"?"left-0":"right-0","absolute flex items-center justify-between gap-1"])},[t("span",{class:"bg-blue-50 px-4 py-1 text-secondary badge-sm rounded-5",textContent:a(l.status)},null,8,pt)],2)])])]))),256))])):d("",!0),s.activeStatus=="info"?(r(),c("div",ft,[t("div",kt,[t("div",yt,[v(m,{icon:"/uploads/img/products_icome.png",classes:"bg-gradient-success",class:"border border-1",title:o.translate("Duration"),value:n.activeItem.duration?n.activeItem.duration:"0"},null,8,["title","value"]),v(m,{icon:"/uploads/img/products_icome.png",classes:"bg-gradient-info",class:"border border-1",title:o.translate("Pickup locations"),value:n.activeItem.pickup_locations_count},null,8,["title","value"]),v(m,{icon:"/uploads/img/products_icome.png",classes:"bg-gradient-danger",class:"border border-1",title:o.translate("Distance"),value:n.activeItem.distance},null,8,["title","value"])])])])):d("",!0),s.activeStatus=="pickup_locations"&&e.trip?(r(),c("div",wt,[t("div",{class:h([o.translate("lang")=="ar"?"right-4":"left-4","absolute border-s-2 border border-gray-300 h-full top-20 start-10 -z-10 dark:border-white/10"])},null,2),t("div",Ct,[t("div",St,[t("h5",{class:"font-semibold bg-white dark:bg-gray-700 dark:text-gray-300 inline rounded",textContent:a(o.translate("Trip number")+" #"+e.trip.trip_id)},null,8,It),t("p",{class:"text-muted text-sm",textContent:a(e.trip.trip_date)},null,8,jt)]),t("div",Mt,[t("h5",{class:"font-semibold bg-white dark:bg-gray-700 dark:text-gray-300 inline rounded",textContent:a(e.trip.duration)},null,8,zt),t("p",{class:"text-muted text-sm",textContent:a(o.translate("Duration"))},null,8,At)]),t("div",Dt,[t("h5",{class:"font-semibold bg-white dark:bg-gray-700 dark:text-gray-300 inline rounded",textContent:a(e.trip.distance+" KM")},null,8,Pt),t("p",{class:"text-muted text-sm",textContent:a(o.translate("Distance"))},null,8,Bt)])]),(r(!0),c(k,null,y(e.trip.pickup_locations,l=>(r(),c("div",{class:"space-y-4",key:e.trip},[t("div",Ft,[t("div",Lt,[t("div",Nt,[t("div",Vt,[l.model?(r(),c("img",{key:0,src:"/app/image.php?w=100&h=100&src="+l.model.picture,class:"rounded-full",alt:""},null,8,Tt)):d("",!0)]),Rt])]),t("div",qt,[t("div",Et,[t("div",Jt,[t("div",Kt,[t("h2",{class:h([o.translate("lang")=="ar"?"bg-gradient-to-l":"bg-gradient-to-r","font-semibold p-2 rounded text-primary flex items-center justify-center text-sm mx-16"]),textContent:a(l.boarding_time?l.time:o.translate("Waiting"))},null,10,Ot)]),t("div",Ut,[t("div",Gt,[l.model?(r(),c("h4",{key:0,class:"mb-1.5 text-base dark:text-gray-300",textContent:a(l.model.name)},null,8,Wt)):d("",!0),l.location?(r(),c("p",{key:1,style:I([{"white-space":"nowrap"},{"white-space":"nowrap"}]),class:"mb-4 text-gray-500 dark:text-gray-400",textContent:a(l.location.address)},null,8,Ht)):d("",!0)])])])])])])]))),128))])):d("",!0)])])])])]),s.activeStatus=="map"?(r(),c("p",Qt,[(r(),S(_,{key:e.trip,trip:e.trip,conf:e.conf,showroute:!0,onClickMarker:s.clickMarker,onUpdateMarker:s.updateMarker,onIntervalCallback:s.callback},null,8,["trip","conf","onClickMarker","onUpdateMarker","onIntervalCallback"]))])):d("",!0)])])):d("",!0)])}const $t=w(M,[["render",Xt]]);export{$t as default};
