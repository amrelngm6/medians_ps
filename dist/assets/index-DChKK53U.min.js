import{_ as k,t as r,a as p,o as l,c as i,d as t,b as _,e as s,i as b,n as g,g as f,F as y,f as w,w as T,v as E,l as M,s as N,r as v,u as j,j as L}from"./index.min.js";const D={components:{translate:r},emits:["callback"],setup(c,{emit:d}){return{translate:r,emit:d,close:()=>{if(!window.confirm(r("confirm_close_ticket")))return null;var e=new URLSearchParams;e.append("type","HelpMessage.close"),e.append("params[message_id]",c.item.message_id),e.append("params[status]","completed"),M(e,"/api/update").then(u=>{N(u.result)})}}},props:["path","langs","setting","conf","auth","item"]},V={class:"w-full"},B={class:"container-fluid"},F={class:"row"},O={class:"col-lg-12"},R={class:"card mt-n4 mx-n4 card-border-effect-none mb-n5 border-bottom-0 border-start-0 rounded-0"},q={class:"card-body pb-4 mb-0"},A={class:"row"},H={class:"col-md"},P={class:"flex align-items-center"},U={class:"px-1 pt-1"},J=["src"],z={class:"col-md"},G=["textContent"],I={class:"hstack gap-3 flex h-8"},W={class:"text-muted"},K=t("i",{class:"ri-building-line align-bottom me-1"},null,-1),Q=["textContent"],X=t("div",{class:"vr"},null,-1),Y={class:"text-muted"},Z=["textContent"],$=["textContent"],tt=t("div",{class:"vr"},null,-1),et={class:"text-muted"},st=["textContent"],nt=["textContent"],ot=t("div",{class:"vr"},null,-1),lt=["textContent"],at=["textContent"],it={class:"lg:flex gap-6 mt-4"},dt={class:"col-xxl-9 w-full"},ct={class:"card"},rt={class:"card-body p-4"},_t=["textContent"],mt=["textContent"],ut={class:"card-body p-4"},ht=["textContent"],xt={"data-simplebar":"init",style:{"max-height":"300px"},class:"overflow-y-auto"},vt={class:"simplebar-wrapper"},ft=t("div",{class:"simplebar-height-auto-observer-wrapper"},[t("div",{class:"simplebar-height-auto-observer"})],-1),Ct={class:"simplebar-mask"},bt={class:"simplebar-offset"},pt={class:"simplebar-content-wrapper",tabindex:"0",role:"region","aria-label":"scrollable content"},gt={class:"simplebar-content"},yt={class:"flex gap-2 mb-4"},wt={key:0,class:"flex-shrink-0"},kt=["src"],St={key:1,class:"flex-grow-1 ms-3"},Tt={class:"fs-13 flex gap-2"},Et=["textContent"],Mt=["textContent"],Nt=["textContent"],jt={action:"/api/create",method:"POST","data-refresh":"1",id:"add-device-form",class:"action my-2 rounded-lg pb-2"},Lt=t("input",{name:"type",type:"hidden",value:"HelpMessageComment.create"},null,-1),Dt=["value"],Vt=["name"],Bt={class:"row g-3"},Ft={class:"col-lg-12"},Ot=["textContent"],Rt=t("textarea",{name:"params[comment]",class:"form-control bg-light border-light",id:"exampleFormControlTextarea1",rows:"3",placeholder:"Enter comments"},null,-1),qt={class:"col-lg-12 text-end mt-4"},At=["textContent"],Ht={class:"w-96"},Pt={class:"card"},Ut={class:"card-header"},Jt=["textContent"],zt={class:"card-body"},Gt={class:"table-responsive table-card"},It={class:"table table-borderless align-middle mb-0 w-full"},Wt=["textContent"],Kt={class:"py-2"},Qt=["textContent"],Xt=["textContent"],Yt=["textContent"],Zt=["textContent"],$t={class:"py-2"},te=["textContent"],ee=["textContent"],se={class:"py-2"},ne=["textContent"],oe=["textContent"],le=["textContent"],ae=["textContent"],ie=["textContent"],de=["textContent"],ce={id:"d-date",class:"py-2 flex"},re=["textContent"];function _e(c,d,n,e,u,h){const m=p("vue-feather");return l(),i("div",V,[t("div",B,[t("div",F,[t("div",O,[t("div",R,[t("div",q,[t("div",A,[t("div",H,[t("div",P,[t("div",U,[n.item?(l(),i("img",{key:0,src:n.item.user?n.item.user.photo?n.item.user.photo:n.item.user.picture:"",alt:"",width:"36",height:"36",class:"rounded"},null,8,J)):_("",!0)]),t("div",z,[t("h4",{class:"fw-semibold px-1",id:"ticket-title",textContent:s(n.item.user?n.item.user.name:"")},null,8,G),t("div",I,[t("div",W,[K,t("span",{id:"ticket-client",textContent:s(n.item.subject)},null,8,Q)]),X,t("div",Y,[t("span",{textContent:s(e.translate("Created at"))},null,8,Z),b(" : "),t("span",{class:"fw-medium",id:"create-date",textContent:s(n.item.date)},null,8,$)]),tt,t("div",et,[t("span",{textContent:s(e.translate("Last update"))},null,8,st),b(" : "),t("span",{class:"fw-medium",id:"update-date",textContent:s(n.item.last_update)},null,8,nt)]),ot,n.item.status?(l(),i("div",{key:0,class:g(["badge rounded-pill fs-12 text-white",n.item.status=="new"?"bg-info":"bg-success"]),id:"ticket-status",textContent:s(n.item.status)},null,10,lt)):_("",!0),n.item.priority?(l(),i("div",{key:1,class:"badge rounded-pill bg-danger fs-12 text-white",id:"ticket-priority",textContent:s(n.item.priority)},null,8,at)):_("",!0)])]),t("span",{class:"w-auto py-2 px-4 cursor-pointer text-lg",onClick:d[0]||(d[0]=o=>e.emit("callback"))},[f(m,{class:"w-5",type:"x-circle"})])])])])])])])]),t("div",it,[t("div",dt,[t("div",ct,[t("div",rt,[t("h6",{class:"fw-semibold text-uppercase mb-3",textContent:s(e.translate("Ticket Discripation"))},null,8,_t),t("p",{class:"text-muted font-bold pt-10",textContent:s(n.item.message)},null,8,mt)]),t("div",ut,[t("h5",{class:"card-title text-sm font-semibold mb-4",textContent:s(e.translate("Comments"))},null,8,ht),t("div",xt,[t("div",vt,[ft,t("div",Ct,[t("div",bt,[t("div",pt,[t("div",gt,[(l(!0),i(y,null,w(n.item.comments,o=>(l(),i("div",yt,[o.user?(l(),i("div",wt,[t("img",{src:n.item.user.photo?n.item.user.photo:n.item.user.picture,alt:"",class:"h-10 w-10 mt-2 avatar-xs rounded-circle"},null,8,kt)])):_("",!0),o.user?(l(),i("div",St,[t("h5",Tt,[t("span",{textContent:s(o.user.name)},null,8,Et),t("small",{class:"text-muted",textContent:s(o.date)},null,8,Mt)]),t("p",{class:"text-muted",textContent:s(o.comment)},null,8,Nt)])):_("",!0)]))),256))])])])])])]),t("form",jt,[Lt,t("input",{name:"params[message_id]",type:"hidden",value:n.item.message_id},null,8,Dt),c.model_id&&c.column&&c.column.column_type=="hidden"?T((l(),i("input",{key:0,name:"params["+c.column.key+"]",type:"hidden","onUpdate:modelValue":d[1]||(d[1]=o=>c.column.default=o)},null,8,Vt)),[[E,c.column.default]]):_("",!0),t("div",Bt,[t("div",Ft,[t("label",{for:"exampleFormControlTextarea1",class:"form-label",textContent:s(e.translate("WRITE_COMMENT"))},null,8,Ot),Rt]),t("div",qt,[t("button",{type:"submit",href:"javascript:void(0);",class:"btn btn-primary",textContent:s(e.translate("Send"))},null,8,At)])])])])])]),t("div",Ht,[t("div",Pt,[t("div",Ut,[t("h5",{class:"card-title mb-0",textContent:s(e.translate("Ticket Details"))},null,8,Jt)]),t("div",zt,[t("div",Gt,[t("table",It,[t("tbody",null,[t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Ticket"))},null,8,Wt),t("td",Kt,[b("#"),t("span",{id:"t-no",textContent:s(n.item.message_id)},null,8,Qt)])]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("User"))},null,8,Xt),t("td",{id:"t-client",class:"py-2",textContent:s(n.item.user?n.item.user.name:"")},null,8,Yt)]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Status"))},null,8,Zt),t("td",$t,[t("span",{class:"font-bold",id:"t-status",textContent:s(n.item.status)},null,8,te)])]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Priority"))},null,8,ee),t("td",se,[t("span",{class:"badge bg-danger text-white",id:"t-priority",textContent:s(n.item.priority)},null,8,ne)])]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Created at"))},null,8,oe),t("td",{id:"c-date",class:"py-2",textContent:s(n.item.date)},null,8,le)]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Last update"))},null,8,ae),t("td",{id:"d-date",class:"py-2",textContent:s(n.item.last_update)},null,8,ie)]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Close ticket"))},null,8,de),t("td",ce,[t("div",{onClick:d[3]||(d[3]=(...o)=>e.close&&e.close(...o)),class:"cursor-pointer hover:bg-red-800 hover:text-gray-100 px-3 py-2 text-sm border-red-600 border-1 rounded border mt-2 block text-center"},[f(m,{class:"w-4 mx-1",type:"power"}),t("span",{onClick:d[2]||(d[2]=(...o)=>e.close&&e.close(...o)),textContent:s(e.translate("Close"))},null,8,re)])])])])])])])])])])])])}const me=k(D,[["render",_e]]),ue={components:{item_details:me,translate:r},setup(c){const d=c.conf.url+c.path+"?load=json",n=v({}),e=v({}),u=v(!1),h=v(!1),m=v("0"),o=()=>{h.value=!1,e.value=null},a=x=>{m.value=x},C=x=>{h.value=!0,e.value=x};(()=>{L(d).then(x=>{n.value=JSON.parse(JSON.stringify(x))})})();let S=[{text:r("Inactive"),status:"0",icon:"delete",desc:r("New posts those not opened yet")},{text:r("Active"),status:"on",icon:"check-square",desc:r("posts needs customer reply")}];return{content:n,activeItem:e,closeMessage:o,switchStatus:a,showDetails:C,showAddSide:u,showEditSide:h,activeStatus:m,statusList:S,translate:r}},props:["path","langs","setting","conf","auth"]},he={class:"w-full"},xe={key:1,class:"container-fluid"},ve={class:"card"},fe={class:"card-body"},Ce={class:"d-flex flex-column flex-xl-row p-7"},be={class:"flex-lg-row-fluid me-xl-15 mb-20 mb-xl-0"},pe={class:"mb-0"},ge=t("form",{method:"post",action:"#",class:"form mb-15"},[t("div",{class:"position-relative"},[t("i",{class:"ki-duotone ki-magnifier fs-1 text-primary position-absolute top-50 translate-middle ms-9"},[t("span",{class:"path1"}),t("span",{class:"path2"})]),t("input",{type:"text",class:"form-control form-control-lg form-control-solid ps-14",name:"search",value:"",placeholder:"Search"})])],-1),ye=["textContent"],we={class:"w-full"},ke={key:0,class:"d-flex mb-10 gap-4"},Se=["onClick"],Te={class:"d-flex align-items-center mb-2"},Ee=["textContent"],Me=["textContent"],Ne=["textContent"],je=["textContent"],Le={class:"flex-column flex-lg-row-auto w-100 mw-lg-300px mw-xxl-350px"},De={class:"card-rounded bg-primary bg-opacity-5 p-10 mb-15"},Ve=["textContent"],Be={class:"d-flex align-items-center mb-10 gap-4"},Fe=["onClick"],Oe=["textContent"],Re={class:"fw-semibold"},qe=["textContent"];function Ae(c,d,n,e,u,h){const m=p("item_details"),o=p("vue-feather");return l(),i("div",he,[e.showEditSide?(l(),j(m,{key:0,item:e.activeItem,ref:"activeHelpMessage",onCallback:e.closeMessage},null,8,["item","onCallback"])):_("",!0),e.showEditSide?_("",!0):(l(),i("div",xe,[t("div",ve,[t("div",fe,[t("div",Ce,[t("div",be,[t("div",pe,[ge,t("h1",{class:"text-gray-900 mb-10",textContent:s(e.content.title)},null,8,ye),(l(!0),i(y,null,w(e.content.items,a=>(l(),i("div",we,[a.status==e.activeStatus?(l(),i("div",ke,[f(o,{type:"bell",class:"mt-5"}),t("div",{class:"d-flex flex-column",onClick:C=>(e.activeItem=a,e.showEditSide=!0)},[t("div",Te,[t("a",{href:"javascript:;",class:"font-semibold text-gray-800 text-hover-primary fs-4 me-3",textContent:s(a.customer_name)},null,8,Ee),t("span",{class:"truncate max-w-sm badge badge-light my-1 bg-gray-100",textContent:s(a.subject)},null,8,Me),t("span",{class:g(["badge badge-light mx-2 my-1 text-white",{"bg-primary":a.status=="on","bg-danger":a.status=="0"}]),textContent:s(a.status)},null,10,Ne)]),t("span",{class:"truncate text-muted fw-semibold fs-6",textContent:s(a.content)},null,8,je)],8,Se)])):_("",!0)]))),256))])]),t("div",Le,[t("div",De,[t("h2",{class:"text-gray-900 fw-bold mb-11",textContent:s(e.translate("Status"))},null,8,Ve),(l(!0),i(y,null,w(e.statusList,a=>(l(),i("div",Be,[f(o,{type:a.icon},null,8,["type"]),t("div",{class:"d-flex flex-column cursor-pointer",onClick:C=>e.switchStatus(a.status)},[t("h5",{class:g(["",a.status==e.activeStatus?"text-gray-800":"text-gray-500"]),textContent:s(a.text)},null,10,Oe),t("div",Re,[t("span",{class:"text-muted",textContent:s(a.desc)},null,8,qe)])],8,Fe)]))),256))])])])])])]))])}const Ue=k(ue,[["render",Ae]]);export{Ue as default};
