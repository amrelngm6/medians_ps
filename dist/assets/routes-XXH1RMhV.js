import{_ as E,o as n,c as o,a as s,E as X,G as Q,z as u,s as W,r as m,j as C,d as i,t as h,w as Y,v as Z,F as j,i as F,n as I,l as w,b as S,k as $,u as M,x as V,y as B,q as ee,B as te,p as se}from"./index-D17f3j1k.js";const le={},ne={fill:"#000000",height:"20px",width:"20px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24","xml:space":"preserve"},oe=s("path",{d:"M14.844 20H6.5C5.121 20 4 18.879 4 17.5S5.121 15 6.5 15h7c1.93 0 3.5-1.57 3.5-3.5S15.43 8 13.5 8H8.639a9.812 9.812 0 0 1-1.354 2H13.5c.827 0 1.5.673 1.5 1.5s-.673 1.5-1.5 1.5h-7C4.019 13 2 15.019 2 17.5S4.019 22 6.5 22h9.593a10.415 10.415 0 0 1-1.249-2zM5 2C3.346 2 2 3.346 2 5c0 3.188 3 5 3 5s3-1.813 3-5c0-1.654-1.346-3-3-3zm0 4.5a1.5 1.5 0 1 1 .001-3.001A1.5 1.5 0 0 1 5 6.5z"},null,-1),ae=s("path",{d:"M19 14c-1.654 0-3 1.346-3 3 0 3.188 3 5 3 5s3-1.813 3-5c0-1.654-1.346-3-3-3zm0 4.5a1.5 1.5 0 1 1 .001-3.001A1.5 1.5 0 0 1 19 18.5z"},null,-1),ce=[oe,ae];function ie(p,a){return n(),o("svg",ne,ce)}const re=E(le,[["render",ie]]),de={},ue={xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 250 250"},_e=s("path",{d:"M246,144.9v12.6c0,4.6-3.8,8.4-8.4,8.4h-8.8c0.2-1.4,0.4-2.8,0.4-4.2c0-14-11.3-25.3-25.3-25.3s-25.3,11.3-25.3,25.3c0,1.4,0.1,2.8,0.4,4.2H68.6c0.2-1.4,0.4-2.8,0.4-4.2c0-14-11.3-25.3-25.3-25.3c-14,0-25.3,11.3-25.3,25.3c0,1.4,0.1,2.8,0.4,4.2h-0.4c-4.6,0-8.4-3.8-8.4-8.4v-12.6c0-0.8,0.1-1.5,0.3-2.2c1.8-11.5,5.1-22.5,6.8-25.6c0.7-1.3,1.3-1.9,1.3-1.9c0.3-1.3,15.2-26.5,17-28.6c5.7-10.4,29.2-9.2,29.2-9.2s66.2,0.1,77.7,0.1c9.3,0.7,10.1,2.7,13.8,5.6c1.5,1.2,34.7,32.2,36.5,32.3c27.7,0.2,34.2,4.1,34.2,4.1C247,130.4,246,144.9,246,144.9z M85.9,90.1c0,0-15.5,0-25.3,0c-9.8,0-12.6,8.4-12.6,8.4l-4.7,10.5l42.6,2.1V90.1z M149.1,97.5c0,0-5.9-7.4-10.1-7.4c-4.2,0-44.6,0.1-44.6,0.1v21l46.2,3v-5.9c0,0,1.5-3.7,4.9-3c2.9,0.6,6,3.9,8.7,9.8l12.4,0.8L149.1,97.5z M43.7,144.9c9.3,0,16.9,7.5,16.9,16.9s-7.5,16.9-16.9,16.9s-16.9-7.5-16.9-16.9S34.4,144.9,43.7,144.9z M203.8,144.9c9.3,0,16.9,7.5,16.9,16.9s-7.5,16.9-16.9,16.9c-9.3,0-16.9-7.5-16.9-16.9S194.5,144.9,203.8,144.9z"},[s("animateTransform",{attributeName:"transform",attributeType:"XML",type:"translate",dur:"2s",values:"0 0; -10 0; 0 0",repeatCount:"indefinite"})],-1),he=[_e];function fe(p,a){return n(),o("svg",ue,he)}const xe=E(de,[["render",fe]]),pe=V(()=>B(()=>import("./map-WjPvhUMl.js"),__vite__mapDeps([0,1,2]))),me=V(()=>B(()=>import("./side-form-create-cyUazOvO.js"),__vite__mapDeps([3,1,2,4,5,6]))),ve=V(()=>B(()=>import("./side-form-update-S-dAmQSB.js"),__vite__mapDeps([7,1,2,4,5,6]))),ge={components:{datatabble:X,SideFormCreate:me,SideFormUpdate:ve,maps:pe,delete_icon:Q,car_icon:xe,route_icon:re},name:"Students",setup(p){const a=p.conf.url+p.path+"?load=json",x=u(!1),e=u(!1),T=u(null),k=u({}),f=u({}),v=u({});u([]),u(!0);const g=u(""),A=u(null),L=u(!1),z=()=>{x.value=!1,e.value=!1};(()=>{ee(a).then(l=>{f.value=JSON.parse(JSON.stringify(l)),_()})})();const t=async()=>{navigator.geolocation?(console.log("position 1"),navigator.geolocation.getCurrentPosition(l=>{v.value={lat:l.coords.latitude,lng:l.coords.longitude}},l=>{te(l.message,5e3)})):A.value="Geolocation is not supported by this browser."};t();const _=()=>{for(let l=0;l<f.value.items.length;l++)f.value.items[l].active=g.value.trim()?d(f.value.items[l]):1},d=l=>{let c=!!l.route_name.toLowerCase().includes(g.value.toLowerCase());return c||!!l.description.toLowerCase().includes(g.toLowerCase())},y=(l,c)=>{k.value=l;for(let r=0;r<f.value.items.length;r++)f.value.items[r].selected=!1;f.value.items[c].selected=!0,R.value=P(l)},O=(l,c,r)=>{},H=(l,c,r)=>{console.log(l),console.log(c),console.log(r)},P=l=>{let c,r=[],U=p.conf.url+"uploads/images/blue_pin.gif",q=p.conf.url+"uploads/images/car.svg",J=p.conf.url+"uploads/images/destination.svg";for(let b=0;b<l.pickup_locations.length;b++)c=l.pickup_locations[b],r[b]={title:c.student_name,icon:U,origin:{lat:parseFloat(c.latitude),lng:parseFloat(c.longitude)},destination:{lat:parseFloat(c.latitude),lng:parseFloat(c.longitude)}};let N={icon:q,origin:{lat:parseFloat(l.vehicle.last_latitude),lng:parseFloat(l.vehicle.last_longitude)},destination:{lat:parseFloat(l.vehicle.last_latitude),lng:parseFloat(l.vehicle.last_longitude)}};r[r.length]=N;let K={drag:!0,icon:J,origin:N.origin,destination:{lat:parseFloat(l.latitude),lng:parseFloat(l.longitude)}};return r[r.length]=K,v.value=r[0].destination,r},G=(l,c)=>{switch(l){case"view":break;case"edit":k.value=c,x.value=!1,e.value=!0,T.value=!0;break;case"delete":se("driver_id",c,"Driver.delete");break;case"close":e.value=!1,x.value=!1,T.value=!1,k.value={};break}},R=u([]);return{showAddSide:x,waypoints:R,showEditSide:e,url:a,content:f,center:v,activeItem:k,translate:W,setLocationsPickups:P,clickMarker:H,updateMarker:O,setLocationsMarkers:y,checkSimilar:d,searchTextChanged:_,searchText:g,getUserLocation:t,collapsed:L,closeSide:z,handleAction:G}},props:["path","lang","setting","conf","auth"]},ke={class:"w-full flex overflow-auto",style:{height:"85vh","z-index":"9999"}},we={key:0,class:"w-full relative"},ye={class:"self-stretch py-4 flex-col justify-center items-start flex"},be=["textContent"],Ce=["textContent"],Se={key:0,class:"w-full self-stretch pt-2 flex-col justify-center items-start flex"},Me=["placeholder"],Te={class:"w-full grow shrink basis-0 px-6 py-4 flex-col justify-center items-start gap-4 inline-flex"},Ae={class:"w-full self-stretch justify-start items-start inline-flex cursor-pointer"},Le=["onClick"],ze=["textContent"],je=["textContent"],Fe={class:"gap-2 py-2 flex justify-start items-start gap-2.5 inline-flex"},Ie=["onClick"],Ee=s("div",{class:"text-center text-xs text-white uppercase tracking-tight"},[s("i",{class:"fa fa-location-dot"})],-1),Ve=[Ee],Be=["onClick"],De=s("div",{class:"text-center text-xs text-white uppercase tracking-tight"},[s("i",{class:"fa fa-edit"})],-1),Pe=[De],Re=s("hr",{class:"w-full"},null,-1),Ne={class:"w-full h-8 relative flex"},Oe=["src"],He=["textContent"],Ge={class:"right-0 absolute flex self-stretch text-slate-500 text-base font-normal"},Ue=["textContent"],qe={class:"flex self-stretch grow shrink basis-0 justify-between items-center inline-flex"},Je=["textContent"],Ke=["textContent"],Xe=s("hr",{class:"mt-2"},null,-1),Qe={class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},We={class:"px-4 mb-6 py-4 rounded-lg shadow-lg bg-white dark:bg-gray-700 flex w-full"},Ye=["textContent"],Ze=s("hr",{class:"mt-2"},null,-1),$e={class:"w-full"},et=["src"],tt={class:"w-full h-8 relative flex"},st=["src"],lt=["textContent"],nt=["onClick"],ot=s("i",{class:"fa fa-edit"},null,-1),at=[ot],ct=["onClick"];function it(p,a,x,e,T,k){const f=m("maps"),v=m("route_icon"),g=m("car_icon"),A=m("delete_icon"),L=m("datatabble"),z=m("side-form-create"),D=m("side-form-update");return n(),o("div",ke,[e.content?(n(),o("div",we,[e.center?(n(),C(f,{conf:x.conf,setting:x.setting,key:e.center,center:e.center,onClickMarker:e.clickMarker,waypoints:e.waypoints,showroute:!1},null,8,["conf","setting","center","onClickMarker","waypoints"])):i("",!0),s("div",{style:w(e.collapsed?"max-height:240px":"max-height:calc(100vh - 140px)"),class:"mx-16 h-full absolute top-4 rounded-lg p-4 bg-white rounded-xl flex-col justify-start items-start inline-flex"},[s("div",ye,[s("div",{class:"text-black text-lg font-semibold",textContent:h(e.translate("Routes"))},null,8,be),s("div",{class:"py-2 self-stretch text-zinc-600 text-base tracking-wide",textContent:h(e.translate("Routes description"))},null,8,Ce)]),e.collapsed?i("",!0):(n(),o("div",Se,[Y(s("input",{class:"w-full bg-gray-100 rounded-lg px-4 py-2",placeholder:e.translate("find by name and address"),"onUpdate:modelValue":a[0]||(a[0]=t=>e.searchText=t),onChange:a[1]||(a[1]=(...t)=>e.searchTextChanged&&e.searchTextChanged(...t)),onInput:a[2]||(a[2]=(...t)=>e.searchTextChanged&&e.searchTextChanged(...t)),onKeydown:a[3]||(a[3]=(...t)=>e.searchTextChanged&&e.searchTextChanged(...t))},null,40,Me),[[Z,e.searchText]])])),!e.collapsed&&e.content.items?(n(),o("div",{key:e.collapsed,class:"max-h-[400px] overflow-auto my-4 w-full self-stretch py-4"},[(n(!0),o(j,null,F(e.content.items,(t,_)=>(n(),o("div",{key:t.active,class:"w-full"},[t.active?(n(),o("div",{key:0,class:I([t.selected?"text-fuchsia-600":"bg-gray-50","mb-4 w-full rounded-lg justify-start items-center inline-flex"])},[s("div",Te,[s("div",Ae,[s("div",{onClick:d=>e.setLocationsMarkers(t,_),class:"w-full grow shrink basis-0 flex-col justify-start items-start inline-flex"},[s("div",{class:I([t.selected?"text-fuchsia-600":"text-gray-800","self-stretch text-base font-semibold tracking-tight"]),textContent:h(t.route_name)},null,10,ze),s("div",{class:"py-1 self-stretch text-slate-500 text-sm font-semibold leading-relaxed tracking-wide",textContent:h(t.description)},null,8,je)],8,Le),s("div",Fe,[s("div",{class:"px-3 py-2 bg-purple-800 rounded-full justify-center items-center flex cursor-pointer",onClick:d=>e.setLocationsMarkers(t,_)},Ve,8,Ie),s("div",{class:"px-3 py-2 bg-purple-800 rounded justify-center items-center flex cursor-pointer",onClick:d=>e.handleAction("edit",t)},Pe,8,Be)])]),Re,s("div",Ne,[(n(!0),o(j,null,F(t.pickup_locations,(d,y)=>(n(),o("div",{class:"rounded-full left-0 top-0 absolute",style:w("left: "+20*y+"px")},[y<3?(n(),o("img",{key:0,class:"rounded-full w-8 h-8 rounded-[50px] border-2 border-purple-800",src:d.student&&d.student.picture?d.student.picture:"https://via.placeholder.com/37x37"},null,8,Oe)):i("",!0)],4))),256)),s("span",{class:"absolute pt-2 flex",style:w("left: "+(20*(t.pickup_locations.length<3?t.pickup_locations.length:3)+20)+"px")},[S(v),$(),t.pickup_locations?(n(),o("span",{key:0,class:"font-semibold px-1",textContent:h(t.pickup_locations.length)},null,8,He)):i("",!0)],4),s("div",Ge,[S(g,{class:"w-8"}),t.vehicle?(n(),o("span",{key:0,class:"font-semibold text-sm p-2",textContent:h(t.vehicle.plate_number)},null,8,Ue)):i("",!0)])])])],2)):i("",!0)]))),128))])):i("",!0),s("div",qe,[s("div",{class:"menu-dark rounded-lg text-white text-xs font-medium px-4 py-3 uppercase cursor-pointer",onClick:a[4]||(a[4]=t=>{e.showAddSide=!0,e.activeItem={}}),textContent:h(e.translate("add new"))},null,8,Je),s("div",{onClick:a[5]||(a[5]=t=>e.collapsed=!e.collapsed),class:"cursor-pointer p-2 block text-center"},[s("i",{class:I(["fa",e.collapsed?"fa-circle-down":"fa-circle-up"])},null,2),s("p",{class:"font-semibold",textContent:h(e.collapsed?e.translate("Expand"):e.translate("Collapse"))},null,8,Ke)])])],4),Xe,s("main",Qe,[s("div",We,[s("h1",{class:"font-bold text-lg w-full",textContent:h(e.content.title)},null,8,Ye),s("a",{href:"javascript:;",class:"uppercase p-2 mx-2 text-center text-white w-32 rounded-lg menu-dark hover:bg-purple-800",onClick:a[6]||(a[6]=t=>{e.showAddSide=!0,e.activeItem={}})},h(e.translate("add_new")),1)]),Ze,s("div",$e,[e.content.columns?(n(),C(L,{key:0,"body-text-direction":e.translate("lang")=="ar"?"right":"left","fixed-checkbox":"",headers:e.content.columns,items:e.content.items},{"item-picture":M(t=>[s("img",{src:t.picture,class:"w-8 h-8 rounded-full"},null,8,et)]),"item-pickup_locations":M(t=>[s("div",tt,[(n(!0),o(j,null,F(t.pickup_locations,(_,d)=>(n(),o("div",{style:w("left: "+20*d+"px"),class:"rounded-full w-8 h-8 left-0 top-0 absolute"},[d<3?(n(),o("img",{key:d,class:"rounded-full w-8 h-8 rounded-[50px] border-2 border-purple-800",src:_.student&&_.student.picture?_.student.picture:"https://via.placeholder.com/37x37"},null,8,st)):i("",!0)],4))),256)),s("span",{class:"flex absolute pt-2",style:w("left: "+(20*(t.pickup_locations.length<3?t.pickup_locations.length:3)+20)+"px")},[S(v),t.pickup_locations?(n(),o("span",{key:0,class:"font-semibold px-1",textContent:h(t.pickup_locations.length)},null,8,lt)):i("",!0)],4)])]),"item-edit":M(t=>[t.not_editable?i("",!0):(n(),o("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:_=>e.handleAction("edit",t)},at,8,nt))]),"item-delete":M(t=>[t.not_removeable?i("",!0):(n(),o("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:_=>e.handleAction("delete",t)},[S(A,{class:"w-4"})],8,ct))]),_:1},8,["body-text-direction","headers","items"])):i("",!0),e.showAddSide&&e.content&&e.content.fillable?(n(),C(z,{key:1,onCallback:e.closeSide,conf:x.conf,model:"Routes.create",columns:e.content.fillable,class:"col-md-3"},null,8,["onCallback","conf","columns"])):i("",!0),e.showEditSide&&!e.showAddSide?(n(),C(D,{onCallback:e.closeSide,key:e.activeItem,conf:x.conf,model:"Routes.update",item:e.activeItem,model_id:e.activeItem.route_id,index:"route_id",columns:e.content.fillable,class:"col-md-3"},null,8,["onCallback","conf","item","model_id","columns"])):i("",!0)])])])):i("",!0)])}const dt=E(ge,[["render",it]]);export{dt as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/map-WjPvhUMl.js","assets/index-D17f3j1k.js","assets/index-pdpIohfm.css","assets/side-form-create-cyUazOvO.js","assets/Field-G-vCuA8R.js","assets/Manager-nTTndMmL.js","assets/Manager-Cgf44v6b.css","assets/side-form-update-S-dAmQSB.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}