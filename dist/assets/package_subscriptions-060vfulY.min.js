import{_ as D,D as O,G as J,e as R,y as V,z as N,f as x,t as q,r as f,o,c as l,i as e,a as g,F as P,k as z,x as B,j as a,H as W,I as A,h as c,d as p,b as y,n as U,J as G,K,g as I,A as L,m as H,p as M}from"./index.min.js";import{e as F}from"./editable_map_location-VfWgWkt8.min.js";import{r as Q}from"./route_map-80PBIM6d.min.js";import{e as X}from"./routeLocationWizard-7uCJQlXs.min.js";import"./index.es-7nd_URRl.min.js";import"./tooltip-s9Xa9pgY.min.js";const Y=p(()=>y(()=>import("./map-HlZZaoZ3.min.js"),__vite__mapDeps([0,1,2,3]))),Z=p(()=>y(()=>import("./side-form-create-CKdgN5Kx.min.js"),__vite__mapDeps([4,2,3,5,6]))),$=p(()=>y(()=>import("./side-form-update-sfvJGQqB.min.js"),__vite__mapDeps([7,2,3,5,6,8,9,1]))),tt=p(()=>y(()=>import("./form_field-scTEvTH6.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),et={components:{datatabble:O,SideFormCreate:Z,SideFormUpdate:$,maps:Y,close_icon:J,delete_icon:R,car_icon:V,route_icon:N,form_field:tt,editable_map_location:F,route_map:Q},name:"PackageSubscriptions",emits:["callback"],setup(_,{emit:n}){const r=x(!1),t=x({}),h=x("Student"),C=x({}),v=x(["Student","Package","Subscription","Confirm"]),m=x("");_.item&&(t.value=_.item);const s=()=>{var d=new URLSearchParams;let b=JSON.parse(JSON.stringify(t.value)),w=Object.keys(b),k,j;for(let S=0;S<w.length;S++)k=w[S],j=typeof b[k]=="object"?JSON.stringify(b[k]):b[k],d.append("params["+k+"]",j);let E=b.subscription_id>0?"update":"create";d.append("type","PackageSubscription."+E),U(d,"/api/"+E).then(S=>{G(S)})},u=()=>{n("callback")},i=()=>K(["name","description","single_cost_month","single_cost_querter","single_cost_year","double_cost_month","double_cost_quarter","double_cost_year","status"],t),T=d=>{let b=!!d.name.toLowerCase().includes(m.value.toLowerCase()),w=b||!!d.mobile.toLowerCase().includes(m.value.toLowerCase());return w||!!d.parent.name.toLowerCase().includes(m.value.toLowerCase())};return{findStudent:()=>{for(let d=0;d<_.allstudents.length;d++)_.allstudents[d].show=m.value.trim()?T(_.allstudents[d]):1},setStudent:d=>{t.value.model_id=d.student_id,t.value.model=d,t.value.user_type="student",h.value="Package",m.value=null},checkSimilarStudent:T,progressWidth:i,showEditSide:r,content:C,fillable:v,activeItem:t,activeTab:h,translate:q,savePackageSubscription:s,searchText:m,back:u}},props:["conf","path","system_setting","business_setting","setting","item","allstudents","packages"]},st={class:"w-full flex overflow-auto"},nt={class:"w-full relative"},ot={class:"card w-full py-10"},at={class:"w-full stepper stepper-links"},lt={class:"stepper-nav justify-content-center py-2 mb-10"},it=["onClick"],ct=["textContent"],rt={class:"w-full"},dt={class:"text-center mb-13"},_t=["textContent"],mt=["textContent"],ut={class:"w-100 relative mb-5",autocomplete:"off"},ht=["placeholder"],xt={class:"w-full students"},bt={class:"symbol symbol-35px symbol-circle me-5"},vt=["src"],ft={class:"fw-semibold w-full"},gt=["textContent"],pt=["textContent"],yt=["onClick","textContent"],Ct={class:"symbol symbol-35px symbol-circle me-5"},wt=["src"],kt={class:"fw-semibold w-full"},St=["textContent"],Tt=["textContent"],Pt={class:"text-center"},zt=["textContent"],Lt={class:"card-body pt-0"},jt={class:"settings-form"},Et={class:"max-w-xl mb-6 mx-auto row"},Wt={class:"text-center mb-13"},At=["textContent"],It=["textContent"],Dt={class:"w-100 relative mb-5",autocomplete:"off"},Ot=["placeholder"],Rt={class:"w-full"},Vt={class:"fw-semibold w-full"},Nt=["textContent"],qt=["textContent"],Ft=["onClick","textContent"],Jt={class:"fw-semibold w-full"},Bt=["textContent"],Ut=["textContent"],Gt={class:"text-center"},Kt=["textContent"],Ht={class:"text-center mt-10"},Mt=["textContent"],Qt={class:"text-center mt-10"},Xt=["textContent"];function Yt(_,n,r,t,h,C){const v=f("close_icon"),m=f("vue-feather");return o(),l("div",st,[e("div",nt,[g(v,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:t.back},null,8,["onClick"]),e("div",ot,[e("div",at,[e("div",lt,[(o(!0),l(P,null,z(t.fillable,s=>(o(),l("div",{class:"stepper-item",onClick:u=>t.activeTab=s},[e("h3",{class:B([t.activeTab==s?"text-danger border-danger":"text-gray-400 border-transparent","cursor-pointer pb-3 px-2 stepper-title text-md border-b"]),textContent:a(s)},null,10,ct)],8,it))),256))]),e("div",rt,[t.activeTab=="Student"?(o(),l("div",{class:"",key:t.activeTab},[(o(),l("div",{class:"card-body pt-0 mx-auto max-w-xl",key:_.students},[e("div",dt,[e("h1",{class:"mb-3",textContent:a(t.translate("Find student"))},null,8,_t),e("div",{class:"text-gray-400 font-semibold",textContent:a(t.translate("Search by name, parent name or contact number"))},null,8,mt)]),e("div",ut,[g(m,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),W(e("input",{type:"text",onChange:n[0]||(n[0]=(...s)=>t.findStudent&&t.findStudent(...s)),"onUpdate:modelValue":n[1]||(n[1]=s=>t.searchText=s),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name, parent name")},null,40,ht),[[A,t.searchText]])]),t.searchText?(o(!0),l(P,{key:0},z(r.allstudents,s=>(o(),l("div",xt,[s.show?(o(),l("a",{href:"javascript:;",key:s.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",bt,[e("img",{alt:"Pic",src:s.picture},null,8,vt)]),e("div",ft,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:a(s.name)},null,8,gt),e("span",{class:"block text-gray-500 text-sm",textContent:a(s.mobile)},null,8,pt)]),e("span",{onClick:u=>t.setStudent(s),class:"btn btn-danger btn-sm text-white",textContent:a(t.translate("Choose"))},null,8,yt)])):c("",!0)]))),256)):c("",!0),t.activeItem.model?(o(),l("a",{href:"javascript:;",key:t.activeItem.model,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",Ct,[e("img",{alt:"Pic",src:t.activeItem.model.picture},null,8,wt)]),e("div",kt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:a(t.activeItem.model.name)},null,8,St),e("span",{class:"block text-gray-500 text-sm",textContent:a(t.activeItem.model.mobile)},null,8,Tt)])])):c("",!0)])),e("p",Pt,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:n[2]||(n[2]=s=>t.activeTab="Pickup location"),textContent:a(t.translate("Pickup location"))},null,8,zt)])])):c("",!0),t.activeTab=="Package"?(o(),l("div",{class:"",key:t.activeTab},[e("div",Lt,[e("div",jt,[e("div",Et,[(o(),l("div",{class:"card-body pt-0 mx-auto max-w-xl",key:r.packages},[e("div",Wt,[e("h1",{class:"mb-3",textContent:a(t.translate("Find Package"))},null,8,At),e("div",{class:"text-gray-400 font-semibold",textContent:a(t.translate("Search by name or description"))},null,8,It)]),e("div",Dt,[g(m,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),W(e("input",{type:"text",onChange:n[3]||(n[3]=(...s)=>_.findPackage&&_.findPackage(...s)),"onUpdate:modelValue":n[4]||(n[4]=s=>t.searchText=s),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name, parent name")},null,40,Ot),[[A,t.searchText]])]),t.searchText?(o(!0),l(P,{key:0},z(r.packages,s=>(o(),l("div",Rt,[s&&s.show?(o(),l("a",{href:"javascript:;",key:s.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",Vt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:a(s.name)},null,8,Nt),e("span",{class:"block text-gray-500 text-sm",textContent:a(s.description)},null,8,qt)]),e("span",{onClick:u=>_.setPackage(s),class:"btn btn-danger btn-sm text-white",textContent:a(t.translate("Choose"))},null,8,Ft)])):c("",!0)]))),256)):c("",!0),t.activeItem.package?(o(),l("a",{href:"javascript:;",key:t.activeItem.package,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1 gap-4"},[g(m,{type:"map-pin",class:"w-3"}),e("div",Jt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:a(t.activeItem.package.name)},null,8,Bt),e("span",{class:"block text-gray-500 text-sm truncate",textContent:a(t.activeItem.package.description)},null,8,Ut)])])):c("",!0)]))])])]),e("p",Gt,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:n[5]||(n[5]=s=>t.activeTab="Subscription"),textContent:a(t.translate("Subscription"))},null,8,Kt)])])):c("",!0),t.activeTab=="Subscription"?(o(),l("div",{class:"",key:t.activeTab},[e("p",Ht,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:n[6]||(n[6]=s=>t.activeTab="Confirm"),textContent:a(t.translate("Next"))},null,8,Mt)])])):c("",!0),t.activeTab=="Confirm"?(o(),l("div",{class:"w-full mx-auto",key:t.activeTab},[e("p",Qt,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:n[7]||(n[7]=(...s)=>t.savePackageSubscription&&t.savePackageSubscription(...s)),textContent:a(t.translate("Submit"))},null,8,Xt)])])):c("",!0)])])])])])}const Zt=D(et,[["render",Yt]]),$t=p(()=>y(()=>import("./map-HlZZaoZ3.min.js"),__vite__mapDeps([0,1,2,3]))),te=p(()=>y(()=>import("./form_field-scTEvTH6.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),ee={components:{datatabble:O,maps:$t,delete_icon:R,car_icon:V,route_icon:N,form_field:te,editable_map_location:F,student_subscription_wizard:Zt,employee_location_wizard:X},name:"Routes",setup(_){const n=_.conf.url+_.path+"?load=json",r=x({}),t=x({}),h=x(!1),C=()=>{h.value=!1};return(()=>{H(n).then(u=>{t.value=JSON.parse(JSON.stringify(u))})})(),{url:n,content:t,activeItem:r,translate:q,showWizard:h,closeSide:C,addLocationWizard:()=>{r.value={},h.value=!0},handleAction:(u,i)=>{switch(u){case"view":break;case"edit":r.value=i,h.value=!0;break;case"delete":M("location_id",i,"RouteLocation.delete");break;case"close":showEditSide.value=!1,r.value={};break}}}},props:["path","lang","system_setting","business_setting","setting","conf","auth"]},se={class:"w-full flex overflow-auto"},ne={key:0,class:"w-full relative"},oe={key:1,class:""},ae={class:"card"},le={class:"card-body"},ie={class:"card-px text-center pt-15 pb-15"},ce=["textContent"],re=["textContent"],de=["textContent"],_e={class:"text-center pb-15 px-5"},me=["src"],ue={key:2,class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},he={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},xe=["textContent"],be=["textContent"],ve=e("hr",{class:"mt-2"},null,-1),fe={class:"w-full bg-white"},ge={key:0,class:"w-full flex gap-4"},pe=["src"],ye=["textContent"],Ce=["onClick"],we=["onClick"];function ke(_,n,r,t,h,C){const v=f("student_subscription_wizard"),m=f("vue-feather"),s=f("delete_icon"),u=f("datatabble");return o(),l("div",se,[t.content&&r.auth?(o(),l("div",ne,[t.showWizard&&r.auth.business&&r.auth.business.type=="school"?(o(),I(v,{onCallback:n[0]||(n[0]=i=>t.showWizard=!1),packages:_.packages,allstudents:t.content.students,key:t.showWizard,system_setting:r.system_setting,item:t.activeItem,business_setting:r.business_setting},null,8,["packages","allstudents","system_setting","item","business_setting"])):c("",!0),!t.showWizard&&t.content.items&&!t.content.items.length?(o(),l("div",oe,[e("div",ae,[e("div",le,[e("div",ie,[e("h2",{class:"fs-2x fw-bold mb-0",textContent:a(t.content.title)},null,8,ce),e("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:a(t.translate("Add your first pickup using this below wizard"))},null,8,re),e("a",{textContent:a(t.translate("add_new")),onClick:n[1]||(n[1]=(...i)=>t.addLocationWizard&&t.addLocationWizard(...i)),href:"javascript:;",class:"text-white btn btn-primary er fs-6 px-8 py-4"},null,8,de)]),e("div",_e,[e("img",{src:"/src/asset/img/1.png",alt:"",class:"mx-auto mw-100 h-200px h-sm-325px"},null,8,me)])])])])):c("",!0),t.content.items&&t.content.items.length&&!t.showWizard?(o(),l("main",ue,[e("div",he,[e("h1",{class:"font-bold text-lg w-full",textContent:a(t.content.title)},null,8,xe),t.showWizard?c("",!0):(o(),l("a",{key:0,href:"javascript:;",class:"uppercase p-2 mx-2 text-center text-white w-32 rounded-lg bg-danger",onClick:n[2]||(n[2]=(...i)=>t.addLocationWizard&&t.addLocationWizard(...i)),textContent:a(t.translate("add_new"))},null,8,be))]),ve,e("div",fe,[t.content.columns?(o(),I(u,{key:0,class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":t.translate("lang")=="ar"?"right":"left","fixed-checkbox":"",headers:t.content.columns,items:t.content.items},{"item-name":L(i=>[i.model?(o(),l("div",ge,[e("img",{src:i.model.picture,class:"w-8 h-8 rounded-full"},null,8,pe),e("span",{textContent:a(i.model.name)},null,8,ye)])):c("",!0)]),"item-edit":L(i=>[i.not_editable?c("",!0):(o(),l("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:T=>t.handleAction("edit",i)},[g(m,{class:"w-5",type:"edit"})],8,Ce))]),"item-delete":L(i=>[i.not_removeable?c("",!0):(o(),l("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:T=>t.handleAction("delete",i)},[g(s,{class:"w-5"})],8,we))]),_:1},8,["body-text-direction","headers","items"])):c("",!0)])])):c("",!0)])):c("",!0)])}const Ae=D(ee,[["render",ke]]);export{Ae as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["map-HlZZaoZ3.min.js","index.es-7nd_URRl.min.js","index.min.js","index.min.css","side-form-create-CKdgN5Kx.min.js","Field-JlRoC1sK.min.js","Field.min.css","side-form-update-sfvJGQqB.min.js","form_field-scTEvTH6.min.js","editable_map_location-VfWgWkt8.min.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
