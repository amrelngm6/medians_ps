const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["side-form-create-C6f5ujYW.min.js","index.min.js","index.min.css","Field-CyMB-F7q.min.js","Field.min.css","side-form-update-BQHOBCJV.min.js","form_field-BDBxQH1a.min.js","editable_map_location-BGNYxjH7.min.js","map-CyzsXpWt.min.js"])))=>i.map(i=>d[i]);
import{_ as J,P as q,ak as Z,q as I,I as B,A as U,J as $,D as H,j as l,al as N,am as tt,t as P,u as S,r as k,c as d,o as i,a as c,b as e,f as j,d as s,g as et,m as st,L as nt,O as at,H as ot,x as M,w as W,v as lt,y as it,F as dt,e as ct,z as D,k as rt,l as _t,s as F,M as ut,N as mt}from"./index.min.js";import{e as K}from"./editable_map_location-BGNYxjH7.min.js";const vt=I(()=>S(()=>import("./side-form-create-C6f5ujYW.min.js"),__vite__mapDeps([0,1,2,3,4]))),ht=I(()=>S(()=>import("./side-form-update-BQHOBCJV.min.js"),__vite__mapDeps([5,1,2,3,4,6,7]))),xt=I(()=>S(()=>import("./form_field-BDBxQH1a.min.js"),__vite__mapDeps([6,1,2,3,4,7]))),ft={components:{datatabble:H,SideFormCreate:vt,SideFormUpdate:ht,close_icon:$,delete_icon:U,car_icon:B,form_field:xt,editable_map_location:K,dashboard_card_white:Z,tooltip:q},name:"Route trips",emits:["callback"],setup(r,{emit:a}){const _=l(!1),t=l(!1),h=l(!1),u=l({}),m=l("Info"),v=l({}),x=l({}),y=l(["Info","Confirm"]);r.item?(u.value=r.item,u.value.date=r.item.date??N()):u.value.date=N();const n=r.userslist?l(r.userslist):l([]),f=()=>{_.value=!0;var b=new URLSearchParams;let w=JSON.parse(JSON.stringify(u.value)),z=Object.keys(w),g,A;for(let p=0;p<z.length;p++)g=z[p],A=typeof w[g]=="object"?JSON.stringify(w[g]):w[g],b.append("params["+g+"]",A);b.append("type","DriverApplicant.update"),st(b,"/api/update").then(p=>{_.value=!1,nt(p)})};return{loader:_,users:n,progressWidth:()=>at(["driver_id","status"],u),showAddSide:t,showEditSide:h,content:v,fillable:y,center:x,activeItem:u,activeTab:m,rejectItem:()=>{window.confirm(P("Confirm and reject this driver"))&&(u.value.status="rejected",f())},confirmItem:()=>{window.confirm(P("Confirm and add driver to your team"))&&(u.value.status="approved",f())},translate:P,formatCustomTime:tt,saveItem:f,back:()=>{a("callback")}}},props:["conf","path","system_setting","business_setting","setting","item","userslist","usertype","drivers","vehicles"]},gt={class:"w-full flex overflow-auto"},pt={class:"w-full relative"},yt={class:"card w-full py-10"},bt={class:"w-full stepper stepper-links"},wt={key:0,class:"w-full"},Ct={class:""},kt={class:"max-w-xxl mx-auto"},It={class:"card"},St={class:"card-header"},zt={key:0,class:"card-title m-0 flex gap-4"},At={class:"bg-light overflow-hidden rounded-full symbol-50px w-50px"},Dt=["src"],Pt={class:"w-full"},jt=["textContent"],Et=["textContent"],Rt={class:"card-body"},Tt={class:"table-responsive table-card"},Vt={class:"table table-borderless align-middle mb-0 w-full"},Lt={key:0},Ot=["textContent"],Nt={class:"py-2"},Mt=["textContent"],Wt=["textContent"],Ft=["textContent"],Jt=["textContent"],qt=["textContent"],Bt=["textContent"],Ut=["textContent"],Ht=["textContent"],Kt=["textContent"],Gt=["textContent"],Qt=["textContent"],Xt={class:"font-bold py-2"},Yt=["textContent"],Zt=["textContent"],$t=["textContent"],te=["textContent"],ee=["textContent"],se=["textContent"],ne=["textContent"],ae=["textContent"],oe=["textContent"],le={class:"mx-auto flex gap-6 w-300px"},ie={class:"text-center"},de=["textContent"],ce={class:"text-center"},re=["textContent"];function _e(r,a,_,t,h,u){const m=k("close_icon");return i(),d("div",gt,[t.loader?(i(),d("div",{key:t.loader,class:"bg-white fixed w-full h-full top-0 left-0",style:{"z-index":"99999",opacity:".9"}},[...a[2]||(a[2]=[e("img",{class:"m-auto w-500px",src:"/uploads/loader.gif"},null,-1)])])):c("",!0),e("div",pt,[j(m,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:t.back},null,8,["onClick"]),e("div",yt,[e("div",bt,[t.activeItem?(i(),d("div",wt,[e("div",Ct,[(i(),d("div",{class:"card-body pt-0 mx-auto max-w-xl",key:t.users},[e("div",kt,[e("div",It,[e("div",St,[t.activeItem.driver?(i(),d("div",zt,[e("div",At,[e("img",{src:t.activeItem.driver.picture,alt:"image",class:""},null,8,Dt)]),e("div",Pt,[e("h5",{class:"text-sm mb-0",textContent:s(t.translate("Driver Info"))},null,8,jt),e("div",{class:"font-bold",textContent:s(t.activeItem.driver.name)},null,8,Et)])])):c("",!0)]),e("div",Rt,[e("div",Tt,[e("table",Vt,[t.activeItem.driver?(i(),d("tbody",Lt,[e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("ID"))},null,8,Ot),e("td",Nt,[a[3]||(a[3]=et("#",-1)),e("span",{id:"t-no",textContent:s(t.activeItem.applicant_id)},null,8,Mt)])]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("First Name"))},null,8,Wt),e("td",{id:"t-client",class:"py-2",textContent:s(t.activeItem.driver.first_name)},null,8,Ft)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("Last Name"))},null,8,Jt),e("td",{id:"t-client",class:"py-2",textContent:s(t.activeItem.driver.last_name)},null,8,qt)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("Mobile"))},null,8,Bt),e("td",{id:"d-date",class:"py-2",textContent:s(t.activeItem.driver.mobile)},null,8,Ut)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("email"))},null,8,Ht),e("td",{id:"d-date",class:"py-2",textContent:s(t.activeItem.driver.email)},null,8,Kt)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("License number"))},null,8,Gt),e("td",{id:"d-date",class:"py-2",textContent:s(t.activeItem.driver.driver_license_number)},null,8,Qt)]),e("tr",null,[e("td",Xt,[e("span",{class:"font-bold text-lg",textContent:s(t.translate("Application info"))},null,8,Yt)]),a[4]||(a[4]=e("td",{class:"font-bold py-2"},[e("hr")],-1))]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("Message"))},null,8,Zt),e("td",{id:"d-date",class:"py-2 font-bold",textContent:s(t.activeItem.message)},null,8,$t)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("Status"))},null,8,te),e("td",{id:"d-date",class:"py-2 font-bold",textContent:s(t.activeItem.status)},null,8,ee)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("Created at"))},null,8,se),e("td",{id:"d-date",class:"py-2",textContent:s(t.activeItem.created_at)},null,8,ne)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("Last update"))},null,8,ae),e("td",{id:"d-date",class:"py-2",textContent:s(t.activeItem.updated_at)},null,8,oe)])])):c("",!0)])])])])])])),e("div",le,[e("div",ie,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:a[0]||(a[0]=(...v)=>t.confirmItem&&t.confirmItem(...v)),textContent:s(t.translate("Approve"))},null,8,de)]),e("div",ce,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center rounded-lg border-1 border-dark text-dark",onClick:a[1]||(a[1]=(...v)=>t.rejectItem&&t.rejectItem(...v)),textContent:s(t.translate("Reject"))},null,8,re)])])])])):c("",!0)])])])])}const ue=J(ft,[["render",_e]]),me=I(()=>S(()=>import("./map-CyzsXpWt.min.js"),__vite__mapDeps([8,1,2]))),ve=I(()=>S(()=>import("./form_field-BDBxQH1a.min.js"),__vite__mapDeps([6,1,2,3,4,7]))),he={components:{datatabble:H,maps:me,delete_icon:U,car_icon:B,route_icon:ot,form_field:ve,editable_map_location:K,driver_applicant_wizard:ue,tooltip:q},name:"Routes",setup(r){const a=r.conf.url+r.path+"?load=json",_=l(!1),t=l({}),h=l({}),u=l({}),m=l(!1),v=l(["Info","Time","Start location","End location","Driver"]),x=l([]),y=l(!1),n=l(""),f=l(""),E=l("#"),T=()=>{_.value=!1};(()=>{rt(a).then(o=>{h.value=JSON.parse(JSON.stringify(o)),E.value=h.value.columns[1].value})})();const R=async()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(o=>{t.value.start_latitude=o.coords.latitude,t.value.start_longitude=o.coords.longitude,t.value.end_latitude=o.coords.latitude,t.value.end_longitude=o.coords.longitude},o=>{t.value.start_latitude=30.06,t.value.start_longitude=31.21,t.value.end_latitude=30.06,t.value.end_longitude=31.21,F(o.message)}):F("location error")},b=()=>{t.value={},m.value=!0,R()},w=async()=>{let o=n.value.length>3?await mt(r.system_setting.google_map_api,n.value,r.business_setting.country):"";x.value=o.predictions},z=async o=>{t.value.start_latitude=o.lat(),t.value.start_longitude=o.lng(),t.value.start_address=await ut(o.lat(),o.lng())},g=o=>{t.value.end_latitude=o.lat(),t.value.end_longitude=o.lng()},A=(o,C,V)=>{},p=(o,C)=>{switch(o){case"view":break;case"edit":t.value=C,m.value=!0;break;case"delete":_t("route_id",C,"Route.delete");break;case"close":_.value=!1,t.value={};break}},Q=l([]),X=async o=>{t.value.start_address=o.description;const C=new google.maps.places.PlacesService(document.createElement("div"));let V=o.place_id;C.getDetails({placeId:V},(L,Y)=>{if(Y===google.maps.places.PlacesServiceStatus.OK&&L){const O=L.geometry.location;t.value.start_longitude=O.lng(),t.value.start_latitude=O.lat(),x.value=[],y.value=!1}else console.error("Failed to fetch place details")})};return{showTip:l({}),setPlaceMarker:X,showPlaceSearch:y,startPlaceChanged:w,start_placeSearch:n,places:x,waypoints:Q,showEditSide:_,url:a,content:h,fillable:v,center:u,activeItem:t,searchValue:f,searchField:E,translate:P,clickMarker:A,updateStartMarker:z,updateEndMarker:g,getUserLocation:R,showWizard:m,closeSide:T,addRouteWizard:b,handleAction:p}},props:["path","lang","system_setting","business_setting","setting","conf","auth"]},xe={class:"w-full flex overflow-auto"},fe={key:0,class:"w-full relative"},ge={key:0,class:"notice d-flex bg-light-warning rounded border-warning border border-dashed mb-12 p-6"},pe={class:"d-flex flex-stack flex-grow-1"},ye={class:"fw-semibold"},be=["textContent"],we={class:"fs-6 text-gray-700"},Ce=["innerHTML"],ke={key:2,class:""},Ie={class:"card"},Se={class:"card-body"},ze={class:"card-px text-center pt-15 pb-15"},Ae=["textContent"],De=["textContent"],Pe={key:3,class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},je={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},Ee=["textContent"],Re={class:"w-full bg-white"},Te={class:"card-header align-items-center py-5 gap-2 gap-md-5 w-full flex px-4"},Ve={class:"card-title"},Le={class:"d-flex align-items-center position-relative my-1"},Oe={class:"card-toolbar flex-row-fluid justify-content-end gap-5"},Ne={class:"w-150px"},Me=["textContent","value"],We=["src"],Fe=["textContent"],Je=["textContent"],qe=["textContent"],Be=["onClick"],Ue=["onClick"];function He(r,a,_,t,h,u){const m=k("vue-feather"),v=k("driver_applicant_wizard"),x=k("delete_icon"),y=k("datatabble");return i(),d("div",xe,[t.content?(i(),d("div",fe,[t.showWizard?c("",!0):(i(),d("div",ge,[j(m,{type:"alert-octagon",class:"ki-duotone ki-information fs-2tx text-warning me-4"}),e("div",pe,[e("div",ye,[e("h4",{class:"text-gray-900 fw-bold",textContent:s(t.translate("Important"))},null,8,be),e("div",we,[e("div",{innerHTML:t.translate("Drivers applicants note")},null,8,Ce)])])])])),t.showWizard?(i(),M(v,{onCallback:a[0]||(a[0]=n=>t.showWizard=!1),key:t.showWizard,system_setting:_.system_setting,item:t.activeItem,business_setting:_.business_setting,conf:_.conf},null,8,["system_setting","item","business_setting","conf"])):c("",!0),!t.showWizard&&t.content.items&&!t.content.items.length?(i(),d("div",ke,[e("div",Ie,[e("div",Se,[e("div",ze,[e("h2",{class:"fs-2x fw-bold mb-0",textContent:s(t.content.title)},null,8,Ae),e("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:s(t.translate("Here you can find the sent driver applicantions to join your team"))},null,8,De)]),a[3]||(a[3]=e("div",{class:"text-center pb-15 px-5"},[e("img",{src:"/uploads/img/start-wizard.png",alt:"",class:"mx-auto mw-100 h-200px h-sm-325px"})],-1))])])])):c("",!0),t.content.items&&!t.showWizard&&t.content.items.length?(i(),d("main",Pe,[e("div",je,[e("h1",{class:"font-bold text-lg w-full",textContent:s(t.content.title)},null,8,Ee)]),e("div",Re,[e("div",Te,[e("div",Ve,[e("div",Le,[W(e("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=n=>t.searchValue=n),"data-kt-ecommerce-order-filter":"search",class:"form-control form-control-solid w-250px ps-12",placeholder:"Search Report"},null,512),[[lt,t.searchValue]])])]),e("div",Oe,[e("div",Ne,[W(e("select",{"onUpdate:modelValue":a[2]||(a[2]=n=>t.searchField=n),class:"form-select form-select-solid select2-hidden-accessible","data-control":"select2","data-hide-search":"true","data-placeholder":"Rating","data-kt-ecommerce-order-filter":"rating","data-select2-id":"select2-data-9-zple",tabindex:"-1","aria-hidden":"true","data-kt-initialized":"1"},[(i(!0),d(dt,null,ct(t.content.columns,n=>(i(),d("option",{textContent:s(n.text),value:n.value},null,8,Me))),256))],512),[[it,t.searchField]])])])]),t.content.columns?(i(),M(y,{key:0,"search-field":t.searchField,"search-value":t.searchValue,alternating:"",class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":t.translate("is_rtl"),"fixed-checkbox":"",headers:t.content.columns,items:t.content.items},{"item-picture":D(n=>[e("img",{src:n.driver.picture,class:"w-8 h-8 rounded-full"},null,8,We)]),"item-status":D(n=>[n.status=="approved"?(i(),d("span",{key:0,class:"bg-success px-2 py-1 rounded-lg text-white",textContent:s(n.status)},null,8,Fe)):c("",!0),n.status=="rejected"?(i(),d("span",{key:1,class:"bg-danger px-2 py-1 rounded-lg text-white",textContent:s(n.status)},null,8,Je)):c("",!0),n.status=="new"?(i(),d("span",{key:2,class:"bg-info px-2 py-1 rounded-lg text-white",textContent:s(n.status)},null,8,qe)):c("",!0)]),"item-edit":D(n=>[n.not_editable?c("",!0):(i(),d("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:f=>t.handleAction("edit",n)},[j(m,{class:"w-5",type:"edit"})],8,Be))]),"item-delete":D(n=>[n.not_removeable?c("",!0):(i(),d("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:f=>t.handleAction("delete",n)},[j(x,{class:"w-5"})],8,Ue))]),_:1},8,["search-field","search-value","body-text-direction","headers","items"])):c("",!0)])])):c("",!0)])):c("",!0)])}const Xe=J(he,[["render",He]]);export{Xe as default};
