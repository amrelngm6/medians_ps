import{_ as E,t as _,a as y,o as l,c as i,d as t,g as w,e as s,i as b,n as k,b as m,F as x,f,y as N,w as v,v as V,q as C,l as j,s as F,r as h,u as P,j as A,p as D}from"./index.min.js";const M={components:{translate:_},emits:["callback"],setup(u,{emit:d}){return{showCommentForm:null,setCommentStatus:c=>{c.status=c.status=="on"?0:"on";var r=new URLSearchParams;r.append("type","ForumComment.update"),r.append("params[id]",c.id),r.append("params[status]",c.status??0),j(r,"/api/update").then(o=>{F(o.result)})},translate:_,emit:d,close:()=>{if(!window.confirm(_("confirm_close_ticket")))return null;var c=new URLSearchParams;c.append("type","HelpMessage.close"),c.append("params[message_id]",u.item.message_id),c.append("params[status]","completed"),j(c,"/api/update").then(r=>{F(r.result)})}}},props:["path","langs","setting","conf","auth","doctors","categories","item"]},R={class:"w-full"},U={class:"container-fluid"},L={class:"row"},O={class:"col-lg-12"},B={class:"card mt-n4 mx-n4 card-border-effect-none mb-n5 border-bottom-0 border-start-0 rounded-0"},q={class:"card-body pb-4 mb-0"},I={class:"row"},z={class:"col-md"},J={class:"flex align-items-center"},G={class:"px-1 pt-1"},H={class:"col-md"},W=["textContent"],K={class:"hstack gap-3 flex h-8"},Q=t("div",{class:"vr"},null,-1),X={class:"text-muted"},Y=["textContent"],Z=["textContent"],$=t("div",{class:"vr"},null,-1),tt={class:"text-muted"},et=["textContent"],st=["textContent"],nt=t("div",{class:"vr"},null,-1),ot=["textContent"],lt={class:"lg:flex gap-6 mt-4"},at={class:"col-xxl-9 col-lg-8 w-full"},it={class:"card"},dt={class:"card-body p-4"},ct=["textContent"],rt=["textContent"],_t=["textContent"],mt={class:"card-body p-4"},ut=["textContent"],ht={"data-simplebar":"init",style:{"max-height":"300px"},class:"overflow-y-auto"},xt={class:"simplebar-wrapper"},ft=t("div",{class:"simplebar-height-auto-observer-wrapper"},[t("div",{class:"simplebar-height-auto-observer"})],-1),pt={class:"simplebar-mask"},vt={class:"simplebar-offset"},gt={class:"simplebar-content-wrapper",tabindex:"0",role:"region","aria-label":"scrollable content"},bt={class:"simplebar-content"},Ct={class:"flex gap-2 mb-4"},yt={key:0,class:"flex-grow-1 ms-3"},wt={class:"fs-13 flex gap-2"},kt=["textContent"],St=["textContent"],jt=["onClick"],Ft=["textContent"],Et=["checked"],Tt=["textContent"],Nt={action:"/api/update",method:"POST","data-refresh":"1",id:"post-reply-form",class:"action my-2 rounded-lg pb-2"},Vt=t("input",{name:"type",type:"hidden",value:"Forum.update"},null,-1),Pt=["value"],At=["value"],Dt={class:"row g-3"},Mt={class:"col-lg-12"},Rt=["textContent"],Ut={class:"col-lg-12 text-end mt-4"},Lt=["textContent"],Ot={key:0,action:"/api/create",method:"POST","data-refresh":"1",id:"add-comment-form",class:"action my-2 rounded-lg pb-2"},Bt=t("input",{name:"type",type:"hidden",value:"ForumComment.create"},null,-1),qt=["value"],It={class:"lg:px-0 gap-6 sm:flex sm:items-center sm:justify-between sm:py-4 sm:px-6"},zt={class:"w-full mt-1 text-gray-900 sm:mt-0"},Jt=["textContent"],Gt=["placeholder"],Ht={class:"w-full mt-1 text-gray-900 sm:mt-0"},Wt=["textContent"],Kt=["placeholder"],Qt={class:"row g-3"},Xt={class:"col-lg-12"},Yt=["textContent"],Zt=t("textarea",{name:"params[content]",class:"form-control bg-light border-light",id:"exampleFormControlTextarea1",rows:"3",placeholder:"Enter comments"},null,-1),$t={class:"col-lg-12 text-end mt-4"},te=["textContent"],ee={class:""},se={class:"card"},ne={class:"card-header"},oe=["textContent"],le={class:"card-body"},ae={action:"/api/update",method:"POST",id:"edit-item-form",class:"action my-2 rounded-lg pb-2"},ie=t("input",{name:"type",type:"hidden",value:"Forum.update"},null,-1),de=["value"],ce={class:"table-responsive table-card"},re={class:"table table-borderless align-middle mb-0 w-full"},_e=["textContent"],me={class:"py-2"},ue=["href","textContent"],he=["textContent"],xe={id:"t-client",class:"py-2"},fe=["textContent","value"],pe=["textContent"],ve={id:"t-client",class:"py-2"},ge=["textContent","value"],be=["textContent"],Ce={id:"t-client",class:"py-2"},ye=["textContent"],we=["textContent"],ke=["textContent"],Se=["textContent"],je=["textContent"],Fe=["textContent"],Ee=["textContent"],Te=["textContent"],Ne=t("td",{class:"fw-medium py-2"},null,-1),Ve={id:"d-date",class:"py-2 flex"},Pe=["textContent"];function Ae(u,d,n,e,p,c){const r=y("vue-feather");return l(),i("div",R,[t("div",U,[t("div",L,[t("div",O,[t("div",B,[t("div",q,[t("div",I,[t("div",z,[t("div",J,[t("div",G,[w(r,{type:"clipboard"})]),t("div",H,[t("h4",{class:"fw-semibold px-1",id:"ticket-title",textContent:s(n.item.customer_name)},null,8,W),t("div",K,[Q,t("div",X,[t("span",{textContent:s(e.translate("Created at"))},null,8,Y),b(" : "),t("span",{class:"fw-medium",id:"create-date",textContent:s(n.item.date)},null,8,Z)]),$,t("div",tt,[t("span",{textContent:s(e.translate("Last update"))},null,8,et),b(" : "),t("span",{class:"fw-medium",id:"update-date",textContent:s(n.item.update_date)},null,8,st)]),nt,n.item.status?(l(),i("div",{key:0,class:k(["badge rounded-pill fs-12 text-white",n.item.status=="0"?"bg-info":"bg-success"]),id:"ticket-status",textContent:s(n.item.status=="0"?"disabled":"active")},null,10,ot)):m("",!0)])]),t("span",{class:"w-auto py-2 px-4 cursor-pointer text-lg",onClick:d[0]||(d[0]=o=>e.emit("callback"))},[w(r,{class:"w-5",type:"x-circle"})])])])])])])])]),t("div",lt,[t("div",at,[t("div",it,[t("div",dt,[t("h6",{class:"fw-semibold text-uppercase mb-3",textContent:s(e.translate("Ticket Discripation"))},null,8,ct),t("h3",{class:"fw-semibold text-uppercase mb-3",textContent:s(n.item.subject)},null,8,rt),t("p",{class:"text-muted font-bold pt-10",textContent:s(n.item.content)},null,8,_t)]),t("div",mt,[t("h5",{class:"card-title text-sm font-semibold mb-4",textContent:s(e.translate("Comments"))},null,8,ut),t("div",ht,[t("div",xt,[ft,t("div",pt,[t("div",vt,[t("div",gt,[t("div",bt,[(l(!0),i(x,null,f(n.item.comments,o=>(l(),i("div",Ct,[o.user_name?(l(),i("div",yt,[t("h5",wt,[t("span",{class:"flex-none",textContent:s(o.user_name)},null,8,kt),t("small",{class:"w-full text-muted",textContent:s(o.date)},null,8,St),t("div",{onClick:a=>e.setCommentStatus(o),class:"py-4 flex gap gap-2 cursor-pointer flex-none"},[t("span",{class:k([o.status!="on"?"bg-gray-200":"bg-red-400","mx-2 mt-1 bg-red-400 block h-4 relative rounded-full w-8 border border-1 border-danger-subtle"]),style:{direction:"ltr"}},[t("a",{class:"absolute bg-white block h-4 relative right-0 rounded-full w-4",style:N({left:o.status=="on"?"16px":0})},null,4)],2),t("span",{textContent:s(o.status=="on"?e.translate("Active"):e.translate("Pending")),class:"font-semibold inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"},null,8,Ft),t("input",{value:"on",checked:o.status=="on",type:"checkbox",class:"hidden"},null,8,Et)],8,jt)]),t("p",{class:"text-muted",textContent:s(o.content)},null,8,Tt)])):m("",!0)]))),256))])])])])])]),t("form",Nt,[Vt,t("input",{name:"params[id]",type:"hidden",value:n.item.id},null,8,Pt),t("input",{name:"params[status]",type:"hidden",value:n.item.status},null,8,At),t("div",Dt,[t("div",Mt,[t("label",{for:"exampleFormControlTextarea1",class:"form-label fs-1 fw-bold",textContent:s(e.translate("Doctor Reply"))},null,8,Rt),v(t("textarea",{name:"params[reply]",class:"border border-gray-400 form-control bg-light border-light",id:"exampleFormControlTextarea1",rows:"3","onUpdate:modelValue":d[1]||(d[1]=o=>n.item.relpy=o),placeholder:"Enter comments"},null,512),[[V,n.item.relpy]])]),t("div",Ut,[t("button",{type:"submit",class:"btn btn-primary",textContent:s(e.translate("Send"))},null,8,Lt)])])]),e.showCommentForm?(l(),i("form",Ot,[Bt,t("input",{name:"params[item_id]",type:"hidden",value:n.item.id},null,8,qt),t("div",It,[t("dd",zt,[t("p",{textContent:s(e.translate("Name"))},null,8,Jt),t("input",{class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-first-name",type:"text",placeholder:e.translate("Name"),name:"params[user_name]"},null,8,Gt)]),t("dd",Ht,[t("p",{textContent:s(e.translate("Email"))},null,8,Wt),t("input",{type:"email",class:"appearance-none block w-full bg-gray-200 text-gray-700 border border-gray-200 rounded py-3 px-4 leading-tight focus:outline-none focus:bg-white focus:border-gray-500",id:"grid-email",placeholder:e.translate("ENTER Email"),name:"params[user_email]"},null,8,Kt)])]),t("div",Qt,[t("div",Xt,[t("label",{for:"exampleFormControlTextarea1",class:"form-label",textContent:s(e.translate("WRITE_COMMENT"))},null,8,Yt),Zt]),t("div",$t,[t("button",{type:"submit",class:"btn btn-primary",textContent:s(e.translate("Send"))},null,8,te)])])])):m("",!0)])])]),t("div",ee,[t("div",se,[t("div",ne,[t("h5",{class:"card-title mb-0",textContent:s(e.translate("Ticket Details"))},null,8,oe)]),t("div",le,[t("form",ae,[ie,t("input",{name:"params[id]",type:"hidden",value:n.item.id},null,8,de),t("div",ce,[t("table",re,[t("tbody",null,[t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("ID"))},null,8,_e),t("td",me,[b("#"),t("a",{target:"_blank",href:"/forum-post/"+n.item.id,textContent:s(n.item.id)},null,8,ue)])]),t("tr",null,[t("td",{class:"fw-medium py-2 w-32",textContent:s(e.translate("Assigned Doctor"))},null,8,he),t("td",xe,[v(t("select",{"onUpdate:modelValue":d[2]||(d[2]=o=>n.item.doctor_id=o),name:"params[doctor_id]",class:"form-control form-control-solid border border-gray-600"},[(l(!0),i(x,null,f(n.doctors,o=>(l(),i("option",{textContent:s(o.title),value:o.id},null,8,fe))),256))],512),[[C,n.item.doctor_id]])])]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Category"))},null,8,pe),t("td",ve,[v(t("select",{"onUpdate:modelValue":d[3]||(d[3]=o=>n.item.category_id=o),name:"params[category_id]",class:"form-control form-control-solid border border-gray-600"},[(l(!0),i(x,null,f(n.categories,o=>(l(),i("option",{textContent:s(o.title),value:o.id},null,8,ge))),256))],512),[[C,n.item.category_id]])])]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Status"))},null,8,be),t("td",Ce,[v(t("select",{"onUpdate:modelValue":d[4]||(d[4]=o=>n.item.status=o),name:"params[status]",class:"form-control form-control-solid border border-gray-600"},[t("option",{textContent:s(e.translate("Active")),value:"on"},null,8,ye),t("option",{textContent:s(e.translate("Inactive")),value:"0"},null,8,we)],512),[[C,n.item.status]])])]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Name"))},null,8,ke),t("td",{class:"py-2",textContent:s(n.item.customer_name)},null,8,Se)]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Email"))},null,8,je),t("td",{class:"py-2",textContent:s(n.item.customer_email)},null,8,Fe)]),t("tr",null,[t("td",{class:"fw-medium py-2",textContent:s(e.translate("Phone"))},null,8,Ee),t("td",{class:"py-2",textContent:s(n.item.customer_phone)},null,8,Te)]),t("tr",null,[Ne,t("td",Ve,[t("button",{textContent:s(e.translate("Update")),type:"submit",class:"btn btn-danger block text-center"},null,8,Pe)])])])])])])])])])])])])}const De=E(M,[["render",Ae]]),Me={components:{item_details:De,translate:_},setup(u){const d=u.conf.url+u.path+"?load=json",n=h({}),e=h({}),p=h(!1),c=h(!1),r=h("0"),o=()=>{c.value=!1,e.value=null},a=g=>{r.value=g};(()=>{A(d).then(g=>{n.value=JSON.parse(JSON.stringify(g))})})();let T=[{text:_("Inactive"),status:"0",icon:"delete",desc:_("New posts those not opened yet")},{text:_("Active"),status:"on",icon:"check-square",desc:_("posts needs customer reply")}];return{content:n,activeItem:e,closeMessage:o,switchStatus:a,showAddSide:p,showEditSide:c,activeStatus:r,statusList:T,translate:_}},props:["path","langs","setting","conf","auth"]},Re={class:"w-full"},Ue={key:1,class:"container-fluid"},Le={class:"card"},Oe={class:"card-body"},Be={class:"d-flex flex-column flex-xl-row p-7"},qe={class:"flex-lg-row-fluid me-xl-15 mb-20 mb-xl-0"},Ie={class:"mb-0"},ze={key:0,method:"post",action:"#",class:"form mb-15"},Je=D('<div class="position-relative"><i class="ki-duotone ki-magnifier fs-1 text-primary position-absolute top-50 translate-middle ms-9"><span class="path1"></span><span class="path2"></span></i><input type="text" class="form-control form-control-lg form-control-solid ps-14" name="search" value="" placeholder="Search"></div>',1),Ge=[Je],He=["textContent"],We={class:"w-full"},Ke=["onClick"],Qe={class:"flex-col justify-start items-start gap-2.5 flex"},Xe={class:"mt-2 justify-start items-start gap-2.5 inline-flex"},Ye={class:"px-2.5 py-1 bg-blue-100 rounded-lg justify-center items-center gap-2.5 flex"},Ze=["textContent"],$e=["textContent"],ts={class:"flex w-full"},es={key:0,class:"w-full justify-start items-center gap-2 inline-flex"},ss={class:"relative flex"},ns=["src"],os={class:"justify-between items-center flex"},ls={class:"flex-col justify-start items-start inline-flex"},as={class:"justify-start items-center gap-1 inline-flex"},is=["textContent"],ds=["textContent"],cs={class:"justify-start gap-10 flex items-center p-2 flex-none"},rs={class:"flex gap-1 text-sm mx-2 font-normal relative items-center"},_s=["textContent"],ms=["textContent"],us=t("img",{src:"/src/front_assets/svg/views.svg",width:"40"},null,-1),hs={class:"flex gap-1 text-sm mx-2 font-normal relative items-center"},xs=["textContent"],fs=["textContent"],ps=t("img",{src:"/src/front_assets/svg/comments.svg",width:"40"},null,-1),vs={class:"flex-column flex-lg-row-auto w-100 mw-lg-300px mw-xxl-350px"},gs={class:"card-rounded flex gap-10 mb-15 py-3 px-6"},bs={class:"d-flex align-items-center mb-10 gap-2"},Cs=["onClick"],ys=["textContent"];function ws(u,d,n,e,p,c){const r=y("item_details"),o=y("vue-feather");return l(),i("div",Re,[e.showEditSide&&e.content?(l(),P(r,{key:0,item:e.activeItem,doctors:e.content.doctors,categories:e.content.categories,ref:"activeForumPost",onCallback:e.closeMessage},null,8,["item","doctors","categories","onCallback"])):m("",!0),e.showEditSide?m("",!0):(l(),i("div",Ue,[t("div",Le,[t("div",Oe,[t("div",Be,[t("div",qe,[t("div",Ie,[e.content.showSearchForm?(l(),i("form",ze,Ge)):m("",!0),t("h1",{class:"text-gray-900 mb-10",textContent:s(e.content.title)},null,8,He),(l(!0),i(x,null,f(e.content.items,a=>(l(),i("div",We,[a.status==e.activeStatus?(l(),i("div",{key:0,onClick:S=>(e.activeItem=a,e.showEditSide=!0),class:"w-full flex-col justify-start items-start gap-10 inline-flex bg-gray-100 p-4 rounded-lg shadow-md bg-white mb-4"},[t("div",Qe,[t("div",Xe,[t("div",Ye,[t("div",{class:"font-normal text-sm leading-none",textContent:s(a.category?a.category.title:"")},null,8,Ze)])]),t("a",{href:"javascript:;",class:"pt-1 text-lg font-semibold leading-relaxed purple-color hover:text-gray-500",textContent:s(a.subject)},null,8,$e)]),t("div",ts,[a.doctor?(l(),i("div",es,[t("div",ss,[t("img",{class:"w-10 h-10 relative rounded-full",src:a.doctor?a.doctor.picture:""},null,8,ns)]),t("div",os,[t("div",ls,[t("div",as,[t("div",{class:"text-sm font-semibold text-gray-500",textContent:s(a.doctor.title)},null,8,is)]),t("div",{class:"text-sm pt-1 font-normal leading-none text-gray-800",textContent:s(e.translate("Answered By"))},null,8,ds)])])])):m("",!0),t("div",cs,[t("div",rs,[t("span",{class:"tooltiptext",textContent:s(e.translate("Views"))},null,8,_s),t("span",{class:"pt-2",textContent:s(a.views_sum_times)},null,8,ms),us]),t("div",hs,[t("span",{class:"tooltiptext",textContent:s(e.translate("Comments"))},null,8,xs),t("span",{class:"pt-2",textContent:s(a.comments.length)},null,8,fs),ps])])])],8,Ke)):m("",!0)]))),256))])]),t("div",vs,[t("div",gs,[(l(!0),i(x,null,f(e.statusList,a=>(l(),i("div",bs,[w(o,{class:"w-6 pb-2",type:a.icon},null,8,["type"]),t("div",{class:"d-flex flex-column cursor-pointer",onClick:S=>e.switchStatus(a.status)},[t("h5",{class:k(["",a.status==e.activeStatus?"text-danger":"text-gray-500"]),textContent:s(a.text)},null,10,ys)],8,Cs)]))),256))])])])])])]))])}const Ss=E(Me,[["render",ws]]);export{Ss as default};
