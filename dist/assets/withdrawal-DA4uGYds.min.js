import{_ as p,r as q,c as o,o as d,a as c,b as t,d as s,f as R,w as m,v as b,F as x,e as f,g as j,j as u,t as _,s as C,m as w,L as v}from"./index.min.js";const W={components:{},setup(r){const a=u({}),n=u({field:{}}),e=u(!1);return a.value=r.item,{activeItem:a,cancelRequest:i=>{if(window.confirm(_("confirm_delete"))){var l=new URLSearchParams;l.append("type","BusinessWithdrawal.delete"),l.append("params[withdrawal_id]",i.withdrawal_id),w(l,"/api/delete").then(h=>{v(h)})}},collectedCashRequest:n,sendcollectedCashRequest:()=>{if(!n.value.amount||n.value.amount<1)return C(_("Amount is required"));if(n.value.amount>r.wallet.debit_balance)return C(_("Balance is not enough"));if(window.confirm(_("Confirm to submit"))){var i=new URLSearchParams;i.append("type","CollectedCash.create"),i.append("params[amount]",n.value.amount),i.append("params[wallet_id]",r.wallet.wallet_id),i.append("params[notes]",n.value.notes),w(i,"/api/create").then(l=>{v(l)})}},translate:_,showWizard:e}},props:["path","lang","setting","system_setting","business_setting","conf","auth","item","wallet","withdrawals","currency"]},V={class:"w-full"},z={class:"modal-dialog modal-dialog-centered mw-650px","data-select2-id":"select2-data-134-3oj8"},D={class:"modal-content","data-select2-id":"select2-data-133-wj88"},B={class:"modal-header"},U=["textContent"],A={key:0,class:"modal-body mx-5 mx-xl-15 my-7"},S={class:"d-flex text-center mb-9"},L={class:"w-50 border border-dashed border-gray-300 rounded mx-2 p-4"},N=["textContent"],P={class:"w-50 border border-dashed border-gray-300 rounded mx-2 p-4"},E=["textContent"],F=["textContent"],T={id:"kt_modal_adjust_balance_form",class:"form fv-plugins-bootstrap5 fv-plugins-framework"},H={class:"fv-row mb-7 fv-plugins-icon-container relative"},M=["textContent"],G=["max"],J={class:"w-full relative"},K={class:"fv-row mb-7 fv-plugins-icon-container"},O=["textContent"],Q=["onUpdate:modelValue"],X={class:"fv-row mb-7 relative"},Y=["textContent"],Z={class:"text-center"},I=["textContent"],$=["textContent"],tt={class:"card card-flush pt-3 mb-5 mb-xl-10"},et={class:"card flex card-xxl-stretch mb-5 mb-xxl-10"},st={class:"card-body pb-0"},nt={class:"d-flex justify-content-between pb-6"},lt={class:"w-full"},at=["textContent"],ot=["textContent"],dt=["textContent"],it=["textContent"],ct={class:"d-flex flex-wrap"},rt={class:"border border-dashed border-gray-300 w-125px rounded my-3 p-4 me-6"},_t={key:0,class:"fs-2x fw-bold text-gray-800 lh-1"},mt=["textContent"],bt=["textContent"],ut={key:0,class:"border border-dashed border-gray-300 w-125px rounded my-3 p-4 me-6"},ht={key:0,class:"fs-2x fw-bold text-gray-800 lh-1"},xt=["textContent"],ft=["textContent"],Ct={class:"border border-dashed border-gray-300 w-125px rounded my-3 p-4 me-6"},wt={class:"fs-2x fw-bold text-gray-800 lh-1"},vt=["textContent"],yt=["textContent"],gt=["textContent"],kt=["textContent"],pt={class:"card-header"},qt={class:"card-title flex gap-4"},Rt=["textContent"],jt={key:0,class:"card-body pt-2"},Wt={id:"kt_customer_details_invoices_table_1",class:"table align-middle table-row-dashed fs-6 fw-bold gs-0 gy-4 p-0 m-0"},Vt={class:"border-bottom border-gray-200 fs-7 text-uppercase fw-bold"},zt={class:"text-start text-gray-500"},Dt=["textContent"],Bt=["textContent"],Ut=["textContent"],At=["textContent"],St={class:"fs-6 fw-semibold text-gray-600"},Lt=["textContent"],Nt=["textContent"],Pt=["textContent"],Et=["textContent"];function Ft(r,a,n,e,y,g){const i=q("vue-feather");return d(),o("div",V,[e.showWizard?(d(),o("div",{class:"modal fade show",key:e.showWizard,id:"kt_modal_adjust_balance",tabindex:"-1","aria-modal":"true",role:"dialog","data-select2-id":"select2-data-kt_modal_adjust_balance",style:{background:"rgba(0,0,0,.5)",display:"block","z-index":"9999"}},[t("div",z,[t("div",D,[t("div",B,[t("h2",{class:"fw-bold",textContent:s(e.translate("Collect cash"))},null,8,U),t("div",{id:"kt_modal_adjust_balance_close",onClick:a[0]||(a[0]=l=>e.showWizard=!1),class:"btn"},[R(i,{type:"close"})])]),n.wallet?(d(),o("div",A,[t("div",S,[t("div",L,[t("div",{class:"fs-3 fw-semibold mb-2",textContent:s(e.translate("Collect cash from driver debit balance"))},null,8,N)]),t("div",P,[t("div",{class:"fs-6 fw-semibold mb-2 text-muted",textContent:s(e.translate("Debit balance"))},null,8,E),t("div",{class:"fs-2 fw-bold","kt-modal-adjust-balance":"current_balance",textContent:s(n.currency.symbol+""+(n.wallet.debit_balance??"0"))},null,8,F)])]),t("div",T,[t("div",H,[t("label",{class:"required fs-4 fw-semibold form-label mb-2",textContent:s(e.translate("Collected amount"))},null,8,M),m(t("input",{id:"kt_modal_inputmask",type:"number",class:"form-control form-control-solid","onUpdate:modelValue":a[1]||(a[1]=l=>e.collectedCashRequest.amount=l),max:n.wallet.credit_balance,inputmode:"text"},null,8,G),[[b,e.collectedCashRequest.amount]]),a[6]||(a[6]=t("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback"},null,-1))]),e.collectedCashRequest.payment_method?(d(!0),o(x,{key:0},f(r.payment_fields[e.collectedCashRequest.payment_method],(l,h)=>(d(),o("div",J,[t("div",K,[t("label",{class:"required fs-6 fw-semibold form-label mb-2",textContent:s(l.title)},null,8,O),m(t("input",{id:"kt_modal_inputmask",type:"text",class:"form-control form-control-solid","onUpdate:modelValue":k=>e.collectedCashRequest.field[l.code]=k},null,8,Q),[[b,e.collectedCashRequest.field[l.code]]])])]))),256)):c("",!0),t("div",X,[t("label",{class:"fs-6 fw-semibold form-label mb-2",textContent:s(e.translate("Add notes"))},null,8,Y),m(t("textarea",{class:"form-control form-control-solid rounded-3 mb-5","onUpdate:modelValue":a[2]||(a[2]=l=>e.collectedCashRequest.notes=l)},null,512),[[b,e.collectedCashRequest.notes]])]),t("div",Z,[t("button",{type:"reset",id:"kt_modal_adjust_balance_cancel",class:"btn btn-light me-3",textContent:s(e.translate("Discard")),onClick:a[3]||(a[3]=l=>e.showWizard=!1)},null,8,I),t("button",{onClick:a[4]||(a[4]=(...l)=>e.sendcollectedCashRequest&&e.sendcollectedCashRequest(...l)),type:"submit",id:"kt_modal_adjust_balance_submit",class:"btn btn-primary"},[t("span",{class:"indicator-label",textContent:s(e.translate("Submit"))},null,8,$)])])])])):c("",!0)])])])):c("",!0),t("div",tt,[t("div",et,[t("div",st,[t("div",nt,[t("div",lt,[t("h3",{textContent:s(e.translate("Earnings"))},null,8,at),t("p",{class:"fs-5 fw-semibold text-gray-600 pb-5 d-block",textContent:s(e.translate("Here is the wallet debit and credit balance"))},null,8,ot),t("p",{textContent:s(e.translate("Credit balance used for commissions"))},null,8,dt),t("p",{textContent:s(e.translate("Debit balance used for collected amount from cash trips"))},null,8,it)]),t("div",ct,[t("div",rt,[n.wallet?(d(),o("span",_t,[t("span",{textContent:s(n.wallet?n.currency.symbol+""+(n.wallet.credit_balance??"0"):"0")},null,8,mt)])):c("",!0),t("span",{class:"fs-6 fw-semibold text-gray-500 d-block lh-1 pt-2",textContent:s(e.translate("Wallet balance"))},null,8,bt)]),n.auth.business?(d(),o("div",ut,[n.auth.business.subscription?(d(),o("span",ht,[t("span",{class:"counted",textContent:s(n.auth.business.subscription.is_paid?n.system_setting.comission_paid_plan:n.system_setting.comission_free_plan)},null,8,xt),a[7]||(a[7]=j("% ",-1))])):c("",!0),t("span",{class:"fs-6 fw-semibold text-gray-500 d-block lh-1 pt-2",textContent:s(e.translate("Business Commisiion"))},null,8,ft)])):c("",!0),t("div",Ct,[t("span",wt,[t("span",{textContent:s(n.currency.symbol)},null,8,vt),t("span",{textContent:s(n.wallet?n.wallet.debit_balance??"0":"0")},null,8,yt)]),t("span",{class:"fs-6 fw-semibold text-gray-500 d-block lh-1 pt-2",textContent:s(e.translate("Debit balance"))},null,8,gt)]),n.wallet.debit_balance>0?(d(),o("a",{key:1,href:"#",onClick:a[5]||(a[5]=l=>e.showWizard=!0),class:"btn btn-bg-info text-white text-white px-6 flex-shrink-0 align-self-center",textContent:s(e.translate("Collect cash"))},null,8,kt)):c("",!0)])])])]),t("div",pt,[t("div",qt,[t("h2",{class:"w-full",textContent:s(e.translate("Withdrawal requests"))},null,8,Rt)])]),n.withdrawals?(d(),o("div",jt,[t("table",Wt,[t("thead",Vt,[t("tr",zt,[t("th",{class:"min-w-100px",textContent:s(e.translate("Payment method"))},null,8,Dt),t("th",{class:"min-w-100px",textContent:s(e.translate("Amount"))},null,8,Bt),t("th",{class:"min-w-100px",textContent:s(e.translate("Status"))},null,8,Ut),t("th",{class:"min-w-125px",textContent:s(e.translate("Date"))},null,8,At)])]),t("tbody",St,[(d(!0),o(x,null,f(n.withdrawals,l=>(d(),o("tr",null,[t("td",{textContent:s(l.payment_method)},null,8,Lt),t("td",{class:"text-success",textContent:s(n.currency.symbol+""+l.amount)},null,8,Nt),t("td",null,[t("span",{class:"badge badge-light-warning",textContent:s(l.status)},null,8,Pt)]),t("td",{textContent:s(l.date)},null,8,Et)]))),256))])])])):c("",!0)])])}const Ht=p(W,[["render",Ft]]);export{Ht as default};
