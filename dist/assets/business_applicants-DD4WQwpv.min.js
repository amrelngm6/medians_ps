const __vite__fileDeps=["side-form-create-DwwFhpNu.min.js","index.min.js","index.min.css","Field-DGSjrbSi.min.js","Field.min.css","side-form-update-wW8Cd18d.min.js","form_field-CKKRisMW.min.js","editable_map_location-C3m7cXEh.min.js","index.es-BqyRJkQ3.min.js","map-B_qpUccu.min.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as D,r as n,U as $,a as b,o as a,c as i,y as M,O,g as z,F as B,f as q,d as e,b as d,m as tt,ai as et,D as G,E as st,x as H,G as K,ak as ot,al as W,t as R,am as nt,e as s,i as at,q as V,u as A,l as lt,K as it,M as ct,H as dt,w as U,v as rt,N as _t,j as ut,s as J,J as mt,L as ht,k as ft}from"./index.min.js";import{e as vt}from"./editable_map_location-C3m7cXEh.min.js";import{O as pt,L as gt,j as xt}from"./index.es-BqyRJkQ3.min.js";import{t as Z}from"./tooltip-B6mCVe86.min.js";const yt={components:{GoogleMap:pt,Polyline:gt,CustomMarker:xt},emits:["markerclicked"],setup(u,{emit:_}){const r=n(null),t=n(12),g=n([]),m=n([]),h=n([]),x=n({strokeColor:"#000000",strokeOpacity:.8,strokeWeight:2}),c=n(u.item),v=(C,P="lat",w="lng",f)=>{let p=JSON.parse(JSON.stringify(C));return p.icon=u.conf.url+"uploads/images/"+f,p.marker_position={lat:parseFloat(C[P]),lng:parseFloat(C[w])},p.drag=!1,p};(()=>{g.value=[v(c.value,"start_latitude","start_longitude","yellow_pin.gif"),v(c.value,"end_latitude","end_longitude","destination.svg")]})();const y=async()=>{const P=`http://localhost:3000/directions?origin=${c.value.start_latitude},${c.value.start_longitude}&destination=${c.value.end_latitude},${c.value.end_longitude}&key=${u.system_setting.google_map_api}`;try{tt.get(P).then(f=>{if(f.data){const p=f.data,k=et(p.routes[0].overview_polyline.points);h.value=k,m.value={path:k,geodesic:!0,strokeColor:"#000",strokeOpacity:.9,strokeWeight:2}}else console.error("Failed to fetch route:",f.statusText)}).catch(f=>{console.error("Error fetching data:",f)});const w=await fetch(P)}catch(w){console.error("Error fetching route:",w)}};return $(()=>{r.value={lat:c.value.start_latitude,lng:c.value.start_longitude},y()}),{markerClicked:C=>{_("markerclicked",C)},markers:g,mapCenter:r,mapZoom:t,polylinePath:m,routeCoordinates:h,polylineOptions:x}},props:["system_setting","item","conf"]},Ct={class:"w-full overflow-auto"},bt={style:{"text-align":"center"}},wt=["src"];function kt(u,_,r,t,g,m){const h=b("Polyline"),x=b("CustomMarker"),c=b("GoogleMap");return a(),i("div",Ct,[t.mapCenter?(a(),M(c,{"api-key":r.system_setting.google_map_api,ref:"mapRef",center:t.mapCenter,key:`${t.mapCenter.lat},${t.mapCenter.lng}`,options:{zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,rotateControl:!0,fullscreenControl:!0},zoom:t.mapZoom,style:{width:"100%",height:"calc(100vh - 100px)"}},{default:O(()=>[z(h,{options:t.polylinePath},null,8,["options"]),(a(!0),i(B,null,q(t.markers,(v,o)=>(a(),M(x,{options:{position:v.marker_position},onClick:y=>t.markerClicked(v)},{default:O(()=>[e("div",bt,[e("img",{src:v.icon,width:"40",class:"rouned-full",height:"40",style:{"margin-top":"8px"}},null,8,wt)])]),_:2},1032,["options","onClick"]))),256))]),_:1},8,["api-key","center","zoom"])):d("",!0)])}const It=D(yt,[["render",kt]]),St=V(()=>A(()=>import("./side-form-create-DwwFhpNu.min.js"),__vite__mapDeps([0,1,2,3,4]))),Pt=V(()=>A(()=>import("./side-form-update-wW8Cd18d.min.js"),__vite__mapDeps([5,1,2,3,4,6,7,8]))),Ot=V(()=>A(()=>import("./form_field-CKKRisMW.min.js"),__vite__mapDeps([6,1,2,3,4,7,8]))),Et={components:{datatabble:G,SideFormCreate:St,SideFormUpdate:Pt,close_icon:st,delete_icon:H,car_icon:K,form_field:Ot,static_map:It,dashboard_card_white:ot,tooltip:Z},name:"Route trips",emits:["callback"],setup(u,{emit:_}){const r=n(!1),t=n(!1),g=n(!1),m=n({}),h=n("Info"),x=n({}),c=n({}),v=n(["Info","Confirm"]);u.item?(m.value=u.item,m.value.date=u.item.date??W()):m.value.date=W();const o=u.userslist?n(u.userslist):n([]),y=()=>{r.value=!0;var f=new URLSearchParams;let p=JSON.parse(JSON.stringify(m.value)),k=Object.keys(p),I,j;for(let S=0;S<k.length;S++)I=k[S],j=typeof p[I]=="object"?JSON.stringify(p[I]):p[I],f.append("params["+I+"]",j);f.append("type","BusinessApplicant.update"),lt(f,"/api/update").then(S=>{r.value=!1,it(S)})};return{loader:r,users:o,progressWidth:()=>ct(["driver_id","status"],m),showAddSide:t,showEditSide:g,content:x,fillable:v,center:c,activeItem:m,activeTab:h,rejectItem:()=>{window.confirm(R("Confirm and reject this member"))&&(m.value.status="rejected",y())},confirmItem:()=>{window.confirm(R("Confirm and add subscription to your business"))&&(m.value.status="approved",y())},translate:R,formatCustomTime:nt,saveItem:y,back:()=>{_("callback")}}},props:["conf","path","system_setting","business_setting","setting","item","userslist","usertype","drivers","vehicles"]},zt={class:"w-full overflow-auto"},Mt=e("img",{class:"m-auto w-500px",src:"/uploads/loader.gif"},null,-1),Vt=[Mt],At={class:"w-full relative"},Tt={class:"card w-full py-10"},jt={class:"w-full stepper stepper-links"},Rt={key:0,class:"w-full"},Dt={class:""},Ft={class:"flex w-full gap-6"},Lt={key:0,class:"w-full"},Nt={class:"card w-full"},Wt={class:"card-header"},Ut={key:0,class:"card-title m-0 flex gap-4"},Jt={class:"bg-light overflow-hidden rounded-full symbol-50px w-50px"},Bt=["src"],qt={class:"w-full"},Gt=["textContent"],Ht=["textContent"],Kt={class:"card-body"},Zt={class:"table-responsive table-card"},Qt={class:"table table-borderless align-middle mb-0 w-full"},Xt={key:0},Yt=["textContent"],$t={class:"py-2"},te=["textContent"],ee=["textContent"],se=["textContent"],oe=["textContent"],ne=["textContent"],ae=["textContent"],le=["textContent"],ie=["textContent"],ce=["textContent"],de={class:"font-bold py-2"},re=["textContent"],_e=e("td",{class:"font-bold py-2"},[e("hr")],-1),ue=["textContent"],me=["textContent"],he=["textContent"],fe=["textContent"],ve={class:"font-bold py-2"},pe=["textContent"],ge=e("td",{class:"font-bold py-2"},[e("hr")],-1),xe=["textContent"],ye=["textContent"],Ce=["textContent"],be=["textContent"],we=["textContent"],ke=["textContent"],Ie={key:0,class:"mx-auto flex gap-6 w-300px py-2"},Se={class:"text-center"},Pe=["textContent"],Oe={class:"text-center"},Ee=["textContent"];function ze(u,_,r,t,g,m){const h=b("close_icon"),x=b("static_map");return a(),i("div",zt,[t.loader?(a(),i("div",{key:t.loader,class:"bg-white fixed w-full h-full top-0 left-0",style:{"z-index":"99999",opacity:".9"}},Vt)):d("",!0),e("div",At,[z(h,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:t.back},null,8,["onClick"]),e("div",Tt,[e("div",jt,[t.activeItem?(a(),i("div",Rt,[e("div",Dt,[(a(),i("div",{class:"card-body pt-0 mx-auto",key:t.activeItem},[e("div",Ft,[t.activeItem.model?(a(),i("div",Lt,[t.activeItem.model.route_location?(a(),M(x,{system_setting:r.system_setting,item:t.activeItem.model.route_location,key:t.activeItem,conf:r.conf},null,8,["system_setting","item","conf"])):d("",!0)])):d("",!0),e("div",Nt,[e("div",Wt,[t.activeItem.model?(a(),i("div",Ut,[e("div",Jt,[e("img",{src:t.activeItem.model.picture,alt:"image",class:"h-10 w-10"},null,8,Bt)]),e("div",qt,[e("h5",{class:"text-sm mb-0",textContent:s(t.translate("Customer Info"))},null,8,Gt),e("div",{class:"font-bold",textContent:s(t.activeItem.model.name)},null,8,Ht)])])):d("",!0)]),e("div",Kt,[e("div",Zt,[e("table",Qt,[t.activeItem.model?(a(),i("tbody",Xt,[e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("ID"))},null,8,Yt),e("td",$t,[at("#"),e("span",{id:"t-no",textContent:s(t.activeItem.applicant_id)},null,8,te)])]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("First Name"))},null,8,ee),e("td",{id:"t-client",class:"py-2",textContent:s(t.activeItem.model.name)},null,8,se)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("Mobile"))},null,8,oe),e("td",{id:"d-date",class:"py-2",textContent:s(t.activeItem.model.mobile)},null,8,ne)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("email"))},null,8,ae),e("td",{id:"d-date",class:"py-2",textContent:s(t.activeItem.model.email)},null,8,le)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("gender"))},null,8,ie),e("td",{id:"d-date",class:"py-2",textContent:s(t.activeItem.model.gender)},null,8,ce)]),e("tr",null,[e("td",de,[e("span",{class:"font-bold text-lg",textContent:s(t.translate("Application info"))},null,8,re)]),_e]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("Message"))},null,8,ue),e("td",{id:"d-date",class:"py-2 font-bold",textContent:s(t.activeItem.message)},null,8,me)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("Status"))},null,8,he),e("td",{id:"d-date",class:"py-2 font-bold",textContent:s(t.activeItem.status)},null,8,fe)]),e("tr",null,[e("td",ve,[e("span",{class:"font-bold text-lg",textContent:s(t.translate("Subscription info"))},null,8,pe)]),ge]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("Package"))},null,8,xe),t.activeItem.subscription&&t.activeItem.subscription.package?(a(),i("td",{key:0,id:"d-date",class:"py-2 font-bold",textContent:s(t.activeItem.subscription.package.name)},null,8,ye)):d("",!0)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("total_cost"))},null,8,Ce),t.activeItem.subscription?(a(),i("td",{key:0,id:"d-date",class:"py-2 font-bold",textContent:s(t.activeItem.subscription.total_cost)},null,8,be)):d("",!0)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:s(t.translate("payment_type"))},null,8,we),t.activeItem.subscription?(a(),i("td",{key:0,id:"d-date",class:"py-2 font-bold",textContent:s(t.activeItem.subscription.payment_type)},null,8,ke)):d("",!0)])])):d("",!0)])])])])])])),t.activeItem.status=="new"?(a(),i("div",Ie,[e("div",Se,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:_[0]||(_[0]=(...c)=>t.confirmItem&&t.confirmItem(...c)),textContent:s(t.translate("Approve"))},null,8,Pe)]),e("div",Oe,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center rounded-lg border-1 border-dark text-dark",onClick:_[1]||(_[1]=(...c)=>t.rejectItem&&t.rejectItem(...c)),textContent:s(t.translate("Reject"))},null,8,Ee)])])):d("",!0)])])):d("",!0)])])])])}const Me=D(Et,[["render",ze]]),Ve=V(()=>A(()=>import("./map-B_qpUccu.min.js"),__vite__mapDeps([9,8,1,2]))),Ae=V(()=>A(()=>import("./form_field-CKKRisMW.min.js"),__vite__mapDeps([6,1,2,3,4,7,8]))),Te={components:{datatabble:G,maps:Ve,delete_icon:H,car_icon:K,route_icon:dt,form_field:Ae,editable_map_location:vt,model_applicant_wizard:Me,tooltip:Z},name:"Routes",setup(u){const _=u.conf.url+u.path+"?load=json",r=n(!1),t=n({}),g=n({}),m=n({}),h=n(!1),x=n(["Info","Time","Start location","End location","model"]),c=n([]),v=n(!1),o=n(""),y=n(""),T=n("#"),C=()=>{r.value=!1};(()=>{ut(_).then(l=>{g.value=JSON.parse(JSON.stringify(l)),T.value=g.value.columns[1].value})})();const w=async()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(l=>{t.value.start_latitude=l.coords.latitude,t.value.start_longitude=l.coords.longitude,t.value.end_latitude=l.coords.latitude,t.value.end_longitude=l.coords.longitude},l=>{t.value.start_latitude=30.06,t.value.start_longitude=31.21,t.value.end_latitude=30.06,t.value.end_longitude=31.21,J(l.message)}):J("location error")},f=()=>{t.value={},h.value=!0,w()},p=async()=>{let l=o.value.length>3?await mt(u.system_setting.google_map_api,o.value,u.business_setting.country):"";c.value=l.predictions},k=async l=>{t.value.start_latitude=l.lat(),t.value.start_longitude=l.lng(),t.value.start_address=await ht(l.lat(),l.lng())},I=l=>{t.value.end_latitude=l.lat(),t.value.end_longitude=l.lng()},j=(l,E,F)=>{},S=(l,E)=>{switch(l){case"view":break;case"edit":t.value=E,h.value=!0;break;case"delete":ft("applicant_id",E,"BusinessApplicant.delete");break;case"close":r.value=!1,t.value={};break}},Q=n([]),X=async l=>{t.value.start_address=l.description;const E=new google.maps.places.PlacesService(document.createElement("div"));let F=l.place_id;E.getDetails({placeId:F},(L,Y)=>{if(Y===google.maps.places.PlacesServiceStatus.OK&&L){const N=L.geometry.location;t.value.start_longitude=N.lng(),t.value.start_latitude=N.lat(),c.value=[],v.value=!1}else console.error("Failed to fetch place details")})};return{showTip:n({}),setPlaceMarker:X,showPlaceSearch:v,startPlaceChanged:p,start_placeSearch:o,places:c,waypoints:Q,showEditSide:r,url:_,content:g,fillable:x,center:m,activeItem:t,searchValue:y,searchField:T,translate:R,clickMarker:j,updateStartMarker:k,updateEndMarker:I,getUserLocation:w,showWizard:h,closeSide:C,addRouteWizard:f,handleAction:S}},props:["path","lang","system_setting","business_setting","setting","conf","auth","currency"]},je={class:"w-full flex overflow-auto"},Re={key:0,class:"w-full relative"},De={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},Fe=["textContent"],Le={class:"notice d-flex bg-light-warning rounded border-warning border border-dashed mb-12 p-6"},Ne={class:"d-flex flex-stack flex-grow-1"},We={class:"fw-semibold"},Ue=["textContent"],Je={class:"fs-6 text-gray-700"},Be=["innerHTML"],qe={key:1,class:""},Ge={class:"card"},He={class:"card-body"},Ke={class:"card-px text-center pt-15 pb-15"},Ze=["textContent"],Qe=["textContent"],Xe=e("div",{class:"text-center pb-15 px-5"},[e("img",{src:"/uploads/img/start-wizard.png",alt:"",class:"mx-auto mw-100 h-200px h-sm-325px"})],-1),Ye={key:2,class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},$e={class:"w-full bg-white"},ts={class:"card-header align-items-center py-5 gap-2 gap-md-5 w-full flex px-4"},es={class:"card-title"},ss={class:"d-flex align-items-center position-relative my-1"},os={class:"card-toolbar flex-row-fluid justify-content-end gap-5"},ns={class:"w-150px"},as=["textContent","value"],ls=["src"],is=["textContent"],cs=["textContent"],ds=["textContent"],rs=["onClick"],_s=["onClick"];function us(u,_,r,t,g,m){const h=b("vue-feather"),x=b("model_applicant_wizard"),c=b("delete_icon"),v=b("datatabble");return a(),i("div",je,[t.content?(a(),i("div",Re,[e("div",De,[e("h1",{class:"font-bold text-lg w-full",textContent:s(t.content.title)},null,8,Fe)]),e("div",Le,[z(h,{type:"alert-octagon",class:"ki-duotone ki-information fs-2tx text-warning me-4"}),e("div",Ne,[e("div",We,[e("h4",{class:"text-gray-900 fw-bold",textContent:s(t.translate("Important"))},null,8,Ue),e("div",Je,[e("div",{innerHTML:t.translate("Users applicants note")},null,8,Be)])])])]),t.showWizard?(a(),M(x,{onCallback:_[0]||(_[0]=o=>t.showWizard=!1),currency:r.currency,key:t.showWizard,system_setting:r.system_setting,item:t.activeItem,business_setting:r.business_setting,conf:r.conf},null,8,["currency","system_setting","item","business_setting","conf"])):d("",!0),!t.showWizard&&t.content.items&&!t.content.items.length?(a(),i("div",qe,[e("div",Ge,[e("div",He,[e("div",Ke,[e("h2",{class:"fs-2x fw-bold mb-0",textContent:s(t.content.title)},null,8,Ze),e("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:s(t.translate("Here you can find the sent Users applicantions to join your team"))},null,8,Qe)]),Xe])])])):d("",!0),t.content.items&&!t.showWizard&&t.content.items.length?(a(),i("main",Ye,[e("div",$e,[e("div",ts,[e("div",es,[e("div",ss,[U(e("input",{type:"text","onUpdate:modelValue":_[1]||(_[1]=o=>t.searchValue=o),"data-kt-ecommerce-order-filter":"search",class:"form-control form-control-solid w-250px ps-12",placeholder:"Search Report"},null,512),[[rt,t.searchValue]])])]),e("div",os,[e("div",ns,[U(e("select",{"onUpdate:modelValue":_[2]||(_[2]=o=>t.searchField=o),class:"form-select form-select-solid select2-hidden-accessible","data-control":"select2","data-hide-search":"true","data-placeholder":"Rating","data-kt-ecommerce-order-filter":"rating","data-select2-id":"select2-data-9-zple",tabindex:"-1","aria-hidden":"true","data-kt-initialized":"1"},[(a(!0),i(B,null,q(t.content.columns,o=>(a(),i("option",{textContent:s(o.text),value:o.value},null,8,as))),256))],512),[[_t,t.searchField]])])])]),t.content.columns?(a(),M(v,{key:0,"search-field":t.searchField,"search-value":t.searchValue,alternating:"",class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":t.translate("is_rtl"),"fixed-checkbox":"",headers:t.content.columns,items:t.content.items},{"item-picture":O(o=>[e("img",{src:o.model.picture,class:"w-8 h-8 rounded-full"},null,8,ls)]),"item-status":O(o=>[o.status=="approved"?(a(),i("span",{key:0,class:"bg-success px-2 py-1 rounded-lg text-white",textContent:s(o.status)},null,8,is)):d("",!0),o.status=="rejected"?(a(),i("span",{key:1,class:"bg-danger px-2 py-1 rounded-lg text-white",textContent:s(o.status)},null,8,cs)):d("",!0),o.status=="new"?(a(),i("span",{key:2,class:"bg-info px-2 py-1 rounded-lg text-white",textContent:s(o.status)},null,8,ds)):d("",!0)]),"item-edit":O(o=>[o.not_editable?d("",!0):(a(),i("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:y=>t.handleAction("edit",o)},[z(h,{class:"w-5",type:"edit"})],8,rs))]),"item-delete":O(o=>[o.not_removeable?d("",!0):(a(),i("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:y=>t.handleAction("delete",o)},[z(c,{class:"w-5"})],8,_s))]),_:1},8,["search-field","search-value","body-text-direction","headers","items"])):d("",!0)])])):d("",!0)])):d("",!0)])}const gs=D(Te,[["render",us]]);export{gs as default};
