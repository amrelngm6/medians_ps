import{_ as m,r,o,c,j as s,u as _,d as k,F as v,i as g}from"./index-kLCjGTwj.js";const y={components:{},name:"Trip Map",data(){return{modes:["DRIVING","WALKING"],activeMarkerIndex:0,reload:!0,render:!0,travelMode:"DRIVING",origin:{lat:0,lng:0},destination:{lat:0,lng:0},zoom:12,markers:[],center:{lat:0,lng:0},waypoints:[],polylineCoordinates:[],directionPoints:{},activeDestination:{}}},computed:{},props:["path","lang","setting","conf","auth","trip","showroute"],mounted(){var e=this;setTimeout(function(){e.onMapReady()},1e3)},methods:{onMapReady(){var e=this;e.updateMarkers(this.trip.vehicle),setInterval(()=>{e.updateVehicle()},1e4)},updateVehicle(){var e=this;let a=this.conf?this.conf.url+"vehicle/"+this.trip.vehicle_id:"";this.$root.$children[0].handleGetRequest(a).then(n=>{e.updateMarkers(n)})},updateMarkers(e){this.center={lat:parseFloat(e.latitude),lng:parseFloat(e.longitude)},this.waypoints=this.trip.locations,this.waypoints[0].origin=this.center},async checkMarker(e){this.activeDestination=this.waypoints[e].destination,this.$emit("click-marker",this.waypoints[e],e)},__(e){return this.$root.$children[0].__(e)}}},M={class:"w-full overflow-auto",style:{height:"85vh","z-index":"9999"}};function f(e,a,n,w,t,l){const p=r("DirectionsRenderer"),h=r("GmapMarker"),u=r("GmapMap");return o(),c("div",M,[(o(),s(u,{ref:"trip_map",center:t.center,key:t.waypoints,options:{zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,rotateControl:!0,fullscreenControl:!0},zoom:t.zoom,style:{width:"100%",height:"calc(100vh -  100px)"}},{default:_(()=>[n.showroute&&t.directionPoints?(o(),s(p,{destination:t.directionPoints.destination,origin:t.directionPoints.origin,key:t.directionPoints,travelMode:t.travelMode},null,8,["destination","origin","travelMode"])):k("",!0),(o(!0),c(v,null,g(t.waypoints,(i,d)=>(o(),s(h,{key:t.waypoints,position:i.origin,clickable:!0,draggable:!1,icon:i.icon?i.icon:null,onClick:C=>l.checkMarker(d)},null,8,["position","icon","onClick"]))),128))]),_:1},8,["center","zoom"]))])}const x=m(y,[["render",f]]);export{x as default};
