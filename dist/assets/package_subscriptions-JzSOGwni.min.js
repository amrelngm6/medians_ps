import{_ as O,D as R,G,e as V,y as N,z as q,f as b,t as F,r as g,o,c as i,i as e,a as f,F as T,k as L,x as K,j as l,H as A,I,h as r,d as p,b as y,n as H,J as M,K as Q,g as D,A as z,m as X,p as Y}from"./index.min.js";import{e as J}from"./editable_map_location-VfWgWkt8.min.js";import{r as Z}from"./route_map-80PBIM6d.min.js";import{e as $}from"./routeLocationWizard-7uCJQlXs.min.js";import"./index.es-7nd_URRl.min.js";import"./tooltip-s9Xa9pgY.min.js";const tt=p(()=>y(()=>import("./map-HlZZaoZ3.min.js"),__vite__mapDeps([0,1,2,3]))),et=p(()=>y(()=>import("./side-form-create-CKdgN5Kx.min.js"),__vite__mapDeps([4,2,3,5,6]))),st=p(()=>y(()=>import("./side-form-update-sfvJGQqB.min.js"),__vite__mapDeps([7,2,3,5,6,8,9,1]))),nt=p(()=>y(()=>import("./form_field-scTEvTH6.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),at={components:{datatabble:R,SideFormCreate:et,SideFormUpdate:st,maps:tt,close_icon:G,delete_icon:V,car_icon:N,route_icon:q,form_field:nt,editable_map_location:J,route_map:Z},name:"PackageSubscriptions",emits:["callback"],setup(_,{emit:n}){const m=b(!1),t=b({}),h=b("Student"),k=b({}),v=b(["Student","Package","Subscription","Confirm"]),d=b("");_.item&&(t.value=_.item);const s=()=>{var a=new URLSearchParams;let u=JSON.parse(JSON.stringify(t.value)),C=Object.keys(u),w,E;for(let S=0;S<C.length;S++)w=C[S],E=typeof u[w]=="object"?JSON.stringify(u[w]):u[w],a.append("params["+w+"]",E);let W=u.subscription_id>0?"update":"create";a.append("type","PackageSubscription."+W),H(a,"/api/"+W).then(S=>{M(S)})},x=()=>{n("callback")},c=()=>Q(["name","description","single_cost_month","single_cost_querter","single_cost_year","double_cost_month","double_cost_quarter","double_cost_year","status"],t),P=a=>{let u=!!a.name.toLowerCase().includes(d.value.toLowerCase()),C=u||!!a.mobile.toLowerCase().includes(d.value.toLowerCase());return C||!!a.parent.name.toLowerCase().includes(d.value.toLowerCase())},B=a=>{t.value.model_id=a.student_id,t.value.model=a,t.value.user_type="student",h.value="Package",d.value=null},U=()=>{for(let a=0;a<_.allstudents.length;a++)_.allstudents[a].show=d.value.trim()?P(_.allstudents[a]):1},j=a=>{let u=!!a.name.toLowerCase().includes(d.value.toLowerCase());return u||!!a.description.toLowerCase().includes(d.value.toLowerCase())};return{findPackage:()=>{if(_.packages)for(let a=0;a<_.packages.length;a++)_.packages[a].show=d.value.trim()?j(_.packages[a]):1},checkSimilarPackage:j,setPackage:a=>{t.value.package_id=a.package_id,t.value.package=a,h.value="Confirm",d.value=null},findStudent:U,setStudent:B,checkSimilarStudent:P,progressWidth:c,showEditSide:m,content:k,fillable:v,activeItem:t,activeTab:h,translate:F,savePackageSubscription:s,searchText:d,back:x}},props:["conf","path","system_setting","business_setting","setting","item","allstudents","packages"]},ot={class:"w-full flex overflow-auto"},lt={class:"w-full relative"},it={class:"card w-full py-10"},ct={class:"w-full stepper stepper-links"},rt={class:"stepper-nav justify-content-center py-2 mb-10"},dt=["onClick"],_t=["textContent"],mt={class:"w-full"},ut={class:"text-center mb-13"},ht=["textContent"],xt=["textContent"],bt={class:"w-100 relative mb-5",autocomplete:"off"},vt=["placeholder"],gt={class:"w-full students"},ft={class:"symbol symbol-35px symbol-circle me-5"},pt=["src"],yt={class:"fw-semibold w-full"},kt=["textContent"],Ct=["textContent"],wt=["onClick","textContent"],St={class:"symbol symbol-35px symbol-circle me-5"},Pt=["src"],Tt={class:"fw-semibold w-full"},Lt=["textContent"],zt=["textContent"],jt={class:"text-center"},Et=["textContent"],Wt={class:"card-body pt-0"},At={class:"settings-form"},It={class:"max-w-xl mb-6 mx-auto row"},Dt={class:"text-center mb-13"},Ot=["textContent"],Rt=["textContent"],Vt={class:"w-100 relative mb-5",autocomplete:"off"},Nt=["placeholder"],qt={class:"w-full"},Ft={class:"fw-semibold w-full"},Jt=["textContent"],Bt=["textContent"],Ut=["onClick","textContent"],Gt={class:"fw-semibold w-full"},Kt=["textContent"],Ht=["textContent"],Mt={class:"text-center"},Qt=["textContent"],Xt={class:"text-center mt-10"},Yt=["textContent"],Zt={class:"text-center mt-10"},$t=["textContent"];function te(_,n,m,t,h,k){const v=g("close_icon"),d=g("vue-feather");return o(),i("div",ot,[e("div",lt,[f(v,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:t.back},null,8,["onClick"]),e("div",it,[e("div",ct,[e("div",rt,[(o(!0),i(T,null,L(t.fillable,s=>(o(),i("div",{class:"stepper-item",onClick:x=>t.activeTab=s},[e("h3",{class:K([t.activeTab==s?"text-danger border-danger":"text-gray-400 border-transparent","cursor-pointer pb-3 px-2 stepper-title text-md border-b"]),textContent:l(s)},null,10,_t)],8,dt))),256))]),e("div",mt,[t.activeTab=="Student"?(o(),i("div",{class:"",key:t.activeTab},[(o(),i("div",{class:"card-body pt-0 mx-auto max-w-xl",key:_.students},[e("div",ut,[e("h1",{class:"mb-3",textContent:l(t.translate("Find student"))},null,8,ht),e("div",{class:"text-gray-400 font-semibold",textContent:l(t.translate("Search by name, parent name or contact number"))},null,8,xt)]),e("div",bt,[f(d,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),A(e("input",{type:"text",onChange:n[0]||(n[0]=(...s)=>t.findStudent&&t.findStudent(...s)),"onUpdate:modelValue":n[1]||(n[1]=s=>t.searchText=s),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name, parent name")},null,40,vt),[[I,t.searchText]])]),t.searchText?(o(!0),i(T,{key:0},L(m.allstudents,s=>(o(),i("div",gt,[s.show?(o(),i("a",{href:"javascript:;",key:s.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",ft,[e("img",{alt:"Pic",src:s.picture},null,8,pt)]),e("div",yt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:l(s.name)},null,8,kt),e("span",{class:"block text-gray-500 text-sm",textContent:l(s.mobile)},null,8,Ct)]),e("span",{onClick:x=>t.setStudent(s),class:"btn btn-danger btn-sm text-white",textContent:l(t.translate("Choose"))},null,8,wt)])):r("",!0)]))),256)):r("",!0),t.activeItem.model?(o(),i("a",{href:"javascript:;",key:t.activeItem.model,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",St,[e("img",{alt:"Pic",src:t.activeItem.model.picture},null,8,Pt)]),e("div",Tt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:l(t.activeItem.model.name)},null,8,Lt),e("span",{class:"block text-gray-500 text-sm",textContent:l(t.activeItem.model.mobile)},null,8,zt)])])):r("",!0)])),e("p",jt,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:n[2]||(n[2]=s=>t.activeTab="Pickup location"),textContent:l(t.translate("Pickup location"))},null,8,Et)])])):r("",!0),t.activeTab=="Package"?(o(),i("div",{class:"",key:t.activeTab},[e("div",Wt,[e("div",At,[e("div",It,[(o(),i("div",{class:"card-body pt-0 mx-auto max-w-xl",key:m.packages},[e("div",Dt,[e("h1",{class:"mb-3",textContent:l(t.translate("Find Package"))},null,8,Ot),e("div",{class:"text-gray-400 font-semibold",textContent:l(t.translate("Search by name or description"))},null,8,Rt)]),e("div",Vt,[f(d,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),A(e("input",{type:"text",onChange:n[3]||(n[3]=(...s)=>t.findPackage&&t.findPackage(...s)),"onUpdate:modelValue":n[4]||(n[4]=s=>t.searchText=s),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name, parent name")},null,40,Nt),[[I,t.searchText]])]),t.searchText?(o(!0),i(T,{key:0},L(m.packages,s=>(o(),i("div",qt,[s&&s.show?(o(),i("a",{href:"javascript:;",key:s.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",Ft,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:l(s.name)},null,8,Jt),e("span",{class:"block text-gray-500 text-sm",textContent:l(s.description)},null,8,Bt)]),e("span",{onClick:x=>t.setPackage(s),class:"btn btn-danger btn-sm text-white",textContent:l(t.translate("Choose"))},null,8,Ut)])):r("",!0)]))),256)):r("",!0),t.activeItem.package?(o(),i("a",{href:"javascript:;",key:t.activeItem.package,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1 gap-4"},[f(d,{type:"map-pin",class:"w-3"}),e("div",Gt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:l(t.activeItem.package.name)},null,8,Kt),e("span",{class:"block text-gray-500 text-sm truncate",textContent:l(t.activeItem.package.description)},null,8,Ht)])])):r("",!0)]))])])]),e("p",Mt,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:n[5]||(n[5]=s=>t.activeTab="Subscription"),textContent:l(t.translate("Subscription"))},null,8,Qt)])])):r("",!0),t.activeTab=="Subscription"?(o(),i("div",{class:"",key:t.activeTab},[e("p",Xt,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:n[6]||(n[6]=s=>t.activeTab="Confirm"),textContent:l(t.translate("Next"))},null,8,Yt)])])):r("",!0),t.activeTab=="Confirm"?(o(),i("div",{class:"w-full mx-auto",key:t.activeTab},[e("p",Zt,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:n[7]||(n[7]=(...s)=>t.savePackageSubscription&&t.savePackageSubscription(...s)),textContent:l(t.translate("Submit"))},null,8,$t)])])):r("",!0)])])])])])}const ee=O(at,[["render",te]]),se=p(()=>y(()=>import("./map-HlZZaoZ3.min.js"),__vite__mapDeps([0,1,2,3]))),ne=p(()=>y(()=>import("./form_field-scTEvTH6.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),ae={components:{datatabble:R,maps:se,delete_icon:V,car_icon:N,route_icon:q,form_field:ne,editable_map_location:J,student_subscription_wizard:ee,employee_location_wizard:$},name:"Routes",setup(_){const n=_.conf.url+_.path+"?load=json",m=b({}),t=b({}),h=b(!1),k=()=>{h.value=!1};return(()=>{X(n).then(x=>{t.value=JSON.parse(JSON.stringify(x))})})(),{url:n,content:t,activeItem:m,translate:F,showWizard:h,closeSide:k,addLocationWizard:()=>{m.value={},h.value=!0},handleAction:(x,c)=>{switch(x){case"view":break;case"edit":m.value=c,h.value=!0;break;case"delete":Y("location_id",c,"RouteLocation.delete");break;case"close":showEditSide.value=!1,m.value={};break}}}},props:["path","lang","system_setting","business_setting","setting","conf","auth"]},oe={class:"w-full flex overflow-auto"},le={key:0,class:"w-full relative"},ie={key:1,class:""},ce={class:"card"},re={class:"card-body"},de={class:"card-px text-center pt-15 pb-15"},_e=["textContent"],me=["textContent"],ue=["textContent"],he={class:"text-center pb-15 px-5"},xe=["src"],be={key:2,class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},ve={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},ge=["textContent"],fe=["textContent"],pe=e("hr",{class:"mt-2"},null,-1),ye={class:"w-full bg-white"},ke={key:0,class:"w-full flex gap-4"},Ce=["src"],we=["textContent"],Se=["onClick"],Pe=["onClick"];function Te(_,n,m,t,h,k){const v=g("student_subscription_wizard"),d=g("vue-feather"),s=g("delete_icon"),x=g("datatabble");return o(),i("div",oe,[t.content&&m.auth?(o(),i("div",le,[t.showWizard&&m.auth.business&&m.auth.business.type=="school"?(o(),D(v,{onCallback:n[0]||(n[0]=c=>t.showWizard=!1),packages:_.packages,allstudents:t.content.students,key:t.showWizard,system_setting:m.system_setting,item:t.activeItem,business_setting:m.business_setting},null,8,["packages","allstudents","system_setting","item","business_setting"])):r("",!0),!t.showWizard&&t.content.items&&!t.content.items.length?(o(),i("div",ie,[e("div",ce,[e("div",re,[e("div",de,[e("h2",{class:"fs-2x fw-bold mb-0",textContent:l(t.content.title)},null,8,_e),e("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:l(t.translate("Add your first pickup using this below wizard"))},null,8,me),e("a",{textContent:l(t.translate("add_new")),onClick:n[1]||(n[1]=(...c)=>t.addLocationWizard&&t.addLocationWizard(...c)),href:"javascript:;",class:"text-white btn btn-primary er fs-6 px-8 py-4"},null,8,ue)]),e("div",he,[e("img",{src:"/src/asset/img/1.png",alt:"",class:"mx-auto mw-100 h-200px h-sm-325px"},null,8,xe)])])])])):r("",!0),t.content.items&&t.content.items.length&&!t.showWizard?(o(),i("main",be,[e("div",ve,[e("h1",{class:"font-bold text-lg w-full",textContent:l(t.content.title)},null,8,ge),t.showWizard?r("",!0):(o(),i("a",{key:0,href:"javascript:;",class:"uppercase p-2 mx-2 text-center text-white w-32 rounded-lg bg-danger",onClick:n[2]||(n[2]=(...c)=>t.addLocationWizard&&t.addLocationWizard(...c)),textContent:l(t.translate("add_new"))},null,8,fe))]),pe,e("div",ye,[t.content.columns?(o(),D(x,{key:0,class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":t.translate("lang")=="ar"?"right":"left","fixed-checkbox":"",headers:t.content.columns,items:t.content.items},{"item-name":z(c=>[c.model?(o(),i("div",ke,[e("img",{src:c.model.picture,class:"w-8 h-8 rounded-full"},null,8,Ce),e("span",{textContent:l(c.model.name)},null,8,we)])):r("",!0)]),"item-edit":z(c=>[c.not_editable?r("",!0):(o(),i("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:P=>t.handleAction("edit",c)},[f(d,{class:"w-5",type:"edit"})],8,Se))]),"item-delete":z(c=>[c.not_removeable?r("",!0):(o(),i("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:P=>t.handleAction("delete",c)},[f(s,{class:"w-5"})],8,Pe))]),_:1},8,["body-text-direction","headers","items"])):r("",!0)])])):r("",!0)])):r("",!0)])}const Oe=O(ae,[["render",Te]]);export{Oe as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["map-HlZZaoZ3.min.js","index.es-7nd_URRl.min.js","index.min.js","index.min.css","side-form-create-CKdgN5Kx.min.js","Field-JlRoC1sK.min.js","Field.min.css","side-form-update-sfvJGQqB.min.js","form_field-scTEvTH6.min.js","editable_map_location-VfWgWkt8.min.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
