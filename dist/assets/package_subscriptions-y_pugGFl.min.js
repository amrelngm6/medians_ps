import{_ as O,D as R,G,e as V,y as q,z as N,f,t as F,r as v,o as l,c,i as e,a as b,F as P,k as L,x as K,j as n,H as W,I as A,h as d,d as g,b as y,n as M,J as H,K as Q,g as D,A as z,m as Y,p as X}from"./index.min.js";import{e as J}from"./editable_map_location-VfWgWkt8.min.js";import{r as Z}from"./route_map-80PBIM6d.min.js";import{e as $}from"./routeLocationWizard-7uCJQlXs.min.js";import"./index.es-7nd_URRl.min.js";import"./tooltip-s9Xa9pgY.min.js";const tt=g(()=>y(()=>import("./map-HlZZaoZ3.min.js"),__vite__mapDeps([0,1,2,3]))),et=g(()=>y(()=>import("./side-form-create-CKdgN5Kx.min.js"),__vite__mapDeps([4,2,3,5,6]))),st=g(()=>y(()=>import("./side-form-update-sfvJGQqB.min.js"),__vite__mapDeps([7,2,3,5,6,8,9,1]))),nt=g(()=>y(()=>import("./form_field-scTEvTH6.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),at={components:{datatabble:R,SideFormCreate:et,SideFormUpdate:st,maps:tt,close_icon:G,delete_icon:V,car_icon:q,route_icon:N,form_field:nt,editable_map_location:J,route_map:Z},name:"PackageSubscriptions",emits:["callback"],setup(m,{emit:a}){const _=f(!1),t=f({}),h=f("Student"),k=f({}),p=f(["Student","Package","Subscription","Confirm"]),i=f("");m.item&&(t.value=m.item);const s=()=>{var o=new URLSearchParams;let u=JSON.parse(JSON.stringify(t.value)),C=Object.keys(u),w,j;for(let S=0;S<C.length;S++)w=C[S],j=typeof u[w]=="object"?JSON.stringify(u[w]):u[w],o.append("params["+w+"]",j);let E=u.subscription_id>0?"update":"create";o.append("type","PackageSubscription."+E),M(o,"/api/"+E).then(S=>{H(S)})},x=()=>{a("callback")},r=()=>Q(["name","description","single_cost_month","single_cost_querter","single_cost_year","double_cost_month","double_cost_quarter","double_cost_year","status"],t),T=o=>{let u=!!o.name.toLowerCase().includes(i.value.toLowerCase()),C=u||!!o.mobile.toLowerCase().includes(i.value.toLowerCase());return C||!!o.parent.name.toLowerCase().includes(i.value.toLowerCase())},B=o=>{t.value.model_id=o.student_id,t.value.model=o,t.value.user_type="student",h.value="Package",i.value=null},U=()=>{for(let o=0;o<m.allstudents.length;o++)m.allstudents[o].show=i.value.trim()?T(m.allstudents[o]):1},I=o=>{let u=!!o.name.toLowerCase().includes(i.value.toLowerCase());return u||!!o.description.toLowerCase().includes(i.value.toLowerCase())};return{setType:o=>{t.value.payment_type=o},findPackage:()=>{if(m.packages)for(let o=0;o<m.packages.length;o++)m.packages[o].show=i.value.trim()?I(m.packages[o]):1},checkSimilarPackage:I,setPackage:o=>{t.value.package_id=o.package_id,t.value.package=o,h.value="Confirm",i.value=null},findStudent:U,setStudent:B,checkSimilarStudent:T,progressWidth:r,showEditSide:_,content:k,fillable:p,activeItem:t,activeTab:h,translate:F,savePackageSubscription:s,searchText:i,back:x}},props:["conf","path","system_setting","business_setting","setting","item","allstudents","packages"]},ot={class:"w-full flex overflow-auto"},lt={class:"w-full relative"},ct={class:"card w-full py-10"},it={class:"w-full stepper stepper-links"},rt={class:"stepper-nav justify-content-center py-2 mb-10"},dt=["onClick"],_t=["textContent"],mt={class:"w-full"},ut={class:"text-center mb-13"},bt=["textContent"],ht=["textContent"],xt={class:"w-100 relative mb-5",autocomplete:"off"},ft=["placeholder"],pt={class:"w-full students"},vt={class:"symbol symbol-35px symbol-circle me-5"},gt=["src"],yt={class:"fw-semibold w-full"},kt=["textContent"],Ct=["textContent"],wt=["onClick","textContent"],St={class:"symbol symbol-35px symbol-circle me-5"},Tt=["src"],Pt={class:"fw-semibold w-full"},Lt=["textContent"],zt=["textContent"],It={class:"text-center"},jt=["textContent"],Et={class:"card-body pt-0"},Wt={class:"settings-form"},At={class:"max-w-xl mb-6 mx-auto row"},Dt={class:"text-center mb-13"},Ot=["textContent"],Rt=["textContent"],Vt={class:"w-100 relative mb-5",autocomplete:"off"},qt=["placeholder"],Nt={class:"w-full"},Ft={class:"fw-semibold w-full"},Jt=["textContent"],Bt=["textContent"],Ut=["onClick","textContent"],Gt={class:"fw-semibold w-full"},Kt=["textContent"],Mt=["textContent"],Ht={class:"text-center"},Qt=["textContent"],Yt={class:"relative py-4 max-w-xl mx-auto"},Xt=["textContent"],Zt={class:"fv-row fv-plugins-icon-container fv-plugins-bootstrap5-row-valid"},$t={class:"d-flex flex-stack mb-5 cursor-pointer"},te={class:"d-flex align-items-center me-2"},ee={class:"symbol symbol-50px me-6"},se={class:"symbol-label bg-light-danger"},ne={class:"d-flex flex-column"},ae=e("span",{class:"fw-bold fs-6"},"Double trips",-1),oe=["textContent"],le=e("span",{class:"form-check form-check-custom form-check-solid"},[e("input",{class:"form-check-input",type:"radio",name:"daily_trips",value:"2"})],-1),ce={class:"d-flex flex-stack mb-5 cursor-pointer"},ie={class:"d-flex align-items-center me-2"},re={class:"symbol symbol-50px me-6"},de={class:"symbol-label bg-light-danger"},_e={class:"d-flex flex-column"},me=e("span",{class:"fw-bold fs-6"},"Single trip",-1),ue=["textContent"],be=e("span",{class:"form-check form-check-custom form-check-solid"},[e("input",{class:"form-check-input",type:"radio",name:"daily_trips",value:"1"})],-1),he=e("div",{class:"fv-plugins-message-container fv-plugins-message-container--enabled invalid-feedback"},null,-1),xe={class:"relative py-4"},fe=["textContent"],pe={class:"row"},ve=["checked"],ge={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},ye={class:"d-block fw-semibold text-start"},ke=["textContent"],Ce=["textContent"],we=["checked"],Se={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},Te={class:"d-block fw-semibold text-start"},Pe=["textContent"],Le=["textContent"],ze=["checked"],Ie={class:"gap-6 btn btn-outline btn-outline-dashed btn-active-light-primary p-7 d-flex align-items-center mb-10"},je={class:"d-block fw-semibold text-start"},Ee=["textContent"],We=["textContent"],Ae={class:"relative py-4"},De=["textContent"],Oe=e("div",{class:"max-w-xl mx-auto"},null,-1),Re={class:"text-center mt-10"},Ve=["textContent"],qe={class:"text-center mt-10"},Ne=["textContent"];function Fe(m,a,_,t,h,k){const p=v("close_icon"),i=v("vue-feather");return l(),c("div",ot,[e("div",lt,[b(p,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:t.back},null,8,["onClick"]),e("div",ct,[e("div",it,[e("div",rt,[(l(!0),c(P,null,L(t.fillable,s=>(l(),c("div",{class:"stepper-item",onClick:x=>t.activeTab=s},[e("h3",{class:K([t.activeTab==s?"text-danger border-danger":"text-gray-400 border-transparent","cursor-pointer pb-3 px-2 stepper-title text-md border-b"]),textContent:n(s)},null,10,_t)],8,dt))),256))]),e("div",mt,[t.activeTab=="Student"?(l(),c("div",{class:"",key:t.activeTab},[(l(),c("div",{class:"card-body pt-0 mx-auto max-w-xl",key:m.students},[e("div",ut,[e("h1",{class:"mb-3",textContent:n(t.translate("Find student"))},null,8,bt),e("div",{class:"text-gray-400 font-semibold",textContent:n(t.translate("Search by name, parent name or contact number"))},null,8,ht)]),e("div",xt,[b(i,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),W(e("input",{type:"text",onChange:a[0]||(a[0]=(...s)=>t.findStudent&&t.findStudent(...s)),"onUpdate:modelValue":a[1]||(a[1]=s=>t.searchText=s),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name, parent name")},null,40,ft),[[A,t.searchText]])]),t.searchText?(l(!0),c(P,{key:0},L(_.allstudents,s=>(l(),c("div",pt,[s.show?(l(),c("a",{href:"javascript:;",key:s.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",vt,[e("img",{alt:"Pic",src:s.picture},null,8,gt)]),e("div",yt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(s.name)},null,8,kt),e("span",{class:"block text-gray-500 text-sm",textContent:n(s.mobile)},null,8,Ct)]),e("span",{onClick:x=>t.setStudent(s),class:"btn btn-danger btn-sm text-white",textContent:n(t.translate("Choose"))},null,8,wt)])):d("",!0)]))),256)):d("",!0),t.activeItem.model?(l(),c("a",{href:"javascript:;",key:t.activeItem.model,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",St,[e("img",{alt:"Pic",src:t.activeItem.model.picture},null,8,Tt)]),e("div",Pt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(t.activeItem.model.name)},null,8,Lt),e("span",{class:"block text-gray-500 text-sm",textContent:n(t.activeItem.model.mobile)},null,8,zt)])])):d("",!0)])),e("p",It,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:a[2]||(a[2]=s=>t.activeTab="Pickup location"),textContent:n(t.translate("Pickup location"))},null,8,jt)])])):d("",!0),t.activeTab=="Package"?(l(),c("div",{class:"",key:t.activeTab},[e("div",Et,[e("div",Wt,[e("div",At,[(l(),c("div",{class:"card-body pt-0 mx-auto max-w-xl",key:_.packages},[e("div",Dt,[e("h1",{class:"mb-3",textContent:n(t.translate("Find Package"))},null,8,Ot),e("div",{class:"text-gray-400 font-semibold",textContent:n(t.translate("Search by name or description"))},null,8,Rt)]),e("div",Vt,[b(i,{type:"search",class:"text-gray-500 position-absolute top-50 ms-5 translate-middle-y"}),W(e("input",{type:"text",onChange:a[3]||(a[3]=(...s)=>t.findPackage&&t.findPackage(...s)),"onUpdate:modelValue":a[4]||(a[4]=s=>t.searchText=s),class:"form-control form-control-lg form-control-solid px-15",placeholder:t.translate("Search by name, parent name")},null,40,qt),[[A,t.searchText]])]),t.searchText?(l(!0),c(P,{key:0},L(_.packages,s=>(l(),c("div",Nt,[s&&s.show?(l(),c("a",{href:"javascript:;",key:s.show,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[e("div",Ft,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(s.name)},null,8,Jt),e("span",{class:"block text-gray-500 text-sm",textContent:n(s.description)},null,8,Bt)]),e("span",{onClick:x=>t.setPackage(s),class:"btn btn-danger btn-sm text-white",textContent:n(t.translate("Choose"))},null,8,Ut)])):d("",!0)]))),256)):d("",!0),t.activeItem.package?(l(),c("a",{href:"javascript:;",key:t.activeItem.package,class:"d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1 gap-4"},[b(i,{type:"map",class:"w-3"}),e("div",Gt,[e("span",{class:"text-lg text-danger font-semibold me-2",textContent:n(t.activeItem.package.name)},null,8,Kt),e("span",{class:"block text-gray-500 text-sm truncate",textContent:n(t.activeItem.package.description)},null,8,Mt)])])):d("",!0)]))])])]),e("p",Ht,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:a[5]||(a[5]=s=>t.activeTab="Subscription"),textContent:n(t.translate("Subscription"))},null,8,Qt)])])):d("",!0),t.activeTab=="Subscription"?(l(),c("div",{class:"mx-auto max-w-4xl",key:t.activeTab},[e("div",Yt,[e("label",{class:"nui-label w-full pb-2 block font-semibold text-lg",textContent:n(t.translate("Route type"))},null,8,Xt),e("div",Zt,[e("label",$t,[e("span",te,[e("span",ee,[e("span",se,[b(i,{type:"map-pin"})])]),e("span",ne,[ae,e("span",{class:"fs-7 text-muted",textContent:n(t.translate("Two trips per day going & back"))},null,8,oe)])]),le]),e("label",ce,[e("span",ie,[e("span",re,[e("span",de,[b(i,{type:"map-pin"})])]),e("span",_e,[me,e("span",{class:"fs-7 text-muted",textContent:n(t.translate("One trip per day going"))},null,8,ue)])]),be]),he])]),e("div",xe,[e("label",{class:"nui-label w-full pb-2 block font-semibold text-lg",textContent:n(t.translate("Subscription duration"))},null,8,fe),e("div",pe,[e("div",{class:"col-lg-4",onClick:a[6]||(a[6]=s=>t.setType("month"))},[e("input",{type:"radio",class:"btn-check",value:"month",checked:t.activeItem.payment_type=="month",name:"payment_type"},null,8,ve),e("label",ge,[b(i,{type:"server"}),e("span",ye,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:n(t.translate("Month"))},null,8,ke),e("span",{class:"text-muted fw-semibold fs-6",textContent:n(t.translate("Subscribe for month"))},null,8,Ce)])])]),e("div",{class:"col-lg-4",onClick:a[7]||(a[7]=s=>t.setType("quarter"))},[e("input",{type:"radio",class:"btn-check",value:"quarter",checked:t.activeItem.payment_type=="quarter",name:"payment_type"},null,8,we),e("label",Se,[b(i,{type:"server"}),e("span",Te,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:n(t.translate("Quarter"))},null,8,Pe),e("span",{class:"text-muted fw-semibold fs-6",textContent:n(t.translate("Subscribe for quarter"))},null,8,Le)])])]),e("div",{class:"col-lg-4",onClick:a[8]||(a[8]=s=>t.setType("year"))},[e("input",{type:"radio",class:"btn-check",value:"year",checked:t.activeItem.payment_type=="year",name:"payment_type"},null,8,ze),e("label",Ie,[b(i,{type:"server"}),e("span",je,[e("span",{class:"text-gray-900 fw-bold d-block fs-4 mb-2",textContent:n(t.translate("Year"))},null,8,Ee),e("span",{class:"text-muted fw-semibold fs-6",textContent:n(t.translate("Subscribe for year"))},null,8,We)])])])])]),e("div",Ae,[e("label",{class:"nui-label w-full pb-2 block font-semibold text-lg",textContent:n(t.translate("Start Date"))},null,8,De),Oe]),e("p",Re,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:a[9]||(a[9]=s=>t.activeTab="Confirm"),textContent:n(t.translate("Next"))},null,8,Ve)])])):d("",!0),t.activeTab=="Confirm"?(l(),c("div",{class:"w-full mx-auto",key:t.activeTab},[e("p",qe,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:a[10]||(a[10]=(...s)=>t.savePackageSubscription&&t.savePackageSubscription(...s)),textContent:n(t.translate("Submit"))},null,8,Ne)])])):d("",!0)])])])])])}const Je=O(at,[["render",Fe]]),Be=g(()=>y(()=>import("./map-HlZZaoZ3.min.js"),__vite__mapDeps([0,1,2,3]))),Ue=g(()=>y(()=>import("./form_field-scTEvTH6.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),Ge={components:{datatabble:R,maps:Be,delete_icon:V,car_icon:q,route_icon:N,form_field:Ue,editable_map_location:J,student_subscription_wizard:Je,employee_location_wizard:$},name:"Routes",setup(m){const a=m.conf.url+m.path+"?load=json",_=f({}),t=f({}),h=f(!1),k=()=>{h.value=!1};return(()=>{Y(a).then(x=>{t.value=JSON.parse(JSON.stringify(x))})})(),{url:a,content:t,activeItem:_,translate:F,showWizard:h,closeSide:k,addLocationWizard:()=>{_.value={},h.value=!0},handleAction:(x,r)=>{switch(x){case"view":break;case"edit":_.value=r,h.value=!0;break;case"delete":X("location_id",r,"RouteLocation.delete");break;case"close":showEditSide.value=!1,_.value={};break}}}},props:["path","lang","system_setting","business_setting","setting","conf","auth"]},Ke={class:"w-full flex overflow-auto"},Me={key:0,class:"w-full relative"},He={key:1,class:""},Qe={class:"card"},Ye={class:"card-body"},Xe={class:"card-px text-center pt-15 pb-15"},Ze=["textContent"],$e=["textContent"],ts=["textContent"],es={class:"text-center pb-15 px-5"},ss=["src"],ns={key:2,class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},as={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},os=["textContent"],ls=["textContent"],cs=e("hr",{class:"mt-2"},null,-1),is={class:"w-full bg-white"},rs={key:0,class:"w-full flex gap-4"},ds=["src"],_s=["textContent"],ms=["onClick"],us=["onClick"];function bs(m,a,_,t,h,k){const p=v("student_subscription_wizard"),i=v("vue-feather"),s=v("delete_icon"),x=v("datatabble");return l(),c("div",Ke,[t.content&&_.auth?(l(),c("div",Me,[t.showWizard&&_.auth.business&&_.auth.business.type=="school"?(l(),D(p,{onCallback:a[0]||(a[0]=r=>t.showWizard=!1),packages:t.content.packages,allstudents:t.content.students,key:t.showWizard,system_setting:_.system_setting,item:t.activeItem,business_setting:_.business_setting},null,8,["packages","allstudents","system_setting","item","business_setting"])):d("",!0),!t.showWizard&&t.content.items&&!t.content.items.length?(l(),c("div",He,[e("div",Qe,[e("div",Ye,[e("div",Xe,[e("h2",{class:"fs-2x fw-bold mb-0",textContent:n(t.content.title)},null,8,Ze),e("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:n(t.translate("Add your first pickup using this below wizard"))},null,8,$e),e("a",{textContent:n(t.translate("add_new")),onClick:a[1]||(a[1]=(...r)=>t.addLocationWizard&&t.addLocationWizard(...r)),href:"javascript:;",class:"text-white btn btn-primary er fs-6 px-8 py-4"},null,8,ts)]),e("div",es,[e("img",{src:"/src/asset/img/1.png",alt:"",class:"mx-auto mw-100 h-200px h-sm-325px"},null,8,ss)])])])])):d("",!0),t.content.items&&t.content.items.length&&!t.showWizard?(l(),c("main",ns,[e("div",as,[e("h1",{class:"font-bold text-lg w-full",textContent:n(t.content.title)},null,8,os),t.showWizard?d("",!0):(l(),c("a",{key:0,href:"javascript:;",class:"uppercase p-2 mx-2 text-center text-white w-32 rounded-lg bg-danger",onClick:a[2]||(a[2]=(...r)=>t.addLocationWizard&&t.addLocationWizard(...r)),textContent:n(t.translate("add_new"))},null,8,ls))]),cs,e("div",is,[t.content.columns?(l(),D(x,{key:0,class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":t.translate("lang")=="ar"?"right":"left","fixed-checkbox":"",headers:t.content.columns,items:t.content.items},{"item-name":z(r=>[r.model?(l(),c("div",rs,[e("img",{src:r.model.picture,class:"w-8 h-8 rounded-full"},null,8,ds),e("span",{textContent:n(r.model.name)},null,8,_s)])):d("",!0)]),"item-edit":z(r=>[r.not_editable?d("",!0):(l(),c("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:T=>t.handleAction("edit",r)},[b(i,{class:"w-5",type:"edit"})],8,ms))]),"item-delete":z(r=>[r.not_removeable?d("",!0):(l(),c("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:T=>t.handleAction("delete",r)},[b(s,{class:"w-5"})],8,us))]),_:1},8,["body-text-direction","headers","items"])):d("",!0)])])):d("",!0)])):d("",!0)])}const ws=O(Ge,[["render",bs]]);export{ws as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["map-HlZZaoZ3.min.js","index.es-7nd_URRl.min.js","index.min.js","index.min.css","side-form-create-CKdgN5Kx.min.js","Field-JlRoC1sK.min.js","Field.min.css","side-form-update-sfvJGQqB.min.js","form_field-scTEvTH6.min.js","editable_map_location-VfWgWkt8.min.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
