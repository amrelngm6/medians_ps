import{_ as W,D as B,e as G,y as J,z as H,f as c,t as K,r as V,o as n,c as i,i as e,F as A,k as M,x as Q,j as r,H as f,I as h,h as d,l as X,g as Y,a as S,d as k,b as C,s as q,C as Z,n as $,E as tt,G as et}from"./index.min.js";import{e as ot}from"./editable_map_location-c8PZshCG.min.js";import"./index.es-sRIzCSW1.min.js";const at=k(()=>C(()=>import("./map-GtxasIM0.min.js"),__vite__mapDeps([0,1,2,3]))),st=k(()=>C(()=>import("./side-form-create-CbF3czHg.min.js"),__vite__mapDeps([4,2,3,5,6]))),lt=k(()=>C(()=>import("./side-form-update-CFYHWaJ9.min.js"),__vite__mapDeps([7,2,3,5,6,8,9,1]))),nt=k(()=>C(()=>import("./form_field-_3oIkLCE.min.js"),__vite__mapDeps([8,2,3,5,6,9,1]))),it={components:{datatabble:B,SideFormCreate:st,SideFormUpdate:lt,maps:at,delete_icon:G,car_icon:J,route_icon:H,form_field:nt,editable_map_location:ot},name:"Routes",setup(_){const a=_.conf.url+_.path+"?load=json",u=c(!1),t=c(!1);c(null);const l=c({}),I=c("Info"),x=c({}),g=c({});c([]),c(!0);const o=c(""),b=c(null),L=c(!1),P=c(!1),j=c(["Info","Time","Start location","End location","Driver"]),w=c([]),E=c(!1),T=c("");_.item&&(l.value=_.item);const D=async()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(s=>{l.value.start_latitude=s.coords.latitude,l.value.start_longitude=s.coords.longitude,l.value.end_latitude=s.coords.latitude,l.value.end_longitude=s.coords.longitude},s=>{l.value.start_latitude=30.06,l.value.start_longitude=31.21,l.value.end_latitude=30.06,l.value.end_longitude=31.21,q(s.message)}):(q("location error"),b.value="Geolocation is not supported by this browser.")},N=()=>{l.value={},P.value=!0,D()},z=async()=>{let s=T.value.length>3?await Z(_.system_setting.google_map_api,T.value,_.business_setting.country):"";w.value=s.predictions},O=()=>{var s=new URLSearchParams;let p=JSON.parse(JSON.stringify(l.value)),y=Object.keys(p),v;for(let m=0;m<y.length;m++)v=y[m],s.append("params["+v+"]",p[v]);s.append("type","Route.create"),$(s,"/api/create").then(m=>{tt(m)})},U=async s=>{l.value.start_latitude=s.lat(),l.value.start_longitude=s.lng(),l.value.start_address=await et(s.lat(),s.lng())},F=s=>{l.value.end_latitude=s.lat(),l.value.end_longitude=s.lng()};return{setPlaceMarker:async s=>{l.value.start_address=s.description;const p=new google.maps.places.PlacesService(document.createElement("div"));let y=s.place_id;p.getDetails({placeId:y},(v,m)=>{if(m===google.maps.places.PlacesServiceStatus.OK&&v){const R=v.geometry.location;l.value.start_longitude=R.lng(),l.value.start_latitude=R.lat(),w.value=[],E.value=!1}else console.error("Failed to fetch place details")})},showPlaceSearch:E,startPlaceChanged:z,start_placeSearch:T,places:w,showAddSide:u,waypoints,showEditSide:t,url:a,content:x,fillable:j,center:g,activeItem:l,activeTab:I,translate:K,setLocationsPickups,clickMarker,updateStartMarker:U,updateEndMarker:F,setLocationsMarkers,checkSimilar,searchTextChanged,searchText:o,getUserLocation:D,showWizard:P,collapsed:L,saveRoute:O,addRouteWizard:N,handleAction}},props:["conf","path","system_setting","business_setting","setting","item","drivers","vehicles"]},rt={class:"w-full flex overflow-auto"},ct={key:0,class:"w-full relative"},dt={class:"card w-full py-10"},_t={class:"w-full stepper stepper-links"},mt={class:"stepper-nav justify-content-center py-2 mb-10"},ut=["onClick"],vt=["textContent"],ft={class:"w-full"},ht={class:"card-body pt-0"},xt={class:"settings-form"},gt={class:"max-w-xl mb-6 mx-auto row"},bt=e("input",{name:"params[route_id]",type:"hidden"},null,-1),pt=["for","textContent"],yt=["placeholder"],kt=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),Ct=["for","textContent"],wt=["placeholder"],Tt={class:"text-center"},St=["textContent"],It={class:"card-body pt-0"},Pt={class:"settings-form"},Et={class:"max-w-xl mb-6 mx-auto row"},Dt=["textContent"],Rt=["placeholder"],Vt=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),At=["textContent"],Mt=["placeholder"],qt={class:"text-center"},Lt=["textContent"],jt={class:"card-body pt-0"},Nt={class:"settings-form"},zt={class:"px-10 mb-6 mx-auto row"},Ot={class:"flex w-full"},Ut={class:"mt-10 w-full"},Ft=["textContent"],Wt={class:"fw-semibold text-gray-600 fs-6"},Bt=["textContent"],Gt=["textContent"],Jt=["placeholder"],Ht={class:"w-full"},Kt={key:0,class:"d-flex align-items-center mb-8"},Qt=e("span",{class:"bullet bullet-vertical h-40px bg-success"},null,-1),Xt=["onClick"],Yt=e("input",{class:"form-check-input",type:"checkbox",value:""},null,-1),Zt=[Yt],$t=["onClick"],te=["textContent"],ee=["textContent"],oe=e("span",{class:"badge badge-light-success fs-8 fw-bold"},null,-1),ae={class:"w-full"},se={class:"text-center"},le=["textContent"],ne={class:"card-body pt-0"},ie={class:"settings-form"},re={class:"max-w-xl mb-6 mx-auto row"},ce=["textContent"],de={class:"text-center"},_e=["textContent"],me={class:"card-body pt-0"},ue={class:"settings-form"},ve={class:"max-w-xl mb-6 mx-auto row"},fe=["textContent"],he=e("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),xe=["textContent"],ge={class:"text-center"},be=["textContent"];function pe(_,a,u,t,l,I){const x=V("editable_map_location"),g=V("form_field");return n(),i("div",rt,[t.content?(n(),i("div",ct,[e("div",dt,[e("div",_t,[e("div",mt,[(n(!0),i(A,null,M(t.fillable,o=>(n(),i("div",{class:"stepper-item",onClick:b=>t.activeTab=o},[e("h3",{class:Q([t.activeTab==o?"text-danger border-danger":"text-gray-400 border-transparent","cursor-pointer pb-3 px-2 stepper-title text-md border-b"]),textContent:r(o)},null,10,vt)],8,ut))),256))]),e("div",ft,[t.activeTab=="Info"?(n(),i("div",{class:"",key:t.activeTab},[e("div",ht,[e("div",xt,[e("div",gt,[bt,e("label",{class:"col-lg-4 col-form-label required fw-semibold fs-6",for:"input"+_.i,textContent:r(t.translate("Route name"))},null,8,pt),f(e("input",{required:!0,autocomplete:"off",name:"params[name]",class:"form-control form-control-solid",placeholder:t.translate("Route name"),"onUpdate:modelValue":a[0]||(a[0]=o=>t.activeItem.route_name=o)},null,8,yt),[[h,t.activeItem.route_name]]),kt,e("label",{class:"col-lg-4 col-form-label required fw-semibold fs-6",for:"input"+_.i,textContent:r(t.translate("Description"))},null,8,Ct),f(e("textarea",{required:!0,autocomplete:"off",name:"params[description]",class:"form-control form-control-solid",placeholder:t.translate("Description"),"onUpdate:modelValue":a[1]||(a[1]=o=>t.activeItem.description=o)}," ",8,wt),[[h,t.activeItem.description]])])])]),e("p",Tt,[t.showWizard?(n(),i("a",{key:0,href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:a[2]||(a[2]=o=>t.activeTab="Time"),textContent:r(t.translate("Next"))},null,8,St)):d("",!0)])])):d("",!0),t.activeTab=="Time"?(n(),i("div",{class:"",key:t.activeTab},[e("div",It,[e("div",Pt,[e("div",Et,[X(" activeItem.start_address "),e("label",{class:"col-lg-4 col-form-label required fw-semibold fs-6",textContent:r(t.translate("Morning trip time"))},null,8,Dt),f(e("input",{required:!0,autocomplete:"off",name:"params[morning_trip_time]",class:"form-control form-control-solid",placeholder:t.translate("Morning Trip time"),type:"time","onUpdate:modelValue":a[3]||(a[3]=o=>t.activeItem.morning_trip_time=o)},null,8,Rt),[[h,t.activeItem.morning_trip_time]]),Vt,e("label",{class:"col-lg-4 col-form-label required fw-semibold fs-6",textContent:r(t.translate("Afternoon trip time"))},null,8,At),f(e("input",{required:!0,autocomplete:"off",name:"params[afternoon_trip_time]",class:"form-control form-control-solid",placeholder:t.translate("Afternoon Trip time"),type:"time","onUpdate:modelValue":a[4]||(a[4]=o=>t.activeItem.afternoon_trip_time=o)},null,8,Mt),[[h,t.activeItem.afternoon_trip_time]])])])]),e("p",qt,[t.showWizard?(n(),i("a",{key:0,href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:a[5]||(a[5]=o=>t.activeTab="Start location"),textContent:r(t.translate("Next"))},null,8,Lt)):d("",!0)])])):d("",!0),t.activeTab=="Start location"?(n(),i("div",{class:"",key:t.activeTab},[e("div",jt,[e("div",Nt,[e("div",zt,[e("div",Ot,[e("div",Ut,[e("h3",{class:"mb-3",textContent:r(t.translate("Location Address"))},null,8,Ft),e("div",Wt,[(n(),i("span",{class:"d-block fw-bold pb-3 text-gray-400",key:t.activeItem.start_address,textContent:r(t.activeItem.start_address)},null,8,Bt)),e("a",{class:"fw-bold",onClick:a[6]||(a[6]=o=>t.showPlaceSearch=!0),href:"javascript:;",textContent:r(t.translate("Change"))},null,8,Gt)]),t.showPlaceSearch?(n(),i("div",{key:t.showPlaceSearch},[f(e("input",{autocomplete:"off",onChange:a[7]||(a[7]=(...o)=>t.startPlaceChanged&&t.startPlaceChanged(...o)),"onUpdate:modelValue":a[8]||(a[8]=o=>t.start_placeSearch=o),type:"text",class:"form-control form-control-solid",placeholder:t.translate("Find Location")},null,40,Jt),[[h,t.start_placeSearch]]),t.places?(n(),i("div",{class:"mt-3 w-full card-body",key:t.places},[(n(!0),i(A,null,M(t.places,o=>(n(),i("div",Ht,[o?(n(),i("div",Kt,[Qt,e("div",{class:"form-check form-check-custom form-check-solid mx-5 cursor-pointer",onClick:b=>t.setPlaceMarker(o)},Zt,8,Xt),e("div",{class:"flex-grow-1 cursor-pointer",onClick:b=>t.setPlaceMarker(o)},[o.structured_formatting?(n(),i("a",{key:0,href:"#",class:"text-gray-800 text-hover-primary fw-bold fs-6",textContent:r(o.structured_formatting.main_text)},null,8,te)):d("",!0),e("span",{class:"text-muted fw-semibold d-block",textContent:r(o.description)},null,8,ee)],8,$t),oe])):d("",!0)]))),256))])):d("",!0)])):d("",!0)]),e("div",ae,[(n(),Y(x,{system_setting:u.system_setting,item:t.activeItem,onSetlocation:t.updateStartMarker,key:t.activeItem.start_latitude,location:{lat:t.activeItem.start_latitude,lng:t.activeItem.start_longitude}},null,8,["system_setting","item","onSetlocation","location"]))])])])])]),e("p",se,[t.showWizard?(n(),i("a",{key:0,href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:a[9]||(a[9]=o=>t.activeTab="End location"),textContent:r(t.translate("Next"))},null,8,le)):d("",!0)])])):d("",!0),t.activeTab=="End location"?(n(),i("div",{class:"",key:t.activeTab},[e("div",ne,[e("div",ie,[e("div",re,[e("label",{class:"col-lg-4 col-form-label required fw-semibold fs-6",textContent:r(t.translate("End location"))},null,8,ce),S(x,{system_setting:u.system_setting,item:t.activeItem,onSetlocation:t.updateEndMarker,location:{lat:t.activeItem.end_latitude,lng:t.activeItem.end_longitude}},null,8,["system_setting","item","onSetlocation","location"])])])]),e("p",de,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:a[10]||(a[10]=o=>t.activeTab="Driver"),textContent:r(t.translate("Next"))},null,8,_e)])])):d("",!0),t.activeTab=="Driver"?(n(),i("div",{class:"",key:t.activeTab},[e("div",me,[e("div",ue,[e("div",ve,[e("label",{class:"col-lg-4 col-form-label required fw-semibold fs-6",textContent:r(t.translate("Driver"))},null,8,fe),S(g,{item:t.activeItem,column:{key:"driver_id",text_key:"name",column_type:"select",data:u.drivers}},null,8,["item","column"]),he,e("label",{class:"col-lg-4 col-form-label required fw-semibold fs-6",textContent:r(t.translate("Vehicles"))},null,8,xe),S(g,{item:t.activeItem,column:{key:"vehicle_id",text_key:"vehicle_name",column_type:"select",data:u.vehicles}},null,8,["item","column"])])])]),e("p",ge,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:a[11]||(a[11]=(...o)=>t.saveRoute&&t.saveRoute(...o)),textContent:r(t.translate("Submit"))},null,8,be)])])):d("",!0)])])])])):d("",!0)])}const Te=W(it,[["render",pe]]);export{Te as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["map-GtxasIM0.min.js","index.es-sRIzCSW1.min.js","index.min.js","index.min.css","side-form-create-CbF3czHg.min.js","Field-r_1gxBn8.min.js","Field.min.css","side-form-update-CFYHWaJ9.min.js","form_field-_3oIkLCE.min.js","editable_map_location-c8PZshCG.min.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
