import{M as u,L as b}from"./Manager-fXtzwPpt.js";import{_ as v,k as _,r as g,o as r,c as s,a,x as h,t as y,d as o,j as w}from"./index-ljb0825Y.js";const p={name:"vue-medialibrary-field",components:{"vue-medialibrary-manager":u,"app-medialibrary-loader":b},props:{name:{type:String,required:!1},api_url:{type:String,required:!1},filepath:{type:Object|String,required:!1,default:()=>({})},types:{type:Object,required:!1,default:()=>({images:!0,files:!0})},filetypes:{type:Array,required:!1,default:()=>[]},helper:{type:String,required:!1}},setup(n){console.log(n.filepath);const i=_(),l=_(),e=_(),c=()=>{i.value=!i.value},f=m=>{i.value=!1,l.value=m.file_name,e.value=m.file_name,t()},d=()=>{e=l=null,emit("input",null)},t=()=>{emit("input",l)};return l.value=e.value,{insert:f,clear:d,change:t,showLibrary:c,showManager:i,file:l,content:e}}},k={class:"media-library-field"},x=["name","value"],L={key:1,class:"media-library-field__selector"},S={class:"media-library-field__selected__inner"},q={class:"w-full"},C=["src"],M={class:"block w-full"},B={class:"w-full flex",style:{margin:"2rem -0.5rem 0 -0.5rem"}},F={style:{"flex-grow":"1",padding:"0 0.5rem"}},j={style:{"flex-grow":"1",padding:"0 0.5rem"}};function N(n,i,l,e,c,f){const d=g("vue-medialibrary-manager");return r(),s("div",null,[a("div",k,[h(y(e.file)+" ",1),e.file?(r(),s("input",{key:e.file,name:l.name,type:"hidden",value:e.file},null,8,x)):o("",!0),e.content==null?(r(),s("div",L,[a("span",{onClick:i[0]||(i[0]=(...t)=>e.showLibrary&&e.showLibrary(...t)),class:"media-library-field__selector__button"},"Attach "+y(l.types.images&&l.types.files?"file":l.types.images&&!l.types.files?"image":"file"),1)])):o("",!0),e.file&&e.content?(r(),s("div",{key:e.file,class:"media-library-field__selected"},[a("div",S,[a("div",q,[a("div",null,[a("img",{src:e.file,style:{width:"auto",height:"auto","max-width":"180px"}},null,8,C)]),a("div",M,[a("div",B,[a("div",F,[a("span",{class:"media-library-field__selected__inner__details__button font-semibold",onClick:i[1]||(i[1]=(...t)=>e.showLibrary&&e.showLibrary(...t))},"Edit")]),a("div",j,[a("button",{onClick:i[2]||(i[2]=(...t)=>e.clear&&e.clear(...t)),class:"media-library-field__selected__inner__details__button media-library-field__selected__inner__details__button--delete"},"Remove")])])])])])])):o("",!0)]),e.showManager?(r(),w(d,{key:e.showManager,api_url:l.api_url,filetypes:l.filetypes,types:l.types,selected:n.value,selectable:!0,onClose:i[3]||(i[3]=t=>(e.showManager=!1,e.file=e.content=n.value)),onSelect:e.insert,onFailToFind:e.clear},null,8,["api_url","filetypes","types","selected","onSelect","onFailToFind"])):o("",!0)])}const A=v(p,[["render",N]]);export{A as f};
