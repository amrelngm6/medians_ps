const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["side-form-create-B2Ekk4lj.min.js","index.min.js","index.min.css","Field-DXr5lNQ3.min.js","Field.min.css","side-form-update-Bpfkw8M2.min.js","form_field-DiE37Nzp.min.js","editable_map_location-CbjDPe7S.min.js","map-CbOzg2Wr.min.js"])))=>i.map(i=>d[i]);
import{_ as N,H as $,L as tt,O as et,j as o,I as nt,r as k,c,o as l,x as z,a as r,z as P,f as O,F as q,e as G,b as e,T as H,ak as ot,q as T,K,A as Z,M as st,D as Q,al as B,am as at,t as D,u as V,d as n,g as lt,m as it,P as ct,S as dt,J as rt,w as J,v as _t,y as ut,k as mt,l as vt,s as U,Q as ht,R as ft}from"./index.min.js";import{e as pt}from"./editable_map_location-CbjDPe7S.min.js";const gt={components:{GoogleMap:et,Polyline:tt,CustomMarker:$},emits:["markerclicked"],setup(u,{emit:a}){const _=o(null),t=o(12),y=o([]),m=o([]),v=o([]),C=o({strokeColor:"#000000",strokeOpacity:.8,strokeWeight:2}),d=o(u.item),f=(h,w,g)=>{let p=JSON.parse(JSON.stringify(h));return p.icon=u.conf.url+"uploads/images/"+g,p.marker_position=w,p.drag=!1,p};(()=>{y.value=[f(d.value,{lat:d.value.start_latitude,lng:d.value.start_longitude},"yellow_pin.gif"),f(d.value,{lat:d.value.end_latitude,lng:d.value.end_longitude},"destination.svg")]})();const b=o(null),S=o(null),A=()=>{b.value=new window.google.maps.DirectionsService,S.value=new window.google.maps.DirectionsRenderer({draggable:!0,map,panel:document.getElementById("panel")}),E(mapOrigin.value,mapDestination.value,b.value,S.value)},E=(h,w,g,p)=>{g.route({origin:h,destination:w,travelMode:window.google.maps.TravelMode.DRIVING,avoidTolls:!0}).then(x=>{console.log(x);const j=R(x);v.value=j,m.value={path:j,geodesic:!0,strokeColor:"#000",strokeOpacity:.9,strokeWeight:2}}).catch(x=>{alert("Could not display directions due to: "+x)})},R=h=>{const w=h.routes[0].overview_polyline;return window.google.maps.geometry.encoding.decodePath(w).map(p=>({lat:p.lat(),lng:p.lng()}))};return nt(()=>{_.value={lat:d.value.start_latitude,lng:d.value.start_longitude},A()}),{markerClicked:h=>{a("markerclicked",h)},markers:y,mapCenter:_,mapZoom:t,polylinePath:m,routeCoordinates:v,polylineOptions:C}},props:["system_setting","item","conf"]},xt={class:"w-full overflow-auto"},yt={style:{"text-align":"center"}},Ct=["src"];function bt(u,a,_,t,y,m){const v=k("Polyline"),C=k("CustomMarker"),d=k("GoogleMap");return l(),c("div",xt,[t.mapCenter?(l(),z(d,{"api-key":_.system_setting.google_map_api,ref:"mapRef",center:t.mapCenter,key:`${t.mapCenter.lat},${t.mapCenter.lng}`,options:{zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,rotateControl:!0,fullscreenControl:!0},zoom:t.mapZoom,style:{width:"100%",height:"calc(100vh - 100px)"}},{default:P(()=>[O(v,{options:t.polylinePath},null,8,["options"]),(l(!0),c(q,null,G(t.markers,(f,s)=>(l(),z(C,{options:{position:f.marker_position},onClick:b=>t.markerClicked(f)},{default:P(()=>[e("div",yt,[e("img",{src:f.icon,width:"40",class:"rounded-full",height:"40",style:{"margin-top":"8px"}},null,8,Ct)])]),_:2},1032,["options","onClick"]))),256))]),_:1},8,["api-key","center","zoom"])):r("",!0)])}const wt=N(gt,[["render",bt]]),kt=T(()=>V(()=>import("./side-form-create-B2Ekk4lj.min.js"),__vite__mapDeps([0,1,2,3,4]))),It=T(()=>V(()=>import("./side-form-update-Bpfkw8M2.min.js"),__vite__mapDeps([5,1,2,3,4,6,7]))),St=T(()=>V(()=>import("./form_field-DiE37Nzp.min.js"),__vite__mapDeps([6,1,2,3,4,7]))),Pt={components:{datatabble:Q,SideFormCreate:kt,SideFormUpdate:It,close_icon:st,delete_icon:Z,car_icon:K,form_field:St,static_map:wt,dashboard_card_white:ot,tooltip:H},name:"Route trips",emits:["callback"],setup(u,{emit:a}){const _=o(!1),t=o(!1),y=o(!1),m=o({}),v=o("Info"),C=o({}),d=o({}),f=o(["Info","Confirm"]);u.item?(m.value=u.item,m.value.date=u.item.date??B()):m.value.date=B();const s=u.userslist?o(u.userslist):o([]),b=()=>{_.value=!0;var I=new URLSearchParams;let h=JSON.parse(JSON.stringify(m.value)),w=Object.keys(h),g,p;for(let x=0;x<w.length;x++)g=w[x],p=typeof h[g]=="object"?JSON.stringify(h[g]):h[g],I.append("params["+g+"]",p);I.append("type","BusinessApplicant.update"),it(I,"/api/update").then(x=>{_.value=!1,ct(x)})};return{loader:_,users:s,progressWidth:()=>dt(["driver_id","status"],m),showAddSide:t,showEditSide:y,content:C,fillable:f,center:d,activeItem:m,activeTab:v,rejectItem:()=>{window.confirm(D("Confirm and reject this member"))&&(m.value.status="rejected",b())},confirmItem:()=>{window.confirm(D("Confirm and add subscription to your business"))&&(m.value.status="approved",b())},translate:D,formatCustomTime:at,saveItem:b,back:()=>{a("callback")}}},props:["conf","path","system_setting","business_setting","setting","item","userslist","usertype","drivers","vehicles"]},Rt={class:"w-full overflow-auto"},Mt={class:"w-full relative"},Ot={class:"card w-full py-10"},zt={class:"w-full stepper stepper-links"},Tt={key:0,class:"w-full"},Vt={class:""},At={class:"flex w-full gap-6"},jt={key:0,class:"w-full"},Dt={class:"card w-full"},Et={class:"card-header"},Nt={key:0,class:"card-title m-0 flex gap-4"},Lt={class:"bg-light overflow-hidden rounded-full symbol-50px w-50px"},Wt=["src"],Ft={class:"w-full"},Bt=["textContent"],Jt=["textContent"],Ut={class:"card-body"},qt={class:"table-responsive table-card"},Gt={class:"table table-borderless align-middle mb-0 w-full"},Ht={key:0},Kt=["textContent"],Zt={class:"py-2"},Qt=["textContent"],Xt=["textContent"],Yt=["textContent"],$t=["textContent"],te=["textContent"],ee=["textContent"],ne=["textContent"],oe=["textContent"],se=["textContent"],ae={class:"font-bold py-2"},le=["textContent"],ie=["textContent"],ce=["textContent"],de=["textContent"],re=["textContent"],_e={class:"font-bold py-2"},ue=["textContent"],me=["textContent"],ve=["textContent"],he=["textContent"],fe=["textContent"],pe=["textContent"],ge=["textContent"],xe={key:0,class:"mx-auto flex gap-6 w-300px py-2"},ye={class:"text-center"},Ce=["textContent"],be={class:"text-center"},we=["textContent"];function ke(u,a,_,t,y,m){const v=k("close_icon"),C=k("static_map");return l(),c("div",Rt,[t.loader?(l(),c("div",{key:t.loader,class:"bg-white fixed w-full h-full top-0 left-0",style:{"z-index":"99999",opacity:".9"}},[...a[2]||(a[2]=[e("img",{class:"m-auto w-500px",src:"/uploads/loader.gif"},null,-1)])])):r("",!0),e("div",Mt,[O(v,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:t.back},null,8,["onClick"]),e("div",Ot,[e("div",zt,[t.activeItem?(l(),c("div",Tt,[e("div",Vt,[(l(),c("div",{class:"card-body pt-0 mx-auto",key:t.activeItem},[e("div",At,[t.activeItem.model?(l(),c("div",jt,[t.activeItem.model.route_location?(l(),z(C,{system_setting:_.system_setting,item:t.activeItem.model.route_location,key:t.activeItem,conf:_.conf},null,8,["system_setting","item","conf"])):r("",!0)])):r("",!0),e("div",Dt,[e("div",Et,[t.activeItem.model?(l(),c("div",Nt,[e("div",Lt,[e("img",{src:t.activeItem.model.picture,alt:"image",class:"h-10 w-10"},null,8,Wt)]),e("div",Ft,[e("h5",{class:"text-sm mb-0",textContent:n(t.translate("Customer Info"))},null,8,Bt),e("div",{class:"font-bold",textContent:n(t.activeItem.model.name)},null,8,Jt)])])):r("",!0)]),e("div",Ut,[e("div",qt,[e("table",Gt,[t.activeItem.model?(l(),c("tbody",Ht,[e("tr",null,[e("td",{class:"fw-medium py-2",textContent:n(t.translate("ID"))},null,8,Kt),e("td",Zt,[a[3]||(a[3]=lt("#",-1)),e("span",{id:"t-no",textContent:n(t.activeItem.applicant_id)},null,8,Qt)])]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:n(t.translate("First Name"))},null,8,Xt),e("td",{id:"t-client",class:"py-2",textContent:n(t.activeItem.model.name)},null,8,Yt)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:n(t.translate("Mobile"))},null,8,$t),e("td",{id:"d-date",class:"py-2",textContent:n(t.activeItem.model.mobile)},null,8,te)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:n(t.translate("email"))},null,8,ee),e("td",{id:"d-date",class:"py-2",textContent:n(t.activeItem.model.email)},null,8,ne)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:n(t.translate("gender"))},null,8,oe),e("td",{id:"d-date",class:"py-2",textContent:n(t.activeItem.model.gender)},null,8,se)]),e("tr",null,[e("td",ae,[e("span",{class:"font-bold text-lg",textContent:n(t.translate("Application info"))},null,8,le)]),a[4]||(a[4]=e("td",{class:"font-bold py-2"},[e("hr")],-1))]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:n(t.translate("Message"))},null,8,ie),e("td",{id:"d-date",class:"py-2 font-bold",textContent:n(t.activeItem.message)},null,8,ce)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:n(t.translate("Status"))},null,8,de),e("td",{id:"d-date",class:"py-2 font-bold",textContent:n(t.activeItem.status)},null,8,re)]),e("tr",null,[e("td",_e,[e("span",{class:"font-bold text-lg",textContent:n(t.translate("Subscription info"))},null,8,ue)]),a[5]||(a[5]=e("td",{class:"font-bold py-2"},[e("hr")],-1))]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:n(t.translate("Package"))},null,8,me),t.activeItem.subscription&&t.activeItem.subscription.package?(l(),c("td",{key:0,id:"d-date",class:"py-2 font-bold",textContent:n(t.activeItem.subscription.package.name)},null,8,ve)):r("",!0)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:n(t.translate("total_cost"))},null,8,he),t.activeItem.subscription?(l(),c("td",{key:0,id:"d-date",class:"py-2 font-bold",textContent:n(t.activeItem.subscription.total_cost)},null,8,fe)):r("",!0)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:n(t.translate("payment_type"))},null,8,pe),t.activeItem.subscription?(l(),c("td",{key:0,id:"d-date",class:"py-2 font-bold",textContent:n(t.activeItem.subscription.payment_type)},null,8,ge)):r("",!0)])])):r("",!0)])])])])])])),t.activeItem.status=="new"?(l(),c("div",xe,[e("div",ye,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:a[0]||(a[0]=(...d)=>t.confirmItem&&t.confirmItem(...d)),textContent:n(t.translate("Approve"))},null,8,Ce)]),e("div",be,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center rounded-lg border-1 border-dark text-dark",onClick:a[1]||(a[1]=(...d)=>t.rejectItem&&t.rejectItem(...d)),textContent:n(t.translate("Reject"))},null,8,we)])])):r("",!0)])])):r("",!0)])])])])}const Ie=N(Pt,[["render",ke]]),Se=T(()=>V(()=>import("./map-CbOzg2Wr.min.js"),__vite__mapDeps([8,1,2]))),Pe=T(()=>V(()=>import("./form_field-DiE37Nzp.min.js"),__vite__mapDeps([6,1,2,3,4,7]))),Re={components:{datatabble:Q,maps:Se,delete_icon:Z,car_icon:K,route_icon:rt,form_field:Pe,editable_map_location:pt,model_applicant_wizard:Ie,tooltip:H},name:"Routes",setup(u){const a=u.conf.url+u.path+"?load=json",_=o(!1),t=o({}),y=o({}),m=o({}),v=o(!1),C=o(["Info","Time","Start location","End location","model"]),d=o([]),f=o(!1),s=o(""),b=o(""),S=o("#"),A=()=>{_.value=!1};(()=>{mt(a).then(i=>{y.value=JSON.parse(JSON.stringify(i)),S.value=y.value.columns[1].value})})();const R=async()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>{t.value.start_latitude=i.coords.latitude,t.value.start_longitude=i.coords.longitude,t.value.end_latitude=i.coords.latitude,t.value.end_longitude=i.coords.longitude},i=>{t.value.start_latitude=30.06,t.value.start_longitude=31.21,t.value.end_latitude=30.06,t.value.end_longitude=31.21,U(i.message)}):U("location error")},I=()=>{t.value={},v.value=!0,R()},h=async()=>{let i=s.value.length>3?await ft(u.system_setting.google_map_api,s.value,u.business_setting.country):"";d.value=i.predictions},w=async i=>{t.value.start_latitude=i.lat(),t.value.start_longitude=i.lng(),t.value.start_address=await ht(i.lat(),i.lng())},g=i=>{t.value.end_latitude=i.lat(),t.value.end_longitude=i.lng()},p=(i,M,L)=>{},x=(i,M)=>{switch(i){case"view":break;case"edit":t.value=M,v.value=!0;break;case"delete":vt("applicant_id",M,"BusinessApplicant.delete");break;case"close":_.value=!1,t.value={};break}},j=o([]),X=async i=>{t.value.start_address=i.description;const M=new google.maps.places.PlacesService(document.createElement("div"));let L=i.place_id;M.getDetails({placeId:L},(W,Y)=>{if(Y===google.maps.places.PlacesServiceStatus.OK&&W){const F=W.geometry.location;t.value.start_longitude=F.lng(),t.value.start_latitude=F.lat(),d.value=[],f.value=!1}else console.error("Failed to fetch place details")})};return{showTip:o({}),setPlaceMarker:X,showPlaceSearch:f,startPlaceChanged:h,start_placeSearch:s,places:d,waypoints:j,showEditSide:_,url:a,content:y,fillable:C,center:m,activeItem:t,searchValue:b,searchField:S,translate:D,clickMarker:p,updateStartMarker:w,updateEndMarker:g,getUserLocation:R,showWizard:v,closeSide:A,addRouteWizard:I,handleAction:x}},props:["path","lang","system_setting","business_setting","setting","conf","auth","currency"]},Me={class:"w-full flex overflow-auto"},Oe={key:0,class:"w-full relative"},ze={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},Te=["textContent"],Ve={class:"notice d-flex bg-light-warning rounded border-warning border border-dashed mb-12 p-6"},Ae={class:"d-flex flex-stack flex-grow-1"},je={class:"fw-semibold"},De=["textContent"],Ee={class:"fs-6 text-gray-700"},Ne=["innerHTML"],Le={key:1,class:""},We={class:"card"},Fe={class:"card-body"},Be={class:"card-px text-center pt-15 pb-15"},Je=["textContent"],Ue=["textContent"],qe={key:2,class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},Ge={class:"w-full bg-white"},He={class:"card-header align-items-center py-5 gap-2 gap-md-5 w-full flex px-4"},Ke={class:"card-title"},Ze={class:"d-flex align-items-center position-relative my-1"},Qe={class:"card-toolbar flex-row-fluid justify-content-end gap-5"},Xe={class:"w-150px"},Ye=["textContent","value"],$e=["src"],tn=["textContent"],en=["textContent"],nn=["textContent"],on=["onClick"],sn=["onClick"];function an(u,a,_,t,y,m){const v=k("vue-feather"),C=k("model_applicant_wizard"),d=k("delete_icon"),f=k("datatabble");return l(),c("div",Me,[t.content?(l(),c("div",Oe,[e("div",ze,[e("h1",{class:"font-bold text-lg w-full",textContent:n(t.content.title)},null,8,Te)]),e("div",Ve,[O(v,{type:"alert-octagon",class:"ki-duotone ki-information fs-2tx text-warning me-4"}),e("div",Ae,[e("div",je,[e("h4",{class:"text-gray-900 fw-bold",textContent:n(t.translate("Important"))},null,8,De),e("div",Ee,[e("div",{innerHTML:t.translate("Users applicants note")},null,8,Ne)])])])]),t.showWizard?(l(),z(C,{onCallback:a[0]||(a[0]=s=>t.showWizard=!1),currency:_.currency,key:t.showWizard,system_setting:_.system_setting,item:t.activeItem,business_setting:_.business_setting,conf:_.conf},null,8,["currency","system_setting","item","business_setting","conf"])):r("",!0),!t.showWizard&&t.content.items&&!t.content.items.length?(l(),c("div",Le,[e("div",We,[e("div",Fe,[e("div",Be,[e("h2",{class:"fs-2x fw-bold mb-0",textContent:n(t.content.title)},null,8,Je),e("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:n(t.translate("Here you can find the sent Users applicantions to join your team"))},null,8,Ue)]),a[3]||(a[3]=e("div",{class:"text-center pb-15 px-5"},[e("img",{src:"/uploads/img/start-wizard.png",alt:"",class:"mx-auto mw-100 h-200px h-sm-325px"})],-1))])])])):r("",!0),t.content.items&&!t.showWizard&&t.content.items.length?(l(),c("main",qe,[e("div",Ge,[e("div",He,[e("div",Ke,[e("div",Ze,[J(e("input",{type:"text","onUpdate:modelValue":a[1]||(a[1]=s=>t.searchValue=s),"data-kt-ecommerce-order-filter":"search",class:"form-control form-control-solid w-250px ps-12",placeholder:"Search Report"},null,512),[[_t,t.searchValue]])])]),e("div",Qe,[e("div",Xe,[J(e("select",{"onUpdate:modelValue":a[2]||(a[2]=s=>t.searchField=s),class:"form-select form-select-solid select2-hidden-accessible","data-control":"select2","data-hide-search":"true","data-placeholder":"Rating","data-kt-ecommerce-order-filter":"rating","data-select2-id":"select2-data-9-zple",tabindex:"-1","aria-hidden":"true","data-kt-initialized":"1"},[(l(!0),c(q,null,G(t.content.columns,s=>(l(),c("option",{textContent:n(s.text),value:s.value},null,8,Ye))),256))],512),[[ut,t.searchField]])])])]),t.content.columns?(l(),z(f,{key:0,"search-field":t.searchField,"search-value":t.searchValue,alternating:"",class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":t.translate("is_rtl"),"fixed-checkbox":"",headers:t.content.columns,items:t.content.items},{"item-picture":P(s=>[e("img",{src:s.model.picture,class:"w-8 h-8 rounded-full"},null,8,$e)]),"item-status":P(s=>[s.status=="approved"?(l(),c("span",{key:0,class:"bg-success px-2 py-1 rounded-lg text-white",textContent:n(s.status)},null,8,tn)):r("",!0),s.status=="rejected"?(l(),c("span",{key:1,class:"bg-danger px-2 py-1 rounded-lg text-white",textContent:n(s.status)},null,8,en)):r("",!0),s.status=="new"?(l(),c("span",{key:2,class:"bg-info px-2 py-1 rounded-lg text-white",textContent:n(s.status)},null,8,nn)):r("",!0)]),"item-edit":P(s=>[s.not_editable?r("",!0):(l(),c("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:b=>t.handleAction("edit",s)},[O(v,{class:"w-5",type:"edit"})],8,on))]),"item-delete":P(s=>[s.not_removeable?r("",!0):(l(),c("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:b=>t.handleAction("delete",s)},[O(d,{class:"w-5"})],8,sn))]),_:1},8,["search-field","search-value","body-text-direction","headers","items"])):r("",!0)])])):r("",!0)])):r("",!0)])}const rn=N(Re,[["render",an]]);export{rn as default};
