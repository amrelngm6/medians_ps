import{_ as L,D as F,e as G,y as J,z as K,f as l,t as q,r as x,A as H,o,c as n,B as U,l as Y,g as A,h as r,i as a,j as u,C as w,F as Q,E,k as X,a as C,d as D,b as B,m as Z,s as R,G as $,H as ee,p as te}from"./index.min.js";import{e as se}from"./editable_map_location-uO2bqx8u.min.js";import ae from"./routeWizard-pBgxYEcV.min.js";import"./index.es-m-TqRCSU.min.js";const oe=D(()=>B(()=>import("./map-4NrSjs5L.min.js"),__vite__mapDeps([0,1,2,3]))),ne=D(()=>B(()=>import("./form_field-aDMdqgw0.min.js"),__vite__mapDeps([4,2,3,5,6,7,1]))),le={components:{datatabble:F,maps:oe,delete_icon:G,car_icon:J,route_icon:K,form_field:ne,editable_map_location:se,route_wizard:ae},name:"Routes",setup(_){const c=_.conf.url+_.path+"?load=json",d=l(!1),e=l({}),y=l({}),z=l({}),v=l(!1),p=l(["Info","Time","Start location","End location","Driver"]),h=l([]),b=l(!1),g=l(""),k=()=>{d.value=!1};(()=>{Z(c).then(t=>{y.value=JSON.parse(JSON.stringify(t))})})();const i=async()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{e.value.start_latitude=t.coords.latitude,e.value.start_longitude=t.coords.longitude,e.value.end_latitude=t.coords.latitude,e.value.end_longitude=t.coords.longitude},t=>{e.value.start_latitude=30.06,e.value.start_longitude=31.21,e.value.end_latitude=30.06,e.value.end_longitude=31.21,R(t.message)}):R("location error")},m=()=>{e.value={},v.value=!0,i()},N=async()=>{let t=g.value.length>3?await $(_.system_setting.google_map_api,g.value,_.business_setting.country):"";h.value=t.predictions},T=async t=>{e.value.start_latitude=t.lat(),e.value.start_longitude=t.lng(),e.value.start_address=await ee(t.lat(),t.lng())},V=t=>{e.value.end_latitude=t.lat(),e.value.end_longitude=t.lng()},I=(t,f,S)=>{},M=(t,f)=>{switch(t){case"view":break;case"edit":e.value=f,v.value=!0;break;case"delete":te("route_id",f,"Route.delete");break;case"close":d.value=!1,e.value={};break}},O=l([]);return{setPlaceMarker:async t=>{e.value.start_address=t.description;const f=new google.maps.places.PlacesService(document.createElement("div"));let S=t.place_id;f.getDetails({placeId:S},(P,j)=>{if(j===google.maps.places.PlacesServiceStatus.OK&&P){const W=P.geometry.location;e.value.start_longitude=W.lng(),e.value.start_latitude=W.lat(),h.value=[],b.value=!1}else console.error("Failed to fetch place details")})},showPlaceSearch:b,startPlaceChanged:N,start_placeSearch:g,places:h,waypoints:O,showEditSide:d,url:c,content:y,fillable:p,center:z,activeItem:e,translate:q,clickMarker:I,updateStartMarker:T,updateEndMarker:V,getUserLocation:i,showWizard:v,closeSide:k,addRouteWizard:m,handleAction:M}},props:["path","lang","system_setting","business_setting","setting","conf","auth"]},re={class:"w-full flex overflow-auto"},ce={key:0,class:"w-full relative"},ie={key:1,class:""},de={class:"card"},ue={class:"card-body"},_e={class:"card-px text-center pt-15 pb-15"},ve=["textContent"],he=["textContent"],ge=["textContent"],me={class:"text-center pb-15 px-5"},fe=["src"],xe={key:2,class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},be={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},we=["textContent"],ye=a("hr",{class:"mt-2"},null,-1),pe={class:"w-full"},ke=["src"],Ce={class:"w-full h-8 relative flex"},ze=["src"],Se=["textContent"],Pe=["onClick"],We=["onClick"];function Ae(_,c,d,e,y,z){const v=x("route_wizard"),p=x("route_icon"),h=x("vue-feather"),b=x("delete_icon"),g=x("datatabble"),k=H("tooltip");return o(),n("div",re,[e.content?(o(),n("div",ce,[U((o(),n("button",null,[Y("Test hover")])),[[k,"You have  new messages."]]),e.showWizard?(o(),A(v,{onCallback:c[0]||(c[0]=s=>e.showWizard=!1),key:e.showWizard,drivers:e.content.drivers,vehicles:e.content.vehicles,system_setting:d.system_setting,item:e.activeItem,business_setting:d.business_setting},null,8,["drivers","vehicles","system_setting","item","business_setting"])):r("",!0),!e.showWizard&&e.content.items&&!e.content.items.length?(o(),n("div",ie,[a("div",de,[a("div",ue,[a("div",_e,[a("h2",{class:"fs-2x fw-bold mb-0",textContent:u(e.content.title)},null,8,ve),a("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:u(e.translate("Add your first route using this below wizard"))},null,8,he),a("a",{textContent:u(e.translate("add_new")),onClick:c[1]||(c[1]=(...s)=>e.addRouteWizard&&e.addRouteWizard(...s)),href:"javascript:;",class:"text-white btn btn-primary er fs-6 px-8 py-4"},null,8,ge)]),a("div",me,[a("img",{src:"/src/asset/img/1.png",alt:"",class:"mx-auto mw-100 h-200px h-sm-325px"},null,8,fe)])])])])):r("",!0),e.content.items&&!e.showWizard?(o(),n("main",xe,[a("div",be,[a("h1",{class:"font-bold text-lg w-full",textContent:u(e.content.title)},null,8,we),e.showWizard?r("",!0):(o(),n("a",{key:0,href:"javascript:;",class:"uppercase p-2 mx-2 text-center text-white w-32 rounded-lg bg-danger",onClick:c[2]||(c[2]=(...s)=>e.addRouteWizard&&e.addRouteWizard(...s))},u(e.translate("add_new")),1))]),ye,a("div",pe,[e.content.columns?(o(),A(g,{key:0,class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":e.translate("lang")=="ar"?"right":"left","fixed-checkbox":"",headers:e.content.columns,items:e.content.items},{"item-picture":w(s=>[a("img",{src:s.picture,class:"w-8 h-8 rounded-full"},null,8,ke)]),"item-route_locations":w(s=>[a("div",Ce,[(o(!0),n(Q,null,X(s.route_locations,(i,m)=>(o(),n("div",{style:E("left: "+20*m+"px"),class:"rounded-full w-8 h-8 left-0 top-0 absolute"},[m<3?(o(),n("img",{key:m,class:"rounded-full w-8 h-8 rounded-[50px] border-2 border-purple-800",src:i.student&&i.student.picture?i.student.picture:"https://via.placeholder.com/37x37"},null,8,ze)):r("",!0)],4))),256)),a("span",{class:"flex absolute pt-2",style:E("left: "+(20*(s.route_locations.length<3?s.route_locations.length:3)+20)+"px")},[C(p),s.route_locations?(o(),n("span",{key:0,class:"font-semibold px-1",textContent:u(s.route_locations.length)},null,8,Se)):r("",!0)],4)])]),"item-edit":w(s=>[s.not_editable?r("",!0):(o(),n("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:i=>e.handleAction("edit",s)},[C(h,{class:"w-5",type:"edit"})],8,Pe))]),"item-delete":w(s=>[s.not_removeable?r("",!0):(o(),n("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:i=>e.handleAction("delete",s)},[C(b,{class:"w-5"})],8,We))]),_:1},8,["body-text-direction","headers","items"])):r("",!0)])])):r("",!0)])):r("",!0)])}const Te=L(le,[["render",Ae]]);export{Te as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["map-4NrSjs5L.min.js","index.es-m-TqRCSU.min.js","index.min.js","index.min.css","form_field-aDMdqgw0.min.js","Field-lMAfcfj3.min.js","Field.min.css","editable_map_location-uO2bqx8u.min.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
