import{_ as A,f as n,R as $,r as I,o as l,c as d,g as R,E as P,a as E,F as J,k as B,i as e,h as m,S as tt,T as et,D as q,J as st,e as G,y as H,ak as ot,al as N,t as z,am as nt,j as o,l as at,d as T,b as V,n as lt,K as it,L as ct,z as dt,A as W,B as rt,C as _t,m as ut,s as U,H as mt,I as ht,p as vt}from"./index.min.js";import{e as ft}from"./editable_map_location-h8_ViIKg.min.js";import{O as gt,L as pt,j as xt}from"./index.es-9divdo6P.min.js";import{t as K}from"./tooltip-s9Xa9pgY.min.js";const yt={components:{GoogleMap:gt,Polyline:pt,CustomMarker:xt},emits:["markerclicked"],setup(_,{emit:c}){const u=n(null),t=n(12),r=n([]),b=n([]),v=n([]),p=n({strokeColor:"#000000",strokeOpacity:.8,strokeWeight:2}),i=n(_.item),g=(f,x="lat",k="lng",h)=>{let y=JSON.parse(JSON.stringify(f));return y.icon=_.conf.url+"uploads/images/"+h,y.marker_position={lat:parseFloat(f[x]),lng:parseFloat(f[k])},y.drag=!1,y};(()=>{r.value=[g(i.value,"start_latitude","start_longitude","car.svg"),g(i.value,"end_latitude","end_longitude","destination.svg")]})();const w=n({lat:0,lng:0}),S=n({lat:0,lng:0}),j=async()=>{const x=`https://maps.googleapis.com/maps/api/directions/json?origin=${w.value.lat},${w.value.lng}&destination=${S.value.lat},${S.value.lng}&key=${_.system_setting.google_map_api}`;try{tt.get(x).then(h=>{if(h.data){const y=h.data,C=et(y.routes[0].overview_polyline.points);v.value=C,b.value={path:C,geodesic:!0,strokeColor:"#000",strokeOpacity:.9,strokeWeight:2}}else console.error("Failed to fetch route:",h.statusText)}).catch(h=>{console.error("Error fetching data:",h)});const k=await fetch(x)}catch(k){console.error("Error fetching route:",k)}};return $(()=>{u.value={lat:i.value.start_latitude,lng:i.value.start_longitude},w.value={lat:i.value.start_latitude,lng:i.value.start_longitude},S.value={lat:i.value.end_latitude,lng:i.value.end_longitude},j()}),{markerClicked:f=>{c("markerclicked",f)},markers:r,mapCenter:u,mapZoom:t,polylinePath:b,routeCoordinates:v,polylineOptions:p}},props:["system_setting","item","conf"]},Ct={class:"w-full overflow-auto"},bt={style:{"text-align":"center"}},wt=["src"];function kt(_,c,u,t,r,b){const v=I("Polyline"),p=I("CustomMarker"),i=I("GoogleMap");return l(),d("div",Ct,[t.mapCenter?(l(),R(i,{"api-key":u.system_setting.google_map_api,ref:"mapRef",center:t.mapCenter,key:`${t.mapCenter.lat},${t.mapCenter.lng}`,options:{zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,rotateControl:!0,fullscreenControl:!0},zoom:t.mapZoom,style:{width:"100%",height:"calc(100vh - 100px)"}},{default:P(()=>[E(v,{options:t.polylinePath},null,8,["options"]),(l(!0),d(J,null,B(t.markers,(g,s)=>(l(),R(p,{options:{position:g.marker_position},onClick:w=>t.markerClicked(g)},{default:P(()=>[e("div",bt,[e("img",{src:g.icon,width:"40",class:"rouned-full",height:"40",style:{"margin-top":"8px"}},null,8,wt)])]),_:2},1032,["options","onClick"]))),256))]),_:1},8,["api-key","center","zoom"])):m("",!0)])}const It=A(yt,[["render",kt]]),St=T(()=>V(()=>import("./side-form-create-NoiIG-sU.min.js"),__vite__mapDeps([0,1,2,3,4]))),Pt=T(()=>V(()=>import("./side-form-update-2WOW3MNX.min.js"),__vite__mapDeps([5,1,2,3,4,6,7,8]))),Ot=T(()=>V(()=>import("./form_field-1fpjNFy2.min.js"),__vite__mapDeps([6,1,2,3,4,7,8]))),Et={components:{datatabble:q,SideFormCreate:St,SideFormUpdate:Pt,close_icon:st,delete_icon:G,car_icon:H,form_field:Ot,static_map:It,dashboard_card_white:ot,tooltip:K},name:"Route trips",emits:["callback"],setup(_,{emit:c}){const u=n(!1),t=n(!1),r=n({}),b=n("Info"),v=n({}),p=n({}),i=n(["Info","Confirm"]);_.item?(r.value=_.item,r.value.date=_.item.date??N()):r.value.date=N();const g=_.userslist?n(_.userslist):n([]),s=()=>{var f=new URLSearchParams;let x=JSON.parse(JSON.stringify(r.value)),k=Object.keys(x),h,y;for(let C=0;C<k.length;C++)h=k[C],y=typeof x[h]=="object"?JSON.stringify(x[h]):x[h],f.append("params["+h+"]",y);f.append("type","BusinessApplicant.update"),lt(f,"/api/update").then(C=>{it(C)})};return{users:g,progressWidth:()=>ct(["driver_id","status"],r),showAddSide:u,showEditSide:t,content:v,fillable:i,center:p,activeItem:r,activeTab:b,rejectItem:()=>{window.confirm(z("Confirm and reject this driver"))&&(r.value.status="rejected",s())},confirmItem:()=>{window.confirm(z("Confirm and add driver to your team"))&&(r.value.status="approved",s())},translate:z,formatCustomTime:nt,saveItem:s,back:()=>{c("callback")}}},props:["conf","path","system_setting","business_setting","setting","item","userslist","usertype","drivers","vehicles"]},Rt={class:"w-full flex overflow-auto"},Tt={class:"w-full relative"},Vt={class:"card w-full py-10"},jt={class:"w-full stepper stepper-links"},zt={key:0,class:"w-full"},At={class:""},Mt={class:"flex w-full gap-6"},Dt={key:0},Lt={class:"card"},Ft={class:"card-header"},Nt={key:0,class:"card-title m-0 flex gap-4"},Wt={class:"bg-light overflow-hidden rounded-full symbol-50px w-50px"},Ut=["src"],Jt={class:"w-full"},Bt=["textContent"],qt=["textContent"],Gt={class:"card-body"},Ht={class:"table-responsive table-card"},Kt={class:"table table-borderless align-middle mb-0 w-full"},Zt={key:0},Qt=["textContent"],Xt={class:"py-2"},Yt=["textContent"],$t=["textContent"],te=["textContent"],ee=["textContent"],se=["textContent"],oe=["textContent"],ne=["textContent"],ae=["textContent"],le=["textContent"],ie={class:"font-bold py-2"},ce=["textContent"],de=e("td",{class:"font-bold py-2"},[e("hr")],-1),re=["textContent"],_e=["textContent"],ue=["textContent"],me=["textContent"],he=["textContent"],ve=["textContent"],fe=["textContent"],ge=["textContent"],pe={class:"mx-auto flex gap-6 w-300px"},xe={class:"text-center"},ye=["textContent"],Ce={class:"text-center"},be=["textContent"];function we(_,c,u,t,r,b){const v=I("close_icon"),p=I("static_map");return l(),d("div",Rt,[e("div",Tt,[E(v,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:t.back},null,8,["onClick"]),e("div",Vt,[e("div",jt,[t.activeItem?(l(),d("div",zt,[e("div",At,[(l(),d("div",{class:"card-body pt-0 mx-auto max-w-xl",key:t.activeItem},[e("div",Mt,[t.activeItem.model?(l(),d("div",Dt,[t.activeItem.model.route_location?(l(),R(p,{system_setting:u.system_setting,item:t.activeItem.model.route_location,key:t.activeItem,conf:u.conf},null,8,["system_setting","item","conf"])):m("",!0)])):m("",!0),e("div",Lt,[e("div",Ft,[t.activeItem.model?(l(),d("div",Nt,[e("div",Wt,[e("img",{src:t.activeItem.model.picture,alt:"image",class:""},null,8,Ut)]),e("div",Jt,[e("h5",{class:"text-sm mb-0",textContent:o(t.translate("Customer Info"))},null,8,Bt),e("div",{class:"font-bold",textContent:o(t.activeItem.model.name)},null,8,qt)])])):m("",!0)]),e("div",Gt,[e("div",Ht,[e("table",Kt,[t.activeItem.model?(l(),d("tbody",Zt,[e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("ID"))},null,8,Qt),e("td",Xt,[at("#"),e("span",{id:"t-no",textContent:o(t.activeItem.applicant_id)},null,8,Yt)])]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("First Name"))},null,8,$t),e("td",{id:"t-client",class:"py-2",textContent:o(t.activeItem.model.name)},null,8,te)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("mobie"))},null,8,ee),e("td",{id:"d-date",class:"py-2",textContent:o(t.activeItem.model.mobile)},null,8,se)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("email"))},null,8,oe),e("td",{id:"d-date",class:"py-2",textContent:o(t.activeItem.model.email)},null,8,ne)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("gender"))},null,8,ae),e("td",{id:"d-date",class:"py-2",textContent:o(t.activeItem.model.gender)},null,8,le)]),e("tr",null,[e("td",ie,[e("span",{class:"font-bold text-lg",textContent:o(t.translate("Application info"))},null,8,ce)]),de]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("Message"))},null,8,re),e("td",{id:"d-date",class:"py-2 font-bold",textContent:o(t.activeItem.message)},null,8,_e)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("Status"))},null,8,ue),e("td",{id:"d-date",class:"py-2 font-bold",textContent:o(t.activeItem.status)},null,8,me)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("Created at"))},null,8,he),e("td",{id:"d-date",class:"py-2",textContent:o(t.activeItem.created_at)},null,8,ve)]),e("tr",null,[e("td",{class:"fw-medium py-2",textContent:o(t.translate("Last update"))},null,8,fe),e("td",{id:"d-date",class:"py-2",textContent:o(t.activeItem.updated_at)},null,8,ge)])])):m("",!0)])])])])])])),e("div",pe,[e("div",xe,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[0]||(c[0]=(...i)=>t.confirmItem&&t.confirmItem(...i)),textContent:o(t.translate("Approve"))},null,8,ye)]),e("div",Ce,[e("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center rounded-lg border-1 border-dark text-dark",onClick:c[1]||(c[1]=(...i)=>t.rejectItem&&t.rejectItem(...i)),textContent:o(t.translate("Reject"))},null,8,be)])])])])):m("",!0)])])])])}const ke=A(Et,[["render",we]]),Ie=T(()=>V(()=>import("./map-b2mjEKBi.min.js"),__vite__mapDeps([9,8,1,2]))),Se=T(()=>V(()=>import("./form_field-1fpjNFy2.min.js"),__vite__mapDeps([6,1,2,3,4,7,8]))),Pe={components:{datatabble:q,maps:Ie,delete_icon:G,car_icon:H,route_icon:dt,form_field:Se,editable_map_location:ft,model_applicant_wizard:ke,tooltip:K},name:"Routes",setup(_){const c=_.conf.url+_.path+"?load=json",u=n(!1),t=n({}),r=n({}),b=n({}),v=n(!1),p=n(["Info","Time","Start location","End location","model"]),i=n([]),g=n(!1),s=n(""),w=n(""),S=n("#"),j=()=>{u.value=!1};(()=>{ut(c).then(a=>{r.value=JSON.parse(JSON.stringify(a)),S.value=r.value.columns[1].value})})();const f=async()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(a=>{t.value.start_latitude=a.coords.latitude,t.value.start_longitude=a.coords.longitude,t.value.end_latitude=a.coords.latitude,t.value.end_longitude=a.coords.longitude},a=>{t.value.start_latitude=30.06,t.value.start_longitude=31.21,t.value.end_latitude=30.06,t.value.end_longitude=31.21,U(a.message)}):U("location error")},x=()=>{t.value={},v.value=!0,f()},k=async()=>{let a=s.value.length>3?await mt(_.system_setting.google_map_api,s.value,_.business_setting.country):"";i.value=a.predictions},h=async a=>{t.value.start_latitude=a.lat(),t.value.start_longitude=a.lng(),t.value.start_address=await ht(a.lat(),a.lng())},y=a=>{t.value.end_latitude=a.lat(),t.value.end_longitude=a.lng()},C=(a,O,D)=>{},Z=(a,O)=>{switch(a){case"view":break;case"edit":t.value=O,v.value=!0;break;case"delete":vt("route_id",O,"Route.delete");break;case"close":u.value=!1,t.value={};break}},Q=n([]),X=async a=>{t.value.start_address=a.description;const O=new google.maps.places.PlacesService(document.createElement("div"));let D=a.place_id;O.getDetails({placeId:D},(L,Y)=>{if(Y===google.maps.places.PlacesServiceStatus.OK&&L){const F=L.geometry.location;t.value.start_longitude=F.lng(),t.value.start_latitude=F.lat(),i.value=[],g.value=!1}else console.error("Failed to fetch place details")})};return{showTip:n({}),setPlaceMarker:X,showPlaceSearch:g,startPlaceChanged:k,start_placeSearch:s,places:i,waypoints:Q,showEditSide:u,url:c,content:r,fillable:p,center:b,activeItem:t,searchValue:w,searchField:S,translate:z,clickMarker:C,updateStartMarker:h,updateEndMarker:y,getUserLocation:f,showWizard:v,closeSide:j,addRouteWizard:x,handleAction:Z}},props:["path","lang","system_setting","business_setting","setting","conf","auth"]},Oe={class:"w-full flex overflow-auto"},Ee={key:0,class:"w-full relative"},Re={key:1,class:""},Te={class:"card"},Ve={class:"card-body"},je={class:"card-px text-center pt-15 pb-15"},ze=["textContent"],Ae=["textContent"],Me={class:"text-center pb-15 px-5"},De=["src"],Le={key:2,class:"flex-1 overflow-x-hidden overflow-y-auto w-full relative"},Fe={class:"px-4 mb-6 py-4 rounded-lg shadow-md bg-white dark:bg-gray-700 flex w-full"},Ne=["textContent"],We={class:"notice d-flex bg-light-warning rounded border-warning border border-dashed mb-12 p-6"},Ue={class:"d-flex flex-stack flex-grow-1"},Je={class:"fw-semibold"},Be=["textContent"],qe={class:"fs-6 text-gray-700"},Ge=["innerHTML"],He={class:"w-full bg-white"},Ke={class:"card-header align-items-center py-5 gap-2 gap-md-5 w-full flex px-4"},Ze={class:"card-title"},Qe={class:"d-flex align-items-center position-relative my-1"},Xe={class:"card-toolbar flex-row-fluid justify-content-end gap-5"},Ye={class:"w-150px"},$e=["textContent","value"],ts=["src"],es=["textContent"],ss=["textContent"],os=["textContent"],ns=["onClick"],as=["onClick"];function ls(_,c,u,t,r,b){const v=I("model_applicant_wizard"),p=I("vue-feather"),i=I("delete_icon"),g=I("datatabble");return l(),d("div",Oe,[t.content?(l(),d("div",Ee,[t.showWizard?(l(),R(v,{onCallback:c[0]||(c[0]=s=>t.showWizard=!1),key:t.showWizard,system_setting:u.system_setting,item:t.activeItem,business_setting:u.business_setting,conf:u.conf},null,8,["system_setting","item","business_setting","conf"])):m("",!0),!t.showWizard&&t.content.items&&!t.content.items.length?(l(),d("div",Re,[e("div",Te,[e("div",Ve,[e("div",je,[e("h2",{class:"fs-2x fw-bold mb-0",textContent:o(t.content.title)},null,8,ze),e("p",{class:"text-gray-400 fs-4 font-semibold py-7",textContent:o(t.translate("Here you can find the sent Users applicantions to join your team"))},null,8,Ae)]),e("div",Me,[e("img",{src:"/src/asset/img/1.png",alt:"",class:"mx-auto mw-100 h-200px h-sm-325px"},null,8,De)])])])])):m("",!0),t.content.items&&!t.showWizard?(l(),d("main",Le,[e("div",Fe,[e("h1",{class:"font-bold text-lg w-full",textContent:o(t.content.title)},null,8,Ne)]),e("div",We,[E(p,{type:"alert-octagon",class:"ki-duotone ki-information fs-2tx text-warning me-4"}),e("div",Ue,[e("div",Je,[e("h4",{class:"text-gray-900 fw-bold",textContent:o(t.translate("Important"))},null,8,Be),e("div",qe,[e("div",{innerHTML:t.translate("Users applicants note")},null,8,Ge)])])])]),e("div",He,[e("div",Ke,[e("div",Ze,[e("div",Qe,[W(e("input",{type:"text","onUpdate:modelValue":c[1]||(c[1]=s=>t.searchValue=s),"data-kt-ecommerce-order-filter":"search",class:"form-control form-control-solid w-250px ps-12",placeholder:"Search Report"},null,512),[[rt,t.searchValue]])])]),e("div",Xe,[e("div",Ye,[W(e("select",{"onUpdate:modelValue":c[2]||(c[2]=s=>t.searchField=s),class:"form-select form-select-solid select2-hidden-accessible","data-control":"select2","data-hide-search":"true","data-placeholder":"Rating","data-kt-ecommerce-order-filter":"rating","data-select2-id":"select2-data-9-zple",tabindex:"-1","aria-hidden":"true","data-kt-initialized":"1"},[(l(!0),d(J,null,B(t.content.columns,s=>(l(),d("option",{textContent:o(s.text),value:s.value},null,8,$e))),256))],512),[[_t,t.searchField]])])])]),t.content.columns?(l(),R(g,{key:0,"search-field":t.searchField,"search-value":t.searchValue,alternating:"",class:"align-middle fs-6 gy-5 table table-row-dashed px-6","body-text-direction":t.translate("lang")=="ar"?"right":"left","fixed-checkbox":"",headers:t.content.columns,items:t.content.items},{"item-picture":P(s=>[e("img",{src:s.model.picture,class:"w-8 h-8 rounded-full"},null,8,ts)]),"item-status":P(s=>[s.status=="approved"?(l(),d("span",{key:0,class:"bg-success px-2 py-1 rounded-lg text-white",textContent:o(s.status)},null,8,es)):m("",!0),s.status=="rejected"?(l(),d("span",{key:1,class:"bg-danger px-2 py-1 rounded-lg text-white",textContent:o(s.status)},null,8,ss)):m("",!0),s.status=="new"?(l(),d("span",{key:2,class:"bg-info px-2 py-1 rounded-lg text-white",textContent:o(s.status)},null,8,os)):m("",!0)]),"item-edit":P(s=>[s.not_editable?m("",!0):(l(),d("button",{key:0,class:"p-2 hover:text-gray-600 text-purple",onClick:w=>t.handleAction("edit",s)},[E(p,{class:"w-5",type:"edit"})],8,ns))]),"item-delete":P(s=>[s.not_removeable?m("",!0):(l(),d("button",{key:0,class:"p-2 hover:text-gray-600 text-red-500",onClick:w=>t.handleAction("delete",s)},[E(i,{class:"w-5"})],8,as))]),_:1},8,["search-field","search-value","body-text-direction","headers","items"])):m("",!0)])])):m("",!0)])):m("",!0)])}const us=A(Pe,[["render",ls]]);export{us as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["side-form-create-NoiIG-sU.min.js","index.min.js","index.min.css","Field-vHFTeJAC.min.js","Field.min.css","side-form-update-2WOW3MNX.min.js","form_field-1fpjNFy2.min.js","editable_map_location-h8_ViIKg.min.js","index.es-9divdo6P.min.js","map-b2mjEKBi.min.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
