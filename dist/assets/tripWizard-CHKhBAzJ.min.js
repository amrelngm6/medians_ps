const __vite__fileDeps=["side-form-create-DwwFhpNu.min.js","index.min.js","index.min.css","Field-DGSjrbSi.min.js","Field.min.css","side-form-update-DW7kEJ06.min.js","form_field-Bqs-labK.min.js","editable_map_location-C3m7cXEh.min.js","index.es-BqyRJkQ3.min.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{_ as z,D as M,E as B,x as F,G as J,aj as U,r as i,t as p,ak as E,al as G,a as m,o,c as l,b as a,d as t,g as v,F as q,f as V,n as A,e as s,y as C,I as K,q as S,u as L,l as H,K as Q,M as X}from"./index.min.js";import{e as Y}from"./editable_map_location-C3m7cXEh.min.js";import{t as Z}from"./tooltip-B6mCVe86.min.js";import{t as $}from"./trip_map-Bh2ASL34.min.js";import"./index.es-BqyRJkQ3.min.js";const tt=S(()=>L(()=>import("./side-form-create-DwwFhpNu.min.js"),__vite__mapDeps([0,1,2,3,4]))),et=S(()=>L(()=>import("./side-form-update-DW7kEJ06.min.js"),__vite__mapDeps([5,1,2,3,4,6,7,8]))),st=S(()=>L(()=>import("./form_field-Bqs-labK.min.js"),__vite__mapDeps([6,1,2,3,4,7,8]))),ot={components:{datatabble:M,SideFormCreate:tt,SideFormUpdate:et,trip_map:$,close_icon:B,delete_icon:F,car_icon:J,form_field:st,editable_map_location:Y,dashboard_card_white:U,tooltip:Z},name:"Route trips",emits:["callback"],setup(r,{emit:c}){const _=i(!1),e=i(!1),D=i(!1),d=i({}),w=i("Info"),h=i({}),k=i({}),I=i("");i(null);const T=i(!1),x=i(["Info","Locations","Confirm"]),n=i([]),f=i(!1),O=i(""),N=i(""),R=i([{title:p("Scheduled"),status:"scheduled"},{title:p("Started"),status:"started"},{title:p("Completed"),status:"completed"},{title:p("Cancelled"),status:"cancelled"}]);r.item?(d.value=r.item,d.value.date=r.item.date??E()):d.value.date=E();const W=r.userslist?i(r.userslist):i([]);return{loader:_,tripsStatusList:R,users:W,progressWidth:()=>X(["vehicle_id","driver_id","locations","date","status"],d),showPlaceSearch:f,pickup_placeSearch:O,destination_placeSearch:N,places:n,showAddSide:e,showEditSide:D,content:h,fillable:x,center:k,activeItem:d,activeTab:w,translate:p,formatCustomTime:G,searchText:I,collapsed:T,saveTrip:()=>{_.value=!0;var g=new URLSearchParams;let y=JSON.parse(JSON.stringify(d.value)),j=Object.keys(y),u,P;for(let b=0;b<j.length;b++)u=j[b],P=typeof y[u]=="object"?JSON.stringify(y[u]):y[u],g.append("params["+u+"]",P);g.append("type","Trip.update"),H(g,"/api/"+type).then(b=>{_.value=!1,Q(b)})},back:()=>{c("callback")}}},props:["conf","path","system_setting","business_setting","setting","item","userslist","usertype","drivers","vehicles"]},lt={class:"w-full overflow-auto"},nt=t("img",{class:"m-auto w-500px",src:"/uploads/loader.gif"},null,-1),at=[nt],it={class:"w-full relative"},ct={class:"card w-full py-10"},dt={class:"w-full stepper stepper-links"},rt={class:"stepper-nav justify-content-center py-2 mb-10"},_t=["onClick"],mt=["textContent"],vt={class:"w-full"},ht={class:"mb-6 mx-auto flex"},xt=["textContent"],ft=["textContent"],ut=t("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),bt={class:"mb-6 mx-auto flex"},pt=["textContent"],gt=["textContent"],yt={class:"mb-6 mx-auto flex"},Ct=["textContent"],wt={class:"symbol symbol-35px symbol-circle me-5"},kt=["src"],It={class:"fw-semibold w-full"},Tt=["textContent"],St=["textContent"],Lt={class:"mb-6 mx-auto flex"},Dt=["textContent"],jt={class:"symbol symbol-35px symbol-circle me-5"},Pt=["src"],Et={class:"fw-semibold w-full"},qt=["textContent"],Vt=["textContent"],At={class:"text-center"},Ot=["textContent"],Nt={class:"card-body pt-0"},Rt={class:"settings-form"},Wt={class:"px-10 mb-6 mx-auto row"},zt={class:"lg:flex w-full gap-6"},Mt={class:"mt-10 w-full"},Bt={class:"flex gap-6"},Ft=["textContent"],Jt=["textContent"],Ut={class:"d-flex flex-stack pt-4"},Gt={class:"symbol symbol-40px me-5"},Kt=["src"],Ht={key:0,class:"flex align-items-center w-full"},Qt={class:"flex-grow-1 me-2"},Xt=["textContent"],Yt=["textContent"],Zt=["onMouseover","onMouseleave"],$t=["onClick","textContent"],te={class:"w-full"},ee={class:"text-center"},se=["textContent"],oe={class:"max-w-xl mx-auto"},le={class:"w-full"},ne=t("hr",{class:"block mt-6 my-2 opacity-10"},null,-1),ae={class:"bg-gray-200 shadow-md mb-10 rounded-xl"},ie={class:"card-header border-0 pt-9"},ce={key:0,class:"card-title m-0 flex gap-4"},de={class:"symbol symbol-50px w-50px bg-light"},re=["src"],_e={class:"w-full"},me=["textContent"],ve=["textContent"],he={class:"flex gap-2 cursor-pointer"},xe={class:"pt-3"},fe={class:"relative badge badge-light fw-bold me-auto px-4 py-3"},ue={key:0,class:"card-body p-9"},be={class:"timeline timeline-border-dashed"},pe={class:"timeline-item"},ge=t("div",{class:"timeline-line"},null,-1),ye={class:"timeline-icon me-4"},Ce={class:"timeline-content mb-10 mt-n2"},we={class:"overflow-auto pe-3"},ke=["textContent"],Ie={class:"d-flex align-items-center mt-1 fs-6"},Te=["textContent"],Se={class:"timeline-item"},Le=t("div",{class:"timeline-line"},null,-1),De={class:"timeline-icon me-4"},je={class:"timeline-content mb-10 mt-n2"},Pe={class:"overflow-auto pe-3"},Ee=["textContent"],qe={class:"d-flex align-items-center mt-1 fs-6"},Ve=["textContent"],Ae={class:"h-4px w-100 bg-light mb-5"},Oe={key:0,class:"w-full flex gap-4"},Ne={key:0,class:"flex gap-4 min-w-175px"},Re=["src"],We={class:"block gap-4 w-full"},ze=["textContent"],Me=["textContent"],Be={key:1,class:"w-150px flex gap-4"},Fe={class:"block gap-4"},Je=["textContent"],Ue=["textContent"],Ge={key:2,class:"w-125px flex-end"},Ke=["textContent"],He={class:"w-full flex gap-4"},Qe=["textContent"],Xe=["textContent"],Ye={class:"text-center mt-10"},Ze=["textContent"];function $e(r,c,_,e,D,d){const w=m("close_icon"),h=m("car_icon"),k=m("tooltip"),I=m("trip_map"),T=m("form_field"),x=m("vue-feather");return o(),l("div",lt,[e.loader?(o(),l("div",{key:e.loader,class:"bg-white fixed w-full h-full top-0 left-0",style:{"z-index":"99999",opacity:".9"}},at)):a("",!0),t("div",it,[v(w,{class:"absolute top-4 right-4 z-10 cursor-pointer",onClick:e.back},null,8,["onClick"]),t("div",ct,[t("div",dt,[t("div",rt,[(o(!0),l(q,null,V(e.fillable,n=>(o(),l("div",{class:"stepper-item",onClick:f=>e.activeTab=n},[t("h3",{class:A([e.activeTab==n?"text-danger border-danger":"text-gray-400 border-transparent","cursor-pointer pb-3 px-2 stepper-title text-md border-b"]),textContent:s(e.translate(n))},null,10,mt)],8,_t))),256))]),t("div",vt,[e.activeTab=="Info"?(o(),l("div",{class:"",key:e.activeTab},[(o(),l("div",{class:"card-body pt-0 mx-auto max-w-xl",key:e.users},[t("div",ht,[t("label",{class:"w-200px col-form-label required fw-semibold fs-6",textContent:s(e.translate("Trip Date"))},null,8,xt),t("span",{textContent:s(e.activeItem.date),class:"fw-semibold text-lg"},null,8,ft)]),ut,t("div",bt,[t("label",{class:"w-200px col-form-label required fw-semibold fs-6",textContent:s(e.translate("Start time"))},null,8,pt),t("span",{textContent:s(e.formatCustomTime(e.activeItem.created_at,"hh:mm:ss")),class:"fw-semibold text-lg"},null,8,gt)]),t("div",yt,[t("label",{class:"w-200px my-2 col-form-label required fw-semibold fs-6",textContent:s(e.translate("Driver"))},null,8,Ct),e.activeItem.driver?(o(),l("a",{href:"javascript:;",key:e.activeItem.driver,class:"w-full d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1 gap-4"},[t("div",wt,[e.activeItem.driver.picture?a("",!0):(o(),C(h,{key:0})),e.activeItem.driver.picture?(o(),l("img",{key:1,alt:"Pic",src:e.activeItem.driver.picture},null,8,kt)):a("",!0)]),t("div",It,[t("span",{class:"text-lg text-danger font-semibold me-2",textContent:s(e.activeItem.driver.name)},null,8,Tt),t("span",{class:"block text-gray-500 text-sm truncate",textContent:s(e.activeItem.driver.mobile)},null,8,St)])])):a("",!0)]),t("div",Lt,[t("label",{class:"w-200px my-2 col-form-label required fw-semibold fs-6",textContent:s(e.translate("Vehicle"))},null,8,Dt),e.activeItem.vehicle?(o(),l("a",{href:"javascript:;",key:e.activeItem.vehicle,class:"w-full d-flex align-items-center p-3 bg-gray-100 rounded-lg shadow-md mb-1"},[t("div",jt,[e.activeItem.vehicle.picture?a("",!0):(o(),C(h,{key:0})),e.activeItem.vehicle.picture?(o(),l("img",{key:1,alt:"Pic",src:e.activeItem.vehicle.picture},null,8,Pt)):a("",!0)]),t("div",Et,[t("span",{class:"text-lg text-danger font-semibold me-2",textContent:s(e.activeItem.vehicle.vehicle_name)},null,8,qt),t("span",{class:"block text-gray-500 text-sm",textContent:s(e.activeItem.vehicle.plate_number)},null,8,Vt)])])):a("",!0)])])),t("p",At,[t("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[0]||(c[0]=n=>e.activeTab="Locations"),textContent:s(e.translate("Locations"))},null,8,Ot)])])):a("",!0),e.activeTab=="Locations"?(o(),l("div",{class:"",key:e.activeTab},[t("div",Nt,[t("div",Rt,[t("div",Wt,[t("div",zt,[t("div",Mt,[t("div",Bt,[t("h3",{class:"mb-3 w-full",textContent:s(e.translate("Location Address"))},null,8,Ft),t("p",{class:"text-center px-6",textContent:s(e.translate("Time"))},null,8,Jt)]),(o(!0),l(q,null,V(e.activeItem.locations,n=>(o(),l("div",Ut,[t("div",Gt,[t("img",{src:n.model.picture,class:"h-50 align-self-center",alt:""},null,8,Kt)]),n.model&&n.location?(o(),l("div",Ht,[t("div",Qt,[t("a",{href:"javascript:;",class:"text-gray-800 text-hover-primary fs-6 fw-bold",textContent:s(n.model.name)},null,8,Xt),t("span",{class:"text-muted fw-semibold d-block fs-7",textContent:s(n.location.start_address)},null,8,Yt)]),t("div",null,[t("div",{onMouseover:f=>n.showTip=!0,onMouseleave:f=>n.showTip=!1,class:"relative"},[t("a",{href:"javascript:;",onClick:f=>(e.activeItem.currentLat=n.location.start_latitude,e.activeItem.currentLng=n.location.start_longitude),class:"btn btn-sm btn-light fs-8 fw-bold",textContent:s(n.time)},null,8,$t),n.showTip?(o(),C(k,{key:n.showTip,title:e.translate("Show location")},null,8,["title"])):a("",!0)],40,Zt)])])):a("",!0)]))),256))]),t("div",te,[(o(),C(I,{system_setting:_.system_setting,trip:e.activeItem,conf:_.conf,key:e.activeItem,waypoints:e.activeItem.locations},null,8,["system_setting","trip","conf","waypoints"]))])])])])]),t("p",ee,[t("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[1]||(c[1]=n=>e.activeTab="Confirm"),textContent:s(e.translate("Confirm"))},null,8,se)])])):a("",!0),e.activeTab=="Confirm"?(o(),l("div",{class:"w-full mx-auto",key:e.activeTab},[t("div",oe,[t("div",le,[ne,t("div",ae,[t("div",ie,[e.activeItem.model?(o(),l("div",ce,[t("div",de,[t("img",{src:e.activeItem.model.picture,alt:"image",class:"p-3"},null,8,re)]),t("div",_e,[t("div",{class:"font-semibold",textContent:s(e.activeItem.model.name)},null,8,me),t("div",{class:"",textContent:s(e.activeItem.model.mobile)},null,8,ve)])])):a("",!0),t("label",he,[t("div",xe,[t("span",fe,[v(T,{class:"flex-end",item:e.activeItem,column:{key:"status",title:e.translate("Status"),column_type:"select",text_key:"title",data:e.tripsStatusList,hide_text:!0}},null,8,["item","column"]),v(x,{class:"absolute right-4",type:"chevron-down"})])])])]),e.activeItem?(o(),l("div",ue,[t("div",be,[t("div",pe,[ge,t("div",ye,[v(x,{type:"circle",class:"fs-2 text-success"})]),t("div",Ce,[t("div",we,[e.activeItem?(o(),l("div",{key:0,class:"fs-5 fw-semibold mb-2",textContent:s(e.activeItem.route.position.start_address)},null,8,ke)):a("",!0),t("div",Ie,[t("div",{class:"text-muted me-2 fs-7",textContent:s(e.translate("Pickup"))},null,8,Te)])])])]),t("div",Se,[Le,t("div",De,[v(x,{type:"map-pin",class:"fs-2 text-danger"})]),t("div",je,[t("div",Pe,[e.activeItem?(o(),l("div",{key:0,class:"fs-5 fw-semibold mb-2",textContent:s(e.activeItem.route.position.end_address)},null,8,Ee)):a("",!0),t("div",qe,[t("div",{class:"text-muted me-2 fs-7",textContent:s(e.translate("Destination"))},null,8,Ve)])])])])]),t("div",Ae,[t("div",{class:A(["rounded h-4px transition transition-all",e.progressWidth()<100?"bg-info":"bg-success"]),role:"progressbar",style:K({width:e.progressWidth()+"%"})},null,6)]),e.activeItem?(o(),l("div",Oe,[e.activeItem.driver?(o(),l("div",Ne,[t("img",{src:e.activeItem.driver.picture,class:"rounded-full bg-white border-1 border border-gray-600 p-1 w-12 h-12"},null,8,Re),t("div",We,[t("span",{class:"w-full block font-semibold",textContent:s(e.translate("Driver"))},null,8,ze),t("span",{class:"w-full block",textContent:s(e.activeItem.driver.name)},null,8,Me)])])):a("",!0),e.activeItem.vehicle?(o(),l("div",Be,[v(h),t("div",Fe,[t("span",{class:"w-full block font-semibold",textContent:s(e.translate("Vehicle"))},null,8,Je),t("span",{class:"w-full block",textContent:s(e.activeItem.vehicle.plate_number)},null,8,Ue)])])):a("",!0),e.activeItem.date?(o(),l("div",Ge,[t("span",{class:"w-full block font-semibold",textContent:s(e.translate("Trip date"))},null,8,Ke),t("div",He,[t("span",{class:"",textContent:s(e.activeItem.date)},null,8,Qe),t("span",{class:"",textContent:s(e.activeItem.start_time)},null,8,Xe)])])):a("",!0)])):a("",!0)])):a("",!0)])])]),t("p",Ye,[t("a",{href:"javascript:;",class:"uppercase px-4 py-3 mx-2 text-center text-white rounded-lg bg-danger",onClick:c[2]||(c[2]=(...n)=>e.saveTrip&&e.saveTrip(...n)),textContent:s(e.translate("Submit"))},null,8,Ze)])])):a("",!0)])])])])])}const cs=z(ot,[["render",$e]]);export{cs as default};
