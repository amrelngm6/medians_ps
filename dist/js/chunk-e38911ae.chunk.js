(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e38911ae","chunk-2d0f03f6"],{"5f6e":function(t,e,a){"use strict";a.r(e);a("7f7f");var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full"},[t.showLoader||!t.activeItem||t.showConfirm||t.activeItem.status&&"active"!=t.activeItem.status&&"new"!=t.activeItem.status?t._e():e("div",{staticClass:"relative w-full h-full pt-2"},[e("div",{staticClass:"pt-8 pb-2 mt-12 relative mx-auto w-full bg-white p-6 rounded-lg overflow-y-auto",staticStyle:{"max-width":"600px","max-height":"500px"}},[e("div",{staticClass:"w-full pt-8 block gap-4 py-2 border-b border-gray-200"},[e("div",{staticClass:"w-full flex mt-10"},[t.activeItem.id&&"active"==t.activeItem.status?e("div",{staticClass:"cursor-pointer absolute left-0 top-4 ml-4",on:{click:function(e){return t.setShowConfirm()}}},[e("div",{staticClass:"w-full flex gap gap-4"},[e("span",{staticClass:"text-base font-semibold text-red-600 border-red-600 border rounded-lg py-2 px-4",domProps:{textContent:t._s(t.__("finish"))}})])]):t._e(),t.activeItem.device?e("label",{staticClass:"absolute top-4",staticStyle:{left:"auto",right:"10px"},domProps:{textContent:t._s(t.activeItem.device.title)}}):t._e()]),e("label",{staticClass:"block",domProps:{textContent:t._s(t.__("game"))}}),e("div",{staticClass:"w-full block gap-4 my-2 text-gray-600 overflow-x-auto"},[t.games?e("div",{staticClass:"overflow-x-auto flex gap gap-6",style:{"min-width":35*t.games.length+"%"}},t._l(t.games,(function(a,i){return e("label",{key:i,staticClass:"block cursor-pointer py-2 w-40 my-2 rounded-lg text-center font-semibold",class:t.activeItem.game_id==a.id?"bg-purple-600 hover:bg-purple-600 text-white  hover:text-white":"border-purple-600 text-purple-800",attrs:{for:"single-"+a.id},on:{click:function(e){t.activeItem.game_id=a.id,t.submit("Event.update")}}},[e("img",{staticClass:"mx-auto w-6 h-6 rounded-full my-2",attrs:{src:a.picture}}),e("span",{domProps:{textContent:t._s(a.name)}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.activeItem.game_id,expression:"activeItem.game_id"}],staticClass:"hidden",attrs:{id:"id-"+a.id,type:"radio",name:"game_id"},domProps:{value:a.id,checked:t._q(t.activeItem.game_id,a.id)},on:{change:[function(e){return t.$set(t.activeItem,"game_id",a.id)},function(e){return t.submit("Event.update")}]}})])})),0):t._e()])]),"new"!=t.activeItem.status&&t.activeItem.products&&t.activeItem.products.length?e("div",{staticClass:"w-full block"},[e("calendar_products_selected",{ref:"selected_products",attrs:{item:t.activeItem}})],1):t._e(),"new"!=t.activeItem.status&&t.activeItem.id&&t.products&&t.products.length?e("div",{staticClass:"w-full block"},[e("calendar_products",{ref:"applicable_products",attrs:{item:t.activeItem,products:t.products},on:{"add-product":function(e){return t.query()}}})],1):t._e(),t.activeItem.customer?e("div",{staticClass:"w-full flex gap-4 py-1 border-b border-gray-200 mb-2"},[e("span",{staticClass:"text-md font-semibold w-full block py-2",domProps:{textContent:t._s(t.__("Customer"))}}),e("span",{staticClass:"w-full text-md p-2 text-gray-600 font-semibold",domProps:{textContent:t._s(t.activeItem.customer.name+" - "+t.activeItem.customer.mobile)}})]):t._e(),t.activeItem?e("div",{staticClass:"w-full block"},[e("calendar_booking_info_editable",{attrs:{"active-item":t.activeItem}})],1):t._e(),t.activeItem.id?t._e():e("div",{staticClass:"mt-10 w-40 block mx-auto text-white font-semibold py-2 border-b border-gray-200"},[e("label",{staticClass:"cursor-pointer px-4 py-2 rounded-lg bg-gradient-primary block",domProps:{textContent:t._s(t.__("start_playing"))},on:{click:function(e){return t.$parent.storeInfo(t.activeItem)}}})]),e("div",{staticClass:"w-full flex mt-10"},[t.activeItem.id&&"new"==t.activeItem.status?e("div",{staticClass:"mx-auto cursor-pointer block w-32 py-2",on:{click:function(e){return t.startPlaying()}}},[e("span",{staticClass:"text-base font-semibold text-red-600 border-red-600 border rounded-lg py-2 px-4 hover:bg-purple-600 hover:text-white hover:border-purple-600",domProps:{textContent:t._s(t.__("start_playing"))}})]):t._e(),t.activeItem.id?e("div",{staticClass:"w-40 block mx-auto text-white text-center font-semibold py-2 border-b border-gray-200"},[e("label",{staticClass:"cursor-pointer px-4 py-2 rounded-lg text-red-400 hover:bg-purple-600 hover:text-white",domProps:{textContent:t._s(t.__("cancel booking"))},on:{click:function(e){return t.cancelBooking()}}})]):t._e()])])])])},s=[],o=(a("6b54"),a("96cf"),a("1da1")),n=(a("c5f6"),a("9c0f")),r=a("bc3a").default,c={components:{calendar_booking_info_editable:n["default"]},data:function(){return{showLoader:!1,showUpdate:!1,showMoreProducts:!1,activeItem:{},games:[],products:[],showConfirm:!1}},props:["modal"],mounted:function(){this.modal&&(this.activeItem=JSON.parse(JSON.stringify(this.modal)),this.query())},methods:{cancelBooking:function(){window.confirm(this.__("confirm_cancel_booking"))&&this.$parent.submit("Event.cancel",this.activeItem)},startPlaying:function(){this.activeItem.status="active",this.$parent.submit("Event.update",this.activeItem)},setShowConfirm:function(){this.$parent.activeItem=this.activeItem,this.$parent.showConfirm=!0,this.showConfirm=!0},setHideConfirm:function(){this.$parent.showConfirm=!1,this.showConfirm=!1},products_subtotal:function(){var t=0;if(this.activeItem.products)for(var e=this.activeItem.products.length-1;e>=0;e--)this.activeItem.products[e]&&(t=Number(this.activeItem.products[e].subtotal)+Number(t));return t},viwMoreProducts:function(){this.showMoreProducts=!this.showMoreProducts},updateInfo:function(t){this.showLoader=!0,this.showUpdate=!0,this.$parent.updateInfo(t),this.showLoader=!1},submit:function(t){this.$parent.todayEvents=null;var e=new URLSearchParams([]);e.append("type",t),e.append("params[event]",JSON.stringify(this.activeItem)),this.handleRequest(e,"/api/update").then((function(t){console.log(t)}))},query:function(){var t=this;if(!this.activeItem.id)return this;this.showLoader=!0;var e=new URLSearchParams([]);e.append("type","OrderDevice"),e.append("model","OrderDevice"),e.append("id",this.activeItem.id),this.handleRequest(e,"/api").then((function(e){t.activeItem=e,t.activeItem.start=e.start_time.slice(11,16),t.activeItem.end=e.end_time.slice(11,16),t.games=e.device.games,t.products=e.device.products,t.showLoader=!1}))},addProduct:function(t){var e=this,a=new URLSearchParams([]);a.append("type","OrderDevice.addProduct"),a.append("model","OrderDevice"),a.append("params[product]",JSON.stringify(t)),a.append("params[device]",JSON.stringify(this.activeItem)),this.handleRequest(a,"/api/create").then((function(t){e.query(),e.$alert(t)}))},removeProduct:function(t){var e=this,a=new URLSearchParams([]);a.append("type","OrderDevice.removeProduct"),a.append("params[product]",JSON.stringify(t)),this.handleRequest(a,"/api/delete").then((function(){e.query()}))},handleRequest:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,i=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:"/",this,t.next=4,r.post(a,e.toString()).then((function(t){return t.data.status?t.data.result:t.data}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),__:function(t){return this.$parent.__(t)}}},l=c,d=a("2877"),u=Object(d["a"])(l,i,s,!1,null,null,null);e["default"]=u.exports},"9c0f":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full"},[t.activeItem?e("div",[e("div",{staticClass:"w-full flex gap-4 py-2 border-b border-gray-200"},[e("label",{staticClass:"w-full",domProps:{textContent:t._s(t.__("start"))}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.activeItem.start,expression:"activeItem.start"}],staticClass:"w-full",attrs:{step:"900",type:"time"},domProps:{value:t.activeItem.start},on:{change:function(e){return t.submit("Event.update")},input:function(e){e.target.composing||t.$set(t.activeItem,"start",e.target.value)}}})]),e("div",{staticClass:"w-full flex gap-4 py-2 border-b border-gray-200"},[e("label",{staticClass:"w-full",domProps:{textContent:t._s(t.__("end"))}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.activeItem.end,expression:"activeItem.end"}],staticClass:"w-full",attrs:{min:t.activeItem.start,step:"900",type:"time"},domProps:{value:t.activeItem.end},on:{change:function(e){return t.submit("Event.update")},input:function(e){e.target.composing||t.$set(t.activeItem,"end",e.target.value)}}})]),e("div",{staticClass:"w-full flex gap-4 py-2 border-b border-gray-200"},[e("label",{staticClass:"w-full",domProps:{textContent:t._s(t.__("date"))}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.activeItem.date,expression:"activeItem.date"}],staticClass:"w-full",attrs:{disabled:"",type:"date"},domProps:{value:t.activeItem.date},on:{input:function(e){e.target.composing||t.$set(t.activeItem,"date",e.target.value)}}})]),"new"!=t.activeItem.status?e("div",{staticClass:"w-full flex gap-6 my-2 text-gray-600"},[e("label",{staticClass:"cursor-pointer py-2 w-full mx-2 rounded-lg text-center font-semibold",class:"single"==t.activeItem.booking_type?"bg-purple-600 text-white":"",attrs:{for:"single"},on:{click:function(e){return t.updateBookingType("single","Event.update")}}},[e("span",{domProps:{textContent:t._s(t.__("single"))}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.activeItem.booking_type,expression:"activeItem.booking_type"}],staticClass:"hidden",attrs:{id:"signle",value:"single",type:"radio",name:"booking_type"},domProps:{checked:t._q(t.activeItem.booking_type,"single")},on:{change:function(e){return t.$set(t.activeItem,"booking_type","single")}}})]),e("label",{staticClass:"cursor-pointer py-2 w-full mx-2 rounded-lg text-center font-semibold",class:"multi"==t.activeItem.booking_type?"bg-purple-600 text-white":"",attrs:{for:"multi"},on:{click:function(e){return t.updateBookingType("multi","Event.update")}}},[e("span",{domProps:{textContent:t._s(t.__("multi"))}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.activeItem.booking_type,expression:"activeItem.booking_type"}],staticClass:"hidden",attrs:{id:"multi",value:"multi",type:"radio",name:"booking_type"},domProps:{checked:t._q(t.activeItem.booking_type,"multi")},on:{change:function(e){return t.$set(t.activeItem,"booking_type","multi")}}})])]):t._e()]):t._e()])},s=[],o=(a("c1df"),{data:function(){return{show:!0}},props:["activeItem"],mounted:function(){},methods:{updateBookingType:function(t,e){this.activeItem.booking_type=t,this.submit(e)},submit:function(t){this.$parent.submit(t)},__:function(t){return this.$parent.__(t)}}}),n=o,r=a("2877"),c=Object(r["a"])(n,i,s,!1,null,null,null);e["default"]=c.exports}}]);
//# sourceMappingURL=chunk-e38911ae.chunk.js.map