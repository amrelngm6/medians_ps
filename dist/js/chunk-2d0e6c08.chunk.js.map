{"version":3,"sources":["webpack:///./src/components/calendar/calendar-booking-confirm.vue","webpack:///src/components/calendar/calendar-booking-confirm.vue","webpack:///./src/components/calendar/calendar-booking-confirm.vue?b937","webpack:///./src/components/calendar/calendar-booking-confirm.vue?e7af"],"names":["render","_vm","this","_c","_self","staticClass","activeItem","status","staticStyle","key","attrs","domProps","_s","__","on","$event","$parent","submit","addToCart","id","setHideConfirm","_e","staticRenderFns","axios","require","default","components","data","showSelectedProducts","showPopup","showMoreProducts","products","props","mounted","modal","JSON","parse","stringify","handleTimes","methods","showConfirm","now","moment","duration","diff","start_time","hours","minutes","parseInt","asMinutes","m","time","extra_time","extraTime","end_time","duration_hours","asHours","toFixed","duration_time","subtotal","device_cost","to","add","format","console","log","actual_minutes","date","end","current_minutes","text","toHoursAndMinutes","value","totalMinutes","Math","floor","replace","hidePopup","type","arguments","length","undefined","$root","$refs","medians_calendar","handleRequest","_handleRequest","_asyncToGenerator","regeneratorRuntime","mark","_callee","params","url","_args","wrap","_context","prev","next","post","toString","then","response","result","abrupt","sent","stop","_x","apply","i","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,sBAAsB,CAAEJ,EAAIK,YAAuC,UAAzBL,EAAIK,WAAWC,OAAoBJ,EAAG,MAAM,CAACE,YAAY,0BAA0B,CAACF,EAAG,MAAM,CAACE,YAAY,yEAAyEG,YAAY,CAAC,YAAY,QAAQ,aAAa,UAAU,CAACL,EAAG,MAAM,CAACE,YAAY,8BAA8B,CAACF,EAAG,wBAAwB,CAACM,IAAIR,EAAIK,WAAWI,MAAM,CAAC,cAAcT,EAAIK,cAAcH,EAAG,MAAM,CAACE,YAAY,wDAAwDG,YAAY,CAAC,YAAY,QAAQ,UAAU,OAAO,CAACL,EAAG,MAAM,CAACE,YAAY,mCAAmCK,MAAM,CAAC,KAAO,UAAU,CAACP,EAAG,SAAS,CAACQ,SAAS,CAAC,YAAcV,EAAIW,GAAGX,EAAIY,GAAG,eAAeV,EAAG,OAAO,CAACE,YAAY,OAAOM,SAAS,CAAC,YAAcV,EAAIW,GAAGX,EAAIY,GAAG,kCAAkCV,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,MAAM,CAACE,YAAY,yCAAyCS,GAAG,CAAC,MAAQ,SAASC,GAAQd,EAAIK,WAAWC,OAAS,YAAaN,EAAIe,QAAQC,OAAO,eAAgBhB,EAAIK,YAAaL,EAAIiB,UAAUjB,EAAIK,eAAe,CAACH,EAAG,OAAO,CAACE,YAAY,gFAAgFM,SAAS,CAAC,YAAcV,EAAIW,GAAGX,EAAIY,GAAG,iBAAkBZ,EAAIK,WAAWa,GAAIhB,EAAG,MAAM,CAACE,YAAY,yFAAyF,CAACF,EAAG,QAAQ,CAACE,YAAY,+IAA+IM,SAAS,CAAC,YAAcV,EAAIW,GAAGX,EAAIY,GAAG,UAAUC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOd,EAAImB,uBAAuBnB,EAAIoB,UAAU,OAAOpB,EAAIoB,QAErsDC,EAAkB,G,mECqCtBC,EAAAC,EAAA,QAAAC,QAEe,GACfC,WAAA,GAEAC,KAAA,WAEA,OAEAC,sBAAA,EACAC,WAAA,EACAC,kBAAA,EACAxB,WAAA,GACAyB,SAAA,KAGAC,MAAA,CACA,SAGAC,QAAA,WACA,KAAAC,QAEA,KAAA5B,WAAA6B,KAAAC,MAAAD,KAAAE,UAAA,KAAAH,QACA,eAAA5B,WAAAC,QAAA,KAAA+B,gBAGAC,QAAA,CAMAnB,eAAA,WAEA,KAAAJ,QAAAwB,aAAA,GAOAF,YAAA,WAGA,IAAAG,EAAAC,MAIAC,EAAAD,IAAAC,SAAAF,EAAAG,KAAAF,IAAA,KAAApC,WAAAuC,cACAC,EAAAJ,IAAAD,GAAAG,KAAA,KAAAtC,WAAAuC,WAAA,SACAE,EAAAC,SAAAL,EAAAM,aAAA,GACAC,EAAAH,EAAA,EAAAA,EAAA,IAAAA,EACAI,GAAAL,EAAA,EAAAA,EAAA,IAAAA,GAAA,IAAAI,EAEA,eAAA5C,WAAAC,QAAAoC,EAAAM,YAAA,IAEA,KAAA3C,WAAA8C,WAAA,KAAAC,YACA,KAAA/C,WAAAgD,SAAAb,EACA,KAAAnC,WAAAiD,eAAAZ,EAAAa,UAAAC,QAAA,GACA,KAAAnD,WAAAoD,cAAAP,EACA,KAAA7C,WAAAqD,UAAA,KAAArD,WAAAiD,eAAA,KAAAjD,WAAAsD,aAAAH,QAAA,GACA,KAAAnD,WAAAqC,WAAAM,YACA,KAAA3C,WAAAuD,GAAAnB,IAAA,KAAApC,WAAAuC,YAAAiB,IAAAnB,EAAAM,YAAA,WAAAc,OAAA,wBAGAC,QAAAC,IAAA,KAAA3D,aAGA+C,UAAA,WAEA,IAAAa,EAAAxB,IAAA,KAAApC,WAAA6D,KAAA,SAAA7D,WAAA8D,KAAAxB,KAAA,KAAAtC,WAAAuC,WAAA,WAGAwB,GADA3B,MAAAE,KAAA,KAAAtC,WAAAuC,WAAA,SACAH,MAAAE,KAAA,KAAAtC,WAAAuC,WAAA,YAEAG,UAAAqB,EAAAH,GAAAT,QAAA,IAEA,OAAAa,KAAA,KAAAC,mBAAAF,EAAAH,GAAAT,QAAA,IAAAe,MAAAH,EAAAH,IAGAK,kBAAA,SAAAE,GACA,IAAA3B,EAAA2B,EAAA,GAAAC,KAAAC,MAAAF,EAAA,MACA1B,EAAA0B,EAAA,GAAAA,EAAA,GAAAA,EAAA,EAAAA,IAAAG,QAAA,QACA,OAAA9B,EAAA,EAAAA,EAAA,IAAAE,SAAAF,GAAA,KAAAC,EAAA,EAAAA,EAAA,IAAAA,IAEA8B,UAAA,WACA,IADAC,IAAAC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GAEA,KAAAG,MAAAC,MAAAC,iBAAAP,UAAAC,IAIA5D,UAAA,SAAAZ,GAEA,KAAAU,QAAAE,UAAAZ,IAIA+E,cAAA,eAAAC,EAAAC,eAAAC,mBAAAC,MAAA,SAAAC,EAAAC,GAAA,IAAAC,EAAAC,EAAAd,UAAA,OAAAS,mBAAAM,MAAA,SAAAC,GAAA,eAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAL,EAAAC,EAAAb,OAAA,QAAAC,IAAAY,EAAA,GAAAA,EAAA,OAAAE,EAAAE,KAAA,EAGA1E,EAAA2E,KAAAN,EAAAD,EAAAQ,YAAAC,MAAA,SAAAC,GAEA,OAAAA,EAAA1E,KAAApB,OACA8F,EAAA1E,KAAA2E,OAEAD,EAAA1E,QACA,cAAAoE,EAAAQ,OAAA,SAAAR,EAAAS,MAAA,wBAAAT,EAAAU,UAAAf,OAAA,SAAAL,EAAAqB,GAAA,OAAApB,EAAAqB,MAAA,KAAA5B,WAAA,OAAAM,EATA,GAWAxE,GAAA,SAAA+F,GAEA,YAAA5F,QAAAH,GAAA+F,MCtJiX,I,YCO7WC,EAAY,eACd,EACA7G,EACAsB,GACA,EACA,KACA,KACA,MAIa,aAAAuF,E","file":"js/chunk-2d0e6c08.chunk.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container calendar\"},[(_vm.activeItem && _vm.activeItem.status == 'active')?_c('div',{staticClass:\"relative w-full h-full\"},[_c('div',{staticClass:\"mt-10 relative mx-auto w-full bg-white px-6 rounded-lg overflow-y-auto\",staticStyle:{\"max-width\":\"600px\",\"max-height\":\"500px\"}},[_c('div',{staticClass:\"w-full mt-2 mb-4 pt-2 pb-6\"},[_c('calendar_booking_info',{key:_vm.activeItem,attrs:{\"active-item\":_vm.activeItem}}),_c('div',{staticClass:\"relative pb-2 mx-auto w-full bg-white px-6 rounded-lg\",staticStyle:{\"max-width\":\"600px\",\"z-index\":\"99\"}},[_c('div',{staticClass:\"bg-blue-200 rounded-md py-2 px-4\",attrs:{\"role\":\"alert\"}},[_c('strong',{domProps:{\"textContent\":_vm._s(_vm.__('confirm'))}}),_c('span',{staticClass:\"mx-2\",domProps:{\"textContent\":_vm._s(_vm.__('confirm_complete_booking'))}})]),_c('div',{staticClass:\"w-full flex mt-10\"},[_c('div',{staticClass:\"mx-auto cursor-pointer block w-32 py-2\",on:{\"click\":function($event){_vm.activeItem.status = 'completed'; _vm.$parent.submit('Event.update', _vm.activeItem); _vm.addToCart(_vm.activeItem)}}},[_c('span',{staticClass:\"cursor-pointer px-4 py-2 rounded-lg bg-red-600 hover:bg-purple-600 text-white\",domProps:{\"textContent\":_vm._s(_vm.__('confirm'))}})]),(_vm.activeItem.id)?_c('div',{staticClass:\"w-40 block mx-auto text-white text-center font-semibold py-2 border-b border-gray-200\"},[_c('label',{staticClass:\"text-base font-semibold text-red-600 border-red-600 border rounded-lg py-1 px-4 hover:bg-purple-600 hover:text-white hover:border-purple-600\",domProps:{\"textContent\":_vm._s(_vm.__('Back'))},on:{\"click\":function($event){return _vm.setHideConfirm()}}})]):_vm._e()])])],1)])]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"container calendar\">\r\n\r\n        <div class=\"relative w-full h-full\" v-if=\"activeItem && activeItem.status == 'active'\">\r\n\r\n            <div class=\"mt-10 relative mx-auto w-full bg-white px-6 rounded-lg overflow-y-auto\" style=\"max-width:600px;max-height:500px;\">\r\n\r\n                <div class=\"w-full  mt-2 mb-4 pt-2 pb-6\" >\r\n\r\n                    <calendar_booking_info :key=\"activeItem\" :active-item=\"activeItem\"></calendar_booking_info>\r\n\r\n                    <!-- Confirm overlay -->\r\n                    <div class=\"relative pb-2  mx-auto w-full bg-white px-6 rounded-lg\" style=\"max-width:600px;z-index:99;\">\r\n\r\n                        <div class=\"bg-blue-200 rounded-md py-2 px-4\" role=\"alert\">\r\n                            <strong v-text=\"__('confirm')\"></strong> <span class=\"mx-2\" v-text=\"__('confirm_complete_booking')\"></span> \r\n                        </div>\r\n\r\n                        <div class=\"w-full flex mt-10\">\r\n                            <div @click=\"activeItem.status = 'completed'; $parent.submit('Event.update', activeItem); addToCart(activeItem)\" class=\"mx-auto cursor-pointer block w-32 py-2\">\r\n                                <span class=\"cursor-pointer px-4 py-2 rounded-lg bg-red-600 hover:bg-purple-600 text-white\" v-text=\"__('confirm')\"></span>\r\n                            </div>\r\n                            <div v-if=\"activeItem.id\" class=\"w-40 block mx-auto text-white text-center font-semibold py-2 border-b border-gray-200\">\r\n                                <label @click=\"setHideConfirm()\" class=\"text-base font-semibold text-red-600 border-red-600 border rounded-lg py-1 px-4 hover:bg-purple-600 hover:text-white hover:border-purple-600\" v-text=\"__('Back')\"></label>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from 'moment';\r\nconst axios = require('axios').default;\r\n\r\nexport default {\r\n    components: {\r\n    },\r\n    data() {\r\n\r\n        return {\r\n                \r\n                showSelectedProducts: true,\r\n                showPopup: true,\r\n                showMoreProducts: false,\r\n                activeItem: {},\r\n                products: [],\r\n            };\r\n        },\r\n        props: [\r\n            'modal',\r\n        ],\r\n        \r\n        mounted() {\r\n            if (this.modal)\r\n            {\r\n                this.activeItem = JSON.parse(JSON.stringify(this.modal));\r\n                this.activeItem.status == 'active' ? this.handleTimes() : '';\r\n            }\r\n        },\r\n        methods: {\r\n\r\n            /**\r\n             * Hide confirm block\r\n             * \r\n             */\r\n            setHideConfirm()\r\n            {\r\n                this.$parent.showConfirm = false;\r\n            },  \r\n\r\n            /**\r\n             * Handle time at confirm screen\r\n             * with the actual booking time\r\n             */\r\n            handleTimes()\r\n            {\r\n\r\n                let now = moment()\r\n                // var booking_duration = moment(this.activeItem.end_time).duration(moment(this.activeItem.end_time).diff(moment(this.activeItem.start_time)));\r\n\r\n\r\n                var duration = moment.duration(now.diff(moment(this.activeItem.start_time)));\r\n                let hours = moment(now).diff(this.activeItem.start_time, \"hours\");\r\n                let minutes = parseInt(duration.asMinutes()) % 60;\r\n                let m = minutes > 9 ? minutes : '0'+minutes;\r\n                let time =  (hours > 9 ? hours : '0'+hours) + ( ':'+m );\r\n\r\n                if (this.activeItem.status == 'active' && duration.asMinutes() > 0)\r\n                {\r\n                    this.activeItem.extra_time = this.extraTime();\r\n                    this.activeItem.end_time = now;\r\n                    this.activeItem.duration_hours = (duration.asHours()).toFixed(2);\r\n                    this.activeItem.duration_time = time\r\n                    this.activeItem.subtotal = (this.activeItem.duration_hours * this.activeItem.device_cost).toFixed(2);\r\n                    this.activeItem.duration = duration.asMinutes()\r\n                    this.activeItem.to = moment(this.activeItem.start_time).add(duration.asMinutes(),'minutes').format('YYYY-MM-DD HH:mm:ss')\r\n                }\r\n\r\n                console.log(this.activeItem)\r\n            } ,\r\n\r\n            extraTime()\r\n            {\r\n                let actual_minutes = moment(this.activeItem.date+' '+this.activeItem.end).diff(this.activeItem.start_time, \"minutes\");\r\n\r\n                let current_hours = moment().diff(this.activeItem.start_time, \"hours\");\r\n                let current_minutes = moment().diff(this.activeItem.start_time, \"minutes\");\r\n\r\n                let minutes = parseInt((current_minutes - actual_minutes).toFixed(2)) % 60;\r\n                \r\n                return {text: this.toHoursAndMinutes((current_minutes - actual_minutes).toFixed(0)), value: (current_minutes - actual_minutes)}; \r\n            },\r\n\r\n            toHoursAndMinutes(totalMinutes) {\r\n              const hours = totalMinutes > 59 ? Math.floor(totalMinutes / 60) : 0;\r\n              const minutes = (totalMinutes > 59 ? totalMinutes % 60 : (totalMinutes > 0 ? totalMinutes : totalMinutes.replace('-', '')));\r\n              return hours > 9 ? hours : '0'+parseInt(hours) +':'+ (minutes > 9 ? minutes : '0'+minutes) ;\r\n            },\r\n            hidePopup(type = true)\r\n            {\r\n                this.$root.$refs.medians_calendar.hidePopup(type)\r\n            },\r\n\r\n            \r\n            addToCart(activeItem)\r\n            {\r\n                this.$parent.addToCart(activeItem)\r\n            },\r\n\r\n\r\n            async handleRequest(params, url='/') {\r\n\r\n                // Demo json data\r\n                return await axios.post(url, params.toString()).then(response => \r\n                {\r\n                    if (response.data.status)\r\n                        return response.data.result;\r\n                    else \r\n                        return response.data;\r\n                });\r\n            }, \r\n            __(i)\r\n            {\r\n                return this.$parent.__(i);\r\n            }\r\n        }\r\n    }\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./calendar-booking-confirm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./calendar-booking-confirm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./calendar-booking-confirm.vue?vue&type=template&id=6d61bb5e&\"\nimport script from \"./calendar-booking-confirm.vue?vue&type=script&lang=js&\"\nexport * from \"./calendar-booking-confirm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}