{"version":3,"sources":["webpack:///./node_modules/medians-calendar-vue3/dist/medians-calendar-weekview-495f49ef.js","webpack:///./node_modules/process/browser.js"],"names":["PromiseWorker","worker","messageIds","callbacks","addEventListener","e","onMessage","message","data","Array","isArray","length","messageId","error","result","callback","initiateWorker","_worker","postMessage","userMessage","messageToSend","Promise","resolve","reject","Error","controller","channel","MessageChannel","port1","onmessage","port2","kIsNodeJS","Object","prototype","toString","call","process","kRequire","module","require","browserDecodeBase64","base64","enableUnicode","binaryString","atob","binaryView","Uint8Array","forEach","el","idx","arr","charCodeAt","String","fromCharCode","apply","Uint16Array","buffer","nodeDecodeBase64","Buffer","from","createBase64WorkerFactory","sourcemap","source","start","indexOf","body","substring","Worker","options","assign","eval","blob","Blob","type","url","URL","createObjectURL","WorkerFactory","promiseWorker","send","arguments","undefined","myWorker","script","props","created","this","renderDay","components","MediansCalendarCell","MediansCalendarEvent","MediansCalendarCellBg","provide","medians_calendarAddEvent","addEvent","medians_calendarClearPopups","clearCreatingLeftovers","inject","mounted","medians_calendar_options","scrollToNow","isToday","scrollView","passed","passedTime","setInterval","computed","isWeekend","day","value","creator","creating","starting_cell","original_starting_cell","current_cell","ending_cell","status","temporary_event","day_cells","day_events","methods","dragStart","event","$emit","dragEnd","cellData","device","t","_this","hourOptions","start_hour","day_starts_at","end_hour","day_ends_at","hourlySelection","then","reply","getDayEvents","$parent","events","checkEventValidity","payload","to","clonedEvents","medians_calendar_events","i","id","distance","key","hasPending","some","completed","filter","$set","resetEvents","temporary_id","updateCreator","validateSelection","overlap","keys","fixedOverlap","overlapPolice","selectCell","initiatePopup","direction","index","_this$creator","real_ending_cell_index","show_modal","diffInMs","Date","diffInHrs","Math","floor","diffMins","round","startDate","endDate","finalEvent","masked_value","toISOString","rounded","round_offset","end","updated_events","push","_this2","overlapped","map","evKey","flat","cellStart","cellEnd","eventStarts","eventEnds","newPayload","needed_cell","event_cell","find","c","cell","_needed_cell","_event_cell","_cell","setTimeout","myElement","document","getElementById","topPos","offsetTop","scrollTop","item","log","__vue_script__","__vue_render__","_vm","_h","$createElement","_c","_self","ref","staticClass","class","staticStyle","attrs","style","directives","name","rawName","expression","_e","_v","_l","on","$event","eventIndex","column_index","__vue_staticRenderFns__","__vue_inject_styles__","media","__vue_scope_id__","__vue_module_identifier__","__vue_is_functional_template__","__vue_component__","render","staticRenderFns","script$1","watch","devices","required","validator","val","current_day","d","isNaN","parse","MediansCalendarDays","addHelperMethods","now","constructWeek","hours","days","dragEvent","hoursVisible","x","visible","colsSpace","hourHeight","cell_height","time_obj","draggedEvent","updateEvent","_isToday","isDayBefore","formattedNow","date","slice","_this$medians_calenda","hide_dates","hide_days","view_type","all","_this3","$medians_calendar","buildWeek","closePopups","refs","$refs","__vue_script__$1","__vue_render__$1","today","_s","title","hour","formatLeftHours","refInFor","__vue_staticRenderFns__$1","__vue_inject_styles__$1","__vue_scope_id__$1","__vue_module_identifier__$1","__vue_is_functional_template__$1","__vue_component__$1","cachedSetTimeout","cachedClearTimeout","exports","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","marker","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","Item","array","noop","nextTick","args","browser","env","argv","version","versions","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","dir","umask"],"mappings":"gHAAA,iDAIA,SAASA,EAAeC,GACtB,IAAIC,EAAa,EACbC,EAAY,GAChBF,EAAOG,iBAAiB,WAAW,SAAUC,GAC3C,OAAOC,EAAUD,MAEnB,IAAIC,EAAY,SAAmBD,GACjC,IAAIE,EAAUF,EAAEG,KAChB,GAAKC,MAAMC,QAAQH,MAAYA,EAAQI,OAAS,GAAhD,CAGA,IAAIC,EAAYL,EAAQ,GACpBM,EAAQN,EAAQ,GAChBO,EAASP,EAAQ,GACjBQ,EAAWZ,EAAUS,GACpBG,WACEZ,EAAUS,GACjBG,EAASF,EAAOC,MAElB,MAAO,CACLE,eAAgB,SAAwBC,KACxCC,YAAa,SAAqBC,GAChC,IAAIP,EAAYV,IACZkB,EAAgB,CAACR,EAAWO,GAChC,OAAO,IAAIE,SAAQ,SAAUC,EAASC,GAKpC,GAJApB,EAAUS,GAAa,SAAUC,EAAOC,GACtC,GAAID,EAAO,OAAOU,EAAO,IAAIC,MAAMX,EAAMN,UACzCe,EAAQR,IAEuB,qBAAtBb,EAAOwB,WAA4B,CAG5C,IAAIC,EAAU,IAAIC,eAClBD,EAAQE,MAAMC,UAAY,SAAUxB,GAClCC,EAAUD,IAEZJ,EAAOwB,WAAWP,YAAYE,EAAe,CAACM,EAAQI,aAGtD7B,EAAOiB,YAAYE,QAO7B,MAAMW,EAA6F,qBAAjFC,OAAOC,UAAUC,SAASC,KAAwB,qBAAZC,EAA0BA,EAAU,GACtFC,EAAWN,GAAuC,oBAAnBO,EAAOC,QAAyBD,EAAOC,QAAU,KAEtF,SAASC,EAAoBC,EAAQC,GACjC,MAAMC,EAAeC,KAAKH,GAC1B,GAAIC,EAAe,CACf,MAAMG,EAAa,IAAIC,WAAWH,EAAahC,QAI/C,OAHAF,MAAMwB,UAAUc,QAAQZ,KAAKU,EAAY,CAACG,EAAIC,EAAKC,KAC/CA,EAAID,GAAON,EAAaQ,WAAWF,KAEhCG,OAAOC,aAAaC,MAAM,KAAM,IAAIC,YAAYV,EAAWW,SAEtE,OAAOb,EAGX,SAASc,EAAiBhB,EAAQC,GAC9B,OAAOgB,EAAOC,KAAKlB,EAAQ,UAAUP,SAASQ,EAAgB,QAAU,QAG5E,SAASkB,EAA0BnB,EAAQoB,EAAY,KAAMnB,GAAgB,GACzE,MAAMoB,EAAS/B,EAAY0B,EAAiBhB,EAAQC,GAAiBF,EAAoBC,EAAQC,GAC3FqB,EAAQD,EAAOE,QAAQ,KAAM,IAAM,EACnCC,EAAOH,EAAOI,UAAUH,IAAUF,EAAY,wBAA0BA,EAAc,IAE5F,GAAIxB,EAAU,CAEV,MAAM8B,EAAS9B,EAAS,kBAAkB8B,OAC1C,OAAO,SAAuBC,GAC1B,OAAO,IAAID,EAAOF,EAAMjC,OAAOqC,OAAO,GAAID,EAAS,CAAEE,MAAM,MAKnE,MAAMC,EAAO,IAAIC,KAAK,CAACP,GAAO,CAAEQ,KAAM,2BAChCC,EAAMC,IAAIC,gBAAgBL,GAChC,OAAO,SAAuBH,GAC1B,OAAO,IAAID,OAAOO,EAAKN,IAK/B,IAAIS,EAAgBjB,EAA0B,ugoBAAwgoB,MAAM,GAIxjoB3D,EAAS,IAAI4E,EACbC,EAAgB9E,EAAcC,GAC9B8E,EAAO,WACT,IAAIN,EAAOO,UAAUrE,OAAS,QAAsBsE,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,UAC3ExE,EAAOwE,UAAUrE,OAAS,EAAIqE,UAAU,QAAKC,EACjD,OAAOH,EAAc5D,YAAY,CAC/BuD,KAAMA,EACNjE,KAAMA,KAGN0E,EAAW,CACbH,KAAMA,GAGJI,EAAS,CACXC,MAAO,CAAC,SAAU,MAAO,aAAc,SAAU,gBACjDC,QAAS,WAIPC,KAAKC,aAEPC,WAAY,CACVC,oBAAqB,WACnB,OAAO,iDAETC,qBAAsB,WACpB,OAAO,iDAETC,sBAAuB,WACrB,OAAO,kDAGXC,QAAS,WAGP,MAAO,CACLC,yBAA0BP,KAAKQ,SAC/BC,4BAA6BT,KAAKU,yBAItCC,OAAQ,CAAC,4BACTC,QAAS,WACHZ,KAAKa,yBAAyBC,aAAed,KAAKe,SAASf,KAAKgB,aACpEhB,KAAKiB,OAASjB,KAAKkB,WACnBC,aAAY,WACVnB,KAAKiB,OAASjB,KAAKiB,OAAS,IAC3B,MAELG,SAAU,CACRC,UAAW,WACT,OAAO,eAAUrB,KAAKsB,IAAIC,QAE5BR,QAAS,WACP,OAAO,eAAQf,KAAKsB,IAAIC,SAG5BrG,KAAM,WACJ,MAAO,CAILsG,QAAS,CACPC,UAAU,EACVC,cAAe,KACfC,uBAAwB,KACxBC,aAAc,KACdC,YAAa,KACbC,OAAQ,MAKVC,gBAAiB,KAEjBC,UAAW,GACXC,WAAY,KACZhB,OAAQ,IAGZiB,QAAS,CACPC,UAAW,SAAmBC,GAC5BpC,KAAKqC,MAAM,mBAAoBD,IAEjCE,QAAS,SAAiBC,EAAUC,GAClC,IAAIC,EAAIzC,KACRyC,EAAEJ,MAAM,eAAgBG,EAAQD,IAElCtC,UAAW,WACT,IAAIyC,EAAQ1C,KACZJ,EAASH,KAAK,cAAe,CAC3B6B,IAAKtB,KAAKsB,IAAIC,MACdoB,YAAa,CACXC,WAAY5C,KAAKa,yBAAyBgC,cAC1CC,SAAU9C,KAAKa,yBAAyBkC,aAE1CC,gBAAiBhD,KAAKa,yBAAyBmC,kBAC9CC,MAAK,SAAUC,GAEhB,OADAR,EAAMV,UAAYkB,EACXR,EAAMS,aAAaT,EAAMU,QAAQC,YAG5CC,mBAAoB,SAA4BC,GAC9C,IAAIlF,EAAOkF,EAAQlF,KACjBmF,EAAKD,EAAQC,GACf,OAAKnF,GAASmF,EAOP,KAPkB,yCAS3BL,aAAc,SAAsBE,GAClC,IAAII,EAAe,GACnB,GAAIzD,KAAKoD,QAAQC,OAAQ,CACvBrD,KAAK0D,wBAA0B1D,KAAKoD,QAAQC,OAC5C,IAAK,IAAIM,EAAI3D,KAAK0D,wBAAwBrI,OAAS,EAAGsI,GAAK,EAAGA,IACxD3D,KAAK0D,wBAAwBC,IAAM3D,KAAKwC,QAAUxC,KAAKwC,OAAOoB,IAAM5D,KAAKwC,OAAOoB,IAAM5D,KAAK0D,wBAAwBC,GAAGnB,OAAOoB,KAC/HH,EAAaE,GAAK,eAAY3D,KAAK0D,wBAAwBC,IAC3DF,EAAaE,GAAGE,SAAW,eAAY7D,KAAK0D,wBAAwBC,GAAI3D,KAAKa,yBAAyBmC,kBAK5G,OADAhD,KAAKiC,WAAawB,EACXA,GAET/C,uBAAwB,WACtB,IAAK,IAAIoD,KAAO9D,KAAKiC,WAAY,CAC/B,IAAI8B,EAAa/D,KAAKiC,WAAW6B,GAAKE,MAAK,SAAU5B,GACnD,OAAOA,EAAyB,WAAjBA,EAAMN,QAAwC,aAAjBM,EAAMN,OAAwB,QAE5E,GAAIiC,EAAY,CACd,IAAIE,EAAYjE,KAAKiC,WAAW6B,GAAKI,QAAO,SAAU9B,GACpD,MAAwB,cAAjBA,EAAMN,UAEf9B,KAAKmE,KAAKnE,KAAKiC,WAAY6B,EAAKG,GACP,IAArBA,EAAU5I,eACL2E,KAAKiC,WAAW6B,IAI7B9D,KAAKoE,eAEPA,YAAa,YACNpE,KAAKwB,QAAQC,UAAoC,OAAxBzB,KAAKwB,QAAQM,UAC3C9B,KAAKwB,QAAU,CACbC,UAAU,EACVC,cAAe,KACfC,uBAAwB,KACxBC,aAAc,KACdC,YAAa,KACbC,OAAQ,KACRuC,aAAc,MAEhBrE,KAAK+B,gBAAkB,OAKzBuC,cAAe,SAAuBf,GAIpC,GAHAvD,KAAKwB,QAAU,eAAe,eAAe,GAAIxB,KAAKuE,kBAAkBhB,IAAW,GAAI,CACrFzB,OAAQ,cAEoC,IAA1C9B,KAAKa,yBAAyB2D,SAAqB9H,OAAO+H,KAAKzE,KAAKiC,YAAY5G,OAAS,EAAG,CAC9F,IAAIqJ,EAAe1E,KAAK2E,cAAcpB,GACtC,GAAImB,EAIF,OAHA1E,KAAKwB,QAAUxB,KAAKuE,kBAAkBG,GACtC1E,KAAK4E,kBACL5E,KAAK6E,gBAIT7E,KAAK4E,cAIPL,kBAAmB,SAA2BnC,GAC5C,IAAIT,EAAyBS,EAAMT,uBAEjCC,GADgBQ,EAAMV,cACPU,EAAMR,cACvB,MAAwB,YAApBQ,EAAM0C,WAA2BnD,EAAuBoD,MAAQnD,EAAamD,MACxE,eAAe,eAAe,GAAI3C,GAAQ,GAAI,CACnDV,cAAeE,EACfC,YAAaF,IAGVS,GAETwC,WAAY,aAuCZC,cAAe,WACb,IAAI7E,KAAKyB,UAAoC,aAAxBzB,KAAKwB,QAAQM,OAAlC,CACA9B,KAAKwB,QAAU,eAAe,eAAe,GAAIxB,KAAKwB,SAAU,GAAI,CAClEM,OAAQ,SACRL,UAAU,IAEZ,IAAIuD,EAAgBhF,KAAKwB,QACvBK,EAAcmD,EAAcnD,YAE5BH,GADesD,EAAcpD,aACboD,EAActD,eACLsD,EAAcrD,uBACzC,GAAIE,EAAa,CACf,IAAIoD,EAAyBpD,EAAYkD,MAAQ,EACjDlD,EAAc7B,KAAKgC,UAAUiD,GAC7BjF,KAAKwB,QAAQgB,OAASxC,KAAKwC,OAC3BxC,KAAKkF,WAAWlF,KAAKwB,SACrB,IAAI2D,EAAW,IAAIC,KAAKvD,EAAYN,OAAS,IAAI6D,KAAK1D,EAAcH,OAChE8D,EAAYC,KAAKC,MAAMJ,EAAW,MAAW,MAC7CK,EAAWF,KAAKG,MAAMN,EAAW,MAAW,KAAU,KACtDO,EAAY,IAAIN,KAAK1D,EAAcH,OACnCoE,EAAU,IAAIP,KAAKvD,EAAYN,OAC/BqE,EAAa,CACfnH,MAAO,CACLoH,aAAcH,EAAUI,cACxBvE,MAAOmE,EAAUI,cACjBC,SAAS,EACTC,aAAc,MAEhBC,IAAK,CACHJ,aAAcF,EAAQG,cACtBvE,MAAOoE,EAAQG,cACfC,SAAS,EACTC,aAAc,MAEhBnC,SAAU2B,EAAWH,GAAarF,KAAKa,yBAAyBmC,gBAAkB,GAAK,IACvFlB,OAAQ,UAENoE,EAAiBlG,KAAKiC,WAAWP,EAAcH,OAC9C2E,IAAgBA,EAAiB,IACtCA,EAAeC,KAAKP,GACpB5F,KAAKmE,KAAKnE,KAAKiC,WAAYP,EAAcH,MAAO2E,GAChDlG,KAAK+B,gBAAkB,QAG3B4C,cAAe,SAAuBpB,GACpC,IAAI6C,EAASpG,KACb,GAAKuD,EAAQ3B,aAAb,CACA,IAAIyE,EAAa3J,OAAO+H,KAAKzE,KAAKiC,YAAYqE,KAAI,SAAUC,GAC1D,OAAOH,EAAOnE,WAAWsE,MACxBC,OAAOtC,QAAO,SAAU9B,GACzB,IAAIqE,EAAY,IAAIrB,KAAK7B,EAAQ7B,cAAcH,OAC3CmF,EAAU,IAAItB,KAAK7B,EAAQ1B,YAAYN,OACvCoF,EAAc,IAAIvB,KAAKhD,EAAM3D,MAAM8C,OACnCqF,EAAY,IAAIxB,KAAKhD,EAAM6D,IAAI1E,OACnC,OAAOmF,EAAUC,GAAeD,EAAUE,GAAaH,EAAYE,GAAeD,EAAUC,KAE9F,GAAKN,GAAoC,IAAtBA,EAAWhL,OAA9B,CAGA,IAAIwL,EAAatD,EACjB,GAA0B,YAAtBA,EAAQuB,UAAyB,CACnC,IAAIgC,EAAcT,EAAW,GAAGJ,IAC5Bc,EAAa/G,KAAKgC,UAAUgF,MAAK,SAAUC,GAC7C,OAAOA,EAAE1F,QAAUuF,EAAYjB,gBAE7BqB,EAAOlH,KAAKgC,UAAU+E,EAAWhC,OACrC8B,EAAWnF,cAAgB,CACzBH,MAAO2F,EAAK3F,MACZwD,MAAOmC,EAAKnC,OAEd8B,EAAWjF,aAAe,CACxBL,MAAO2F,EAAK3F,MACZwD,MAAOmC,EAAKnC,WAET,CACL,IAAIoC,EAAed,EAAW,GAAG5H,MAC7B2I,EAAcpH,KAAKgC,UAAUgF,MAAK,SAAUC,GAC9C,OAAOA,EAAE1F,QAAU4F,EAAatB,gBAE9BwB,EAAQrH,KAAKgC,UAAUoF,EAAYrC,MAAQ,GAC/C8B,EAAWhF,YAAc,CACvBN,MAAO8F,EAAM9F,MACbwD,MAAOsC,EAAMtC,OAGjB,OAAO8B,KAET7F,WAAY,WACMhB,KAAKkB,WACrBoG,YAAW,WACT,IAAIC,EAAYC,SAASC,eAAe,iBACpCC,EAASH,EAAYA,EAAUI,UAAY,GAC/CH,SAASC,eAAe,eAAeG,UAAYF,IAGlD,MAELxC,WAAY,WACV,IAAI2C,EAAOnI,UAAUrE,OAAS,QAAsBsE,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,KAC/EM,KAAKoD,QAAQ8B,WAAW2C,IAE1BC,IAAK,SAAa5M,GAChB8E,KAAKoD,QAAQ0E,IAAI5M,MAMnB6M,EAAiBlI,EAGjBmI,EAAiB,WACnB,IAAIC,EAAMjI,KACNkI,EAAKD,EAAIE,eACTC,EAAKH,EAAII,MAAMD,IAAMF,EACzB,OAAOE,EAAG,MAAO,CACfE,IAAKL,EAAI3G,IAAIC,MAAQ,aACrBgH,YAAa,uBACbC,MAAO,CACL,aAAcP,EAAI5G,UAClB,WAAY4G,EAAIlH,QAChBU,SAAUwG,EAAIzG,QAAQC,UAAmC,WAAvBwG,EAAIzG,QAAQM,QAEhD2G,YAAa,CACX,SAAY,YAEdC,MAAO,CACL,GAAM,gBAEP,CAACT,EAAIlH,QAAUqH,EAAG,MAAO,CAC1BtE,IAAKmE,EAAIhH,OACTqH,IAAK,eACLE,MAA8C,oBAAvCP,EAAIpH,yBAAyB8H,MAA8B,sBAAwB,yBAC1FA,MAAO,OAASV,EAAIhH,OAAS,KAC7ByH,MAAO,CACL,GAAM,kBAEP,CAACN,EAAG,OAAQ,CACbQ,WAAY,CAAC,CACXC,KAAM,OACNC,QAAS,SACTvH,MAA8C,oBAAvC0G,EAAIpH,yBAAyB8H,MACpCI,WAAY,yDAEdR,YAAa,WACRN,EAAIe,KAAMf,EAAIgB,GAAG,KAAMb,EAAG,MAAOH,EAAIiB,GAAGjB,EAAIjG,WAAW,SAAUkF,EAAMnC,GAC5E,OAAOqD,EAAG,2BAA4B,CACpCtE,IAAK,WAAaiB,EAClB2D,MAAO,CACL,QAAWT,EAAIzG,QACf,YAAa0F,EACb,MAASnC,EACT,OAAUkD,EAAIzF,OACd,kBAAmByF,EAAIlG,iBAEzBoH,GAAI,CACF,OAAUlB,EAAI3D,cACd,MAAS,SAAe8E,GACtB,OAAOnB,EAAI7D,eAEb,cAAiB,SAAuBgF,GACtC,OAAOnB,EAAIpD,iBAEb,QAAWoD,EAAI3F,cAGjB,GAAI2F,EAAIgB,GAAG,KAAMhB,EAAIiB,GAAGjB,EAAIhG,YAAY,SAAUG,EAAOiH,GAC3D,OAAOpB,EAAIhG,YAAcgG,EAAIhG,WAAW5G,QAAU+G,EAAQgG,EAAG,uBAAwB,CACnFtE,IAAKuF,EAAapB,EAAIzF,OAAOoB,GAC7B8E,MAAO,CACL,MAAStG,EACT,MAAS6F,EAAIhG,WAAW5G,OACxB,MAASgO,EACT,aAAgBpB,EAAIqB,cAEtBH,GAAI,CACF,UAAalB,EAAI9F,aAEhB8F,EAAIe,QACPf,EAAIgB,GAAG,KAAMb,EAAG,MAAO,CACzBG,YAAa,+BACbE,YAAa,CACX,UAAW,WAEV,IAEHc,EAA0B,GAG1BC,EAAwB,SAA+B7I,GACpDA,GACLA,EAAO,oBAAqB,CAC1BnC,OAAQ,maACR8H,SAAK3G,EACL8J,WAAO9J,KAIP+J,OAAmB/J,EAEnBgK,OAA4BhK,EAE5BiK,GAAiC,EAKjCC,EAAiC,eAAkB,CACrDC,OAAQ9B,EACR+B,gBAAiBR,GAChBC,EAAuBzB,EAAgB2B,EAAkBE,EAAgCD,GAA2B,EAAO,YAAyBhK,OAAWA,GAE9JqK,EAAW,CACbC,MAAO,GACPnK,MAAO,CAELoK,QAAS,CACPC,UAAU,EACVhL,KAAMhE,MACNiP,UAAW,SAAmBC,GAC5B,OAAOlP,MAAMC,QAAQiP,IAAyB,WAAjB,eAAQA,KAGzChH,OAAQ,CACN8G,UAAU,EACVhL,KAAMhE,MACNiP,UAAW,SAAmBC,GAC5B,OAAOlP,MAAMC,QAAQiP,IAAyB,WAAjB,eAAQA,KAGzCC,YAAa,CACXH,UAAU,EACVhL,KAAMrB,OACNsM,UAAW,SAAmBG,GAC5B,OAAQC,MAAMpF,KAAKqF,MAAMF,OAI/BrK,WAAY,CACVwK,oBAAqBb,GAEvB9J,QAAS,WACP,IAAI2C,EAAQ1C,KACZA,KAAK2K,mBACLxJ,aAAY,WACV,OAAOuB,EAAM7B,yBAAyB+J,IAAM,IAAIxF,OAC/C,KACHpF,KAAK6K,iBAEPlK,OAAQ,CAAC,4BACTzF,KAAM,WACJ,MAAO,CACL4P,MAAO,KACPC,KAAM,GACNC,UAAW,KAGf5J,SAAU,CACR6J,aAAc,WACZ,OAAKjL,KAAK8K,MACH9K,KAAK8K,MAAM5G,QAAO,SAAUgH,GACjC,QAASA,EAAEC,WAFW,IAK1BC,UAAW,WACT,MAA+C,gBAAxCpL,KAAKa,yBAAyB8H,MAA0B,MAAQ,OAEzE0C,WAAY,WACV,OAAQrL,KAAKa,yBAAyBmC,gBAAkB,EAAI,GAAKhD,KAAKa,yBAAyByK,aAIjGpK,WAAY,WACV,IAAIqK,EAAW,IAAInG,KACnB,OAAO,eAAemG,GAAY,GAAKvL,KAAKa,yBAAyByK,cAGzEpJ,QAAS,CACPsJ,aAAc,SAAsBpJ,GAClCpC,KAAKgL,UAAY5I,GAEnBqJ,YAAa,SAAqBjJ,EAAQD,GACxCvC,KAAKqC,MAAM,eAAgBrC,KAAKgL,UAAWxI,EAAQD,IAErDmJ,SAAU,SAAkBpK,GAC1B,OAAO,eAAQA,IAEjBqK,YAAa,SAAqBrK,GAChC,IAAIsJ,EAAM,IAAIxF,KAAKpF,KAAKa,yBAAyB+J,KAC7CgB,EAAe,eAAchB,EAAI9E,eACrC,OAAO,eAASxE,EAAK,eAAgBsK,KAEvCf,cAAe,WACb,IAAIzE,EAASpG,KACT6L,EAAO7L,KAAKsK,YAAYwB,MAAM,EAAG,IACjCC,EAAwB/L,KAAKa,yBAC/BmL,EAAaD,EAAsBC,WACnCC,EAAYF,EAAsBE,UAClCC,EAAYH,EAAsBG,UACpC,OAAOnQ,QAAQoQ,IAAI,CAACvM,EAASH,KAAK,UAAW,CAC3C6B,IAAKuK,EACL/M,QAAS,CACPkN,WAAYA,EACZC,UAAWA,EACXC,UAAWA,KAEZjJ,MAAK,SAAUC,GAChBkD,EAAO2E,KAAO7H,KACZtD,EAASH,KAAK,WAAY,CAC5BkD,YAAa,CACXC,WAAY5C,KAAKa,yBAAyBgC,cAC1CC,SAAU9C,KAAKa,yBAAyBkC,eAEzCE,MAAK,SAAUC,GAEhBkD,EAAO0E,MAAQ5H,QAGnByH,iBAAkB,WAChB,IAAIyB,EAASpM,KACbA,KAAKqM,kBAAkBC,UAAY,WACjCF,EAAOvB,iBAET7K,KAAKqM,kBAAkBE,YAAc,WACnC,IAAIC,EAAOJ,EAAOrB,KAAKzE,KAAI,SAAUhF,GACnC,OAAOA,EAAIC,MAAMuK,MAAM,EAAG,OAE5BU,EAAK/O,SAAQ,SAAU6K,GACrB8D,EAAOK,MAAMnE,IAAQ8D,EAAOK,MAAMnE,GAAK,IAAK8D,EAAOK,MAAMnE,GAAK,GAAG5H,8BAIvEwE,WAAY,WACV,IAAI2C,EAAOnI,UAAUrE,OAAS,QAAsBsE,IAAjBD,UAAU,GAAmBA,UAAU,GAAK,KAC/EM,KAAKoD,QAAQ8B,WAAW2C,IAE1BC,IAAK,SAAa5M,GAChB8E,KAAKoD,QAAQ0E,IAAI5M,MAMnBwR,EAAmB1C,EAGnB2C,EAAmB,WACrB,IAAI1E,EAAMjI,KACNkI,EAAKD,EAAIE,eACTC,EAAKH,EAAII,MAAMD,IAAMF,EACzB,OAAOE,EAAG,MAAO,CACfG,YAAa,gBACbI,MAAO,yBAA2BV,EAAImD,WACrC,CAACnD,EAAIiC,SAAWjC,EAAI8C,KAAO3C,EAAG,MAAO,CACtCG,YAAa,cACZ,CAACH,EAAG,KAAM,CACXG,YAAa,QACZN,EAAIiB,GAAGjB,EAAIiC,SAAW,IAAI,SAAU1H,EAAQuC,GAC7C,OAAOvC,EAAS4F,EAAG,KAAM,CACvBtE,IAAKiB,EACLwD,YAAa,gBACbC,MAAO,CACLoE,MAAO3E,EAAIyD,SAASzD,EAAIqC,aACxB,YAAarC,EAAI0D,YAAY1D,EAAIqC,eAElC,CAAC9H,EAAS4F,EAAG,MAAO,CACrBG,YAAa,UACZ,CAACH,EAAG,OAAQ,CACbG,YAAa,gBACZ,CAACN,EAAIgB,GAAGhB,EAAI4E,GAAGrK,EAAOsK,UAAW7E,EAAIgB,GAAG,KAAMb,EAAG,OAAQ,CAC1DG,YAAa,+BACZ,CAACN,EAAIgB,GAAGhB,EAAI4E,GAAGrK,EAAOoB,SAAWqE,EAAIe,OAASf,EAAIe,QACnD,GAAIf,EAAIgB,GAAG,KAAMb,EAAG,KAAM,CAC5BG,YAAa,WACZ,CAACH,EAAG,OAAQ,CAACH,EAAIgB,GAAG,aAAchB,EAAIgB,GAAG,KAAMhB,EAAIiB,GAAGjB,EAAIiC,SAAW,IAAI,SAAU5I,EAAKyD,GACzF,OAAOqD,EAAG,KAAM,CACdtE,IAAKiB,EACLyD,MAAO,CACL,YAAaP,EAAIyD,SAASzD,EAAIqC,aAC9B,cAAc,GAEhB3B,MAAO,WAAaV,EAAIpH,yBAAyByK,YAAc,GAAK,WAEnE,KAAOrD,EAAIe,KAAMf,EAAIgB,GAAG,KAAOhB,EAAIe,KAAMf,EAAIgB,GAAG,KAAMhB,EAAI6C,MAAQ1C,EAAG,MAAO,CAC/EG,YAAa,UACZ,CAACH,EAAG,MAAO,CACZG,YAAa,mBACZ,CAACH,EAAG,KAAM,CACXG,YAAa,SACZN,EAAIiB,GAAGjB,EAAIgD,cAAc,SAAU8B,EAAMhI,GAC1C,OAAOqD,EAAG,KAAM,CACdtE,IAAKiB,EACLwD,YAAa,6BACbI,MAAO,UAAYV,EAAIoD,WAAa,MACnC,CAACjD,EAAG,OAAQ,CACbG,YAAa,sBACZ,CAACN,EAAIgB,GAAGhB,EAAI4E,GAAG5E,EAAIpH,yBAAyBmM,gBAAgBD,EAAKxL,gBAClE,GAAI0G,EAAIgB,GAAG,KAAMb,EAAG,MAAO,CAC7BQ,WAAY,CAAC,CACXC,KAAM,OACNC,QAAS,SACTvH,MAA8C,oBAAvC0G,EAAIpH,yBAAyB8H,MACpCI,WAAY,yDAEdR,YAAa,sBACbI,MAAO,OAASV,EAAI/G,WAAa,MAChC,CAACkH,EAAG,OAAQ,CACbG,YAAa,cACZ,CAACN,EAAIgB,GAAGhB,EAAI4E,GAAG5E,EAAI/G,eAAgB+G,EAAIgB,GAAG,KAAMb,EAAG,OAAQ,CAC5DG,YAAa,WACTN,EAAIgB,GAAG,KAAMhB,EAAI8C,KAAO3C,EAAG,MAAO,CACtCG,YAAa,eACZN,EAAIiB,GAAGjB,EAAIiC,SAAS,SAAU1H,EAAQuC,GACvC,OAAOvC,EAAS4F,EAAG,wBAAyB,CAC1CtE,IAAK,OAASmE,EAAIqC,YAAcvF,EAChCuD,IAAKL,EAAI8C,KAAK,GAAGxJ,MAAMuK,MAAM,EAAG,IAAM,OAAS/G,EAC/CkI,UAAU,EACV1E,YAAa,kBACbC,MAAO,QAAUzD,EAAQ,GACzB2D,MAAO,CACL,IAAOT,EAAI8C,KAAK,GAChB,OAAU9C,EAAI5E,OACd,aAAgB0B,EAChB,OAAUvC,EACV,cAAeyF,EAAI/G,YAErBiI,GAAI,CACF,eAAgBlB,EAAIwD,YACpB,mBAAoBxD,EAAIuD,gBAEvBvD,EAAIe,QACP,GAAKf,EAAIe,SAAWf,EAAIe,QAE1BkE,EAA4B,GAG5BC,EAA0B,SAA+BxM,GACtDA,IACLA,EAAO,oBAAqB,CAC1BnC,OAAQ,07DACR8H,SAAK3G,EACL8J,WAAO9J,IACLgB,EAAO,oBAAqB,CAC9BnC,OAAQ,6FACR8H,SAAK3G,EACL8J,WAAO9J,MAIPyN,OAAqBzN,EAErB0N,OAA8B1N,EAE9B2N,GAAmC,EAKnCC,EAAmC,eAAkB,CACvDzD,OAAQ6C,EACR5C,gBAAiBmD,GAChBC,EAAyBT,EAAkBU,EAAoBE,EAAkCD,GAA6B,EAAO,YAAyB1N,OAAWA,GAE7J,gB,uECnxBf,IAOI6N,EACAC,EARA3Q,EAAUE,EAAO0Q,QAAU,GAU/B,SAASC,IACL,MAAM,IAAIzR,MAAM,mCAEpB,SAAS0R,IACL,MAAM,IAAI1R,MAAM,qCAsBpB,SAAS2R,EAAWC,GAChB,GAAIN,IAAqBlG,WAErB,OAAOA,WAAWwG,EAAK,GAG3B,IAAKN,IAAqBG,IAAqBH,IAAqBlG,WAEhE,OADAkG,EAAmBlG,WACZA,WAAWwG,EAAK,GAE3B,IAEI,OAAON,EAAiBM,EAAK,GAC/B,MAAM/S,GACJ,IAEI,OAAOyS,EAAiB3Q,KAAK,KAAMiR,EAAK,GAC1C,MAAM/S,GAEJ,OAAOyS,EAAiB3Q,KAAKmD,KAAM8N,EAAK,KAMpD,SAASC,EAAgBC,GACrB,GAAIP,IAAuBQ,aAEvB,OAAOA,aAAaD,GAGxB,IAAKP,IAAuBG,IAAwBH,IAAuBQ,aAEvE,OADAR,EAAqBQ,aACdA,aAAaD,GAExB,IAEI,OAAOP,EAAmBO,GAC5B,MAAOjT,GACL,IAEI,OAAO0S,EAAmB5Q,KAAK,KAAMmR,GACvC,MAAOjT,GAGL,OAAO0S,EAAmB5Q,KAAKmD,KAAMgO,MAjEhD,WACG,IAEQR,EADsB,oBAAflG,WACYA,WAEAqG,EAEzB,MAAO5S,GACLyS,EAAmBG,EAEvB,IAEQF,EADwB,oBAAjBQ,aACcA,aAEAL,EAE3B,MAAO7S,GACL0S,EAAqBG,IAjB7B,GAwEA,IAEIM,EAFAC,EAAQ,GACRC,GAAW,EAEXC,GAAc,EAElB,SAASC,IACAF,GAAaF,IAGlBE,GAAW,EACPF,EAAa7S,OACb8S,EAAQD,EAAaK,OAAOJ,GAE5BE,GAAc,EAEdF,EAAM9S,QACNmT,KAIR,SAASA,IACL,IAAIJ,EAAJ,CAGA,IAAIK,EAAUZ,EAAWS,GACzBF,GAAW,EAEX,IAAIM,EAAMP,EAAM9S,OAChB,MAAMqT,EAAK,CACPR,EAAeC,EACfA,EAAQ,GACR,QAASE,EAAaK,EACdR,GACAA,EAAaG,GAAYM,MAGjCN,GAAc,EACdK,EAAMP,EAAM9S,OAEhB6S,EAAe,KACfE,GAAW,EACXL,EAAgBU,IAiBpB,SAASG,EAAKd,EAAKe,GACf7O,KAAK8N,IAAMA,EACX9N,KAAK6O,MAAQA,EAYjB,SAASC,KA5BThS,EAAQiS,SAAW,SAAUjB,GACzB,IAAIkB,EAAO,IAAI7T,MAAMuE,UAAUrE,OAAS,GACxC,GAAIqE,UAAUrE,OAAS,EACnB,IAAK,IAAIsI,EAAI,EAAGA,EAAIjE,UAAUrE,OAAQsI,IAClCqL,EAAKrL,EAAI,GAAKjE,UAAUiE,GAGhCwK,EAAMhI,KAAK,IAAIyI,EAAKd,EAAKkB,IACJ,IAAjBb,EAAM9S,QAAiB+S,GACvBP,EAAWW,IASnBI,EAAKjS,UAAUgS,IAAM,WACjB3O,KAAK8N,IAAI9P,MAAM,KAAMgC,KAAK6O,QAE9B/R,EAAQgQ,MAAQ,UAChBhQ,EAAQmS,SAAU,EAClBnS,EAAQoS,IAAM,GACdpS,EAAQqS,KAAO,GACfrS,EAAQsS,QAAU,GAClBtS,EAAQuS,SAAW,GAInBvS,EAAQqM,GAAK2F,EACbhS,EAAQwS,YAAcR,EACtBhS,EAAQyS,KAAOT,EACfhS,EAAQ0S,IAAMV,EACdhS,EAAQ2S,eAAiBX,EACzBhS,EAAQ4S,mBAAqBZ,EAC7BhS,EAAQ6S,KAAOb,EACfhS,EAAQ8S,gBAAkBd,EAC1BhS,EAAQ+S,oBAAsBf,EAE9BhS,EAAQgT,UAAY,SAAUjH,GAAQ,MAAO,IAE7C/L,EAAQiT,QAAU,SAAUlH,GACxB,MAAM,IAAI3M,MAAM,qCAGpBY,EAAQkT,IAAM,WAAc,MAAO,KACnClT,EAAQmT,MAAQ,SAAUC,GACtB,MAAM,IAAIhU,MAAM,mCAEpBY,EAAQqT,MAAQ,WAAa,OAAO","file":"js/chunk-789d52ea.chunk.js","sourcesContent":["import { i as isWeekend, a as isToday, c as cloneObject, g as getDistance, b as _objectSpread2, d as __vue_normalize__, e as __vue_create_injector__, f as _typeof, h as getTopDistance, j as getLocaleTime, k as isBefore, l as getHourlessDate } from './index-f8767c62.js';\nimport 'vue';\nimport 'moment';\n\nfunction PromiseWorker (worker) {\n  var messageIds = 0;\n  var callbacks = {};\n  worker.addEventListener(\"message\", function (e) {\n    return onMessage(e);\n  });\n  var onMessage = function onMessage(e) {\n    var message = e.data;\n    if (!Array.isArray(message) || message.length < 2) {\n      return;\n    }\n    var messageId = message[0];\n    var error = message[1];\n    var result = message[2];\n    var callback = callbacks[messageId];\n    if (!callback) return;\n    delete callbacks[messageId];\n    callback(error, result);\n  };\n  return {\n    initiateWorker: function initiateWorker(_worker) {},\n    postMessage: function postMessage(userMessage) {\n      var messageId = messageIds++;\n      var messageToSend = [messageId, userMessage];\n      return new Promise(function (resolve, reject) {\n        callbacks[messageId] = function (error, result) {\n          if (error) return reject(new Error(error.message));\n          resolve(result);\n        };\n        if (typeof worker.controller !== \"undefined\") {\n          // service worker, use MessageChannels because e.source is broken in Chrome < 51:\n          // https://bugs.chromium.org/p/chromium/issues/detail?id=543198\n          var channel = new MessageChannel();\n          channel.port1.onmessage = function (e) {\n            onMessage(e);\n          };\n          worker.controller.postMessage(messageToSend, [channel.port2]);\n        } else {\n          // web worker\n          worker.postMessage(messageToSend);\n        }\n      });\n    }\n  };\n}\n\nconst kIsNodeJS = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\nconst kRequire = kIsNodeJS && typeof module.require === 'function' ? module.require : null; // eslint-disable-line\n\nfunction browserDecodeBase64(base64, enableUnicode) {\n    const binaryString = atob(base64);\n    if (enableUnicode) {\n        const binaryView = new Uint8Array(binaryString.length);\n        Array.prototype.forEach.call(binaryView, (el, idx, arr) => {\n            arr[idx] = binaryString.charCodeAt(idx);\n        });\n        return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));\n    }\n    return binaryString;\n}\n\nfunction nodeDecodeBase64(base64, enableUnicode) {\n    return Buffer.from(base64, 'base64').toString(enableUnicode ? 'utf16' : 'utf8');\n}\n\nfunction createBase64WorkerFactory(base64, sourcemap = null, enableUnicode = false) {\n    const source = kIsNodeJS ? nodeDecodeBase64(base64, enableUnicode) : browserDecodeBase64(base64, enableUnicode);\n    const start = source.indexOf('\\n', 10) + 1;\n    const body = source.substring(start) + (sourcemap ? `\\/\\/# sourceMappingURL=${sourcemap}` : '');\n\n    if (kRequire) {\n        /* node.js */\n        const Worker = kRequire('worker_threads').Worker; // eslint-disable-line\n        return function WorkerFactory(options) {\n            return new Worker(body, Object.assign({}, options, { eval: true }));\n        };\n    }\n\n    /* browser */\n    const blob = new Blob([body], { type: 'application/javascript' });\n    const url = URL.createObjectURL(blob);\n    return function WorkerFactory(options) {\n        return new Worker(url, options);\n    };\n}\n\n/* eslint-disable */\nvar WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgdmFyIF9pID0gbnVsbCA9PSBhcnIgPyBudWxsIDogInVuZGVmaW5lZCIgIT0gdHlwZW9mIFN5bWJvbCAmJiBhcnJbU3ltYm9sLml0ZXJhdG9yXSB8fCBhcnJbIkBAaXRlcmF0b3IiXTsKICBpZiAobnVsbCAhPSBfaSkgewogICAgdmFyIF9zLAogICAgICBfZSwKICAgICAgX3gsCiAgICAgIF9yLAogICAgICBfYXJyID0gW10sCiAgICAgIF9uID0gITAsCiAgICAgIF9kID0gITE7CiAgICB0cnkgewogICAgICBpZiAoX3ggPSAoX2kgPSBfaS5jYWxsKGFycikpLm5leHQsIDAgPT09IGkpIHsKICAgICAgICBpZiAoT2JqZWN0KF9pKSAhPT0gX2kpIHJldHVybjsKICAgICAgICBfbiA9ICExOwogICAgICB9IGVsc2UgZm9yICg7ICEoX24gPSAoX3MgPSBfeC5jYWxsKF9pKSkuZG9uZSkgJiYgKF9hcnIucHVzaChfcy52YWx1ZSksIF9hcnIubGVuZ3RoICE9PSBpKTsgX24gPSAhMCk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2QgPSAhMCwgX2UgPSBlcnI7CiAgICB9IGZpbmFsbHkgewogICAgICB0cnkgewogICAgICAgIGlmICghX24gJiYgbnVsbCAhPSBfaS5yZXR1cm4gJiYgKF9yID0gX2kucmV0dXJuKCksIE9iamVjdChfcikgIT09IF9yKSkgcmV0dXJuOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIGlmIChfZCkgdGhyb3cgX2U7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBfYXJyOwogIH0KfQpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CiAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsKICAgIHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOwogICAgZW51bWVyYWJsZU9ubHkgJiYgKHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSkpLCBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQogIHJldHVybiBrZXlzOwp9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQyKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gbnVsbCAhPSBhcmd1bWVudHNbaV0gPyBhcmd1bWVudHNbaV0gOiB7fTsKICAgIGkgJSAyID8gb3duS2V5cyhPYmplY3Qoc291cmNlKSwgITApLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsKICAgIH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpIDogb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgfSk7CiAgfQogIHJldHVybiB0YXJnZXQ7Cn0KZnVuY3Rpb24gX3R5cGVvZihvYmopIHsKICAiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2YiOwoKICByZXR1cm4gX3R5cGVvZiA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIFN5bWJvbCAmJiAic3ltYm9sIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG9iaikgewogICAgcmV0dXJuIHR5cGVvZiBvYmo7CiAgfSA6IGZ1bmN0aW9uIChvYmopIHsKICAgIHJldHVybiBvYmogJiYgImZ1bmN0aW9uIiA9PSB0eXBlb2YgU3ltYm9sICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsKICB9LCBfdHlwZW9mKG9iaik7Cn0KZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGtleSA9IF90b1Byb3BlcnR5S2V5KGtleSk7CiAgaWYgKGtleSBpbiBvYmopIHsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgd3JpdGFibGU6IHRydWUKICAgIH0pOwogIH0gZWxzZSB7CiAgICBvYmpba2V5XSA9IHZhbHVlOwogIH0KICByZXR1cm4gb2JqOwp9CmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KZnVuY3Rpb24gX2FycmF5V2l0aEhvbGVzKGFycikgewogIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7Cn0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgewogIGlmICghbykgcmV0dXJuOwogIGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOwogIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsKICBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsKICBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOwogIGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7Cn0KZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsKICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsKICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07CiAgcmV0dXJuIGFycjI7Cn0KZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHsKICB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOwp9CmZ1bmN0aW9uIF90b1ByaW1pdGl2ZShpbnB1dCwgaGludCkgewogIGlmICh0eXBlb2YgaW5wdXQgIT09ICJvYmplY3QiIHx8IGlucHV0ID09PSBudWxsKSByZXR1cm4gaW5wdXQ7CiAgdmFyIHByaW0gPSBpbnB1dFtTeW1ib2wudG9QcmltaXRpdmVdOwogIGlmIChwcmltICE9PSB1bmRlZmluZWQpIHsKICAgIHZhciByZXMgPSBwcmltLmNhbGwoaW5wdXQsIGhpbnQgfHwgImRlZmF1bHQiKTsKICAgIGlmICh0eXBlb2YgcmVzICE9PSAib2JqZWN0IikgcmV0dXJuIHJlczsKICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuIik7CiAgfQogIHJldHVybiAoaGludCA9PT0gInN0cmluZyIgPyBTdHJpbmcgOiBOdW1iZXIpKGlucHV0KTsKfQpmdW5jdGlvbiBfdG9Qcm9wZXJ0eUtleShhcmcpIHsKICB2YXIga2V5ID0gX3RvUHJpbWl0aXZlKGFyZywgInN0cmluZyIpOwogIHJldHVybiB0eXBlb2Yga2V5ID09PSAic3ltYm9sIiA/IGtleSA6IFN0cmluZyhrZXkpOwp9CgovL3RvZG86IHJlbW92ZSB0aGlzIGFuZCBmb3JrIHByb21pc2Utd29ya2VyIHRvIHByb3ZpZGUgRVNNCmZ1bmN0aW9uIGlzUHJvbWlzZShvYmopIHsKICAvLyB2aWEgaHR0cHM6Ly91bnBrZy5jb20vaXMtcHJvbWlzZUAyLjEuMC9pbmRleC5qcwogIHJldHVybiAhIW9iaiAmJiAoX3R5cGVvZihvYmopID09PSAib2JqZWN0IiB8fCB0eXBlb2Ygb2JqID09PSAiZnVuY3Rpb24iKSAmJiB0eXBlb2Ygb2JqLnRoZW4gPT09ICJmdW5jdGlvbiI7Cn0KZnVuY3Rpb24gcmVnaXN0ZXJQcm9taXNlV29ya2VyIChjYWxsYmFjaykgewogIGZ1bmN0aW9uIHBvc3RPdXRnb2luZ01lc3NhZ2UoZSwgbWVzc2FnZUlkLCBlcnJvciwgcmVzdWx0KSB7CiAgICBmdW5jdGlvbiBwb3N0TWVzc2FnZShtc2cpIHsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCiAgICAgIGlmICh0eXBlb2Ygc2VsZi5wb3N0TWVzc2FnZSAhPT0gImZ1bmN0aW9uIikgewogICAgICAgIC8vIHNlcnZpY2Ugd29ya2VyCiAgICAgICAgZS5wb3J0c1swXS5wb3N0TWVzc2FnZShtc2cpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHdlYiB3b3JrZXIKICAgICAgICBzZWxmLnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgIH0KICAgIH0KICAgIGlmIChlcnJvcikgewogICAgICBwb3N0TWVzc2FnZShbbWVzc2FnZUlkLCB7CiAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZQogICAgICB9XSk7CiAgICB9IGVsc2UgewogICAgICBwb3N0TWVzc2FnZShbbWVzc2FnZUlkLCBudWxsLCByZXN1bHRdKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gdHJ5Q2F0Y2hGdW5jKGNhbGxiYWNrLCBtZXNzYWdlKSB7CiAgICB0cnkgewogICAgICByZXR1cm4gewogICAgICAgIHJlczogY2FsbGJhY2sobWVzc2FnZSkKICAgICAgfTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBlcnI6IGUKICAgICAgfTsKICAgIH0KICB9CiAgZnVuY3Rpb24gaGFuZGxlSW5jb21pbmdNZXNzYWdlKGUsIGNhbGxiYWNrLCBtZXNzYWdlSWQsIG1lc3NhZ2UpIHsKICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaEZ1bmMoY2FsbGJhY2ssIG1lc3NhZ2UpOwogICAgaWYgKHJlc3VsdC5lcnIpIHsKICAgICAgcG9zdE91dGdvaW5nTWVzc2FnZShlLCBtZXNzYWdlSWQsIHJlc3VsdC5lcnIpOwogICAgfSBlbHNlIGlmICghaXNQcm9taXNlKHJlc3VsdC5yZXMpKSB7CiAgICAgIHBvc3RPdXRnb2luZ01lc3NhZ2UoZSwgbWVzc2FnZUlkLCBudWxsLCByZXN1bHQucmVzKTsKICAgIH0gZWxzZSB7CiAgICAgIHJlc3VsdC5yZXMudGhlbihmdW5jdGlvbiAoZmluYWxSZXN1bHQpIHsKICAgICAgICBwb3N0T3V0Z29pbmdNZXNzYWdlKGUsIG1lc3NhZ2VJZCwgbnVsbCwgZmluYWxSZXN1bHQpOwogICAgICB9LCBmdW5jdGlvbiAoZmluYWxFcnJvcikgewogICAgICAgIHBvc3RPdXRnb2luZ01lc3NhZ2UoZSwgbWVzc2FnZUlkLCBmaW5hbEVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfQogIGZ1bmN0aW9uIG9uSW5jb21pbmdNZXNzYWdlKGUpIHsKICAgIHZhciBwYXlsb2FkID0gZS5kYXRhOwogICAgaWYgKCFBcnJheS5pc0FycmF5KHBheWxvYWQpIHx8IHBheWxvYWQubGVuZ3RoICE9PSAyKSB7CiAgICAgIC8vIG1lc3NhZ2UgZG9lbnMndCBtYXRjaCBjb21tdW5pY2F0aW9uIGZvcm1hdDsgaWdub3JlCiAgICAgIHJldHVybjsKICAgIH0KICAgIHZhciBtZXNzYWdlSWQgPSBwYXlsb2FkWzBdOwogICAgdmFyIG1lc3NhZ2UgPSBwYXlsb2FkWzFdOwogICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gImZ1bmN0aW9uIikgewogICAgICBwb3N0T3V0Z29pbmdNZXNzYWdlKGUsIG1lc3NhZ2VJZCwgbmV3IEVycm9yKCJQbGVhc2UgcGFzcyBhIGZ1bmN0aW9uIGludG8gcmVnaXN0ZXIoKS4iKSk7CiAgICB9IGVsc2UgewogICAgICBoYW5kbGVJbmNvbWluZ01lc3NhZ2UoZSwgY2FsbGJhY2ssIG1lc3NhZ2VJZCwgbWVzc2FnZSk7CiAgICB9CiAgfQogIHNlbGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsIG9uSW5jb21pbmdNZXNzYWdlKTsKfQoKdmFyIGNyZWF0b3JzX29mZnNldCA9IG5ldyBEYXRlKCkuZ2V0VGltZXpvbmVPZmZzZXQoKSAvIDYwOwppZiAoY3JlYXRvcnNfb2Zmc2V0ICogLTEgPj0gMCkgewogIGNyZWF0b3JzX29mZnNldCAqPSAtMTsKICBjcmVhdG9yc19vZmZzZXQgPSAiIi5jb25jYXQoKGNyZWF0b3JzX29mZnNldCArICIiKS5wYWRTdGFydCgyLCAiMCIpLCAiOjAwIik7CiAgY3JlYXRvcnNfb2Zmc2V0ID0gIisiLmNvbmNhdChjcmVhdG9yc19vZmZzZXQpOwp9IGVsc2UgewogIGNyZWF0b3JzX29mZnNldCA9ICIiLmNvbmNhdCgoY3JlYXRvcnNfb2Zmc2V0ICsgIiIpLnBhZFN0YXJ0KDIsICIwIiksICI6MDAiKTsKICBjcmVhdG9yc19vZmZzZXQgPSAiLSIuY29uY2F0KGNyZWF0b3JzX29mZnNldCk7Cn0KdmFyIGdldEhvdXJsZXNzRGF0ZSA9IGZ1bmN0aW9uIGdldEhvdXJsZXNzRGF0ZShkYXRlX3N0cmluZykgewogIHZhciB0b2RheSA9IGRhdGVfc3RyaW5nID8gbmV3IERhdGUoZGF0ZV9zdHJpbmcpIDogbmV3IERhdGUoKTsKICB2YXIgeWVhciA9IHRvZGF5LmdldEZ1bGxZZWFyKCkgKyAiIiwKICAgIG1vbnRoID0gKHRvZGF5LmdldE1vbnRoKCkgKyAxICsgIiIpLnBhZFN0YXJ0KDIsICIwIiksCiAgICBkYXkgPSAodG9kYXkuZ2V0RGF0ZSgpICsgIiIpLnBhZFN0YXJ0KDIsICIwIik7CiAgcmV0dXJuICIiLmNvbmNhdCh5ZWFyLCAiLSIpLmNvbmNhdChtb250aCwgIi0iKS5jb25jYXQoZGF5LCAiVDAwOjAwOjAwLjAwMFoiKTsKfTsKdmFyIGdldFllYXJNb250aERheSA9IGZ1bmN0aW9uIGdldFllYXJNb250aERheShkYXRlX3N0cmluZykgewogIHJldHVybiBnZXRIb3VybGVzc0RhdGUoZGF0ZV9zdHJpbmcpLnNsaWNlKDAsIDEwKTsKfTsKdmFyIGFkZERheXMgPSBmdW5jdGlvbiBhZGREYXlzKGRhdGUsIGRheXMpIHsKICB2YXIgZGF0ZU9iaiA9IG5ldyBEYXRlKGRhdGUpOwogIGRhdGVPYmouc2V0VVRDSG91cnMoMCwgMCwgMCwgMCk7CiAgZGF0ZU9iai5zZXREYXRlKGRhdGVPYmouZ2V0RGF0ZSgpICsgZGF5cyk7CiAgcmV0dXJuIGRhdGVPYmo7Cn07CnZhciBnZW5lcmF0ZVVVSUQgPSBmdW5jdGlvbiBnZW5lcmF0ZVVVSUQoKSB7CiAgcmV0dXJuIChbMWU3XSArIC0xZTMgKyAtNGUzICsgLThlMyArIC0xZTExKS5yZXBsYWNlKC9bMDE4XS9nLCBmdW5jdGlvbiAoYykgewogICAgcmV0dXJuIChjIF4gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxKSlbMF0gJiAxNSA+PiBjIC8gNCkudG9TdHJpbmcoMTYpOwogIH0pOwp9Owp2YXIgZ2V0TG9jYWxlVGltZSA9IGZ1bmN0aW9uIGdldExvY2FsZVRpbWUoZGF0ZVN0cmluZykgewogIHZhciBfRGF0ZSR0b0xvY2FsZVN0cmluZyQgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKS50b0xvY2FsZVN0cmluZygiZW4tR0IiKS5zcGxpdCgiLCAiKSwKICAgIF9EYXRlJHRvTG9jYWxlU3RyaW5nJDIgPSBfc2xpY2VkVG9BcnJheShfRGF0ZSR0b0xvY2FsZVN0cmluZyQsIDIpLAogICAgZGF0ZSA9IF9EYXRlJHRvTG9jYWxlU3RyaW5nJDJbMF0sCiAgICBob3VyID0gX0RhdGUkdG9Mb2NhbGVTdHJpbmckMlsxXTsKICBkYXRlID0gZGF0ZS5zcGxpdCgiLyIpLnJldmVyc2UoKS5qb2luKCItIik7CiAgcmV0dXJuICIiLmNvbmNhdChkYXRlLCAiVCIpLmNvbmNhdChob3VyLCAiLjAwMFoiKTsKfTsKCnZhciBob3VyVXRpbHMgPSB7CiAgZ2V0QWxsSG91cnM6IGZ1bmN0aW9uIGdldEFsbEhvdXJzKCkgewogICAgcmV0dXJuIFsiMDA6MDA6MDAiLCAiMDA6MTA6MDAiLCAiMDA6MjA6MDAiLCAiMDA6MzA6MDAiLCAiMDA6NDA6MDAiLCAiMDA6NTA6MDAiLCAiMDE6MDA6MDAiLCAiMDE6MTA6MDAiLCAiMDE6MjA6MDAiLCAiMDE6MzA6MDAiLCAiMDE6NDA6MDAiLCAiMDE6NTA6MDAiLCAiMDI6MDA6MDAiLCAiMDI6MTA6MDAiLCAiMDI6MjA6MDAiLCAiMDI6MzA6MDAiLCAiMDI6NDA6MDAiLCAiMDI6NTA6MDAiLCAiMDM6MDA6MDAiLCAiMDM6MTA6MDAiLCAiMDM6MjA6MDAiLCAiMDM6MzA6MDAiLCAiMDM6NDA6MDAiLCAiMDM6NTA6MDAiLCAiMDQ6MDA6MDAiLCAiMDQ6MTA6MDAiLCAiMDQ6MjA6MDAiLCAiMDQ6MzA6MDAiLCAiMDQ6NDA6MDAiLCAiMDQ6NTA6MDAiLCAiMDU6MDA6MDAiLCAiMDU6MTA6MDAiLCAiMDU6MjA6MDAiLCAiMDU6MzA6MDAiLCAiMDU6NDA6MDAiLCAiMDU6NTA6MDAiLCAiMDY6MDA6MDAiLCAiMDY6MTA6MDAiLCAiMDY6MjA6MDAiLCAiMDY6MzA6MDAiLCAiMDY6NDA6MDAiLCAiMDY6NTA6MDAiLCAiMDc6MDA6MDAiLCAiMDc6MTA6MDAiLCAiMDc6MjA6MDAiLCAiMDc6MzA6MDAiLCAiMDc6NDA6MDAiLCAiMDc6NTA6MDAiLCAiMDg6MDA6MDAiLCAiMDg6MTA6MDAiLCAiMDg6MjA6MDAiLCAiMDg6MzA6MDAiLCAiMDg6NDA6MDAiLCAiMDg6NTA6MDAiLCAiMDk6MDA6MDAiLCAiMDk6MTA6MDAiLCAiMDk6MjA6MDAiLCAiMDk6MzA6MDAiLCAiMDk6NDA6MDAiLCAiMDk6NTA6MDAiLCAiMTA6MDA6MDAiLCAiMTA6MTA6MDAiLCAiMTA6MjA6MDAiLCAiMTA6MzA6MDAiLCAiMTA6NDA6MDAiLCAiMTA6NTA6MDAiLCAiMTE6MDA6MDAiLCAiMTE6MTA6MDAiLCAiMTE6MjA6MDAiLCAiMTE6MzA6MDAiLCAiMTE6NDA6MDAiLCAiMTE6NTA6MDAiLCAiMTI6MDA6MDAiLCAiMTI6MTA6MDAiLCAiMTI6MjA6MDAiLCAiMTI6MzA6MDAiLCAiMTI6NDA6MDAiLCAiMTI6NTA6MDAiLCAiMTM6MDA6MDAiLCAiMTM6MTA6MDAiLCAiMTM6MjA6MDAiLCAiMTM6MzA6MDAiLCAiMTM6NDA6MDAiLCAiMTM6NTA6MDAiLCAiMTQ6MDA6MDAiLCAiMTQ6MTA6MDAiLCAiMTQ6MjA6MDAiLCAiMTQ6MzA6MDAiLCAiMTQ6NDA6MDAiLCAiMTQ6NTA6MDAiLCAiMTU6MDA6MDAiLCAiMTU6MTA6MDAiLCAiMTU6MjA6MDAiLCAiMTU6MzA6MDAiLCAiMTU6NDA6MDAiLCAiMTU6NTA6MDAiLCAiMTY6MDA6MDAiLCAiMTY6MTA6MDAiLCAiMTY6MjA6MDAiLCAiMTY6MzA6MDAiLCAiMTY6NDA6MDAiLCAiMTY6NTA6MDAiLCAiMTc6MDA6MDAiLCAiMTc6MTA6MDAiLCAiMTc6MjA6MDAiLCAiMTc6MzA6MDAiLCAiMTc6NDA6MDAiLCAiMTc6NTA6MDAiLCAiMTg6MDA6MDAiLCAiMTg6MTA6MDAiLCAiMTg6MjA6MDAiLCAiMTg6MzA6MDAiLCAiMTg6NDA6MDAiLCAiMTg6NTA6MDAiLCAiMTk6MDA6MDAiLCAiMTk6MTA6MDAiLCAiMTk6MjA6MDAiLCAiMTk6MzA6MDAiLCAiMTk6NDA6MDAiLCAiMTk6NTA6MDAiLCAiMjA6MDA6MDAiLCAiMjA6MTA6MDAiLCAiMjA6MjA6MDAiLCAiMjA6MzA6MDAiLCAiMjA6NDA6MDAiLCAiMjA6NTA6MDAiLCAiMjE6MDA6MDAiLCAiMjE6MTA6MDAiLCAiMjE6MjA6MDAiLCAiMjE6MzA6MDAiLCAiMjE6NDA6MDAiLCAiMjE6NTA6MDAiLCAiMjI6MDA6MDAiLCAiMjI6MTA6MDAiLCAiMjI6MjA6MDAiLCAiMjI6MzA6MDAiLCAiMjI6NDA6MDAiLCAiMjI6NTA6MDAiLCAiMjM6MDA6MDAiLCAiMjM6MTA6MDAiLCAiMjM6MjA6MDAiLCAiMjM6MzA6MDAiLCAiMjM6NDA6MDAiLCAiMjM6NTA6MDAiLCAiMjQ6MDA6MDAiXTsKICB9LAogIGdldEZ1bGxIb3VyczogZnVuY3Rpb24gZ2V0RnVsbEhvdXJzKCkgewogICAgcmV0dXJuIFsiMDA6MDA6MDAiLCAiMDE6MDA6MDAiLCAiMDI6MDA6MDAiLCAiMDM6MDA6MDAiLCAiMDQ6MDA6MDAiLCAiMDU6MDA6MDAiLCAiMDY6MDA6MDAiLCAiMDc6MDA6MDAiLCAiMDg6MDA6MDAiLCAiMDk6MDA6MDAiLCAiMTA6MDA6MDAiLCAiMTE6MDA6MDAiLCAiMTI6MDA6MDAiLCAiMTM6MDA6MDAiLCAiMTQ6MDA6MDAiLCAiMTU6MDA6MDAiLCAiMTY6MDA6MDAiLCAiMTc6MDA6MDAiLCAiMTg6MDA6MDAiLCAiMTk6MDA6MDAiLCAiMjA6MDA6MDAiLCAiMjE6MDA6MDAiLCAiMjI6MDA6MDAiLCAiMjM6MDA6MDAiXTsKICB9Cn07CgpyZWdpc3RlclByb21pc2VXb3JrZXIoZnVuY3Rpb24gKG1lc3NhZ2UpIHsKICB2YXIgdHlwZSA9IG1lc3NhZ2UudHlwZSwKICAgIGRhdGEgPSBtZXNzYWdlLmRhdGE7CiAgaWYgKHR5cGUgPT09ICJtZXNzYWdlIikgewogICAgcmV0dXJuICJXb3JrZXIgcmVwbGllczogIi5jb25jYXQobmV3IERhdGUoKS50b0lTT1N0cmluZygpKTsKICB9CiAgc3dpdGNoICh0eXBlKSB7CiAgICBjYXNlICJnZXREYXlzIjoKICAgICAgcmV0dXJuIGdldERheXMoZGF0YS5kYXksIGRhdGEub3B0aW9ucyk7CiAgICBjYXNlICJnZXRIb3VycyI6CiAgICAgIHJldHVybiBnZXRIb3VycyhkYXRhLmhvdXJPcHRpb25zKTsKICAgIGNhc2UgImdldERheUNlbGxzIjoKICAgICAgcmV0dXJuIGdldERheUNlbGxzKGRhdGEuZGF5LCBkYXRhLmhvdXJPcHRpb25zLCBkYXRhLmhvdXJseVNlbGVjdGlvbik7CiAgICBjYXNlICJjb25zdHJ1Y3REYXlFdmVudHMiOgogICAgICByZXR1cm4gY29uc3RydWN0RGF5RXZlbnRzKGRhdGEuZGF5LCBkYXRhLmV2ZW50cyk7CiAgICBjYXNlICJjb25zdHJ1Y3ROZXdFdmVudCI6CiAgICAgIHJldHVybiBjb25zdHJ1Y3ROZXdFdmVudChkYXRhLmV2ZW50KTsKICB9Cn0pOwpmdW5jdGlvbiBnZXREYXlzKGRheVN0cmluZywgX3JlZikgewogIHZhciBoaWRlX2RhdGVzID0gX3JlZi5oaWRlX2RhdGVzLAogICAgaGlkZV9kYXlzID0gX3JlZi5oaWRlX2RheXMsCiAgICB2aWV3X3R5cGUgPSBfcmVmLnZpZXdfdHlwZTsKICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCIiLmNvbmNhdChkYXlTdHJpbmcsICJUMDA6MDA6MDAuMDAwWiIpKTsKICB2YXIgZGF5X29mX3dlZWsgPSBkYXRlLmdldFVUQ0RheSgpIC0gMTsKICB2YXIgZGF5cyA9IFtdOwogIGlmICh2aWV3X3R5cGUgPT09ICJkYXkiKSB7CiAgICBkYXlzID0gW3sKICAgICAgdmFsdWU6IGRhdGUudG9JU09TdHJpbmcoKSwKICAgICAgaW5kZXg6IDAKICAgIH1dOwogIH0gZWxzZSB7CiAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCA3OyBpZHgrKykgewogICAgICBkYXlzLnB1c2goewogICAgICAgIHZhbHVlOiBhZGREYXlzKGRhdGUsIGlkeCAtIGRheV9vZl93ZWVrKS50b0lTT1N0cmluZygpLAogICAgICAgIGluZGV4OiBpZHgKICAgICAgfSk7CiAgICB9CiAgfQogIGlmIChoaWRlX2RhdGVzICYmIGhpZGVfZGF0ZXMubGVuZ3RoID4gMCkgewogICAgZGF5cyA9IGRheXMuZmlsdGVyKGZ1bmN0aW9uIChfcmVmMikgewogICAgICB2YXIgdmFsdWUgPSBfcmVmMi52YWx1ZTsKICAgICAgcmV0dXJuIGhpZGVfZGF0ZXMuaW5kZXhPZih2YWx1ZS5zbGljZSgwLCAxMCkpIDwgMDsKICAgIH0pOwogIH0KICBpZiAoaGlkZV9kYXlzICYmIGhpZGVfZGF5cy5sZW5ndGggPiAwKSB7CiAgICBkYXlzID0gZGF5cy5maWx0ZXIoZnVuY3Rpb24gKF9yZWYzKSB7CiAgICAgIHZhciBpbmRleCA9IF9yZWYzLmluZGV4OwogICAgICByZXR1cm4gaGlkZV9kYXlzLmluZGV4T2YoaW5kZXgpIDwgMDsKICAgIH0pOwogIH0KICByZXR1cm4gZGF5czsKfQpmdW5jdGlvbiBnZXRIb3Vycyhob3VyX29wdGlvbnMpIHsKICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgZGF0ZS5zZXRVVENIb3VycygwLCAwLCAwLCAwKTsKICB2YXIgaXNvX2RhdGUgPSBnZXRZZWFyTW9udGhEYXkoZGF0ZSk7CiAgdmFyIGRheV9ob3VycyA9IGhvdXJVdGlscy5nZXRGdWxsSG91cnMoKTsKICBpZiAoaG91cl9vcHRpb25zKSB7CiAgICB2YXIgc3RhcnRfaG91ciA9IGhvdXJfb3B0aW9ucy5zdGFydF9ob3VyLAogICAgICBlbmRfaG91ciA9IGhvdXJfb3B0aW9ucy5lbmRfaG91cjsKICAgIGRheV9ob3VycyA9IGRheV9ob3Vycy5zbGljZShzdGFydF9ob3VyLCBlbmRfaG91cik7CiAgfQogIHZhciBob3VycyA9IFtdOwogIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGRheV9ob3Vycy5sZW5ndGg7IGlkeCsrKSB7CiAgICB2YXIgdmFsdWUgPSAiIi5jb25jYXQoaXNvX2RhdGUsICJUIikuY29uY2F0KGRheV9ob3Vyc1tpZHhdLCAiLjAwMFoiKTsKICAgIGhvdXJzLnB1c2goewogICAgICB2YWx1ZTogdmFsdWUsCiAgICAgIGluZGV4OiBpZHgsCiAgICAgIHZpc2libGU6IHRydWUKICAgIH0pOwogIH0KICByZXR1cm4gaG91cnM7Cn0KdmFyIGdldERheUNlbGxzID0gZnVuY3Rpb24gZ2V0RGF5Q2VsbHMoZGF5U3RyaW5nLCBkYXlfb3B0aW9ucywgaG91cmx5U2VsZWN0aW9uKSB7CiAgaWYgKG5ldyBEYXRlKGRheVN0cmluZykudG9JU09TdHJpbmcoKSAhPT0gZGF5U3RyaW5nKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoIlVuc3VwcG9ydGVkIGRheVN0cmluZyBwYXJhbWV0ZXIgcHJvdmlkZWQiKTsKICB9CiAgdmFyIGNlbGxzID0gW107CiAgdmFyIGRhdGVfcGFydCA9IGRheVN0cmluZy5zbGljZSgwLCAxMCk7CiAgdmFyIGFsbF9ob3VycyA9IGhvdXJseVNlbGVjdGlvbiA/IGhvdXJVdGlscy5nZXRGdWxsSG91cnMoKSA6IGhvdXJVdGlscy5nZXRBbGxIb3VycygpOwogIGlmIChkYXlfb3B0aW9ucykgewogICAgdmFyIHN0YXJ0X2hvdXIgPSBkYXlfb3B0aW9ucy5zdGFydF9ob3VyLAogICAgICBlbmRfaG91ciA9IGRheV9vcHRpb25zLmVuZF9ob3VyOwogICAgdmFyIHN0YXJ0X2luZGV4ID0gc3RhcnRfaG91ciAqIChob3VybHlTZWxlY3Rpb24gPyAxIDogNik7CiAgICB2YXIgZW5kX2luZGV4ID0gZW5kX2hvdXIgKiAoaG91cmx5U2VsZWN0aW9uID8gMSA6IDYpICsgMTsKICAgIGFsbF9ob3VycyA9IGFsbF9ob3Vycy5zbGljZShzdGFydF9pbmRleCwgZW5kX2luZGV4KTsKICB9CiAgZm9yICh2YXIgaG91cklkeCA9IDA7IGhvdXJJZHggPCBhbGxfaG91cnMubGVuZ3RoOyBob3VySWR4KyspIHsKICAgIHZhciBob3VyID0gYWxsX2hvdXJzW2hvdXJJZHhdOwogICAgdmFyIHZhbHVlID0gIiIuY29uY2F0KGRhdGVfcGFydCwgIlQiKS5jb25jYXQoaG91ciwgIi4wMDBaIik7CiAgICB2YXIgdGltZSA9ICIiLmNvbmNhdChkYXRlX3BhcnQsICIgIikuY29uY2F0KGhvdXIpOwogICAgY2VsbHMucHVzaCh7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgdGltZTogdGltZSwKICAgICAgaW5kZXg6IGhvdXJJZHgsCiAgICAgIHZpc2libGU6IHRydWUKICAgIH0pOwogIH0KICByZXR1cm4gY2VsbHM7Cn07CnZhciBjb25zdHJ1Y3REYXlFdmVudHMgPSBmdW5jdGlvbiBjb25zdHJ1Y3REYXlFdmVudHMoZGF5LCBleGlzdGluZ19ldmVudHMpIHsKICB2YXIgZXZlbnRzX2Zvcl90aGlzX2RheSA9IGV4aXN0aW5nX2V2ZW50cy5tYXAoZnVuY3Rpb24gKGV2ZW50KSB7CiAgICB2YXIgZnJvbSA9IGV2ZW50LmZyb20sCiAgICAgIHRvID0gZXZlbnQudG87CiAgICBmcm9tID0gZ2V0TG9jYWxlVGltZShmcm9tKTsKICAgIHRvID0gZ2V0TG9jYWxlVGltZSh0byk7CiAgICByZXR1cm4gX29iamVjdFNwcmVhZDIoX29iamVjdFNwcmVhZDIoe30sIGV2ZW50KSwge30sIHsKICAgICAgZnJvbTogZnJvbSwKICAgICAgdG86IHRvCiAgICB9KTsKICB9KS5maWx0ZXIoZnVuY3Rpb24gKF9yZWY0KSB7CiAgICB2YXIgZnJvbSA9IF9yZWY0LmZyb207CiAgICByZXR1cm4gZnJvbS5zbGljZSgwLCAxMCkgPT09IGRheS5zbGljZSgwLCAxMCk7CiAgfSk7CiAgaWYgKGV2ZW50c19mb3JfdGhpc19kYXkubGVuZ3RoID09PSAwKSByZXR1cm4ge307CiAgdmFyIGZpbHRlcmVkX2V2ZW50cyA9IHt9OwogIGV2ZW50c19mb3JfdGhpc19kYXkuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHsKICAgIHZhciBjb25zdHJ1Y3RlZEV2ZW50ID0gY29uc3RydWN0TmV3RXZlbnQoZXZlbnQpOwogICAgdmFyIGtleSA9IGNvbnN0cnVjdGVkRXZlbnQua2V5OwogICAgaWYgKGZpbHRlcmVkX2V2ZW50cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgIGZpbHRlcmVkX2V2ZW50c1trZXldLnB1c2goY29uc3RydWN0ZWRFdmVudCk7CiAgICB9IGVsc2UgewogICAgICBmaWx0ZXJlZF9ldmVudHNba2V5XSA9IFtjb25zdHJ1Y3RlZEV2ZW50XTsKICAgIH0KICB9KTsKICByZXR1cm4gZmlsdGVyZWRfZXZlbnRzOwp9Owp2YXIgY29uc3RydWN0TmV3RXZlbnQgPSBmdW5jdGlvbiBjb25zdHJ1Y3ROZXdFdmVudChldmVudCkgewogIHZhciBmcm9tID0gZXZlbnQuZnJvbSwKICAgIHRvID0gZXZlbnQudG87CiAgZnJvbSA9IG5ldyBEYXRlKGZyb20pOwogIHRvID0gbmV3IERhdGUodG8pOwogIGZyb20uc2V0VVRDU2Vjb25kcygwLCAwKTsKICB0by5zZXRVVENTZWNvbmRzKDAsIDApOwogIHZhciBmcm9tX3ZhbHVlID0gZnJvbS50b0lTT1N0cmluZygpOwogIHZhciBtYXNrZWRfZnJvbSA9IG5ldyBEYXRlKGZyb20uZ2V0VGltZSgpKTsKICB2YXIgbWFza2VkX3RvID0gbmV3IERhdGUodG8uZ2V0VGltZSgpKTsKICB2YXIgZnJvbURhdGEgPSB7CiAgICB2YWx1ZTogZnJvbV92YWx1ZSwKICAgIG1hc2tlZF92YWx1ZTogbWFza2VkX2Zyb20udG9JU09TdHJpbmcoKSwKICAgIHJvdW5kZWQ6IGZhbHNlLAogICAgcm91bmRfb2Zmc2V0OiBudWxsCiAgfTsKICB2YXIgdG9fdmFsdWUgPSB0by50b0lTT1N0cmluZygpOwogIHZhciB0b0RhdGEgPSB7CiAgICB2YWx1ZTogdG9fdmFsdWUsCiAgICBtYXNrZWRfdmFsdWU6IG1hc2tlZF90by50b0lTT1N0cmluZygpLAogICAgcm91bmRlZDogZmFsc2UsCiAgICByb3VuZF9vZmZzZXQ6IG51bGwKICB9OwogIHZhciBtdWx0aXBsZU9mMTAgPSBmdW5jdGlvbiBtdWx0aXBsZU9mMTAoZGF0ZVN0cikgewogICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVTdHIpLmdldE1pbnV0ZXMoKSAlIDEwOwogIH07CiAgaWYgKG11bHRpcGxlT2YxMChmcm9tRGF0YS52YWx1ZSkgIT09IDApIHsKICAgIGZyb21EYXRhLnJvdW5kZWQgPSB0cnVlOwogICAgZnJvbURhdGEucm91bmRfb2Zmc2V0ID0gbXVsdGlwbGVPZjEwKGZyb21EYXRhLnZhbHVlKTsKICAgIHZhciBtaW51dGVzID0gbmV3IERhdGUoZnJvbURhdGEudmFsdWUpLmdldE1pbnV0ZXMoKTsKICAgIHZhciBtYXNrZWRNaW51dGVzID0gTWF0aC5mbG9vcihtaW51dGVzIC8gMTApICogMTA7CiAgICBtYXNrZWRfZnJvbS5zZXRNaW51dGVzKG1hc2tlZE1pbnV0ZXMpOwogICAgZnJvbURhdGEubWFza2VkX3ZhbHVlID0gbWFza2VkX2Zyb20udG9JU09TdHJpbmcoKTsKICB9CiAgdmFyIGV2ZW50S2V5ID0gbWFza2VkX2Zyb20udG9JU09TdHJpbmcoKTsKCiAgLy8gMSBtaW51dGUgZXF1YWxzIDEgcGl4ZWwgaW4gb3VyIHZpZXcuIFRoYXQgbWVhbnMgd2UgbmVlZCB0byBmaW5kIHRoZSBsZW5ndGgKICAvLyBvZiB0aGUgZXZlbnQgYnkgZmluZGluZyBvdXQgdGhlIGRpZmZlcmVuY2UgaW4gbWludXRlcwogIHZhciBkaWZmSW5NcyA9IHRvIC0gZnJvbTsKICB2YXIgZGlmZkluSHJzID0gTWF0aC5mbG9vcihkaWZmSW5NcyAlIDg2NDAwMDAwIC8gMzYwMDAwMCk7CiAgdmFyIGRpZmZNaW5zID0gTWF0aC5yb3VuZChkaWZmSW5NcyAlIDg2NDAwMDAwICUgMzYwMDAwMCAvIDYwMDAwKTsKICB2YXIgY29uc3RydWN0ZWRFdmVudCA9IHsKICAgIHN0YXJ0OiBmcm9tRGF0YSwKICAgIGVuZDogdG9EYXRhLAogICAgZGF0YTogZXZlbnQuZGF0YSwKICAgIGlkOiBldmVudC5pZCB8fCBnZW5lcmF0ZVVVSUQoKSwKICAgIGRpc3RhbmNlOiBkaWZmTWlucyArIGRpZmZJbkhycyAqIDYwLAogICAgc3RhdHVzOiAiY29tcGxldGVkIiwKICAgIGtleTogZXZlbnRLZXkKICB9OwogIHJldHVybiBjb25zdHJ1Y3RlZEV2ZW50Owp9OwoK', null, false);\n/* eslint-enable */\n\n//}\nvar worker = new WorkerFactory();\nvar promiseWorker = PromiseWorker(worker);\nvar send = function send() {\n  var type = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"message\";\n  var data = arguments.length > 1 ? arguments[1] : undefined;\n  return promiseWorker.postMessage({\n    type: type,\n    data: data\n  });\n};\nvar myWorker = {\n  send: send\n};\n\nvar script = {\n  props: [\"events\", \"day\", \"passedTime\", \"device\", \"column_index\"],\n  created: function created() {\n    // get and render day cells\n    // and then render any event\n    // on top of them\n    this.renderDay();\n  },\n  components: {\n    MediansCalendarCell: function MediansCalendarCell() {\n      return import('./medians-calendar-cell-b67a808b.js');\n    },\n    MediansCalendarEvent: function MediansCalendarEvent() {\n      return import('./medians-calendar-event-785a1eb1.js');\n    },\n    MediansCalendarCellBg: function MediansCalendarCellBg() {\n      return import('./medians-calendar-cell-bg-96f57cde.js');\n    }\n  },\n  provide: function provide() {\n    // provide these methods to children components\n    // for easier access\n    return {\n      medians_calendarAddEvent: this.addEvent,\n      medians_calendarClearPopups: this.clearCreatingLeftovers\n    };\n  },\n  // inject medians_calendar options from parent component\n  inject: [\"medians_calendar_options\"],\n  mounted: function mounted() {\n    if (this.medians_calendar_options.scrollToNow && this.isToday) this.scrollView();\n    this.passed = this.passedTime;\n    setInterval(function () {\n      this.passed = this.passed + 3;\n    }, 60000);\n  },\n  computed: {\n    isWeekend: function isWeekend$1() {\n      return isWeekend(this.day.value);\n    },\n    isToday: function isToday$1() {\n      return isToday(this.day.value);\n    }\n  },\n  data: function data() {\n    return {\n      // this is the main object\n      // we use to make selections\n      // and control their flows\n      creator: {\n        creating: false,\n        starting_cell: null,\n        original_starting_cell: null,\n        current_cell: null,\n        ending_cell: null,\n        status: null\n      },\n      // temporary event is an object\n      // that holds values of creator\n      // when the popup is initiated\n      temporary_event: null,\n      // day cells and events are used for rendering purposes\n      day_cells: [],\n      day_events: null,\n      passed: 0\n    };\n  },\n  methods: {\n    dragStart: function dragStart(event) {\n      this.$emit('drap-start-event', event);\n    },\n    dragEnd: function dragEnd(cellData, device) {\n      var t = this;\n      t.$emit('update-event', device, cellData);\n    },\n    renderDay: function renderDay() {\n      var _this = this;\n      myWorker.send(\"getDayCells\", {\n        day: this.day.value,\n        hourOptions: {\n          start_hour: this.medians_calendar_options.day_starts_at,\n          end_hour: this.medians_calendar_options.day_ends_at\n        },\n        hourlySelection: this.medians_calendar_options.hourlySelection\n      }).then(function (reply) {\n        _this.day_cells = reply;\n        return _this.getDayEvents(_this.$parent.events);\n      });\n    },\n    checkEventValidity: function checkEventValidity(payload) {\n      var from = payload.from,\n        to = payload.to;\n      if (!from || !to) return \"No dates were provided in the payload\";\n      /*if (isoFrom !== from) {\n        return 'From date is not ISO format';\n      }\n      if (isoTo !== to) {\n        return 'To date is not ISO format';\n      }*/\n      return null;\n    },\n    getDayEvents: function getDayEvents(events) {\n      var clonedEvents = [];\n      if (this.$parent.events) {\n        this.medians_calendar_events = this.$parent.events;\n        for (var i = this.medians_calendar_events.length - 1; i >= 0; i--) {\n          if (this.medians_calendar_events[i] && this.device && this.device.id && this.device.id == this.medians_calendar_events[i].device.id) {\n            clonedEvents[i] = cloneObject(this.medians_calendar_events[i]);\n            clonedEvents[i].distance = getDistance(this.medians_calendar_events[i], this.medians_calendar_options.hourlySelection);\n          }\n        }\n      }\n      this.day_events = clonedEvents;\n      return clonedEvents;\n    },\n    clearCreatingLeftovers: function clearCreatingLeftovers() {\n      for (var key in this.day_events) {\n        var hasPending = this.day_events[key].some(function (event) {\n          return event ? event.status === \"active\" || event.status === \"creating\" : null;\n        });\n        if (hasPending) {\n          var completed = this.day_events[key].filter(function (event) {\n            return event.status === \"completed\";\n          });\n          this.$set(this.day_events, key, completed);\n          if (completed.length === 0) {\n            delete this.day_events[key];\n          }\n        }\n      }\n      this.resetEvents();\n    },\n    resetEvents: function resetEvents() {\n      if (!this.creator.creating && this.creator.status === null) return;\n      this.creator = {\n        creating: false,\n        starting_cell: null,\n        original_starting_cell: null,\n        current_cell: null,\n        ending_cell: null,\n        status: null,\n        temporary_id: null\n      };\n      this.temporary_event = null;\n    },\n    // this method is what we use\n    // to start the flow of selecting a new cell\n    // while the creator is enabled\n    updateCreator: function updateCreator(payload) {\n      this.creator = _objectSpread2(_objectSpread2({}, this.validateSelection(payload)), {}, {\n        status: \"creating\"\n      });\n      if (this.medians_calendar_options.overlap === false && Object.keys(this.day_events).length > 0) {\n        var fixedOverlap = this.overlapPolice(payload);\n        if (fixedOverlap) {\n          this.creator = this.validateSelection(fixedOverlap);\n          this.selectCell();\n          this.initiatePopup();\n          return;\n        }\n      }\n      this.selectCell();\n    },\n    // when the direction is reversed,\n    // the ending cell is actually the originally selected cell\n    validateSelection: function validateSelection(event) {\n      var original_starting_cell = event.original_starting_cell,\n        starting_cell = event.starting_cell,\n        current_cell = event.current_cell;\n      if (event.direction === \"reverse\" && original_starting_cell.index > current_cell.index) {\n        return _objectSpread2(_objectSpread2({}, event), {}, {\n          starting_cell: current_cell,\n          ending_cell: original_starting_cell\n        });\n      }\n      return event;\n    },\n    selectCell: function selectCell() {\n      // if (!this.creator.creating) return;\n      // let {\n      //     creating,\n      //     ending_cell,\n      //     current_cell,\n      //     starting_cell,\n      //     original_starting_cell\n      // } = this.creator;\n\n      // let real_ending_cell_index = ending_cell.index + 1;\n      // ending_cell = this.day_cells[real_ending_cell_index];\n\n      // const diffInMs =\n      //     new Date(ending_cell.value) - new Date(starting_cell.value);\n      // const diffInHrs = Math.floor((diffInMs % 86400000) / 3600000);\n      // const diffMins = Math.round(((diffInMs % 86400000) % 3600000) / 60000);\n      // let startDate = new Date(starting_cell.value);\n      // let endDate = new Date(ending_cell.value);\n\n      // let distance = diffMins + diffInHrs * (this.medians_calendar_options.hourlySelection ? 10 : 60);\n\n      // this.temporary_event = {\n      //     start: {\n      //         masked_value: startDate.toISOString(),\n      //         value: startDate.toISOString(),\n      //         rounded: false,\n      //         round_offset: null\n      //     },\n      //     end: {\n      //         masked_value: endDate.toISOString(),\n      //         value: endDate.toISOString(),\n      //         rounded: false,\n      //         round_offset: null\n      //     },\n      //     distance: distance,\n      //     status: \"creating\"\n      // };\n    },\n    initiatePopup: function initiatePopup() {\n      if (this.creating && this.creator.status !== \"creating\") return;\n      this.creator = _objectSpread2(_objectSpread2({}, this.creator), {}, {\n        status: \"active\",\n        creating: false\n      });\n      var _this$creator = this.creator,\n        ending_cell = _this$creator.ending_cell,\n        current_cell = _this$creator.current_cell,\n        starting_cell = _this$creator.starting_cell,\n        original_starting_cell = _this$creator.original_starting_cell;\n      if (ending_cell) {\n        var real_ending_cell_index = ending_cell.index + 1;\n        ending_cell = this.day_cells[real_ending_cell_index];\n        this.creator.device = this.device;\n        this.show_modal(this.creator);\n        var diffInMs = new Date(ending_cell.value) - new Date(starting_cell.value);\n        var diffInHrs = Math.floor(diffInMs % 86400000 / 3600000);\n        var diffMins = Math.round(diffInMs % 86400000 % 3600000 / 60000);\n        var startDate = new Date(starting_cell.value);\n        var endDate = new Date(ending_cell.value);\n        var finalEvent = {\n          start: {\n            masked_value: startDate.toISOString(),\n            value: startDate.toISOString(),\n            rounded: false,\n            round_offset: null\n          },\n          end: {\n            masked_value: endDate.toISOString(),\n            value: endDate.toISOString(),\n            rounded: false,\n            round_offset: null\n          },\n          distance: diffMins + diffInHrs * (this.medians_calendar_options.hourlySelection ? 10 : 60),\n          status: \"active\"\n        };\n        var updated_events = this.day_events[starting_cell.value];\n        if (!updated_events) updated_events = [];\n        updated_events.push(finalEvent);\n        this.$set(this.day_events, starting_cell.value, updated_events);\n        this.temporary_event = null;\n      }\n    },\n    overlapPolice: function overlapPolice(payload) {\n      var _this2 = this;\n      if (!payload.current_cell) return;\n      var overlapped = Object.keys(this.day_events).map(function (evKey) {\n        return _this2.day_events[evKey];\n      }).flat().filter(function (event) {\n        var cellStart = new Date(payload.starting_cell.value);\n        var cellEnd = new Date(payload.ending_cell.value);\n        var eventStarts = new Date(event.start.value);\n        var eventEnds = new Date(event.end.value);\n        return cellEnd > eventStarts && cellEnd < eventEnds || cellStart < eventStarts && cellEnd > eventStarts;\n      });\n      if (!overlapped || overlapped.length === 0) {\n        return;\n      }\n      var newPayload = payload;\n      if (payload.direction === \"reverse\") {\n        var needed_cell = overlapped[0].end;\n        var event_cell = this.day_cells.find(function (c) {\n          return c.value === needed_cell.masked_value;\n        });\n        var cell = this.day_cells[event_cell.index];\n        newPayload.starting_cell = {\n          value: cell.value,\n          index: cell.index\n        };\n        newPayload.current_cell = {\n          value: cell.value,\n          index: cell.index\n        };\n      } else {\n        var _needed_cell = overlapped[0].start;\n        var _event_cell = this.day_cells.find(function (c) {\n          return c.value === _needed_cell.masked_value;\n        });\n        var _cell = this.day_cells[_event_cell.index - 1];\n        newPayload.ending_cell = {\n          value: _cell.value,\n          index: _cell.index\n        };\n      }\n      return newPayload;\n    },\n    scrollView: function scrollView() {\n      var topoffset = this.passedTime;\n      setTimeout(function () {\n        var myElement = document.getElementById('now-indicator');\n        var topPos = myElement ? myElement.offsetTop : 10;\n        document.getElementById('day-wrapper').scrollTop = topPos;\n\n        // window.scroll({ top: topoffset, left: 0, behavior: \"smooth\" });\n      }, 1000);\n    },\n    show_modal: function show_modal() {\n      var item = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      this.$parent.show_modal(item);\n    },\n    log: function log(data) {\n      this.$parent.log(data);\n    }\n  }\n};\n\n/* script */\nvar __vue_script__ = script;\n\n/* template */\nvar __vue_render__ = function __vue_render__() {\n  var _vm = this;\n  var _h = _vm.$createElement;\n  var _c = _vm._self._c || _h;\n  return _c('div', {\n    ref: _vm.day.value + '-reference',\n    staticClass: \"medians-calendar-day\",\n    class: {\n      'is-weekend': _vm.isWeekend,\n      'is-today': _vm.isToday,\n      creating: _vm.creator.creating || _vm.creator.status === 'active'\n    },\n    staticStyle: {\n      \"position\": \"relative\"\n    },\n    attrs: {\n      \"id\": \"day-wrapper\"\n    }\n  }, [_vm.isToday ? _c('div', {\n    key: _vm.passed,\n    ref: \"nowIndicator\",\n    class: _vm.medians_calendar_options.style === 'material_design' ? 'hour-indicator-line' : 'hour-indicator-tooltip',\n    style: \"top:\" + _vm.passed + \"px\",\n    attrs: {\n      \"id\": \"now-indicator\"\n    }\n  }, [_c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: _vm.medians_calendar_options.style === 'material_design',\n      expression: \"medians_calendar_options.style === 'material_design'\"\n    }],\n    staticClass: \"line\"\n  })]) : _vm._e(), _vm._v(\" \"), _c('div', _vm._l(_vm.day_cells, function (cell, index) {\n    return _c('medians-calendar-cell-bg', {\n      key: \"cell-bg-\" + index,\n      attrs: {\n        \"creator\": _vm.creator,\n        \"cell-data\": cell,\n        \"index\": index,\n        \"device\": _vm.device,\n        \"temporary-event\": _vm.temporary_event\n      },\n      on: {\n        \"select\": _vm.updateCreator,\n        \"reset\": function reset($event) {\n          return _vm.resetEvents();\n        },\n        \"initiatePopup\": function initiatePopup($event) {\n          return _vm.initiatePopup();\n        },\n        \"dragEnd\": _vm.dragEnd\n      }\n    });\n  }), 1), _vm._v(\" \"), _vm._l(_vm.day_events, function (event, eventIndex) {\n    return _vm.day_events && _vm.day_events.length && event ? _c('MediansCalendarEvent', {\n      key: eventIndex + _vm.device.id,\n      attrs: {\n        \"event\": event,\n        \"total\": _vm.day_events.length,\n        \"index\": eventIndex,\n        \"column_index\": _vm.column_index\n      },\n      on: {\n        \"dragStart\": _vm.dragStart\n      }\n    }) : _vm._e();\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"w-full absolute top-0 left-0\",\n    staticStyle: {\n      \"z-index\": \"9999\"\n    }\n  })], 2);\n};\nvar __vue_staticRenderFns__ = [];\n\n/* style */\nvar __vue_inject_styles__ = function __vue_inject_styles__(inject) {\n  if (!inject) return;\n  inject(\"data-v-7588a4c9_0\", {\n    source: \"ul.medians-calendar-day{position:relative;background-color:#fff}ul.medians-calendar-day.is-weekend{background-color:var(--weekend-color)}ul.medians-calendar-day.is-today{background-color:var(--current-day-color)}ul.medians-calendar-day .clear{position:absolute;z-index:1;top:-20px;right:0;font-size:10px}ul.medians-calendar-day.creating{z-index:11}ul.medians-calendar-day.creating .created-event{pointer-events:none}\",\n    map: undefined,\n    media: undefined\n  });\n};\n/* scoped */\nvar __vue_scope_id__ = undefined;\n/* module identifier */\nvar __vue_module_identifier__ = undefined;\n/* functional template */\nvar __vue_is_functional_template__ = false;\n/* style inject SSR */\n\n/* style inject shadow dom */\n\nvar __vue_component__ = /*#__PURE__*/__vue_normalize__({\n  render: __vue_render__,\n  staticRenderFns: __vue_staticRenderFns__\n}, __vue_inject_styles__, __vue_script__, __vue_scope_id__, __vue_is_functional_template__, __vue_module_identifier__, false, __vue_create_injector__, undefined, undefined);\n\nvar script$1 = {\n  watch: {},\n  props: {\n    // this provided array will be kept in sync\n    devices: {\n      required: true,\n      type: Array,\n      validator: function validator(val) {\n        return Array.isArray(val) || _typeof(val) === 'object';\n      }\n    },\n    events: {\n      required: false,\n      type: Array,\n      validator: function validator(val) {\n        return Array.isArray(val) || _typeof(val) === 'object';\n      }\n    },\n    current_day: {\n      required: true,\n      type: String,\n      validator: function validator(d) {\n        return !isNaN(Date.parse(d));\n      }\n    }\n  },\n  components: {\n    MediansCalendarDays: __vue_component__\n  },\n  created: function created() {\n    var _this = this;\n    this.addHelperMethods();\n    setInterval(function () {\n      return _this.medians_calendar_options.now = new Date();\n    }, 1000 * 60);\n    this.constructWeek();\n  },\n  inject: [\"medians_calendar_options\"],\n  data: function data() {\n    return {\n      hours: null,\n      days: [],\n      dragEvent: {}\n    };\n  },\n  computed: {\n    hoursVisible: function hoursVisible() {\n      if (!this.hours) return [];\n      return this.hours.filter(function (x) {\n        return !!x.visible;\n      });\n    },\n    colsSpace: function colsSpace() {\n      return this.medians_calendar_options.style === \"flat_design\" ? \"5px\" : \"0px\";\n    },\n    hourHeight: function hourHeight() {\n      return (this.medians_calendar_options.hourlySelection ? 1 : 6) * this.medians_calendar_options.cell_height;\n      //this.medians_calendar_options.cell_height * (60 / this.medians_calendar_options.split_value);\n      // * this.medians_calendar_options.hour_parts;\n    },\n    passedTime: function passedTime() {\n      var time_obj = new Date();\n      return getTopDistance(time_obj) / 10 * this.medians_calendar_options.cell_height;\n    }\n  },\n  methods: {\n    draggedEvent: function draggedEvent(event) {\n      this.dragEvent = event;\n    },\n    updateEvent: function updateEvent(device, cellData) {\n      this.$emit('update-event', this.dragEvent, device, cellData);\n    },\n    _isToday: function _isToday(day) {\n      return isToday(day);\n    },\n    isDayBefore: function isDayBefore(day) {\n      var now = new Date(this.medians_calendar_options.now);\n      var formattedNow = getLocaleTime(now.toISOString());\n      return isBefore(day, getHourlessDate(formattedNow));\n    },\n    constructWeek: function constructWeek() {\n      var _this2 = this;\n      var date = this.current_day.slice(0, 10);\n      var _this$medians_calenda = this.medians_calendar_options,\n        hide_dates = _this$medians_calenda.hide_dates,\n        hide_days = _this$medians_calenda.hide_days,\n        view_type = _this$medians_calenda.view_type;\n      return Promise.all([myWorker.send(\"getDays\", {\n        day: date,\n        options: {\n          hide_dates: hide_dates,\n          hide_days: hide_days,\n          view_type: view_type\n        }\n      }).then(function (reply) {\n        _this2.days = reply; //.slice(0,1);\n      }), myWorker.send(\"getHours\", {\n        hourOptions: {\n          start_hour: this.medians_calendar_options.day_starts_at,\n          end_hour: this.medians_calendar_options.day_ends_at\n        }\n      }).then(function (reply) {\n        // Handle the reply\n        _this2.hours = reply;\n      })]);\n    },\n    addHelperMethods: function addHelperMethods() {\n      var _this3 = this;\n      this.$medians_calendar.buildWeek = function () {\n        _this3.constructWeek();\n      };\n      this.$medians_calendar.closePopups = function () {\n        var refs = _this3.days.map(function (day) {\n          return day.value.slice(0, 10);\n        });\n        refs.forEach(function (ref) {\n          _this3.$refs[ref] && _this3.$refs[ref][0] ? _this3.$refs[ref][0].clearCreatingLeftovers() : null;\n        });\n      };\n    },\n    show_modal: function show_modal() {\n      var item = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      this.$parent.show_modal(item);\n    },\n    log: function log(data) {\n      this.$parent.log(data);\n    }\n  }\n};\n\n/* script */\nvar __vue_script__$1 = script$1;\n\n/* template */\nvar __vue_render__$1 = function __vue_render__() {\n  var _vm = this;\n  var _h = _vm.$createElement;\n  var _c = _vm._self._c || _h;\n  return _c('div', {\n    staticClass: \"calendar-wrap\",\n    style: \"--space-between-cols: \" + _vm.colsSpace\n  }, [_vm.devices && _vm.days ? _c('div', {\n    staticClass: \"sticky-top\"\n  }, [_c('ul', {\n    staticClass: \"days\"\n  }, _vm._l(_vm.devices || [], function (device, index) {\n    return device ? _c('li', {\n      key: index,\n      staticClass: \"day-indicator\",\n      class: {\n        today: _vm._isToday(_vm.current_day),\n        'is-before': _vm.isDayBefore(_vm.current_day)\n      }\n    }, [device ? _c('div', {\n      staticClass: \"w-full\"\n    }, [_c('span', {\n      staticClass: \"letters-date\"\n    }, [_vm._v(_vm._s(device.title))]), _vm._v(\" \"), _c('span', {\n      staticClass: \"number-date w-4 h-4 text-sm\"\n    }, [_vm._v(_vm._s(device.id))])]) : _vm._e()]) : _vm._e();\n  }), 0), _vm._v(\" \"), _c('ul', {\n    staticClass: \"all-day\"\n  }, [_c('span', [_vm._v(\"All Day\")]), _vm._v(\" \"), _vm._l(_vm.devices || [], function (day, index) {\n    return _c('li', {\n      key: index,\n      class: {\n        'all-today': _vm._isToday(_vm.current_day),\n        'is-all-day': false\n      },\n      style: \"height:\" + (_vm.medians_calendar_options.cell_height + 5) + \"px\"\n    });\n  })], 2)]) : _vm._e(), _vm._v(\" \"),  _vm._e(), _vm._v(\" \"), _vm.hours ? _c('div', {\n    staticClass: \"blocks\"\n  }, [_c('div', {\n    staticClass: \"calendar-blocks\"\n  }, [_c('ul', {\n    staticClass: \"hours\"\n  }, _vm._l(_vm.hoursVisible, function (hour, index) {\n    return _c('li', {\n      key: index,\n      staticClass: \"w-full hour-row-identifier\",\n      style: \"height:\" + _vm.hourHeight + \"px\"\n    }, [_c('span', {\n      staticClass: \"w-full text-center\"\n    }, [_vm._v(_vm._s(_vm.medians_calendar_options.formatLeftHours(hour.value)))])]);\n  }), 0), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: _vm.medians_calendar_options.style !== 'material_design',\n      expression: \"medians_calendar_options.style !== 'material_design'\"\n    }],\n    staticClass: \"hour-indicator-line\",\n    style: \"top:\" + _vm.passedTime + \"px\"\n  }, [_c('span', {\n    staticClass: \"time-value\"\n  }, [_vm._v(_vm._s(_vm.passedTime))]), _vm._v(\" \"), _c('span', {\n    staticClass: \"line\"\n  })]), _vm._v(\" \"), _vm.days ? _c('div', {\n    staticClass: \"w-full flex\"\n  }, _vm._l(_vm.devices, function (device, index) {\n    return device ? _c('medians-calendar-days', {\n      key: \"day-\" + _vm.current_day + index,\n      ref: _vm.days[0].value.slice(0, 10) + '-day' + index,\n      refInFor: true,\n      staticClass: \"building-blocks\",\n      class: \"day-\" + (index + 1),\n      attrs: {\n        \"day\": _vm.days[0],\n        \"events\": _vm.events,\n        \"column_index\": index,\n        \"device\": device,\n        \"passed-time\": _vm.passedTime\n      },\n      on: {\n        \"update-event\": _vm.updateEvent,\n        \"drap-start-event\": _vm.draggedEvent\n      }\n    }) : _vm._e();\n  }), 1) : _vm._e()])]) : _vm._e()]);\n};\nvar __vue_staticRenderFns__$1 = [];\n\n/* style */\nvar __vue_inject_styles__$1 = function __vue_inject_styles__(inject) {\n  if (!inject) return;\n  inject(\"data-v-7e77c291_0\", {\n    source: \".calendar-wrap{display:flex;flex-direction:column}.calendar-wrap ul{list-style:none;padding:0}.calendar-wrap ul>li{display:flex}.sticky-top{position:sticky;top:0;z-index:999;background-color:#fff}.sticky-top .days{margin:0;display:flex;margin-left:55px}.sticky-top .days li{display:inline-flex;align-items:flex-end;padding-top:10px;flex:1;font-size:1.1rem;color:#666;font-weight:300;margin-right:var(--space-between-cols);border-bottom:solid 1px #e5e5e5;padding-bottom:5px;position:relative;font-size:18px}.sticky-top .days li span{margin-right:3px}.sticky-top .days li span:first-child{font-size:20px;font-weight:500}.sticky-top .days .today{border-bottom-color:var(--main-color);color:var(--main-color)!important}.sticky-top .days .today::after{content:\\\"\\\";position:absolute;height:2px;bottom:0;left:0;width:100%;background-color:var(--main-color)}.sticky-top .all-day{display:flex;margin-bottom:0;margin-top:0;border-bottom:solid 2px #e5e5e5}.sticky-top .all-day span{display:flex;align-items:center;padding:0 5px;width:55px;font-weight:500;font-size:.8rem;color:#b8bbca;text-transform:lowercase}.sticky-top .all-day li{flex:1;margin-right:var(--space-between-cols)}.sticky-top .all-day li.all-today{background-color:#fef4f4}.dummy-row{display:flex;padding-left:55px}.dummy-row ul{display:flex;flex:1;margin:0}.dummy-row li{flex:1;height:15px;margin-right:var(--space-between-cols);border-bottom:solid 1px #e5e5e5}.blocks{display:flex;position:relative;height:100%}.blocks ul{margin-top:0}.blocks .building-blocks{flex:1;margin-right:var(--space-between-cols);margin-bottom:0;display:flex;flex-direction:column}.blocks .calendar-blocks{width:100%;display:flex;position:relative}.hours{display:flex;flex-direction:column;color:#b8bbca;font-weight:500;font-size:.85rem;width:55px;height:100%;margin-bottom:0}.hours li{color:var(--hour-row-color);border-bottom:solid 1px transparent;padding-left:8px}.hours li span{margin-top:-8px}.hours li:first-child span{visibility:hidden}\",\n    map: undefined,\n    media: undefined\n  }), inject(\"data-v-7e77c291_1\", {\n    source: \".rtl .medians-calendar-wrapper.gstyle .sticky-top .days{padding-left:0;padding-right:55px}\",\n    map: undefined,\n    media: undefined\n  });\n};\n/* scoped */\nvar __vue_scope_id__$1 = undefined;\n/* module identifier */\nvar __vue_module_identifier__$1 = undefined;\n/* functional template */\nvar __vue_is_functional_template__$1 = false;\n/* style inject SSR */\n\n/* style inject shadow dom */\n\nvar __vue_component__$1 = /*#__PURE__*/__vue_normalize__({\n  render: __vue_render__$1,\n  staticRenderFns: __vue_staticRenderFns__$1\n}, __vue_inject_styles__$1, __vue_script__$1, __vue_scope_id__$1, __vue_is_functional_template__$1, __vue_module_identifier__$1, false, __vue_create_injector__, undefined, undefined);\n\nexport default __vue_component__$1;\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n"],"sourceRoot":""}