(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b6c2f"],{"1f15":function(e,t,a){"use strict";a.r(t);a("7f7f");var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-full"},[e.showLoader||!e.activeItem||e.activeItem.id?e._e():t("div",{staticClass:"relative w-full h-full pt-2"},[t("div",{staticClass:"pt-8 mt-12 relative mx-auto w-full bg-white p-6 rounded-lg overflow-y-auto",staticStyle:{"max-width":"600px","max-height":"500px"}},[t("div",{staticClass:"w-full block gap-4 py-2 border-b border-gray-200"},[t("label",{staticClass:"block w-full mt-10",domProps:{textContent:e._s(e.__("game"))}}),t("div",{staticClass:"w-full block gap-4 my-2 text-gray-600 overflow-x-auto"},[e.activeItem.device&&e.activeItem.device.games?t("div",{staticClass:"overflow-x-auto flex gap gap-6",style:{"min-width":35*e.activeItem.device.games.length+"%"}},e._l(e.activeItem.device.games,(function(a,s){return t("label",{key:s,staticClass:"block cursor-pointer py-2 w-40 my-2 rounded-lg text-center font-semibold",class:e.activeItem.game_id==a.id?"bg-purple-600 text-white":"border-purple-600 text-purple-800",attrs:{for:"single-"+a.id},on:{click:function(t){e.activeItem.game_id=a.id,e.updateInfo(e.activeItem)}}},[t("img",{staticClass:"mx-auto w-6 h-6 rounded-full my-2",attrs:{src:a.picture}}),t("span",{domProps:{textContent:e._s(a.name)}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.activeItem.game_id,expression:"activeItem.game_id"}],staticClass:"hidden",attrs:{id:"id-"+a.id,type:"radio",name:"game_id"},domProps:{value:a.id,checked:e._q(e.activeItem.game_id,a.id)},on:{change:[function(t){return e.$set(e.activeItem,"game_id",a.id)},function(t){return e.updateInfo(e.activeItem)}]}})])})),0):e._e()])]),t("div",{staticClass:"w-full flex gap-4 py-2 border-b border-gray-200"},[t("div",{staticClass:"w-full flex gap gap-6"},[t("label",{staticClass:"w-full",domProps:{textContent:e._s(e.__("Customer"))}}),t("small",{staticClass:"cursor-pointer px-2 font-semibold text-purple w-20",domProps:{textContent:e._s(e.__("New cusomter"))},on:{click:function(t){e.addNewCustomer=!0}}})]),t("div",{staticClass:"w-full relative"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.activeItem.customer.mobile,expression:"activeItem.customer.mobile"}],attrs:{type:"hidden"},domProps:{value:e.activeItem.customer.mobile},on:{input:function(t){t.target.composing||e.$set(e.activeItem.customer,"mobile",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.activeItem.customer_id,expression:"activeItem.customer_id"}],attrs:{type:"hidden"},domProps:{value:e.activeItem.customer_id},on:{input:function(t){t.target.composing||e.$set(e.activeItem,"customer_id",t.target.value)}}}),e.addNewCustomer?e._e():t("input",{directives:[{name:"model",rawName:"v-model",value:e.search_mobile,expression:"search_mobile"}],staticClass:"w-full rounded w-full border border-gray-200 px-4 py-2",attrs:{type:"text",placeholder:e.__("Mobile")},domProps:{value:e.search_mobile},on:{keyup:function(t){return e.findCustomer()},input:function(t){t.target.composing||(e.search_mobile=t.target.value)}}}),e.customers.length?t("div",{staticClass:"absolute top-0 left-0 mr-2 mt-2 text-lg cursor-pointer",staticStyle:{height:"20px",width:"20px"},on:{click:function(t){e.customers=!1}}},[e._v("x")]):e._e(),e.customers.length&&!e.addNewCustomer?t("div",{staticClass:"absolute top-0 left-0 w-full block bg-white p-4 border",staticStyle:{top:"30px"}},e._l(e.customers,(function(a){return t("span",{staticClass:"block w-full py-2 border-b-1 border-gray-200 my-2 cursor-pointer",on:{click:function(t){return e.setCustomer(a)}}},[t("span",{staticClass:"block w-full font-semibold",domProps:{textContent:e._s(a.name)}}),t("span",{staticClass:"block w-full",domProps:{textContent:e._s(a.mobile)}})])})),0):e._e(),e.addNewCustomer?t("div",{staticClass:"w-full block bg-white p-4 border flex text-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.newCustomer.name,expression:"newCustomer.name"}],staticClass:"mb-2 w-full rounded w-full border border-gray-200 px-4 py-2",attrs:{type:"text",placeholder:e.__("Name")},domProps:{value:e.newCustomer.name},on:{input:function(t){t.target.composing||e.$set(e.newCustomer,"name",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.newCustomer.mobile,expression:"newCustomer.mobile"}],staticClass:"mb-2 w-full rounded w-full border border-gray-200 px-4 py-2",attrs:{type:"text",placeholder:e.__("Mobile")},domProps:{value:e.newCustomer.mobile},on:{input:function(t){t.target.composing||e.$set(e.newCustomer,"mobile",t.target.value)}}}),t("div",{staticClass:"w-full flex"},[t("span",{staticClass:"block w-full my-2 cursor-pointer text-red-600 border-red-600 border rounded-lg py-2 px-4 hover:bg-purple-600 hover:text-white hover:border-purple-600",domProps:{textContent:e._s(e.__("Add"))},on:{click:function(t){return e.createCustomer(e.newCustomer)}}}),t("span",{staticClass:"block w-full my-2 cursor-pointer py-2",domProps:{textContent:e._s(e.__("cancel"))},on:{click:function(t){e.addNewCustomer=!1}}})])]):e._e()])]),t("div",{staticClass:"w-full flex gap-4 py-2 border-b border-gray-200"},[t("label",{staticClass:"w-full",domProps:{textContent:e._s(e.__("start"))}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.activeItem.start,expression:"activeItem.start"}],staticClass:"w-full",attrs:{type:"time"},domProps:{value:e.activeItem.start},on:{change:function(t){return e.updateInfo(e.activeItem)},input:function(t){t.target.composing||e.$set(e.activeItem,"start",t.target.value)}}})]),t("div",{staticClass:"w-full flex gap-4 py-2 border-b border-gray-200"},[t("label",{staticClass:"w-full",domProps:{textContent:e._s(e.__("end"))}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.activeItem.end,expression:"activeItem.end"}],staticClass:"w-full",attrs:{min:e.activeItem.start,type:"time"},domProps:{value:e.activeItem.end},on:{change:function(t){return e.updateInfo(e.activeItem)},input:function(t){t.target.composing||e.$set(e.activeItem,"end",t.target.value)}}})]),t("div",{staticClass:"w-full flex gap-4 py-2 border-b border-gray-200"},[t("label",{staticClass:"w-full",domProps:{textContent:e._s(e.__("date"))}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.modal.date,expression:"modal.date"}],staticClass:"w-full",attrs:{disabled:"",type:"date"},domProps:{value:e.modal.date},on:{input:function(t){t.target.composing||e.$set(e.modal,"date",t.target.value)}}})]),t("div",{staticClass:"w-full flex gap-6 my-2 text-gray-600"},[t("label",{staticClass:"cursor-pointer py-2 w-full mx-2 rounded-lg text-center font-semibold hover:bg-purple-600 hover:text-white",class:"single"==e.activeItem.booking_type?"bg-purple-600 text-white":"",attrs:{for:"single"},on:{click:function(t){e.activeItem.booking_type="single",e.updateInfo(e.activeItem)}}},[t("span",{domProps:{textContent:e._s(e.__("single"))}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.activeItem.booking_type,expression:"activeItem.booking_type"}],staticClass:"hidden",attrs:{id:"signle",value:"single",type:"radio",name:"booking_type"},domProps:{checked:e._q(e.activeItem.booking_type,"single")},on:{change:function(t){return e.$set(e.activeItem,"booking_type","single")}}})]),t("label",{staticClass:"cursor-pointer py-2 w-full mx-2 rounded-lg text-center font-semibold hover:bg-purple-600 hover:text-white",class:"multi"==e.activeItem.booking_type?"bg-purple-600 text-white":"",attrs:{for:"multi"},on:{click:function(t){e.activeItem.booking_type="multi",e.updateInfo(e.activeItem)}}},[t("span",{domProps:{textContent:e._s(e.__("multi"))}}),t("input",{directives:[{name:"model",rawName:"v-model",value:e.activeItem.booking_type,expression:"activeItem.booking_type"}],staticClass:"hidden",attrs:{id:"multi",value:"multi",type:"radio",name:"booking_type"},domProps:{checked:e._q(e.activeItem.booking_type,"multi")},on:{change:function(t){return e.$set(e.activeItem,"booking_type","multi")}}})])]),t("div",{staticClass:"w-full flex"},[t("div",{staticClass:"w-full text-center"},[e.activeItem.id?e._e():t("div",{staticClass:"mt-10 w-32 block mx-auto text-white font-semibold py-2 border-b border-gray-200"},[t("label",{staticClass:"text-center cursor-pointer px-4 py-2 rounded-lg bg-gradient-primary block hover:bg-purple-600 hover:text-white",domProps:{textContent:e._s(e.__("start_playing"))},on:{click:function(t){return e.submit("Event.create",e.activeItem,"active")}}})])]),t("div",{staticClass:"w-full text-center"},[e.activeItem.id?e._e():t("div",{staticClass:"mt-10 w-32 block mx-auto text-purple font-semibold py-2 border-b border-gray-200"},[t("label",{staticClass:"hover:bg-purple-600 hover:text-white text-center cursor-pointer px-4 py-2 rounded-lg block",domProps:{textContent:e._s(e.__("create_booking"))},on:{click:function(t){return e.submit("Event.create",e.activeItem,"new")}}})])])])])])])},o=[],i=(a("6b54"),a("96cf"),a("1da1")),r=a("bc3a").default,n={data:function(){return{showLoader:!1,addNewCustomer:!1,search_mobile:"",customers:[],newCustomer:{},activeItem:{customer:{}}}},props:["modal","games"],mounted:function(){this.modal&&(this.activeItem=this.modal,this.activeItem.customer={})},methods:{foucusOut:function(){this.activeItem.customer&&this.activeItem.customer.mobile?this.search_mobile=this.activeItem.customer.mobile+" - "+this.activeItem.customer.name:(this.search_mobile="",this.customers=[])},findCustomer:function(){var e=this;if(this.search_mobile){var t=new URLSearchParams([]);t.append("type","Customer"),t.append("search_text",this.search_mobile),this.handleRequest(t,"/api/search").then((function(t){e.customers=t.result}))}},createCustomer:function(e){var t=this;if(e&&e.name&&e.mobile){var a=new URLSearchParams([]);a.append("type","Customer.create"),a.append("params[customer]",JSON.stringify(e)),this.handleRequest(a,"/api/create").then((function(e){e.error&&t.$alert(e.result),e.success&&(t.setCustomer(e.result),t.addNewCustomer=!1,t.customers=[])}))}else this.$alert(this.__("NOT_VALID"))},setCustomer:function(e){this.activeItem.customer=e,this.activeItem.customer_id=e.id,this.customers=[],this.search_mobile=this.activeItem.customer.name+" - "+this.activeItem.customer.mobile},updateInfo:function(){this.showLoader=!0,this.showLoader=!1},submit:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"active",o=a||this.activeItem,i=o.id?"update":"create",r=new URLSearchParams([]);o.start_time=this.current_day+" "+o.start,o.end_time=this.current_day+" "+o.end,o.status=s,r.append("type",e),r.append("params[event]",JSON.stringify(o)),this.showLoader=!0,this.handleRequest(r,"/api/"+i).then((function(){t.showLoader=!1,t.$parent.reloadEvents(),t.$parent.hidePopup()}))},handleRequest:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:"/",this,e.next=4,r.post(a,t.toString()).then((function(e){return e.data.status?e.data.result:e.data}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),__:function(e){return this.$parent.__(e)},executeCommand:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}},l=n,c=a("2877"),u=Object(c["a"])(l,s,o,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d0b6c2f.chunk.js.map