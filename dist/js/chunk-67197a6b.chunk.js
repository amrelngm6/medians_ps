(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67197a6b"],{2473:function(t,e,n){"use strict";var i,o,r=n("755e"),a=Object(r["MapElementFactory"])({name:"directionsRenderer",ctr:function(){return window.google.maps.DirectionsRenderer},events:[],mappedProps:{},props:{origin:{type:Object},destination:{type:Object},travelMode:{type:String}},afterCreate:function(t){var e=this,n=new window.google.maps.DirectionsService;this.$watch((function(){return[e.origin,e.destination,e.travelMode]}),(function(){var i=e.origin,o=e.destination,r=e.travelMode;i&&o&&r&&n.route({origin:i,destination:o,travelMode:r},(function(e,n){"OK"===n&&t.setDirections(e)}))}))}}),s=a,c=n("2877"),l=Object(c["a"])(s,i,o,!1,null,null,null);e["a"]=l.exports},aa44:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"w-full overflow-auto",staticStyle:{height:"85vh","z-index":"9999"}},[e("GmapMap",{key:t.center,ref:"gmap",staticStyle:{width:"100%",height:"calc(100vh -  100px)"},attrs:{center:t.center,options:{zoomControl:!0,mapTypeControl:!0,scaleControl:!0,streetViewControl:!0,rotateControl:!0,fullscreenControl:!0},zoom:t.zoom}},t._l(t.waypoints,(function(n,i){return e("GmapMarker",{key:t.waypoints,attrs:{position:n.destination,clickable:!0,draggable:!1,icon:n.icon?n.icon:null},on:{click:function(e){return t.checkMarker(i)}}})})),1)],1)},o=[],r=(n("96cf"),n("1da1")),a=n("2473"),s={components:{DirectionsRenderer:a["a"]},name:"Vehicles",data:function(){return{modes:["DRIVING","WALKING"],activeMarkerIndex:0,reload:!0,render:!0,travelMode:"DRIVING",origin:{lat:0,lng:0},destination:{lat:0,lng:0},zoom:14,markers:[],center:{lat:0,lng:0},waypoints:[],polylineCoordinates:[],directionPoints:{},activeDestination:{}}},computed:{},props:["path","lang","setting","conf","auth","trip","showroute"],mounted:function(){var t=this;setTimeout((function(){t.onMapReady()}),1e3)},methods:{onMapReady:function(){var t=this;this.$refs.gmap.$mapObject;setInterval((function(){t.waypoints!=t.trip.locations&&t.trip.locations&&(t.center={lat:parseFloat(t.trip.vehicle.last_latitude),lng:parseFloat(t.trip.vehicle.last_longitude)},t.waypoints=t.trip.locations)}),2e3)},handleObject:function(t){return t.icon=this.conf?this.conf.url+"uploads/images/blue_pin.gif":"",t.origin=t.destination={lat:parseFloat(t.latitude),lng:parseFloat(t.longitude)},t.drag=!1,t},checkMarker:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.activeDestination=this.waypoints[e].destination,t.next=3,this.handlePositionToPlaceId(this.waypoints[e].destination.lat,this.waypoints[e].destination.lng);case 3:this.waypoints[e].address=t.sent,this.$emit("click-marker",this.waypoints[e],e),this.calculateAndDisplayRoute();case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),calculateAndDisplayRoute:function(){var t=this;if(window.google&&this.waypoints.length&&this.showroute){t.directionPoints={origin:t.waypoints[0].destination,destination:t.waypoints[1].destination};var e=t.directionPoints,n=e.origin,i=e.destination;t.directionsService.route({origin:new window.google.maps.LatLng(n.lat,n.lng),destination:this.activeDestination?this.activeDestination:new window.google.maps.LatLng(i.lat,i.lng),travelMode:"DRIVING"},(function(e,n){"OK"===n?t.directionsDisplay.setDirections(e):console.warn("Directions request failed due to "+n)}))}},handlePositionToPlaceId:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getPlaceIdFromPosition(e,n);case 3:return i=t.sent,console.log("Place ID:",i.formatted_address),t.abrupt("return",i.formatted_address);case 8:t.prev=8,t.t0=t["catch"](0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(e,n){return t.apply(this,arguments)}return e}(),getPlaceIdFromPosition:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,n){var i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=new google.maps.Geocoder,o={lat:parseFloat(e),lng:parseFloat(n)},t.abrupt("return",new Promise((function(t,e){i.geocode({location:o},(function(n,i){"OK"===i?n[0]?t(n[0]):e("No results found"):e("Geocoder failed due to: ".concat(i))}))})));case 3:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),__:function(t){return this.$root.$children[0].__(t)}}},c=s,l=n("2877"),u=Object(l["a"])(c,i,o,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-67197a6b.chunk.js.map