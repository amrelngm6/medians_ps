(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d69d516c"],{"7e1f":function(t,s,e){"use strict";e.r(s);e("7f7f");var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"block w-full overflow-x-auto"},[t.showCart&&t.Items&&t.Items.length?s("div",[t.showLoader?s("div"):t._e(),t.showLoader?t._e():s("div",{staticClass:"pt-8 fixed right-0 top-0 bg-white p-6 h-screen overflow-y-auto w-96 max-w-full",staticStyle:{"z-index":"9","max-height":"100vh"},attrs:{id:"side-cart-container"}},[s("div",{staticClass:"modal-body pt-2"},[s("div",{staticClass:"mx-auto w-full pt-8"},[s("div",{staticClass:"w-full flex gap gap-2"},[s("h1",{staticClass:"w-full font-semibold text-2xl border-b py-4",domProps:{textContent:t._s(t.__("order_summary"))}})]),t.Items?s("div",{staticClass:"w-full"},t._l(t.Items,(function(e,a){return s("div",{key:a,staticClass:"w-full block"},[e?s("div",{staticClass:"flex justify-between mt-10 mb-5"},[e.device?s("span",{staticClass:"font-semibold text-sm"},[s("span",{domProps:{textContent:t._s(e.device.name)}}),s("br"),e.game?s("span",{staticClass:"text-xs text-gray-400",domProps:{textContent:t._s(e.game.name)}}):t._e(),s("span",{staticClass:"text-xs text-red-400",domProps:{textContent:t._s(t.__("remove"))},on:{click:function(s){return t.removeFromCart(e)}}})]):t._e(),s("span",{staticClass:"font-semibold text-sm",staticStyle:{direction:"ltr"}},[s("span",{domProps:{textContent:t._s(e.subtotal)}}),t.setting?s("small",{staticClass:"text-xs",domProps:{textContent:t._s(t.setting.currency)}}):t._e(),s("br"),s("span",{staticClass:"text-xs text-gray-400",domProps:{textContent:t._s(e.duration_time)}})])]):t._e(),e&&e.products?s("div",t._l(e.products,(function(a,n){return s("div",{key:n,staticClass:"w-full block"},[a&&e&&e.products?s("div",{staticClass:"flex justify-between mt-10 mb-5"},[s("span",{staticClass:"font-semibold text-sm"},[s("span",{domProps:{textContent:t._s(a.product.name)}}),s("br"),a.qty?s("span",{staticClass:"text-xs text-gray-400",domProps:{textContent:t._s("X "+a.qty)}}):t._e()]),s("span",{staticClass:"font-semibold text-sm"},[s("span",{domProps:{textContent:t._s(a.price*a.qty)}}),t.setting?s("small",{staticClass:"text-xs",domProps:{textContent:t._s(t.setting.currency)}}):t._e()])]):t._e()])})),0):t._e()])})),0):t._e(),s("hr"),s("div",{staticClass:"w-full flex gap-1 mt-4"},[s("label",{staticClass:"font-medium inline-block w-full my-3 text-sm uppercase",domProps:{textContent:t._s(t.__("payment_method"))}}),s("select",{directives:[{name:"model",rawName:"v-model",value:t.payment_method,expression:"payment_method"}],staticClass:"block p-2 text-gray-600 w-full text-sm",on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.payment_method=s.target.multiple?e:e[0]}}},[s("option",{attrs:{value:"Cash"}},[t._v("Cash")])])]),s("div",{staticClass:"border-t mt-6 w-full"},[s("div",{staticClass:"flex font-semibold justify-between py-2 text-sm uppercase border-b"},[s("span",{staticClass:"w-full",domProps:{textContent:t._s(t.__("subtotal"))}}),s("span",{staticClass:"flex w-full text-right text-md gap gap-1"},[s("span",{domProps:{textContent:t._s(t.subtotal)}}),s("span",{domProps:{textContent:t._s(t.setting.currency)}})])]),s("div",{staticClass:"flex font-semibold justify-between py-2 text-sm uppercase border-b"},[s("span",{staticClass:"w-full",domProps:{textContent:t._s(t.__("tax"))}}),s("span",{staticClass:"flex w-full text-right text-md gap gap-1"},[s("span",{domProps:{textContent:t._s(t.tax)}}),s("span",{domProps:{textContent:t._s(t.setting.currency)}})])]),s("div",{staticClass:"flex font-semibold justify-between py-2 text-sm uppercase border-b"},[s("span",{staticClass:"w-full",domProps:{textContent:t._s(t.__("discount"))}}),s("span",{staticClass:"flex w-full text-right text-md gap gap-1 text-red-400"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.discount,expression:"discount"}],staticClass:"p-2 text-sm w-full",attrs:{type:"number",placeholder:t.__("discount_amount")},domProps:{value:t.discount},on:{keyup:function(s){return t.calc()},input:function(s){s.target.composing||(t.discount=s.target.value)}}}),s("span",{domProps:{textContent:t._s(t.setting.currency)}})])]),s("div",{staticClass:"flex font-semibold justify-between py-2 text-sm uppercase border-b"},[s("span",{staticClass:"w-full",domProps:{textContent:t._s(t.__("total_amount"))}}),s("span",{staticClass:"flex w-full text-right text-lg gap gap-1 text-red-400"},[s("span",{domProps:{textContent:t._s(t.total_cost)}}),s("span",{domProps:{textContent:t._s(t.setting.currency)}})])]),s("button",{staticClass:"bg-gradient-primary font-semibold hover:bg-purple-600 py-3 text-sm text-white uppercase w-32 mx-auto block rounded-lg my-6",domProps:{textContent:t._s(t.__("checkout"))},on:{click:t.checkout}})])])])])]):t._e()])},n=[],o=(e("6b54"),e("96cf"),e("1da1")),i=(e("c5f6"),e("bc3a").default),r={data:function(){return{payment_method:"Cash",id:0,activeItem:{},ItemsIds:[],Items:[],discount:0,subtotal:0,tax:0,total_cost:0,showLoader:!1,showCart:!0}},props:["setting","currency","cart_items"],watch:{Items:function(t){localStorage.cart=JSON.stringify(t)}},mounted:function(){this.Items=this.cart_items&&this.cart_items.length?this.cart_items:localStorage.cart?JSON.parse(localStorage.cart):[];var t=this.Items.map((function(t){return t.id}));this.ItemsIds=t.filter((function(s,e){return t.indexOf(s)===e})),console.log(this.Items),console.log(this.ItemsIds),this.calc()},methods:{calc:function(){return this.mapSubtotal().mapTax().mapTotal(),this},removeFromCart:function(t){if(!t||t&&!t.id)return null;this.ItemsIds=[],this.showLoader=!0;for(var s=this.Items.length-1;s>=0;s--)this.Items[s]&&this.Items[s].id==t.id?delete this.Items[s]:this.Items[s]&&this.ItemsIds.push(this.Items[s].id);this.calc(),localStorage.cart=JSON.stringify(this.Items),this.showLoader=!1},addToCart:function(t){this.checkDuplicate(t),this.calc()},checkDuplicate:function(t){return-1==this.ItemsIds.indexOf(t.id)&&(this.Items.push(t),this.ItemsIds.push(t.id)),this},mapTotal:function(){var t=Number(this.subtotal),s=Number(this.tax),e=this.discount?Number(this.discount):0;return this.total_cost=(t+s-e).toFixed(2),this},mapTax:function(){var t=Number(this.subtotal);return this.tax=this.setting.tax>0?(t*(Number(this.setting.tax)/100)).toFixed(2):0,this},mapSubtotal:function(){this.subtotal=0;for(var t=this.Items.length-1;t>=0;t--)this.subtotal+=this.Items[t]&&this.Items[t].subtotal?Number(this.Items[t].subtotal):0,this.subtotal+=this.Items[t]&&this.Items[t].products_subtotal?Number(this.Items[t].products_subtotal):0;return this},checkout:function(){var t=this;this.showLoader=!0;var s=new URLSearchParams([]);s.append("type","checkout"),s.append("params[cart]",JSON.stringify(this.Items)),s.append("params[total_cost]",JSON.stringify(this.total_cost)),s.append("params[subtotal]",JSON.stringify(this.subtotal)),s.append("params[tax]",JSON.stringify(this.tax)),s.append("params[discount]",JSON.stringify(this.discount)),s.append("params[payment_method]",this.payment_method),this.handleRequest(s,"/api/checkout").then((function(s){t.showLoader=!1,t.Items=[],t.$parent.reloadEvents(s),s&&s.result&&t.$alert(s.result)}))},handleRequest:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(s){var e,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=a.length>1&&void 0!==a[1]?a[1]:"/api",t.next=3,i.post(e,s.toString()).then((function(t){return t.data.status?t.data.result:t.data}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));function s(s){return t.apply(this,arguments)}return s}(),handleGetRequest:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(s){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this,t.next=3,i.get(s).then((function(t){return e.showLoader=!1,t.data.status?t.data.result:t.data}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));function s(s){return t.apply(this,arguments)}return s}(),__:function(t){return this.$root.$children[0].__(t)}}},l=r,c=(e("ddb6"),e("2877")),u=Object(c["a"])(l,a,n,!1,null,null,null);s["default"]=u.exports},8352:function(t,s,e){},ddb6:function(t,s,e){"use strict";e("8352")}}]);
//# sourceMappingURL=chunk-d69d516c.chunk.js.map