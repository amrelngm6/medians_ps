{% include 'views/front/' ~ template ~ '/includes/head.html.twig' %}
{% include 'views/front/' ~ template ~ '/includes/header.html.twig' %}


<div class="container mx-auto flex pt-6 pb-2">
    <div class="w-full">
        <h1 class="text-xl">{{page.lang_content.title}}</h1>
    </div>
    <div class="flex-end">
        <div class="flex w-full flex-nowrap">
            <span class="flex-none"><a href="/">{{lang.translate('Home')}}</a></span>
            <span class="flex-none">/</span>
            <span class="flex-none">{{page.lang_content.title}}</span>

        </div>
    </div>
</div>
<div class="container mx-auto bg-red-600 py-1 mb-2"></div>

    <div class="products-pg-style2 container mx-auto" x-data="{gridClass: 'grid-cols-4', page: {{app.params.page ?? 1}}}">

        <section class="tc-filter-wrapper-style2 page-padding">

            <form class="action ajax-form" action="{{app.CONF.url}}front_api" method="POST" id="filter-form">
                <input type="hidden" x-model="page" data-element="data-content" data-form="filter-form"  name="params[page]" value="{{app.params().page ?? 1 }}"  >
                <div class="container-fluid py-4">
                    <div class="filter-head">
                        <div class="row align-items-center ltr">
                            <div class="col-lg-2">
                                <div class="filter-toggle"> 
                                    <span class="icon"><i class="la la-sliders-h"></i></span> <span class="txt"> {{lang.translate('filter')}} </span> <span class="arrow"><i class="la la-angle-down"></i></span> 
                                </div>
                            </div>
                            <div class="col-lg-3 offset-lg-2">
                                <div class="tc-navbar-container-style3 w-96 mx-auto">
                                    <div class="search-nav-style3 bg-cyan2">
                                        <div class="col-lg-12">
                                            <div class="search-">
                                                <div class="input-group flex-nowrap gap-2">
                                                    <input data-element="data-content" data-form="filter-form" name="params[title]" required type="text" class="form-control rounded-full" value="{{app.params().title}}" placeholder="{{lang.translate('Search anything')}}...">
                                                    <a href="#" class="search-btn mt-2"> <i class="fa fa-search"></i> </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 offset-lg-2">
                                <div class="sort-wrapper">
                                    <strong> {{lang.translate('sort by')}}: </strong>
                                    <select name="" id="" class="form-select">
                                        <option value=""> {{lang.translate('New')}} </option>
                                        <option value=""> {{lang.translate('Best sales')}} </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="filter-body" style="display:block">
                        <div class="row">
                            <div class="col-lg-2">
                                <h6 class="select-title text-uppercase fw-600 mb-30"> {{lang.translate('Categories')}} </h6>
                                <div class="check-group">
                                    {% for category in categories %}
                                    <div class="form-check">
                                        <input data-element="data-content" data-form="filter-form" name="params[categories_ids][]" class="form-check-input" type="checkbox" value="{{category.category_id}}" id="category{{loop.index}}">
                                        <label class="form-check-label" for="category{{loop.index}}">
                                            {{category.name}}
                                        </label>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="col-lg-2 mt-5 mt-lg-0">
                                <h6 class="select-title text-uppercase fw-600 mb-30"> {{lang.translate('Brands')}} </h6>
                                <div class="check-group">
                                    {% for brand in brands %}
                                    <div class="form-check">
                                        <input data-element="data-content" data-form="filter-form" name="params[brands][]" class="form-check-input" type="checkbox" value="{{brand.brand_id}}" id="brand{{loop.index}}">
                                        <label class="form-check-label" for="brand{{loop.index}}">
                                            {{brand.brand.name}}
                                        </label>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="col-lg-2 mt-5 mt-lg-0">
                                <h6 class="select-title text-uppercase fw-600 mb-30"> {{lang.translate('Colors')}} </h6>
                                <div class="check-group">
                                    {% for color in colors %}
                                    <div class="form-check">
                                        <input data-element="data-content" data-form="filter-form" name="params[colors][]" class="form-check-input" style="margin-top: 7px" type="checkbox" value="{{color.value}}" id="color{{loop.index}}">
                                        <label class="px-2 pt-1 form-check-label" for="color{{loop.index}}">
                                            <div class="color-label ">
                                                <span class="py-2 px-6 rounded-lg  border " style="background-color: {{color.value}};"></span> 
                                            </div>
                                        </label>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="col-lg-2 mt-5 mt-lg-0">
                            
                                <h6 class="select-title text-uppercase fw-600 mb-30"> {{lang.translate('Sizes')}} </h6>
                                <div class="check-group">
                                    {% for size in sizes %}
                                    <div class="form-check">
                                        <input data-element="data-content" data-form="filter-form" name="params[sizes][]" class="form-check-input" type="checkbox" value="{{size.value}}" id="finish{{loop.index}}">
                                        <label class="form-check-label" for="finish{{loop.index}}">
                                            {{size.value}}
                                        </label>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            
                            <div class="col-lg-3 mt-5 mt-lg-0">
                                <h6 class="select-title text-uppercase fw-600 mb-30"> {{lang.translate('Prices')}} </h6>
                                <div class="price-card">
                                    <div class="slider">
                                        <div class="progress" style="left: 0%; right: 10%;"></div>
                                    </div>
                                    <div class="range-input">
                                        <input data-element="data-content" data-form="filter-form"  type="range" class="range-min" min="0" max="10000" value="0" step="100">
                                        <input data-element="data-content" data-form="filter-form" type="range" class="range-max" min="0" max="10000" value="9000" step="100">
                                    </div>
                                    <div class="row mt-20 align-items-center gx-0">
                                        <div class="col-9">
                                            <div class="price-input">
                                                <div class="field">
                                                    <span class="sympol">{{app.currency.symbol}}</span>
                                                    <input data-element="data-content" data-form="filter-form" name="params[prices][]" type="number" class="input-min" value="0">
                                                </div>
                                                <div class="separator"></div>
                                                <div class="field">
                                                    <span class="sympol">{{app.currency.symbol}}</span>
                                                    <input data-element="data-content" data-form="filter-form" name="params[prices][]" type="number" class="input-max" value="9000">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <input type="hidden" value="search_products" name="type" />
                <input data-element="data-content" data-form="filter-form" id="best_sort_filter_form" type="radio" value="best" checked name="params[sort_by]" class="hidden" />
                <input data-element="data-content" data-form="filter-form" id="new_sort_filter_form" type="radio" value="new" name="params[sort_by]" class="hidden" />
            </form>
        </section>
        <section class="tc-products-style2 page-padding pt-10 pb-80">
            <div class="container-fluid">
                <div class="products" id="data-content">
                    <img width="50%" class="mx-auto" src="/uploads/img/loader.gif" />
                </div>
            </div>
        </section>
    </div>


<script>
function submitFilters(append = null)
{
    jQuery('#data-content').html('<img width="50%" class="mx-auto" src="/uploads/img/loader.gif" />');
    setTimeout(function(){
        submitForm('filter-form', 'data-content', append);
    }, 100)
}

addEventListener("load", (event) => {
    submitFilters(null)
});
</script>

<!-- Footer -->
{% include 'views/front/' ~ template ~ '/includes/footer.html.twig' %}
{% include 'views/front/' ~ template ~ '/includes/footer_assets.html.twig' %}
</body></html>